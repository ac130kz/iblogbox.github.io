(function(b){b.color={};b.color.make=function(a,d,f,g){var k={};k.r=a||0;k.g=d||0;k.b=f||0;k.a=null!=g?g:1;k.add=function(b,a){for(var e=0;e<b.length;++e)k[b.charAt(e)]+=a;return k.normalize()};k.scale=function(b,a){for(var e=0;e<b.length;++e)k[b.charAt(e)]*=a;return k.normalize()};k.toString=function(){return 1<=k.a?"rgb("+[k.r,k.g,k.b].join()+")":"rgba("+[k.r,k.g,k.b,k.a].join()+")"};k.normalize=function(){function b(a,e,d){return e<a?a:e>d?d:e}k.r=b(0,parseInt(k.r),255);k.g=b(0,parseInt(k.g),255);
k.b=b(0,parseInt(k.b),255);k.a=b(0,k.a,1);return k};k.clone=function(){return b.color.make(k.r,k.b,k.g,k.a)};return k.normalize()};b.color.extract=function(a,d){var f;do{f=a.css(d).toLowerCase();if(""!=f&&"transparent"!=f)break;a=a.parent()}while(a.length&&!b.nodeName(a.get(0),"body"));"rgba(0, 0, 0, 0)"==f&&(f="transparent");return b.color.parse(f)};b.color.parse=function(e){var d,f=b.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return f(parseInt(d[1],
10),parseInt(d[2],10),parseInt(d[3],10));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return f(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return f(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]));if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return f(2.55*
parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]),parseFloat(d[4]));if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return f(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return f(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));e=b.trim(e).toLowerCase();if("transparent"==e)return f(255,255,255,0);d=a[e]||[0,0,0];return f(d[0],d[1],d[2])};var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(b){function a(a,e){var d=e.children("."+a)[0];if(null==d&&(d=document.createElement("canvas"),d.className=a,b(d).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(e),!d.getContext))if(window.G_vmlCanvasManager)d=window.G_vmlCanvasManager.initElement(d);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
d;d=this.context=d.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1);this.resize(e.width(),e.height());this.textContainer=null;this.text={};this._textCache={}}function e(e,d,k,l){function h(b,a){a=[ha].concat(a);for(var e=0;e<b.length;++e)b[e].apply(this,a)}function m(a){for(var e=[],d=0;d<a.length;++d){var f=b.extend(!0,{},G.series);null!=a[d].data?
(f.data=a[d].data,delete a[d].data,b.extend(!0,f,a[d]),a[d].data=f.data):f.data=a[d];e.push(f)}ea=e;d=ea.length;e=-1;for(a=0;a<ea.length;++a)f=ea[a].color,null!=f&&(d--,"number"==typeof f&&f>e&&(e=f));d<=e&&(d=e+1);var e=[],g=G.colors,h=g.length,k=0;for(a=0;a<d;a++)f=b.color.parse(g[a%h]||"#666"),0==a%h&&a&&(k=0<=k?.5>k?-k-.2:0:-k),e[a]=f.scale("rgb",1+k);for(a=d=0;a<ea.length;++a){f=ea[a];null==f.color?(f.color=e[d].toString(),++d):"number"==typeof f.color&&(f.color=e[f.color].toString());if(null==
f.lines.show){var l,g=!0;for(l in f)if(f[l]&&f[l].show){g=!1;break}g&&(f.lines.show=!0)}null==f.lines.zero&&(f.lines.zero=!!f.lines.fill);f.xaxis=q(ya,n(f,"x"));f.yaxis=q(Ca,n(f,"y"))}t()}function n(b,a){var e=b[a+"axis"];"object"==typeof e&&(e=e.n);"number"!=typeof e&&(e=1);return e}function p(){return b.grep(ya.concat(Ca),function(b){return b})}function r(b){var a={},e,d;for(e=0;e<ya.length;++e)(d=ya[e])&&d.used&&(a["x"+d.n]=d.c2p(b.left));for(e=0;e<Ca.length;++e)(d=Ca[e])&&d.used&&(a["y"+d.n]=
d.c2p(b.top));void 0!==a.x1&&(a.x=a.x1);void 0!==a.y1&&(a.y=a.y1);return a}function q(a,e){a[e-1]||(a[e-1]={n:e,direction:a==ya?"x":"y",options:b.extend(!0,{},a==ya?G.xaxis:G.yaxis)});return a[e-1]}function t(){function a(b,e,d){e<b.datamin&&e!=-f&&(b.datamin=e);d>b.datamax&&d!=f&&(b.datamax=d)}var e=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,f=Number.MAX_VALUE,g,k,l,m,n,q,t,r,v,w,y,E;b.each(p(),function(b,a){a.datamin=e;a.datamax=d;a.used=!1});for(g=0;g<ea.length;++g)n=ea[g],n.datapoints=
{points:[]},h(Aa.processRawData,[n,n.data,n.datapoints]);for(g=0;g<ea.length;++g){n=ea[g];y=n.data;E=n.datapoints.format;if(!E){E=[];E.push({x:!0,number:!0,required:!0});E.push({y:!0,number:!0,required:!0});if(n.bars.show||n.lines.show&&n.lines.fill)E.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(n.bars.show&&n.bars.zero||n.lines.show&&n.lines.zero)}),n.bars.horizontal&&(delete E[E.length-1].y,E[E.length-1].x=!0);n.datapoints.format=E}if(null==n.datapoints.pointsize){n.datapoints.pointsize=
E.length;t=n.datapoints.pointsize;q=n.datapoints.points;var z=n.lines.show&&n.lines.steps;n.xaxis.used=n.yaxis.used=!0;for(k=l=0;k<y.length;++k,l+=t){w=y[k];var D=null==w;if(!D)for(m=0;m<t;++m){r=w[m];if(v=E[m])v.number&&null!=r&&(r=+r,isNaN(r)?r=null:Infinity==r?r=f:-Infinity==r&&(r=-f)),null==r&&(v.required&&(D=!0),null!=v.defaultValue&&(r=v.defaultValue));q[l+m]=r}if(D)for(m=0;m<t;++m)r=q[l+m],null!=r&&(v=E[m],!1!==v.autoscale&&(v.x&&a(n.xaxis,r,r),v.y&&a(n.yaxis,r,r))),q[l+m]=null;else if(z&&
0<l&&null!=q[l-t]&&q[l-t]!=q[l]&&q[l-t+1]!=q[l+1]){for(m=0;m<t;++m)q[l+t+m]=q[l+m];q[l+1]=q[l-t+1];l+=t}}}}for(g=0;g<ea.length;++g)n=ea[g],h(Aa.processDatapoints,[n,n.datapoints]);for(g=0;g<ea.length;++g){n=ea[g];q=n.datapoints.points;t=n.datapoints.pointsize;E=n.datapoints.format;w=l=e;z=y=d;for(k=0;k<q.length;k+=t)if(null!=q[k])for(m=0;m<t;++m)r=q[k+m],(v=E[m])&&!1!==v.autoscale&&r!=f&&r!=-f&&(v.x&&(r<l&&(l=r),r>y&&(y=r)),v.y&&(r<w&&(w=r),r>z&&(z=r)));if(n.bars.show){switch(n.bars.align){case "left":k=
0;break;case "right":k=-n.bars.barWidth;break;default:k=-n.bars.barWidth/2}n.bars.horizontal?(w+=k,z+=k+n.bars.barWidth):(l+=k,y+=k+n.bars.barWidth)}a(n.xaxis,l,y);a(n.yaxis,w,z)}b.each(p(),function(b,a){a.datamin==e&&(a.datamin=null);a.datamax==d&&(a.datamax=null)})}function v(){bb&&clearTimeout(bb);Ha.unbind("mousemove",Ia);Ha.unbind("mouseleave",da);Ha.unbind("click",ma);h(Aa.shutdown,[Ha])}function y(b){function a(b){return b}var e,d,f=b.options.transform||a,g=b.options.inverseTransform;"x"==
b.direction?(e=b.scale=Ja/Math.abs(f(b.max)-f(b.min)),d=Math.min(f(b.max),f(b.min))):(e=b.scale=Da/Math.abs(f(b.max)-f(b.min)),e=-e,d=Math.max(f(b.max),f(b.min)));b.p2c=f==a?function(b){return(b-d)*e}:function(b){return(f(b)-d)*e};b.c2p=g?function(b){return g(d+b/e)}:function(b){return d+b/e}}function z(a){var e=a.labelWidth,d=a.labelHeight,f=a.options.position,g="x"===a.direction,h=a.options.tickLength,k=G.grid.axisMargin,l=G.grid.labelMargin,m=!0,p=!0,n=!0,q=!1;b.each(g?ya:Ca,function(b,e){e&&(e.show||
e.reserveSpace)&&(e===a?q=!0:e.options.position===f&&(q?p=!1:m=!1),q||(n=!1))});p&&(k=0);null==h&&(h=n?"full":5);isNaN(+h)||(l+=+h);g?(d+=l,"bottom"==f?(Q.bottom+=d+k,a.box={top:qa.height-Q.bottom,height:d}):(a.box={top:Q.top+k,height:d},Q.top+=d+k)):(e+=l,"left"==f?(a.box={left:Q.left+k,width:e},Q.left+=e+k):(Q.right+=e+k,a.box={left:qa.width-Q.right,width:e}));a.position=f;a.tickLength=h;a.box.padding=l;a.innermost=m}function D(){var a=G.grid.minBorderMargin,e;if(null==a)for(e=a=0;e<ea.length;++e)a=
Math.max(a,2*(ea[e].points.radius+ea[e].points.lineWidth/2));var d=a,f=a,g=a,h=a;b.each(p(),function(b,a){a.reserveSpace&&a.ticks&&a.ticks.length&&("x"===a.direction?(d=Math.max(d,a.labelWidth/2),f=Math.max(f,a.labelWidth/2)):(h=Math.max(h,a.labelHeight/2),g=Math.max(g,a.labelHeight/2)))});Q.left=Math.ceil(Math.max(d,Q.left));Q.right=Math.ceil(Math.max(f,Q.right));Q.top=Math.ceil(Math.max(g,Q.top));Q.bottom=Math.ceil(Math.max(h,Q.bottom))}function B(){var a,e=p(),d=G.grid.show;for(a in Q){var f=G.grid.margin||
0;Q[a]="number"==typeof f?f:f[a]||0}h(Aa.processOffset,[Q]);for(a in Q)Q[a]="object"==typeof G.grid.borderWidth?Q[a]+(d?G.grid.borderWidth[a]:0):Q[a]+(d?G.grid.borderWidth:0);b.each(e,function(a,b){var e=b.options;b.show=null==e.show?b.used:e.show;b.reserveSpace=null==e.reserveSpace?b.show:e.reserveSpace;var e=b.options,d=+(null!=e.min?e.min:b.datamin),f=+(null!=e.max?e.max:b.datamax),g=f-d;if(0==g){if(g=0==f?1:.01,null==e.min&&(d-=g),null==e.max||null!=e.min)f+=g}else{var h=e.autoscaleMargin;null!=
h&&(null==e.min&&(d-=g*h,0>d&&null!=b.datamin&&0<=b.datamin&&(d=0)),null==e.max&&(f+=g*h,0<f&&null!=b.datamax&&0>=b.datamax&&(f=0)))}b.min=d;b.max=f});if(d){f=b.grep(e,function(a){return a.show||a.reserveSpace});b.each(f,function(a,e){P(e);var d=e.options.ticks,f=[];null==d||"number"==typeof d&&0<d?f=e.tickGenerator(e):d&&(f=b.isFunction(d)?d(e):d);var g;e.ticks=[];for(d=0;d<f.length;++d){var h=null,k=f[d];"object"==typeof k?(g=+k[0],1<k.length&&(h=k[1])):g=+k;null==h&&(h=e.tickFormatter(g,e));isNaN(g)||
e.ticks.push({v:g,label:h})}f=e.ticks;e.options.autoscaleMargin&&0<f.length&&(null==e.options.min&&(e.min=Math.min(e.min,f[0].v)),null==e.options.max&&1<f.length&&(e.max=Math.max(e.max,f[f.length-1].v)));f=e.options;d=e.ticks||[];g=f.labelWidth||0;for(var h=f.labelHeight||0,k=g||("x"==e.direction?Math.floor(qa.width/(d.length||1)):null),l="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+(e.direction+"Axis "+e.direction+e.n+"Axis"),m=f.font||"flot-tick-label tickLabel",p=0;p<d.length;++p){var n=
d[p];n.label&&(n=qa.getTextInfo(l,n.label,m,null,k),g=Math.max(g,n.width),h=Math.max(h,n.height))}e.labelWidth=f.labelWidth||g;e.labelHeight=f.labelHeight||h});for(a=f.length-1;0<=a;--a)z(f[a]);D();b.each(f,function(a,b){"x"==b.direction?(b.box.left=Q.left-b.labelWidth/2,b.box.width=qa.width-Q.left-Q.right+b.labelWidth):(b.box.top=Q.top-b.labelHeight/2,b.box.height=qa.height-Q.bottom-Q.top+b.labelHeight)})}Ja=qa.width-Q.left-Q.right;Da=qa.height-Q.bottom-Q.top;b.each(e,function(b,a){y(a)});d&&E();
Ma()}function P(a){var e=a.options,d;d="number"==typeof e.ticks&&0<e.ticks?e.ticks:.3*Math.sqrt("x"==a.direction?qa.width:qa.height);d=(a.max-a.min)/d;var f=-Math.floor(Math.log(d)/Math.LN10),g=e.tickDecimals;null!=g&&f>g&&(f=g);var h=Math.pow(10,-f),k=d/h,l;1.5>k?l=1:3>k?(l=2,2.25<k&&(null==g||f+1<=g)&&(l=2.5,++f)):l=7.5>k?5:10;l*=h;null!=e.minTickSize&&l<e.minTickSize&&(l=e.minTickSize);a.delta=d;a.tickDecimals=Math.max(0,null!=g?g:f);a.tickSize=e.tickSize||l;if("time"==e.mode&&!a.tickGenerator)throw Error("Time mode requires the flot.time plugin.");
a.tickGenerator||(a.tickGenerator=function(a){var b=[],e;e=a.tickSize;e*=Math.floor(a.min/e);var d=0,f=Number.NaN,g;do g=f,f=e+d*a.tickSize,b.push(f),++d;while(f<a.max&&f!=g);return b},a.tickFormatter=function(a,b){var e=b.tickDecimals?Math.pow(10,b.tickDecimals):1,d=""+Math.round(a*e)/e;if(null!=b.tickDecimals){var f=d.indexOf("."),f=-1==f?0:d.length-f-1;if(f<b.tickDecimals)return(f?d:d+".")+(""+e).substr(1,b.tickDecimals-f)}return d});b.isFunction(e.tickFormatter)&&(a.tickFormatter=function(a,b){return""+
e.tickFormatter(a,b)});if(null!=e.alignTicksWithAxis){var m=("x"==a.direction?ya:Ca)[e.alignTicksWithAxis-1];m&&m.used&&m!=a&&(d=a.tickGenerator(a),0<d.length&&(null==e.min&&(a.min=Math.min(a.min,d[0])),null==e.max&&1<d.length&&(a.max=Math.max(a.max,d[d.length-1]))),a.tickGenerator=function(a){var b=[],e,d;for(d=0;d<m.ticks.length;++d)e=(m.ticks[d].v-m.min)/(m.max-m.min),e=a.min+e*(a.max-a.min),b.push(e);return b},a.mode||null!=e.tickDecimals||(d=Math.max(0,-Math.floor(Math.log(a.delta)/Math.LN10)+
1),f=a.tickGenerator(a),1<f.length&&/\..*0$/.test((f[1]-f[0]).toFixed(d))||(a.tickDecimals=d)))}}function F(){qa.clear();h(Aa.drawBackground,[M]);var a=G.grid;a.show&&a.backgroundColor&&(M.save(),M.translate(Q.left,Q.top),M.fillStyle=Cb(G.grid.backgroundColor,Da,0,"rgba(255, 255, 255, 0)"),M.fillRect(0,0,Ja,Da),M.restore());a.show&&!a.aboveData&&N();for(var b=0;b<ea.length;++b){h(Aa.drawSeries,[M,ea[b]]);var e=ea[b];e.lines.show&&w(e);e.bars.show&&X(e);e.points.show&&K(e)}h(Aa.draw,[M]);a.show&&a.aboveData&&
N();qa.render();Ea()}function J(a,b){for(var e,d,f,g,h=p(),k=0;k<h.length;++k)if(e=h[k],e.direction==b&&(g=b+e.n+"axis",a[g]||1!=e.n||(g=b+"axis"),a[g])){d=a[g].from;f=a[g].to;break}a[g]||(e="x"==b?ya[0]:Ca[0],d=a[b+"1"],f=a[b+"2"]);null!=d&&null!=f&&d>f&&(g=d,d=f,f=g);return{from:d,to:f,axis:e}}function N(){var a,e,d;M.save();M.translate(Q.left,Q.top);if(d=G.grid.markings)for(b.isFunction(d)&&(e=ha.getAxes(),e.xmin=e.xaxis.min,e.xmax=e.xaxis.max,e.ymin=e.yaxis.min,e.ymax=e.yaxis.max,d=d(e)),a=0;a<
d.length;++a){e=d[a];var f=J(e,"x"),g=J(e,"y");null==f.from&&(f.from=f.axis.min);null==f.to&&(f.to=f.axis.max);null==g.from&&(g.from=g.axis.min);null==g.to&&(g.to=g.axis.max);if(!(f.to<f.axis.min||f.from>f.axis.max||g.to<g.axis.min||g.from>g.axis.max)){f.from=Math.max(f.from,f.axis.min);f.to=Math.min(f.to,f.axis.max);g.from=Math.max(g.from,g.axis.min);g.to=Math.min(g.to,g.axis.max);var h=f.from===f.to,k=g.from===g.to;if(!h||!k)if(f.from=Math.floor(f.axis.p2c(f.from)),f.to=Math.floor(f.axis.p2c(f.to)),
g.from=Math.floor(g.axis.p2c(g.from)),g.to=Math.floor(g.axis.p2c(g.to)),h||k){var k=e.lineWidth||G.grid.markingsLineWidth,l=k%2?.5:0;M.beginPath();M.strokeStyle=e.color||G.grid.markingsColor;M.lineWidth=k;h?(M.moveTo(f.to+l,g.from),M.lineTo(f.to+l,g.to)):(M.moveTo(f.from,g.to+l),M.lineTo(f.to,g.to+l));M.stroke()}else M.fillStyle=e.color||G.grid.markingsColor,M.fillRect(f.from,g.to,f.to-f.from,g.from-g.to)}}e=p();d=G.grid.borderWidth;for(f=0;f<e.length;++f){g=e[f];a=g.box;var h=g.tickLength,m,n;if(g.show&&
0!=g.ticks.length){M.lineWidth=1;"x"==g.direction?(k=0,l="full"==h?"top"==g.position?0:Da:a.top-Q.top+("top"==g.position?a.height:0)):(l=0,k="full"==h?"left"==g.position?0:Ja:a.left-Q.left+("left"==g.position?a.width:0));g.innermost||(M.strokeStyle=g.options.color,M.beginPath(),m=n=0,"x"==g.direction?m=Ja+1:n=Da+1,1==M.lineWidth&&("x"==g.direction?l=Math.floor(l)+.5:k=Math.floor(k)+.5),M.moveTo(k,l),M.lineTo(k+m,l+n),M.stroke());M.strokeStyle=g.options.tickColor;M.beginPath();for(a=0;a<g.ticks.length;++a){var q=
g.ticks[a].v;m=n=0;isNaN(q)||q<g.min||q>g.max||"full"==h&&("object"==typeof d&&0<d[g.position]||0<d)&&(q==g.min||q==g.max)||("x"==g.direction?(k=g.p2c(q),n="full"==h?-Da:h,"top"==g.position&&(n=-n)):(l=g.p2c(q),m="full"==h?-Ja:h,"left"==g.position&&(m=-m)),1==M.lineWidth&&("x"==g.direction?k=Math.floor(k)+.5:l=Math.floor(l)+.5),M.moveTo(k,l),M.lineTo(k+m,l+n))}M.stroke()}}d&&(a=G.grid.borderColor,"object"==typeof d||"object"==typeof a?("object"!==typeof d&&(d={top:d,right:d,bottom:d,left:d}),"object"!==
typeof a&&(a={top:a,right:a,bottom:a,left:a}),0<d.top&&(M.strokeStyle=a.top,M.lineWidth=d.top,M.beginPath(),M.moveTo(0-d.left,0-d.top/2),M.lineTo(Ja,0-d.top/2),M.stroke()),0<d.right&&(M.strokeStyle=a.right,M.lineWidth=d.right,M.beginPath(),M.moveTo(Ja+d.right/2,0-d.top),M.lineTo(Ja+d.right/2,Da),M.stroke()),0<d.bottom&&(M.strokeStyle=a.bottom,M.lineWidth=d.bottom,M.beginPath(),M.moveTo(Ja+d.right,Da+d.bottom/2),M.lineTo(0,Da+d.bottom/2),M.stroke()),0<d.left&&(M.strokeStyle=a.left,M.lineWidth=d.left,
M.beginPath(),M.moveTo(0-d.left/2,Da+d.bottom),M.lineTo(0-d.left/2,0),M.stroke())):(M.lineWidth=d,M.strokeStyle=G.grid.borderColor,M.strokeRect(-d/2,-d/2,Ja+d,Da+d)));M.restore()}function E(){b.each(p(),function(a,b){var e=b.box,d="flot-"+b.direction+"-axis flot-"+b.direction+b.n+"-axis "+(b.direction+"Axis "+b.direction+b.n+"Axis"),f=b.options.font||"flot-tick-label tickLabel",g,h,k,l,m;qa.removeText(d);if(b.show&&0!=b.ticks.length)for(var p=0;p<b.ticks.length;++p)g=b.ticks[p],!g.label||g.v<b.min||
g.v>b.max||("x"==b.direction?(l="center",h=Q.left+b.p2c(g.v),"bottom"==b.position?k=e.top+e.padding:(k=e.top+e.height-e.padding,m="bottom")):(m="middle",k=Q.top+b.p2c(g.v),"left"==b.position?(h=e.left+e.width-e.padding,l="right"):h=e.left+e.padding),qa.addText(d,h,k,g.label,f,null,null,l,m))})}function w(a){function b(a,e,d,f,g){var h=a.points;a=a.pointsize;var k=null,l=null;M.beginPath();for(var m=a;m<h.length;m+=a){var p=h[m-a],n=h[m-a+1],q=h[m],r=h[m+1];if(null!=p&&null!=q){if(n<=r&&n<g.min){if(r<
g.min)continue;p=(g.min-n)/(r-n)*(q-p)+p;n=g.min}else if(r<=n&&r<g.min){if(n<g.min)continue;q=(g.min-n)/(r-n)*(q-p)+p;r=g.min}if(n>=r&&n>g.max){if(r>g.max)continue;p=(g.max-n)/(r-n)*(q-p)+p;n=g.max}else if(r>=n&&r>g.max){if(n>g.max)continue;q=(g.max-n)/(r-n)*(q-p)+p;r=g.max}if(p<=q&&p<f.min){if(q<f.min)continue;n=(f.min-p)/(q-p)*(r-n)+n;p=f.min}else if(q<=p&&q<f.min){if(p<f.min)continue;r=(f.min-p)/(q-p)*(r-n)+n;q=f.min}if(p>=q&&p>f.max){if(q>f.max)continue;n=(f.max-p)/(q-p)*(r-n)+n;p=f.max}else if(q>=
p&&q>f.max){if(p>f.max)continue;r=(f.max-p)/(q-p)*(r-n)+n;q=f.max}p==k&&n==l||M.moveTo(f.p2c(p)+e,g.p2c(n)+d);k=q;l=r;M.lineTo(f.p2c(q)+e,g.p2c(r)+d)}}M.stroke()}function e(a,b,d){var f=a.points;a=a.pointsize;for(var g=Math.min(Math.max(0,d.min),d.max),h=0,k=!1,l=1,m=0,p=0;!(0<a&&h>f.length+a);){var h=h+a,n=f[h-a],q=f[h-a+l],r=f[h],t=f[h+l];if(k){if(0<a&&null!=n&&null==r){p=h;a=-a;l=2;continue}if(0>a&&h==m+a){M.fill();k=!1;a=-a;l=1;h=m=p+a;continue}}if(null!=n&&null!=r){if(n<=r&&n<b.min){if(r<b.min)continue;
q=(b.min-n)/(r-n)*(t-q)+q;n=b.min}else if(r<=n&&r<b.min){if(n<b.min)continue;t=(b.min-n)/(r-n)*(t-q)+q;r=b.min}if(n>=r&&n>b.max){if(r>b.max)continue;q=(b.max-n)/(r-n)*(t-q)+q;n=b.max}else if(r>=n&&r>b.max){if(n>b.max)continue;t=(b.max-n)/(r-n)*(t-q)+q;r=b.max}k||(M.beginPath(),M.moveTo(b.p2c(n),d.p2c(g)),k=!0);if(q>=d.max&&t>=d.max)M.lineTo(b.p2c(n),d.p2c(d.max)),M.lineTo(b.p2c(r),d.p2c(d.max));else if(q<=d.min&&t<=d.min)M.lineTo(b.p2c(n),d.p2c(d.min)),M.lineTo(b.p2c(r),d.p2c(d.min));else{var v=n,
w=r;q<=t&&q<d.min&&t>=d.min?(n=(d.min-q)/(t-q)*(r-n)+n,q=d.min):t<=q&&t<d.min&&q>=d.min&&(r=(d.min-q)/(t-q)*(r-n)+n,t=d.min);q>=t&&q>d.max&&t<=d.max?(n=(d.max-q)/(t-q)*(r-n)+n,q=d.max):t>=q&&t>d.max&&q<=d.max&&(r=(d.max-q)/(t-q)*(r-n)+n,t=d.max);n!=v&&M.lineTo(b.p2c(v),d.p2c(q));M.lineTo(b.p2c(n),d.p2c(q));M.lineTo(b.p2c(r),d.p2c(t));r!=w&&(M.lineTo(b.p2c(r),d.p2c(t)),M.lineTo(b.p2c(w),d.p2c(t)))}}}}M.save();M.translate(Q.left,Q.top);M.lineJoin="round";var d=a.lines.lineWidth,f=a.shadowSize;if(0<
d&&0<f){M.lineWidth=f;M.strokeStyle="rgba(0,0,0,0.1)";var g=Math.PI/18;b(a.datapoints,Math.sin(g)*(d/2+f/2),Math.cos(g)*(d/2+f/2),a.xaxis,a.yaxis);M.lineWidth=f/2;b(a.datapoints,Math.sin(g)*(d/2+f/4),Math.cos(g)*(d/2+f/4),a.xaxis,a.yaxis)}M.lineWidth=d;M.strokeStyle=a.color;if(f=ka(a.lines,a.color,0,Da))M.fillStyle=f,e(a.datapoints,a.xaxis,a.yaxis);0<d&&b(a.datapoints,0,0,a.xaxis,a.yaxis);M.restore()}function K(a){function b(a,e,d,f,g,h,k,l){var m=a.points;a=a.pointsize;for(var n=0;n<m.length;n+=
a){var p=m[n],q=m[n+1];null==p||p<h.min||p>h.max||q<k.min||q>k.max||(M.beginPath(),p=h.p2c(p),q=k.p2c(q)+f,"circle"==l?M.arc(p,q,e,0,g?Math.PI:2*Math.PI,!1):l(M,p,q,e,g),M.closePath(),d&&(M.fillStyle=d,M.fill()),M.stroke())}}M.save();M.translate(Q.left,Q.top);var e=a.points.lineWidth,d=a.shadowSize,f=a.points.radius,g=a.points.symbol;0==e&&(e=1E-4);0<e&&0<d&&(d/=2,M.lineWidth=d,M.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,f,null,d+d/2,!0,a.xaxis,a.yaxis,g),M.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,
f,null,d/2,!0,a.xaxis,a.yaxis,g));M.lineWidth=e;M.strokeStyle=a.color;b(a.datapoints,f,ka(a.points,a.color),0,!1,a.xaxis,a.yaxis,g);M.restore()}function Z(a,b,e,d,f,g,h,k,l,m,n){var p,q,r,t;m?(t=q=r=!0,p=!1,m=e,e=b+d,f=b+f,a<m&&(b=a,a=m,m=b,p=!0,q=!1)):(p=q=r=!0,t=!1,m=a+d,a+=f,f=e,e=b,e<f&&(b=e,e=f,f=b,t=!0,r=!1));a<h.min||m>h.max||e<k.min||f>k.max||(m<h.min&&(m=h.min,p=!1),a>h.max&&(a=h.max,q=!1),f<k.min&&(f=k.min,t=!1),e>k.max&&(e=k.max,r=!1),m=h.p2c(m),f=k.p2c(f),a=h.p2c(a),e=k.p2c(e),g&&(l.fillStyle=
g(f,e),l.fillRect(m,e,a-m,f-e)),0<n&&(p||q||r||t)&&(l.beginPath(),l.moveTo(m,f),p?l.lineTo(m,e):l.moveTo(m,e),r?l.lineTo(a,e):l.moveTo(a,e),q?l.lineTo(a,f):l.moveTo(a,f),t?l.lineTo(m,f):l.moveTo(m,f),l.stroke()))}function X(a){M.save();M.translate(Q.left,Q.top);M.lineWidth=a.bars.lineWidth;M.strokeStyle=a.color;var b;switch(a.bars.align){case "left":b=0;break;case "right":b=-a.bars.barWidth;break;default:b=-a.bars.barWidth/2}(function(b,e,d,f,g,h){var k=b.points;b=b.pointsize;for(var l=0;l<k.length;l+=
b)null!=k[l]&&Z(k[l],k[l+1],k[l+2],e,d,f,g,h,M,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,b,b+a.bars.barWidth,a.bars.fill?function(b,e){return ka(a.bars,a.color,b,e)}:null,a.xaxis,a.yaxis);M.restore()}function ka(a,e,d,f){var g=a.fill;if(!g)return null;if(a.fillColor)return Cb(a.fillColor,d,f,e);a=b.color.parse(e);a.a="number"==typeof g?g:.4;a.normalize();return a.toString()}function Ma(){null!=G.legend.container?b(G.legend.container).html(""):e.find(".legend").remove();if(G.legend.show){for(var a=
[],d=[],g=!1,h=G.legend.labelFormatter,k,l,m=0;m<ea.length;++m)k=ea[m],k.label&&(l=h?h(k.label,k):k.label)&&d.push({label:l,color:k.color});if(G.legend.sorted)if(b.isFunction(G.legend.sorted))d.sort(G.legend.sorted);else if("reverse"==G.legend.sorted)d.reverse();else{var n="descending"!=G.legend.sorted;d.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=n?1:-1})}for(m=0;m<d.length;++m)h=d[m],0==m%G.legend.noColumns&&(g&&a.push("</tr>"),a.push("<tr>"),g=!0),a.push('<td class="legendColorBox"><div style="border:1px solid '+
G.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+h.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+h.label+"</td>");g&&a.push("</tr>");0!=a.length&&(d='<table style="font-size:smaller;color:'+G.grid.color+'">'+a.join("")+"</table>",null!=G.legend.container?b(G.legend.container).html(d):(a="",g=G.legend.position,m=G.legend.margin,null==m[0]&&(m=[m,m]),"n"==g.charAt(0)?a+="top:"+(m[1]+Q.top)+"px;":"s"==g.charAt(0)&&(a+="bottom:"+(m[1]+
Q.bottom)+"px;"),"e"==g.charAt(1)?a+="right:"+(m[0]+Q.right)+"px;":"w"==g.charAt(1)&&(a+="left:"+(m[0]+Q.left)+"px;"),d=b('<div class="legend">'+d.replace('style="','style="position:absolute;'+a+";")+"</div>").appendTo(e),0!=G.legend.backgroundOpacity&&(g=G.legend.backgroundColor,null==g&&(g=(g=G.grid.backgroundColor)&&"string"==typeof g?b.color.parse(g):b.color.extract(d,"background-color"),g.a=1,g=g.toString()),m=d.children(),b('<div style="position:absolute;width:'+m.width()+"px;height:"+m.height()+
"px;"+a+"background-color:"+g+';"> </div>').prependTo(d).css("opacity",G.legend.backgroundOpacity))))}}function Ia(a){G.grid.hoverable&&va("plothover",a,function(a){return 0!=a.hoverable})}function da(a){G.grid.hoverable&&va("plothover",a,function(a){return!1})}function ma(a){va("plotclick",a,function(a){return 0!=a.clickable})}function va(a,b,d){var g=Ha.offset(),h=b.pageX-g.left-Q.left,k=b.pageY-g.top-Q.top,l=r({left:h,top:k});l.pageX=b.pageX;l.pageY=b.pageY;b=G.grid.mouseActiveRadius;var m=b*b+
1,n=null,p,q,t;for(p=ea.length-1;0<=p;--p)if(d(ea[p])){var v=ea[p],w=v.xaxis,E=v.yaxis,y=v.datapoints.points,z=w.c2p(h),D=E.c2p(k),B=b/w.scale,K=b/E.scale;t=v.datapoints.pointsize;w.options.inverseTransform&&(B=Number.MAX_VALUE);E.options.inverseTransform&&(K=Number.MAX_VALUE);if(v.lines.show||v.points.show)for(q=0;q<y.length;q+=t){var F=y[q],J=y[q+1];null==F||F-z>B||F-z<-B||J-D>K||J-D<-K||(F=Math.abs(w.p2c(F)-h),J=Math.abs(E.p2c(J)-k),J=F*F+J*J,J<m&&(m=J,n=[p,q/t]))}if(v.bars.show&&!n){switch(v.bars.align){case "left":w=
0;break;case "right":w=-v.bars.barWidth;break;default:w=-v.bars.barWidth/2}v=w+v.bars.barWidth;for(q=0;q<y.length;q+=t)F=y[q],J=y[q+1],E=y[q+2],null!=F&&(ea[p].bars.horizontal?z<=Math.max(E,F)&&z>=Math.min(E,F)&&D>=J+w&&D<=J+v:z>=F+w&&z<=F+v&&D>=Math.min(E,J)&&D<=Math.max(E,J))&&(n=[p,q/t])}}n?(p=n[0],q=n[1],t=ea[p].datapoints.pointsize,d={datapoint:ea[p].datapoints.points.slice(q*t,(q+1)*t),dataIndex:q,series:ea[p],seriesIndex:p}):d=null;d&&(d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+g.left+
Q.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+g.top+Q.top,10));if(G.grid.autoHighlight){for(g=0;g<Ka.length;++g)h=Ka[g],h.auto!=a||d&&h.series==d.series&&h.point[0]==d.datapoint[0]&&h.point[1]==d.datapoint[1]||Ba(h.series,h.point);d&&ra(d.series,d.datapoint,a)}e.trigger(a,[l,d])}function Ea(){var a=G.interaction.redrawOverlayInterval;-1==a?ca():bb||(bb=setTimeout(ca,a))}function ca(){bb=null;za.save();Ta.clear();za.translate(Q.left,Q.top);var a,e;for(a=0;a<Ka.length;++a)if(e=Ka[a],
e.series.bars.show)Vb(e.series,e.point);else{var d=e.series,f=e.point;e=f[0];var f=f[1],g=d.xaxis,k=d.yaxis,l="string"===typeof d.highlightColor?d.highlightColor:b.color.parse(d.color).scale("a",.5).toString();if(!(e<g.min||e>g.max||f<k.min||f>k.max)){var m=d.points.radius+d.points.lineWidth/2;za.lineWidth=m;za.strokeStyle=l;l=1.5*m;e=g.p2c(e);f=k.p2c(f);za.beginPath();"circle"==d.points.symbol?za.arc(e,f,l,0,2*Math.PI,!1):d.points.symbol(za,e,f,l,!1);za.closePath();za.stroke()}}za.restore();h(Aa.drawOverlay,
[za])}function ra(a,b,e){"number"==typeof a&&(a=ea[a]);if("number"==typeof b){var d=a.datapoints.pointsize;b=a.datapoints.points.slice(d*b,d*(b+1))}d=aa(a,b);-1==d?(Ka.push({series:a,point:b,auto:e}),Ea()):e||(Ka[d].auto=!1)}function Ba(a,b){if(null==a&&null==b)Ka=[],Ea();else{"number"==typeof a&&(a=ea[a]);if("number"==typeof b){var e=a.datapoints.pointsize;b=a.datapoints.points.slice(e*b,e*(b+1))}e=aa(a,b);-1!=e&&(Ka.splice(e,1),Ea())}}function aa(a,b){for(var e=0;e<Ka.length;++e){var d=Ka[e];if(d.series==
a&&d.point[0]==b[0]&&d.point[1]==b[1])return e}return-1}function Vb(a,e){var d="string"===typeof a.highlightColor?a.highlightColor:b.color.parse(a.color).scale("a",.5).toString(),f;switch(a.bars.align){case "left":f=0;break;case "right":f=-a.bars.barWidth;break;default:f=-a.bars.barWidth/2}za.lineWidth=a.bars.lineWidth;za.strokeStyle=d;Z(e[0],e[1],e[2]||0,f,f+a.bars.barWidth,function(){return d},a.xaxis,a.yaxis,za,a.bars.horizontal,a.bars.lineWidth)}function Cb(a,e,d,f){if("string"==typeof a)return a;
e=M.createLinearGradient(0,d,0,e);d=0;for(var g=a.colors.length;d<g;++d){var h=a.colors[d];if("string"!=typeof h){var k=b.color.parse(f);null!=h.brightness&&(k=k.scale("rgb",h.brightness));null!=h.opacity&&(k.a*=h.opacity);h=k.toString()}e.addColorStop(d/(g-1),h)}return e}var ea=[],G={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,
sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,
fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},
qa=null,Ta=null,Ha=null,M=null,za=null,ya=[],Ca=[],Q={left:0,right:0,top:0,bottom:0},Ja=0,Da=0,Aa={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},ha=this;ha.setData=m;ha.setupGrid=B;ha.draw=F;ha.getPlaceholder=function(){return e};ha.getCanvas=function(){return qa.element};ha.getPlotOffset=function(){return Q};ha.width=function(){return Ja};ha.height=function(){return Da};ha.offset=function(){var a=
Ha.offset();a.left+=Q.left;a.top+=Q.top;return a};ha.getData=function(){return ea};ha.getAxes=function(){var a={};b.each(ya.concat(Ca),function(b,e){e&&(a[e.direction+(1!=e.n?e.n:"")+"axis"]=e)});return a};ha.getXAxes=function(){return ya};ha.getYAxes=function(){return Ca};ha.c2p=r;ha.p2c=function(a){var b={},e,d,f;for(e=0;e<ya.length;++e)if((d=ya[e])&&d.used&&(f="x"+d.n,null==a[f]&&1==d.n&&(f="x"),null!=a[f])){b.left=d.p2c(a[f]);break}for(e=0;e<Ca.length;++e)if((d=Ca[e])&&d.used&&(f="y"+d.n,null==
a[f]&&1==d.n&&(f="y"),null!=a[f])){b.top=d.p2c(a[f]);break}return b};ha.getOptions=function(){return G};ha.highlight=ra;ha.unhighlight=Ba;ha.triggerRedrawOverlay=Ea;ha.pointOffset=function(a){return{left:parseInt(ya[n(a,"x")-1].p2c(+a.x)+Q.left,10),top:parseInt(Ca[n(a,"y")-1].p2c(+a.y)+Q.top,10)}};ha.shutdown=v;ha.destroy=function(){v();e.removeData("plot").empty();ea=[];za=M=Ha=Ta=qa=G=null;ya=[];Ca=[];Aa=null;Ka=[];ha=null};ha.resize=function(){var a=e.width(),b=e.height();qa.resize(a,b);Ta.resize(a,
b)};ha.hooks=Aa;(function(){for(var e={Canvas:a},d=0;d<l.length;++d){var f=l[d];f.init(ha,e);f.options&&b.extend(!0,G,f.options)}})(ha);(function(a){b.extend(!0,G,a);a&&a.colors&&(G.colors=a.colors);null==G.xaxis.color&&(G.xaxis.color=b.color.parse(G.grid.color).scale("a",.22).toString());null==G.yaxis.color&&(G.yaxis.color=b.color.parse(G.grid.color).scale("a",.22).toString());null==G.xaxis.tickColor&&(G.xaxis.tickColor=G.grid.tickColor||G.xaxis.color);null==G.yaxis.tickColor&&(G.yaxis.tickColor=
G.grid.tickColor||G.yaxis.color);null==G.grid.borderColor&&(G.grid.borderColor=G.grid.color);null==G.grid.tickColor&&(G.grid.tickColor=b.color.parse(G.grid.color).scale("a",.22).toString());var d,g;a=(a=e.css("font-size"))?+a.replace("px",""):13;var k={style:e.css("font-style"),size:Math.round(.8*a),variant:e.css("font-variant"),weight:e.css("font-weight"),family:e.css("font-family")};g=G.xaxes.length||1;for(a=0;a<g;++a)(d=G.xaxes[a])&&!d.tickColor&&(d.tickColor=d.color),d=b.extend(!0,{},G.xaxis,
d),G.xaxes[a]=d,d.font&&(d.font=b.extend({},k,d.font),d.font.color||(d.font.color=d.color),d.font.lineHeight||(d.font.lineHeight=Math.round(1.15*d.font.size)));g=G.yaxes.length||1;for(a=0;a<g;++a)(d=G.yaxes[a])&&!d.tickColor&&(d.tickColor=d.color),d=b.extend(!0,{},G.yaxis,d),G.yaxes[a]=d,d.font&&(d.font=b.extend({},k,d.font),d.font.color||(d.font.color=d.color),d.font.lineHeight||(d.font.lineHeight=Math.round(1.15*d.font.size)));G.xaxis.noTicks&&null==G.xaxis.ticks&&(G.xaxis.ticks=G.xaxis.noTicks);
G.yaxis.noTicks&&null==G.yaxis.ticks&&(G.yaxis.ticks=G.yaxis.noTicks);G.x2axis&&(G.xaxes[1]=b.extend(!0,{},G.xaxis,G.x2axis),G.xaxes[1].position="top",null==G.x2axis.min&&(G.xaxes[1].min=null),null==G.x2axis.max&&(G.xaxes[1].max=null));G.y2axis&&(G.yaxes[1]=b.extend(!0,{},G.yaxis,G.y2axis),G.yaxes[1].position="right",null==G.y2axis.min&&(G.yaxes[1].min=null),null==G.y2axis.max&&(G.yaxes[1].max=null));G.grid.coloredAreas&&(G.grid.markings=G.grid.coloredAreas);G.grid.coloredAreasColor&&(G.grid.markingsColor=
G.grid.coloredAreasColor);G.lines&&b.extend(!0,G.series.lines,G.lines);G.points&&b.extend(!0,G.series.points,G.points);G.bars&&b.extend(!0,G.series.bars,G.bars);null!=G.shadowSize&&(G.series.shadowSize=G.shadowSize);null!=G.highlightColor&&(G.series.highlightColor=G.highlightColor);for(a=0;a<G.xaxes.length;++a)q(ya,a+1).options=G.xaxes[a];for(a=0;a<G.yaxes.length;++a)q(Ca,a+1).options=G.yaxes[a];for(var l in Aa)G.hooks[l]&&G.hooks[l].length&&(Aa[l]=Aa[l].concat(G.hooks[l]));h(Aa.processOptions,[G])})(k);
(function(){e.css("padding",0).children().filter(function(){return!b(this).hasClass("flot-overlay")&&!b(this).hasClass("flot-base")}).remove();"static"==e.css("position")&&e.css("position","relative");qa=new a("flot-base",e);Ta=new a("flot-overlay",e);M=qa.context;za=Ta.context;Ha=b(Ta.element).unbind();var d=e.data("plot");d&&(d.shutdown(),Ta.clear());e.data("plot",ha)})();m(d);B();F();G.grid.hoverable&&(Ha.mousemove(Ia),Ha.bind("mouseleave",da));G.grid.clickable&&Ha.click(ma);h(Aa.bindEvents,[Ha]);
var Ka=[],bb=null}var d=Object.prototype.hasOwnProperty;b.fn.detach||(b.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});a.prototype.resize=function(a,b){if(0>=a||0>=b)throw Error("Invalid dimensions for plot, width = "+a+", height = "+b);var e=this.element,d=this.context,h=this.pixelRatio;this.width!=a&&(e.width=a*h,e.style.width=a+"px",this.width=a);this.height!=b&&(e.height=b*h,e.style.height=b+"px",this.height=b);d.restore();d.save();d.scale(h,
h)};a.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};a.prototype.render=function(){var a=this._textCache,b;for(b in a)if(d.call(a,b)){var e=this.getTextLayer(b),l=a[b];e.hide();for(var h in l)if(d.call(l,h)){var m=l[h],n;for(n in m)if(d.call(m,n)){for(var p=m[n].positions,r=0,q;q=p[r];r++)q.active?q.rendered||(e.append(q.element),q.rendered=!0):(p.splice(r--,1),q.rendered&&q.element.detach());0==p.length&&delete m[n]}}e.show()}};a.prototype.getTextLayer=function(a){var e=
this.text[a];null==e&&(null==this.textContainer&&(this.textContainer=b("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),e=this.text[a]=b("<div></div>").addClass(a).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer));return e};a.prototype.getTextInfo=function(a,e,d,l,h){var m,n;e=""+e;l="object"===typeof d?d.style+" "+d.variant+" "+d.weight+" "+d.size+"px/"+d.lineHeight+
"px "+d.family:d;m=this._textCache[a];null==m&&(m=this._textCache[a]={});n=m[l];null==n&&(n=m[l]={});m=n[e];null==m&&(a=b("<div></div>").html(e).css({position:"absolute","max-width":h,top:-9999}).appendTo(this.getTextLayer(a)),"object"===typeof d?a.css({font:l,color:d.color}):"string"===typeof d&&a.addClass(d),m=n[e]={width:a.outerWidth(!0),height:a.outerHeight(!0),element:a,positions:[]},a.detach());return m};a.prototype.addText=function(a,b,e,d,h,m,n,p,r){a=this.getTextInfo(a,d,h,m,n);d=a.positions;
"center"==p?b-=a.width/2:"right"==p&&(b-=a.width);"middle"==r?e-=a.height/2:"bottom"==r&&(e-=a.height);for(r=0;h=d[r];r++)if(h.x==b&&h.y==e){h.active=!0;return}h={active:!0,rendered:!1,element:d.length?a.element.clone():a.element,x:b,y:e};d.push(h);h.element.css({top:Math.round(e),left:Math.round(b),"text-align":p})};a.prototype.removeText=function(a,b,e,l,h,m){if(null==l){if(b=this._textCache[a],null!=b)for(var n in b)if(d.call(b,n)){e=b[n];for(var p in e)if(d.call(e,p))for(a=e[p].positions,l=0;h=
a[l];l++)h.active=!1}}else for(a=this.getTextInfo(a,l,h,m).positions,l=0;h=a[l];l++)h.x==b&&h.y==e&&(h.active=!1)};b.plot=function(a,d,k){return new e(b(a),d,k,b.plot.plugins)};b.plot.version="0.8.3";b.plot.plugins=[];b.fn.plot=function(a,e){return this.each(function(){b.plot(this,a,e)})}})(jQuery);var jpeg=jpeg||{};jpeg.lossless=jpeg.lossless||{};"use strict";jpeg.lossless.ComponentSpec=jpeg.lossless.ComponentSpec||function(){this.vSamp=this.quantTableSel=this.hSamp=0};"use strict";
jpeg.lossless.DataStream=jpeg.lossless.DataStream||function(b){this.buffer=new DataView(b);this.index=0};jpeg.lossless.DataStream.prototype.get16=function(){var b=this.buffer.getUint16(this.index,!1);this.index+=2;return b};jpeg.lossless.DataStream.prototype.get8=function(){var b=this.buffer.getUint8(this.index);this.index+=1;return b};"use strict";
jpeg.lossless.Decoder=jpeg.lossless.Decoder||function(b,a){this.stream=new jpeg.lossless.DataStream(b);this.frame=new jpeg.lossless.FrameHeader;this.huffTable=new jpeg.lossless.HuffmanTable;this.quantTable=new jpeg.lossless.QuantizationTable;this.scan=new jpeg.lossless.ScanHeader;this.DU=jpeg.lossless.Utils.createArray(10,4,64);this.HuffTab=jpeg.lossless.Utils.createArray(4,2,12800);this.IDCT_Source=[];this.nBlock=[];this.acTab=jpeg.lossless.Utils.createArray(10,1);this.dcTab=jpeg.lossless.Utils.createArray(10,
1);this.qTab=jpeg.lossless.Utils.createArray(10,1);this.yLoc=this.xLoc=this.yDim=this.xDim=this.selection=this.restartInterval=this.numComp=this.markerIndex=this.marker=0;this.outputData=null;this.numBytes="undefined"===typeof a?2:a;2===this.numBytes?(this.getter=this.getValue16,this.setter=this.setValue16):1===this.numBytes&&(this.getter=this.getValue8,this.setter=this.setValue8)};
jpeg.lossless.Decoder.IDCT_P=[0,5,40,16,45,2,7,42,21,56,8,61,18,47,1,4,41,23,58,13,32,24,37,10,63,17,44,3,6,43,20,57,15,34,29,48,53,26,39,9,60,19,46,22,59,12,33,31,50,55,25,36,11,62,14,35,28,49,52,27,38,30,51,54];jpeg.lossless.Decoder.TABLE=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63];jpeg.lossless.Decoder.MAX_HUFFMAN_SUBTREE=50;jpeg.lossless.Decoder.MSB=2147483648;
jpeg.lossless.Decoder.prototype.decode=function(){var b,a=0,e=[],d,f,g=[],k=[];this.yLoc=this.xLoc=0;b=this.stream.get16();if(65496!==b)throw Error("Not a JPEG file");for(b=this.stream.get16();4092!==b>>4||65476===b;){switch(b){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,jpeg.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=
this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(255!==b>>8)throw Error("ERROR: format throw new IOException! (decode)");}b=this.stream.get16()}if(65472>b||65479<b)throw Error("ERROR: could not handle arithmetic code!");this.frame.read(this.stream);b=this.stream.get16();do{for(;65498!==
b;){switch(b){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,jpeg.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();
break;case 65534:this.readComment();break;default:if(255!==b>>8)throw Error("ERROR: format throw new IOException! (Parser.decode)");}b=this.stream.get16()}this.precision=this.frame.precision;this.components=this.frame.components;this.scan.read(this.stream);this.numComp=this.scan.numComp;this.selection=this.scan.selection;this.scanComps=this.scan.components;this.quantTables=this.quantTable.quantTables;for(d=0;d<this.numComp;d+=1)f=this.scanComps[d].scanCompSel,this.qTab[d]=this.quantTables[this.components[f].quantTableSel],
this.nBlock[d]=this.components[f].vSamp*this.components[f].hSamp,this.dcTab[d]=this.HuffTab[this.scanComps[d].dcTabSel][0],this.acTab[d]=this.HuffTab[this.scanComps[d].acTabSel][1];this.xDim=this.frame.dimX;this.yDim=this.frame.dimY;this.outputData=new DataView(new ArrayBuffer(this.xDim*this.yDim*this.numBytes));for(a+=1;;){g[0]=0;for(d=k[0]=0;10>d;d+=1)e[d]=1<<this.precision-1;if(0===this.restartInterval){for(b=this.decodeUnit(e,g,k);0===b&&this.xLoc<this.xDim&&this.yLoc<this.yDim;)this.output(e),
b=this.decodeUnit(e,g,k);break}for(d=0;d<this.restartInterval&&(b=this.decodeUnit(e,g,k),this.output(e),0===b);d+=1);0===b&&(0!==this.markerIndex?(b=65280|this.marker,this.markerIndex=0):b=this.stream.get16());if(!(65488<=b&&65495>=b))break}65500===b&&1===a&&(this.readNumber(),b=this.stream.get16())}while(65497!==b&&this.xLoc<this.xDim&&this.yLoc<this.yDim&&0===a);return this.outputData};
jpeg.lossless.Decoder.prototype.decodeUnit=function(b,a,e){var d,f,g,k,l,h,m;switch(this.selection){case 2:b[0]=this.getPreviousY();break;case 3:b[0]=this.getPreviousXY();break;case 4:b[0]=this.getPreviousX()+this.getPreviousY()-this.getPreviousXY();break;case 5:b[0]=this.getPreviousX()+(this.getPreviousY()-this.getPreviousXY()>>1);break;case 6:b[0]=this.getPreviousY()+(this.getPreviousX()-this.getPreviousXY()>>1);break;case 7:b[0]=(this.getPreviousX()+this.getPreviousY())/2;break;default:b[0]=this.getPreviousX()}if(1<
this.numComp)for(l=0;l<this.numComp;l+=1)for(k=this.qTab[l],f=this.acTab[l],g=this.dcTab[l],h=0;h<this.nBlock[l];h+=1){for(d=0;d<this.IDCT_Source.length;d+=1)this.IDCT_Source[d]=0;d=this.getHuffmanValue(g,a,e);if(65280<=d)return d;b[l]=this.IDCT_Source[0]=b[l]+this.getn(e,d,a,e);this.IDCT_Source[0]*=k[0];for(m=1;64>m;m+=1){d=this.getHuffmanValue(f,a,e);if(65280<=d)return d;m+=d>>4;if(0===(d&15)){if(0===d>>4)break}else this.IDCT_Source[jpeg.lossless.Decoder.IDCT_P[m]]=this.getn(e,d&15,a,e)*k[m]}this.scaleIDCT(this.DU[l][h])}else for(h=
0;h<this.nBlock[0];h+=1){d=this.getHuffmanValue(this.dcTab[0],a,e);if(65280<=d)return d;b[0]+=this.getn(b,d,a,e)}return 0};
jpeg.lossless.Decoder.prototype.getHuffmanValue=function(b,a,e){var d,f;8>e[0]?(a[0]<<=8,f=this.stream.get8(),255===f&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),a[0]|=f):e[0]-=8;d=b[a[0]>>e[0]];if(0!==(d&jpeg.lossless.Decoder.MSB)){if(0!==this.markerIndex)return this.markerIndex=0,65280|this.marker;a[0]&=65535>>16-e[0];a[0]<<=8;f=this.stream.get8();255===f&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9));a[0]|=f;d=b[256*(d&255)+(a[0]>>e[0])];e[0]+=
8}e[0]+=8-(d>>8);if(0>e[0])throw Error("index="+e[0]+" temp="+a[0]+" code="+d+" in HuffmanValue()");if(e[0]<this.markerIndex)return this.markerIndex=0,65280|this.marker;a[0]&=65535>>16-e[0];return d&255};
jpeg.lossless.Decoder.prototype.getn=function(b,a,e,d){if(0===a)return 0;if(16===a)return 0<=b[0]?-32768:32768;d[0]-=a;if(0<=d[0]){if(d[0]<this.markerIndex&&!this.isLastPixel())return this.markerIndex=0,(65280|this.marker)<<8}else{e[0]<<=8;b=this.stream.get8();255===b&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9));e[0]|=b;d[0]+=8;if(0>d[0]){if(0!==this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;e[0]<<=8;b=this.stream.get8();255===b&&(this.marker=this.stream.get8(),
0!==this.marker&&(this.markerIndex=9));e[0]|=b;d[0]+=8}if(0>d[0])throw Error("index="+d[0]+" in getn()");if(d[0]<this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8}b=e[0]>>d[0];e[0]&=65535>>16-d[0];b<1<<a-1&&(b+=(-1<<a)+1);return b};jpeg.lossless.Decoder.prototype.getPreviousX=function(){return 0<this.xLoc?this.getter(this.yLoc*this.xDim+this.xLoc-1):0<this.yLoc?this.getPreviousY():1<<this.frame.precision-1};
jpeg.lossless.Decoder.prototype.getPreviousXY=function(){return 0<this.xLoc&&0<this.yLoc?this.getter((this.yLoc-1)*this.xDim+this.xLoc-1):this.getPreviousY()};jpeg.lossless.Decoder.prototype.getPreviousY=function(){return 0<this.yLoc?this.getter((this.yLoc-1)*this.xDim+this.xLoc):this.getPreviousX()};jpeg.lossless.Decoder.prototype.isLastPixel=function(){return this.xLoc===this.xDim-1&&this.yLoc===this.yDim-1};
jpeg.lossless.Decoder.prototype.output=function(b){this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(this.yLoc*this.xDim+this.xLoc,b[0]),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))};jpeg.lossless.Decoder.prototype.setValue16=function(b,a){this.outputData.setInt16(2*b,a,!0)};jpeg.lossless.Decoder.prototype.getValue16=function(b){return this.outputData.getInt16(2*b,!0)};jpeg.lossless.Decoder.prototype.setValue8=function(b,a){this.outputData.setInt8(b,a)};
jpeg.lossless.Decoder.prototype.getValue8=function(b){return this.outputData.getInt8(b)};jpeg.lossless.Decoder.prototype.readApp=function(){for(var b=0,a=this.stream.get16(),b=b+2;b<a;)this.stream.get8(),b+=1;return a};jpeg.lossless.Decoder.prototype.readComment=function(){var b="",a=0,e;e=this.stream.get16();for(a+=2;a<e;)b+=this.stream.get8(),a+=1;return b};
jpeg.lossless.Decoder.prototype.readNumber=function(){if(4!==this.stream.get16())throw Error("ERROR: Define number format throw new IOException [Ld!=4]");return this.stream.get16()};
jpeg.lossless.Decoder.prototype.scaleIDCT=function(b){var a=jpeg.lossless.Utils.createArray(8,8),e,d,f,g,k,l,h,m,n,p,r,q,t=0;for(k=0;8>k;k+=1)f=this.IDCT_Source[0+k],g=this.IDCT_Source[8+k],l=this.IDCT_Source[16+k]-this.IDCT_Source[24+k],h=this.IDCT_Source[24+k]+this.IDCT_Source[16+k],m=this.IDCT_Source[32+k]-this.IDCT_Source[56+k],p=this.IDCT_Source[40+k]-this.IDCT_Source[48+k],e=this.IDCT_Source[40+k]+this.IDCT_Source[48+k],d=this.IDCT_Source[32+k]+this.IDCT_Source[56+k],n=e-d,r=e+d,q=480*-m-192*
p,n*=384,p=480*p-192*m,r*=256,e=256*f,d=256*g,f=384*l,m=g=256*h,h=e+d,e-=d,d=f-g,f=h+m,g=e+d,l=e-d,h-=m,m=p-q-n-r,n=n-p+r,p-=r,a[0][k]=f+r+4096>>13,a[1][k]=g+p+4096>>13,a[2][k]=l+n+4096>>13,a[3][k]=h+m+4096>>13,a[4][k]=h-m+4096>>13,a[5][k]=l-n+4096>>13,a[6][k]=g-p+4096>>13,a[7][k]=f-r+4096>>13;for(k=0;8>k;k+=1)f=a[k][0],g=a[k][1],l=a[k][2]-a[k][3],h=a[k][3]+a[k][2],m=a[k][4]-a[k][7],p=a[k][5]-a[k][6],e=a[k][5]+a[k][6],d=a[k][4]+a[k][7],n=e-d,r=e+d,q=480*-m-192*p,n*=384,p=480*p-192*m,r*=256,e=256*
f,d=256*g,f=384*l,m=g=256*h,h=e+d,e-=d,d=f-g,f=h+m,g=e+d,l=e-d,h-=m,m=p-q-n-r,n=n-p+r,p-=r,b[t+=1]=f+r+4096>>13,b[t+=1]=g+p+4096>>13,b[t+=1]=l+n+4096>>13,b[t+=1]=h+m+4096>>13,b[t+=1]=h-m+4096>>13,b[t+=1]=l-n+4096>>13,b[t+=1]=g-p+4096>>13,b[t+=1]=f-r+4096>>13};"use strict";jpeg.lossless.FrameHeader=jpeg.lossless.FrameHeader||function(){this.components=[];this.precision=this.numComp=this.dimY=this.dimX=0};
jpeg.lossless.FrameHeader.prototype.read=function(b){var a=0,e,d,f,g;e=b.get16();a+=2;this.precision=b.get8();a+=1;this.dimY=b.get16();a+=2;this.dimX=b.get16();a+=2;this.numComp=b.get8();a+=1;for(d=1;d<=this.numComp;d+=1){if(a>e)throw Error("ERROR: frame format error");f=b.get8();a+=1;if(a>=e)throw Error("ERROR: frame format error [c>=Lf]");g=b.get8();a+=1;this.components[f]||(this.components[f]=new jpeg.lossless.ComponentSpec);this.components[f].hSamp=g>>4;this.components[f].vSamp=g&15;this.components[f].quantTableSel=
b.get8();a+=1}if(a!==e)throw Error("ERROR: frame format error [Lf!=count]");return 1};"use strict";jpeg.lossless.HuffmanTable=jpeg.lossless.HuffmanTable||function(){this.l=jpeg.lossless.Utils.createArray(4,2,16);this.th=[];this.v=jpeg.lossless.Utils.createArray(4,2,16,200);this.tc=jpeg.lossless.Utils.createArray(4,2);this.tc[0][0]=0;this.tc[1][0]=0;this.tc[2][0]=0;this.tc[3][0]=0;this.tc[0][1]=0;this.tc[1][1]=0;this.tc[2][1]=0;this.tc[3][1]=0;this.th[0]=0;this.th[1]=0;this.th[2]=0;this.th[3]=0};
jpeg.lossless.HuffmanTable.MSB=2147483648;
jpeg.lossless.HuffmanTable.prototype.read=function(b,a){var e=0,d,f,g,k,l;d=b.get16();for(e+=2;e<d;){f=b.get8();e+=1;g=f&15;if(3<g)throw Error("ERROR: Huffman table ID > 3");f>>=4;if(2<f)throw Error("ERROR: Huffman table [Table class > 2 ]");this.th[g]=1;this.tc[g][f]=1;for(k=0;16>k;k+=1)this.l[g][f][k]=b.get8(),e+=1;for(k=0;16>k;k+=1)for(l=0;l<this.l[g][f][k];l+=1){if(e>d)throw Error("ERROR: Huffman table format error [count>Lh]");this.v[g][f][k][l]=b.get8();e+=1}}if(e!==d)throw Error("ERROR: Huffman table format error [count!=Lf]");
for(k=0;4>k;k+=1)for(l=0;2>l;l+=1)0!==this.tc[k][l]&&this.buildHuffTable(a[k][l],this.l[k][l],this.v[k][l]);return 1};
jpeg.lossless.HuffmanTable.prototype.buildHuffTable=function(b,a,e){var d,f,g,k,l;for(g=f=0;8>g;g+=1)for(k=0;k<a[g];k+=1)for(l=0;l<256>>g+1;l+=1)b[f]=e[g][k]|g+1<<8,f+=1;for(g=1;256>f;g+=1,f+=1)b[f]=g|jpeg.lossless.HuffmanTable.MSB;d=1;f=0;for(g=8;16>g;g+=1)for(k=0;k<a[g];k+=1){for(l=0;l<256>>g-7;l+=1)b[256*d+f]=e[g][k]|g+1<<8,f+=1;256<=f&&(256<f&&(this.error="ERROR: Huffman table error(1)!"),f=0,d+=1)}};"use strict";
jpeg.lossless.QuantizationTable=jpeg.lossless.QuantizationTable||function(){this.precision=[];this.tq=[];this.quantTables=jpeg.lossless.Utils.createArray(4,64);this.tq[0]=0;this.tq[1]=0;this.tq[2]=0;this.tq[3]=0};
jpeg.lossless.QuantizationTable.enhanceQuantizationTable=function(b,a){var e;for(e=0;8>e;e+=1)b[a[0+e]]*=90,b[a[32+e]]*=90,b[a[16+e]]*=118,b[a[48+e]]*=49,b[a[40+e]]*=71,b[a[8+e]]*=126,b[a[56+e]]*=25,b[a[24+e]]*=106;for(e=0;8>e;e+=1)b[a[0+8*e]]*=90,b[a[4+8*e]]*=90,b[a[2+8*e]]*=118,b[a[6+8*e]]*=49,b[a[5+8*e]]*=71,b[a[1+8*e]]*=126,b[a[7+8*e]]*=25,b[a[3+8*e]]*=106;for(e=0;64>e;e+=1)b[e]>>=6};
jpeg.lossless.QuantizationTable.prototype.read=function(b,a){var e=0,d,f,g;d=b.get16();for(e+=2;e<d;){f=b.get8();e+=1;g=f&15;if(3<g)throw Error("ERROR: Quantization table ID > 3");this.precision[g]=f>>4;if(0===this.precision[g])this.precision[g]=8;else if(1===this.precision[g])this.precision[g]=16;else throw Error("ERROR: Quantization table precision error");this.tq[g]=1;if(8===this.precision[g])for(f=0;64>f;f+=1){if(e>d)throw Error("ERROR: Quantization table format error");this.quantTables[g][f]=
b.get8();e+=1}else for(f=0;64>f;f+=1){if(e>d)throw Error("ERROR: Quantization table format error");this.quantTables[g][f]=b.get16();e+=2}jpeg.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[g],a)}if(e!==d)throw Error("ERROR: Quantization table error [count!=Lq]");return 1};"use strict";jpeg.lossless.ScanComponent=jpeg.lossless.ScanComponent||function(){this.scanCompSel=this.dcTabSel=this.acTabSel=0};"use strict";
jpeg.lossless.ScanHeader=jpeg.lossless.ScanHeader||function(){this.spectralEnd=this.selection=this.numComp=this.al=this.ah=0;this.components=[]};
jpeg.lossless.ScanHeader.prototype.read=function(b){var a=0,e,d,f;e=b.get16();a+=2;this.numComp=b.get8();a+=1;for(d=0;d<this.numComp;d+=1){this.components[d]=new jpeg.lossless.ScanComponent;if(a>e)throw Error("ERROR: scan header format error");this.components[d].scanCompSel=b.get8();a+=1;f=b.get8();a+=1;this.components[d].dcTabSel=f>>4;this.components[d].acTabSel=f&15}this.selection=b.get8();a+=1;this.spectralEnd=b.get8();a+=1;f=b.get8();this.ah=f>>4;this.al=f&15;if(a+1!==e)throw Error("ERROR: scan header format error [count!=Ns]");
return 1};"use strict";jpeg.lossless.Utils=jpeg.lossless.Utils||{};jpeg.lossless.Utils.createArray=function(b){var a=Array(b||0),e=b;if(1<arguments.length)for(var d=Array.prototype.slice.call(arguments,1);e--;)a[b-1-e]=jpeg.lossless.Utils.createArray.apply(this,d);return a};var moduleType=typeof module;"undefined"!==moduleType&&module.exports&&(module.exports=jpeg);
var JpegImage=function(){function b(){}function a(a,b){for(var e=0,d=[],f,g,r=16;0<r&&!a[r-1];)r--;d.push({children:[],index:0});var q=d[0],t;for(f=0;f<r;f++){for(g=0;g<a[f];g++){q=d.pop();for(q.children[q.index]=b[e];0<q.index;)q=d.pop();q.index++;for(d.push(q);d.length<=f;)d.push(t={children:[],index:0}),q.children[q.index]=t.children,q=t;e++}f+1<r&&(d.push(t={children:[],index:0}),q.children[q.index]=t.children,q=t)}return d[0].children}function e(a,b,e,d,f,p,r,q,t){function v(){if(0<Z)return Z--,
K>>Z&1;K=a[b++];if(255==K){var e=a[b++];if(e)throw"unexpected marker: "+(K<<8|e).toString(16);}Z=7;return K>>>7}function y(a){for(var b;null!==(b=v());){a=a[b];if("number"===typeof a)return a;if("object"!==typeof a)throw"invalid huffman sequence";}return null}function z(a){for(var b=0;0<a;){var e=v();if(null===e)return;b=b<<1|e;a--}return b}function D(a){var b=z(a);return b>=1<<a-1?b:b+(-1<<a)+1}function B(a,b){var e=y(a.huffmanTableDC),e=0===e?0:D(e);a.blockData[b]=a.pred+=e;for(e=1;64>e;){var d=
y(a.huffmanTableAC),f=d&15,d=d>>4;if(0===f){if(15>d)break;e+=16}else e+=d,a.blockData[b+g[e]]=D(f),e++}}function P(a,b){var e=y(a.huffmanTableDC),e=0===e?0:D(e)<<t;a.blockData[b]=a.pred+=e}function F(a,b){a.blockData[b]|=v()<<t}function J(a,b){if(0<X)X--;else for(var e=p;e<=r;){var d=y(a.huffmanTableAC),f=d&15,d=d>>4;if(0===f){if(15>d){X=z(d)+(1<<d)-1;break}e+=16}else e+=d,a.blockData[b+g[e]]=D(f)*(1<<t),e++}}function N(a,b){for(var e=p,d=0;e<=r;){var f=g[e];switch(ka){case 0:d=y(a.huffmanTableAC);
f=d&15;d>>=4;if(0===f)15>d?(X=z(d)+(1<<d),ka=4):(d=16,ka=1);else{if(1!==f)throw"invalid ACn encoding";Ma=D(f);ka=d?2:3}continue;case 1:case 2:a.blockData[b+f]?a.blockData[b+f]+=v()<<t:(d--,0===d&&(ka=2==ka?3:0));break;case 3:a.blockData[b+f]?a.blockData[b+f]+=v()<<t:(a.blockData[b+f]=Ma<<t,ka=0);break;case 4:a.blockData[b+f]&&(a.blockData[b+f]+=v()<<t)}e++}4===ka&&(X--,0===X&&(ka=0))}var E=e.mcusPerLine,w=b,K=0,Z=0,X=0,ka=0,Ma,Ia=d.length,da,ma,va,Ea,ca;q=e.progressive?0===p?0===q?P:F:0===q?J:N:B;
var ra=0;e=1==Ia?d[0].blocksPerLine*d[0].blocksPerColumn:E*e.mcusPerColumn;f||(f=e);for(var Ba,aa;ra<e;){for(ma=0;ma<Ia;ma++)d[ma].pred=0;X=0;if(1==Ia)for(da=d[0],ca=0;ca<f;ca++)q(da,64*((da.blocksPerLine+1)*(ra/da.blocksPerLine|0)+ra%da.blocksPerLine)),ra++;else for(ca=0;ca<f;ca++){for(ma=0;ma<Ia;ma++)for(da=d[ma],Ba=da.h,aa=da.v,va=0;va<aa;va++)for(Ea=0;Ea<Ba;Ea++)q(da,64*((da.blocksPerLine+1)*((ra/E|0)*da.v+va)+(ra%E*da.h+Ea)));ra++}Z=0;da=a[b]<<8|a[b+1];if(65280>=da)throw"marker was not found";
if(65488<=da&&65495>=da)b+=2;else break}return b-w}function d(a,b){for(var e=b.blocksPerLine,d=b.blocksPerColumn,f=new Int32Array(64),g=0;g<d;g++)for(var r=0;r<e;r++){for(var q=b,t=64*((b.blocksPerLine+1)*g+r),v=f,y=q.quantizationTable,z=void 0,D=void 0,B=void 0,P=void 0,F=void 0,J=void 0,N=void 0,E=void 0,w=void 0,K=void 0,K=0;64>K;K++)v[K]=q.blockData[t+K]*y[K];for(K=0;8>K;++K)y=8*K,0==v[1+y]&&0==v[2+y]&&0==v[3+y]&&0==v[4+y]&&0==v[5+y]&&0==v[6+y]&&0==v[7+y]?(w=5793*v[0+y]+512>>10,v[0+y]=w,v[1+y]=
w,v[2+y]=w,v[3+y]=w,v[4+y]=w,v[5+y]=w,v[6+y]=w,v[7+y]=w):(z=5793*v[0+y]+128>>8,D=5793*v[4+y]+128>>8,B=v[2+y],P=v[6+y],F=2896*(v[1+y]-v[7+y])+128>>8,E=2896*(v[1+y]+v[7+y])+128>>8,J=v[3+y]<<4,N=v[5+y]<<4,w=z-D+1>>1,z=z+D+1>>1,D=w,w=3784*B+1567*P+128>>8,B=1567*B-3784*P+128>>8,P=w,w=F-N+1>>1,F=F+N+1>>1,N=w,w=E+J+1>>1,J=E-J+1>>1,E=w,w=z-P+1>>1,z=z+P+1>>1,P=w,w=D-B+1>>1,D=D+B+1>>1,B=w,w=2276*F+3406*E+2048>>12,F=3406*F-2276*E+2048>>12,E=w,w=799*J+4017*N+2048>>12,J=4017*J-799*N+2048>>12,N=w,v[0+y]=z+E,v[7+
y]=z-E,v[1+y]=D+N,v[6+y]=D-N,v[2+y]=B+J,v[5+y]=B-J,v[3+y]=P+F,v[4+y]=P-F);for(K=0;8>K;++K)y=K,0==v[8+y]&&0==v[16+y]&&0==v[24+y]&&0==v[32+y]&&0==v[40+y]&&0==v[48+y]&&0==v[56+y]?(w=5793*v[K+0]+8192>>14,v[0+y]=w,v[8+y]=w,v[16+y]=w,v[24+y]=w,v[32+y]=w,v[40+y]=w,v[48+y]=w,v[56+y]=w):(z=5793*v[0+y]+2048>>12,D=5793*v[32+y]+2048>>12,B=v[16+y],P=v[48+y],F=2896*(v[8+y]-v[56+y])+2048>>12,E=2896*(v[8+y]+v[56+y])+2048>>12,J=v[24+y],N=v[40+y],w=z-D+1>>1,z=z+D+1>>1,D=w,w=3784*B+1567*P+2048>>12,B=1567*B-3784*P+2048>>
12,P=w,w=F-N+1>>1,F=F+N+1>>1,N=w,w=E+J+1>>1,J=E-J+1>>1,E=w,w=z-P+1>>1,z=z+P+1>>1,P=w,w=D-B+1>>1,D=D+B+1>>1,B=w,w=2276*F+3406*E+2048>>12,F=3406*F-2276*E+2048>>12,E=w,w=799*J+4017*N+2048>>12,J=4017*J-799*N+2048>>12,N=w,v[0+y]=z+E,v[56+y]=z-E,v[8+y]=D+N,v[48+y]=D-N,v[16+y]=B+J,v[40+y]=B-J,v[24+y]=P+F,v[32+y]=P-F);for(K=0;64>K;++K)z=t+K,D=v[K],D=D<=-2056/q.bitConversion?0:D>=2024/q.bitConversion?255/q.bitConversion:D+2056/q.bitConversion>>4,q.blockData[z]=D}return b.blockData}function f(a){return 0>=
a?0:255<=a?255:a|0}var g=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);b.prototype={load:function(a){var b=function(a){this.parse(a);if(this.onload)this.onload()}.bind(this);if(-1<a.indexOf("data:")){var e=a.indexOf("base64,")+7;a=atob(a.substring(e));for(var e=new Uint8Array(a.length),d=a.length-1;0<=d;d--)e[d]=a.charCodeAt(d);b(a)}else{var f=new XMLHttpRequest;
f.open("GET",a,!0);f.responseType="arraybuffer";f.onload=function(){var a=new Uint8Array(f.response);b(a)}.bind(this);f.send(null)}},parse:function(b){function f(){var a=b[n]<<8|b[n+1];n+=2;return a}function h(){var a=f(),a=b.subarray(n,n+a-2);n+=a.length;return a}function m(a){for(var b=Math.ceil(a.samplesPerLine/8/a.maxH),e=Math.ceil(a.scanLines/8/a.maxV),d=0;d<a.components.length;d++){K=a.components[d];var f=Math.ceil(Math.ceil(a.samplesPerLine/8)*K.h/a.maxH),g=Math.ceil(Math.ceil(a.scanLines/
8)*K.v/a.maxV);K.blockData=new Int16Array(64*e*K.v*(b*K.h+1));K.blocksPerLine=f;K.blocksPerColumn=g}a.mcusPerLine=b;a.mcusPerColumn=e}var n=0,p=null,r=null,q,t,v=[],y=[],z=[],D=f();if(65496!=D)throw"SOI not found";for(D=f();65497!=D;){var B,P;switch(D){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:B=h();65504===D&&74===B[0]&&70===B[1]&&73===B[2]&&70===B[3]&&
0===B[4]&&(p={version:{major:B[5],minor:B[6]},densityUnits:B[7],xDensity:B[8]<<8|B[9],yDensity:B[10]<<8|B[11],thumbWidth:B[12],thumbHeight:B[13],thumbData:B.subarray(14,14+3*B[12]*B[13])});65518===D&&65===B[0]&&100===B[1]&&111===B[2]&&98===B[3]&&101===B[4]&&0===B[5]&&(r={version:B[6],flags0:B[7]<<8|B[8],flags1:B[9]<<8|B[10],transformCode:B[11]});break;case 65499:for(D=f()+n-2;n<D;){var F=b[n++],J=new Int32Array(64);if(0===F>>4)for(B=0;64>B;B++){var N=g[B];J[N]=b[n++]}else if(1===F>>4)for(B=0;64>B;B++)N=
g[B],J[N]=f();else throw"DQT: invalid table spec";v[F&15]=J}break;case 65472:case 65473:case 65474:if(q)throw"Only single frame JPEGs supported";f();q={};q.extended=65473===D;q.progressive=65474===D;q.precision=b[n++];q.scanLines=f();q.samplesPerLine=f();q.components=[];q.componentIds={};B=b[n++];for(D=N=J=0;D<B;D++){F=b[n];P=b[n+1]>>4;var E=b[n+1]&15;J<P&&(J=P);N<E&&(N=E);var w=b[n+2];P=q.components.push({h:P,v:E,quantizationTable:v[w],quantizationTableId:w,bitConversion:255/((1<<q.precision)-1)});
q.componentIds[F]=P-1;n+=3}q.maxH=J;q.maxV=N;m(q);break;case 65476:F=f();for(D=2;D<F;){J=b[n++];N=new Uint8Array(16);for(B=P=0;16>B;B++,n++)P+=N[B]=b[n];E=new Uint8Array(P);for(B=0;B<P;B++,n++)E[B]=b[n];D+=17+P;(0===J>>4?z:y)[J&15]=a(N,E)}break;case 65501:f();t=f();break;case 65498:f();F=b[n++];B=[];for(var K,D=0;D<F;D++)J=q.componentIds[b[n++]],K=q.components[J],J=b[n++],K.huffmanTableDC=z[J>>4],K.huffmanTableAC=y[J&15],B.push(K);D=b[n++];F=b[n++];J=b[n++];D=e(b,n,q,B,t,D,F,J>>4,J&15);n+=D;break;
default:if(255==b[n-3]&&192<=b[n-2]&&254>=b[n-2])n-=3;else throw"unknown JPEG marker "+D.toString(16);}D=f()}this.width=q.samplesPerLine;this.height=q.scanLines;this.jfif=p;this.adobe=r;this.components=[];for(D=0;D<q.components.length;D++)K=q.components[D],K.quantizationTable||null==K.quantizationTableId||(K.quantizationTable=v[K.quantizationTableId]),this.components.push({output:d(q,K),scaleX:K.h/q.maxH,scaleY:K.v/q.maxV,blocksPerLine:K.blocksPerLine,blocksPerColumn:K.blocksPerColumn})},getData:function(a,
b){var e=this.width/a,d=this.height/b,g,p,r,q,t,v=0,y,z=this.components.length,D=a*b*z,B=new Uint16Array(D);y=new Uint16Array((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn*8);for(t=0;t<z;t++){g=this.components[t];p=g.blocksPerLine;r=g.blocksPerColumn;for(var P=p<<3,F,J=0,N=0;N<r;N++)for(var E=N<<3,w=0;w<p;w++){var K=64*((g.blocksPerLine+1)*N+w),v=0,Z=w<<3;for(q=0;8>q;q++)for(J=(E+q)*P,F=0;8>F;F++)y[J+Z+F]=g.output[K+v++]}p=g.scaleX*e;g=g.scaleY*d;v=t;for(q=0;q<b;q++)for(r=
0;r<a;r++)J=0|q*g,F=0|r*p,F=J*P+F,B[v]=y[F],v+=z}switch(z){case 1:case 2:break;case 3:t=!0;this.adobe&&this.adobe.transformCode?t=!0:"undefined"!==typeof this.colorTransform&&(t=!!this.colorTransform);if(t)for(t=0;t<D;t+=z)e=B[t],d=B[t+1],y=B[t+2],v=f(e-179.456+1.402*y),y=f(e+135.459-.344*d-.714*y),e=f(e-226.816+1.772*d),B[t]=v,B[t+1]=y,B[t+2]=e;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";t=!1;this.adobe&&this.adobe.transformCode?t=!0:"undefined"!==typeof this.colorTransform&&
(t=!!this.colorTransform);if(t)for(t=0;t<D;t+=z)e=B[t],d=B[t+1],y=B[t+2],v=f(434.456-e-1.402*y),y=f(119.541-e+.344*d+.714*y),e=f(481.816-e-1.772*d),B[t]=v,B[t+1]=y,B[t+2]=e;break;default:throw"Unsupported color mode";}return B},copyToImageData:function(a){var b=a.width,e=a.height,d=b*e*4;a=a.data;var b=this.getData(b,e),g=e=0,p,r,q,t,v;switch(this.components.length){case 1:for(;g<d;)q=b[e++],a[g++]=q,a[g++]=q,a[g++]=q,a[g++]=255;break;case 3:for(;g<d;)t=b[e++],v=b[e++],q=b[e++],a[g++]=t,a[g++]=v,
a[g++]=q,a[g++]=255;break;case 4:for(;g<d;)t=b[e++],v=b[e++],q=b[e++],p=b[e++],p=255-p,r=p/255,t=f(p-t*r),v=f(p-v*r),q=f(p-q*r),a[g++]=t,a[g++]=v,a[g++]=q,a[g++]=255;break;default:throw"Unsupported color mode";}}};return b}(),daikon=daikon||{};daikon.RLE=daikon.RLE||function(){this.rawData=null;this.numSegments=this.segElemPut=this.bytesPut=this.bytesRead=0;this.segmentOffsets=[];this.littleEndian=!0;this.size=this.numElements=this.segmentIndex=0;this.output=null};daikon.RLE.HEADER_SIZE=64;
daikon.RLE.prototype.decode=function(b,a,e){this.rawData=new DataView(b);this.littleEndian=a;this.numElements=e;this.readHeader();this.output=new DataView(new ArrayBuffer(this.size));for(b=0;b<this.numSegments;b+=1)this.readNextSegment();return this.processData()};
daikon.RLE.prototype.processData=function(){var b,a,e,d;if(1===this.numSegments)return this.output;if(2===this.numSegments){d=new DataView(new ArrayBuffer(this.size));for(b=0;b<this.numElements;b+=1)a=this.output.getInt8(b),e=this.output.getInt8(b+this.numElements),a=(a&255)<<8|e&255,d.setInt16(2*b,a,this.littleEndian);return d}if(3===this.numSegments){d=new DataView(new ArrayBuffer(this.size));a=2*this.numElements;for(b=0;b<this.numElements;b+=1)d.setInt8(3*b,this.output.getInt8(b)),d.setInt8(3*
b+1,this.output.getInt8(b+this.numElements)),d.setInt8(3*b+2,this.output.getInt8(b+a));return d}throw Error("RLE data with "+this.numSegments+" segments is not supported!");};daikon.RLE.prototype.readHeader=function(){var b;this.numSegments=this.getInt32();this.size=this.numElements*this.numSegments;for(b=0;b<this.numSegments;b+=1)this.segmentOffsets[b]=this.getInt32();this.bytesRead=daikon.RLE.HEADER_SIZE};
daikon.RLE.prototype.hasValidInput=function(){return this.bytesRead<this.rawData.buffer.byteLength&&this.bytesPut<this.size&&this.segElemPut<this.numElements};daikon.RLE.prototype.readNextSegment=function(){var b;this.bytesRead=this.segmentOffsets[this.segmentIndex];for(this.segElemPut=0;this.hasValidInput();)b=this.get(),0<=b&&128>b?this.readLiteral(b):-1>=b&&-128<b?this.readEncoded(b):-128===b&&console.warn("RLE: unsupported code!");this.segmentIndex+=1};
daikon.RLE.prototype.readLiteral=function(b){var a=b+1;if(this.hasValidInput())for(b=0;b<a;b+=1)this.put(this.get());else console.warn("RLE: insufficient data!")};daikon.RLE.prototype.readEncoded=function(b){var a=1-b,e=this.get();for(b=0;b<a;b+=1)this.put(e)};daikon.RLE.prototype.getInt32=function(){var b=this.rawData.getInt32(this.bytesRead,this.littleEndian);this.bytesRead+=4;return b};
daikon.RLE.prototype.getInt16=function(){var b=this.rawData.getInt16(this.bytesRead,this.littleEndian);this.bytesRead+=2;return b};daikon.RLE.prototype.get=function(){var b=this.rawData.getInt8(this.bytesRead);this.bytesRead+=1;return b};daikon.RLE.prototype.put=function(b){this.output.setInt8(this.bytesPut,b);this.bytesPut+=1;this.segElemPut+=1};var H=void 0,I=!0,W=null,Y=!1;
this.openjpeg=function(b,a){function e(){}function d(c){eval.call(W,c)}function f(c){e(c+":\n"+Error().stack);throw"Assertion: "+c;}function g(c,a){c||f("Assertion failed: "+a)}function k(a,b,e){e=e||"i8";"*"===e[e.length-1]&&(e="i32");switch(e){case "i1":A[a]=b;break;case "i8":A[a]=b;break;case "i16":R[a>>1]=b;break;case "i32":c[a>>2]=b;break;case "i64":c[a>>2]=b[0];c[a+4>>2]=b[1];break;case "float":S[a>>2]=b;break;case "double":Pa[0]=b;c[a>>2]=oa[0];c[a+4>>2]=oa[1];break;default:f("invalid type for setValue: "+
e)}}function l(a,b){b=b||"i8";"*"===b[b.length-1]&&(b="i32");switch(b){case "i1":return A[a];case "i8":return A[a];case "i16":return R[a>>1];case "i32":return c[a>>2];case "i64":return[pa[a>>2],pa[a+4>>2]];case "float":return S[a>>2];case "double":return oa[0]=c[a>>2],oa[1]=c[a+4>>2],Pa[0];default:f("invalid type for setValue: "+b)}return W}function h(c,a,b){var e,d;"number"===typeof c?(e=I,d=c):(e=Y,d=c.length);b=[U,ia.va,ia.J][b===H?u:b](Math.max(d,1));for(var f="string"===typeof a?a:W,h=0,l;h<
d;){var fa=e?0:c[h];"function"===typeof fa&&(fa=ia.Ga(fa));l=f||a[h];0===l?h++:(g(l,"Must know what type to store in allocate!"),"i64"==l&&(l="i32"),k(b+h,fa,l),h+=ia.H(l))}return b}function m(c){for(var a="",b=0,e,d=String.fromCharCode(0);;){e=String.fromCharCode(ja[c+b]);if(e==d)break;a+=e;b+=1}return a}function n(c,a){return Array.prototype.slice.call(A.subarray(c,c+a))}function p(c){for(var a=0;A[c+a];)a++;return a}function r(c,a){var b=p(c);a&&b++;var e=n(c,b);a&&(e[b-1]=0);return e}function q(c,
a){for(var b=[],e=0;e<c.length;){var d=c.charCodeAt(e);255<d&&(g(Y,"Character code "+d+" ("+c[e]+")  at offset "+e+" not in 0x00-0xFF."),d&=255);b.push(d);e+=1}a||b.push(0);return b}function t(c,a){return 0<=c?c:32>=a?2*Math.abs(1<<a-1)+c:Math.pow(2,a)+c}function v(c,a){if(0>=c)return c;var b=32>=a?Math.abs(1<<a-1):Math.pow(2,a-1);c>=b&&(32>=a||c>b)&&(c=-2*b+c);return c}function y(a,b,e){c[a>>2]=b;c[a+4>>2]=b+e;c[a+8>>2]=b;c[a+12>>2]=0;c[a+16>>2]=0}function z(a){var b,e;c[a+12>>2]=c[a+12>>2]<<8&65535;
c[a+16>>2]=65280==(c[a+12>>2]|0)?7:8;b=pa[a+8>>2]>>>0>=pa[a+4>>2]>>>0?1:2;1==b?e=1:2==b&&(b=c[a+8>>2],c[a+8>>2]=b+1,c[a+12>>2]|=ja[b]&255,e=0);return e}function D(a){return c[a+24>>2]-c[a+16>>2]}function B(a,b){c[a+24>>2]=c[a+16>>2]+b}function P(a){return c[a+20>>2]-c[a+24>>2]}function F(a,b){c[a+24>>2]+=b}function J(a,b){var e,d;d=0;e=b-1;a:for(;;){if(!(0<=(e|0)))break a;var f=a;1==(0==(c[f+16>>2]|0)?1:2)&&z(f);c[f+16>>2]-=1;d+=(pa[f+12>>2]>>>(pa[f+16>>2]>>>0)&1)<<e;e-=1}return d}function N(a){var b,
e;c[a+16>>2]=0;b=255==(c[a+12>>2]&255|0)?1:4;a:do if(1==b){b=0!=(z(a)|0)?2:3;do if(2==b){e=1;b=5;break a}else if(3==b){c[a+16>>2]=0;b=4;break a}while(0)}while(0);4==b&&(e=0);return e}function E(a,b,e){var d,f,g,k;g=0;k=U(28);d=0!=(k|0)?2:1;a:do if(2==d){c[k>>2]=a;d=0!=(b|0)?3:5;b:do if(3==d){if(0==(e|0)){d=5;break b}c[k+4>>2]=1;c[k+8>>2]=b;c[k+12>>2]=e;d=17;break b}while(0);b:do if(5==d){d=0!=(b|0)?15:6;c:do if(6==d){if(0!=(e|0))break c;if(0==(a|0))break c;c[k+4>>2]=2;d=c[a+12>>2];d=0==d?9:2==d?10:
11;do if(11==d){f=0;break a}else 9==d?g=c[c[a+16>>2]+64>>2]:10==d&&(g=c[c[c[a+20>>2]+4>>2]+64>>2]);while(0);c[k+12>>2]=Math.floor(.1625*(c[g+8>>2]|0)+2E3);d=U(c[k+12>>2]);c[k+8>>2]=d;d=0!=(c[k+8>>2]|0)?14:13;do if(14==d){d=17;break b}else if(13==d){aa(c[k>>2],1,qd,h(1,"i32",x));f=0;break a}while(0)}while(0);f=0;break a}while(0);c[k+16>>2]=c[k+8>>2];c[k+20>>2]=c[k+8>>2]+c[k+12>>2];c[k+24>>2]=c[k+8>>2];f=k}else 1==d&&(f=0);while(0);return f}function w(a,b){var e,d;d=0;e=b-1;a:for(;;){if(!(0<=(e|0)))break a;
var f=a,g=H,k=H,g=pa[f+24>>2]>>>0>=pa[f+20>>2]>>>0?1:2;1==g?(aa(c[f>>2],1,rd,h([c[f+16>>2],0,0,0,c[f+24>>2],0,0,0,c[f+20>>2],0,0,0],["i8*",0,0,0,"i8*",0,0,0,"i8*",0,0,0],x)),k=0):2==g&&(g=c[f+24>>2],c[f+24>>2]=g+1,k=A[g]);d+=(k&255)<<(e<<3);e-=1}return d}function K(a,b,e){var d=L;L+=32;g(L<la);var f=d+16,h,k,l,fa,m,p,n;h=c[a+20>>2];k=c[h+8>>2]-c[h>>2];l=c[h+12>>2]-c[h+4>>2];fa=c[a+8>>2]-c[a>>2];m=Db(Z(h,b)<<2);c[d>>2]=m;c[f>>2]=c[d>>2];a:for(;;){b=m=b-1;if(0==(m|0))break a;m=c[a+24>>2];h+=124;c[d+
8>>2]=k;c[f+8>>2]=l;k=c[h+8>>2]-c[h>>2];l=c[h+12>>2]-c[h+4>>2];c[d+4>>2]=k-c[d+8>>2];c[d+12>>2]=(c[h>>2]|0)%2;p=0;b:for(;;){if(!((p|0)<(l|0)))break b;Ea(d,m+(p*fa<<2));cb[e](d);var q=m+(p*fa<<2),r=c[d>>2];n=k<<2;g(0===n%1,"memcpy given "+n+" bytes to copy. Problem with quantum=1 corrections perhaps?");var s;s=r+n;if(q%4==r%4&&8<n){for(;0!==r%4&&r<s;)A[q++]=A[r++];r>>=2;q>>=2;for(n=s>>2;r<n;)c[q++]=c[r++];r<<=2;q<<=2}for(;r<s;)A[q++]=A[r++];p+=1}c[f+4>>2]=l-c[f+8>>2];c[f+12>>2]=(c[h+4>>2]|0)%2;p=0;
b:for(;;){if(!((p|0)<(k|0)))break b;ca(f,m+(p<<2),fa);cb[e](f);n=0;c:for(;;){if(!((n|0)<(l|0)))break c;c[m+(n*fa+p<<2)>>2]=c[c[f>>2]+(n<<2)>>2];n+=1}p+=1}}L=d}function Z(a,b){var e,d,f,g,h;d=a;f=b;g=1;a:for(;;){f=e=f-1;if(0==(e|0))break a;d+=124;h=c[d+8>>2]-c[d>>2];e=(g|0)<(c[d+8>>2]-c[d>>2]|0)?3:4;3==e&&(g=h);h=c[d+12>>2]-c[d+4>>2];e=(g|0)<(c[d+12>>2]-c[d+4>>2]|0)?5:6;5==e&&(g=h)}return g}function X(a,b){var e=L;L+=32;g(L<la);var d,f,h=e+16,k,l,fa,m,p,n,q,r;f=b;k=c[a+20>>2];l=c[k+8>>2]-c[k>>2];fa=
c[k+12>>2]-c[k+4>>2];m=c[a+8>>2]-c[a>>2];p=Db(Z(k,f)+5<<4);c[e>>2]=p;c[h>>2]=c[e>>2];a:for(;;){f=p=f-1;if(0==(p|0))break a;p=c[a+24>>2];n=(c[a+8>>2]-c[a>>2])*(c[a+12>>2]-c[a+4>>2]);c[e+8>>2]=l;c[h+8>>2]=fa;k+=124;l=c[k+8>>2]-c[k>>2];fa=c[k+12>>2]-c[k+4>>2];c[e+4>>2]=l-c[e+8>>2];c[e+12>>2]=(c[k>>2]|0)%2;q=fa;b:for(;;){if(!(3<(q|0)))break b;Ma(e,p,m,n);va(e);d=l;c:for(;;){d=r=d-1;if(!(0<=(r|0)))break c;S[p+(d<<2)>>2]=S[c[e>>2]+(d<<4)>>2];S[p+(d+m<<2)>>2]=S[c[e>>2]+(d<<4)+4>>2];S[p+(d+(m<<1)<<2)>>2]=
S[c[e>>2]+(d<<4)+8>>2];S[p+(d+3*m<<2)>>2]=S[c[e>>2]+(d<<4)+12>>2]}p+=m<<2<<2;n-=m<<2;q-=4}d=0!=(fa&3|0)?10:18;do if(10==d)b:for(q=fa&3,Ma(e,p,m,n),va(e),r=l;;){r=d=r-1;if(!(0<=(d|0))){d=17;break b}d=3==q?13:2==q?14:1==q?15:16;c:do if(13==d){S[p+(r+(m<<1)<<2)>>2]=S[c[e>>2]+(r<<4)+8>>2];d=14;break c}while(0);c:do if(14==d){S[p+(r+m<<2)>>2]=S[c[e>>2]+(r<<4)+4>>2];d=15;break c}while(0);15==d&&(S[p+(r<<2)>>2]=S[c[e>>2]+(r<<4)>>2])}while(0);c[h+4>>2]=fa-c[h+8>>2];c[h+12>>2]=(c[k+4>>2]|0)%2;p=c[a+24>>2];
q=l;b:for(;;){if(!(3<(q|0)))break b;Ia(h,p,m);va(h);d=0;c:for(;;){if(!((d|0)<(fa|0)))break c;r=p+(d*m<<2);n=c[h>>2]+(d<<4);g(I,"memcpy given 16 bytes to copy. Problem with quantum=1 corrections perhaps?");var s,t,v;s=r;t=n+16;if(s%4==n%4){for(;0!==n%4&&n<t;)A[s++]=A[n++];n>>=2;s>>=2;for(v=t>>2;n<v;)c[s++]=c[n++];n<<=2;s<<=2}for(;n<t;)A[s++]=A[n++];d+=1}p+=16;q-=4}d=0!=(l&3|0)?27:32;do if(27==d)b:for(q=l&3,Ia(h,p,m),va(h),r=0;;){if(!((r|0)<(fa|0))){d=31;break b}s=p+(r*m<<2);n=c[h>>2]+(r<<4);v=q<<2;
g(0===v%1,"memcpy given "+v+" bytes to copy. Problem with quantum=1 corrections perhaps?");t=n+v;if(s%4==n%4&&8<v){for(;0!==n%4&&n<t;)A[s++]=A[n++];n>>=2;s>>=2;for(v=t>>2;n<v;)c[s++]=c[n++];n<<=2;s<<=2}for(;n<t;)A[s++]=A[n++];r+=1}while(0)}L=e}function ka(c,a){var b;b=(c|0)<(a|0)?1:2;if(1==b)var e=c;else 2==b&&(e=a);return e}function Ma(a,b,e,d){var f,g,h,k,l,m;g=c[a>>2]+(c[a+12>>2]<<4);h=c[a+8>>2];l=0;a:for(;;){if(!(2>(l|0)))break a;f=(h+3*e|0)<(d|0)?3:11;b:do if(3==f){if(0!=(b&15|0)){f=11;break b}if(0!=
(g&15|0)){f=11;break b}if(0!=(e&15|0)){f=11;break b}k=0;c:for(;;){if(!((k|0)<(h|0)))break c;f=k;S[g+(k<<3<<2)>>2]=S[b+(f<<2)>>2];f+=e;S[g+((k<<3)+1<<2)>>2]=S[b+(f<<2)>>2];f+=e;S[g+((k<<3)+2<<2)>>2]=S[b+(f<<2)>>2];f+=e;S[g+((k<<3)+3<<2)>>2]=S[b+(f<<2)>>2];k+=1}f=22;break b}while(0);do if(11==f)b:for(k=0;;){if(!((k|0)<(h|0))){f=21;break b}m=k;S[g+(k<<3<<2)>>2]=S[b+(m<<2)>>2];m+=e;f=(m|0)>(d|0)?14:15;14!=f&&15==f&&(S[g+((k<<3)+1<<2)>>2]=S[b+(m<<2)>>2],m+=e,f=(m|0)>(d|0)?16:17,16!=f&&17==f&&(S[g+((k<<
3)+2<<2)>>2]=S[b+(m<<2)>>2],m+=e,f=(m|0)>(d|0)?18:19,18!=f&&19==f&&(S[g+((k<<3)+3<<2)>>2]=S[b+(m<<2)>>2])));k+=1}while(0);g=c[a>>2]+16+(-c[a+12>>2]<<4);b+=c[a+8>>2]<<2;d-=c[a+8>>2];h=c[a+4>>2];l+=1}}function Ia(a,b,e){var d,f;d=c[a>>2]+(c[a+12>>2]<<4);f=0;a:for(;;){if(!((f|0)<(c[a+8>>2]|0)))break a;var h=d+(f<<1<<4),k=b+(f*e<<2);g(I,"memcpy given 16 bytes to copy. Problem with quantum=1 corrections perhaps?");var l,m;l=k+16;if(h%4==k%4){for(;0!==k%4&&k<l;)A[h++]=A[k++];k>>=2;h>>=2;for(m=l>>2;k<m;)c[h++]=
c[k++];k<<=2;h<<=2}for(;k<l;)A[h++]=A[k++];f+=1}b+=c[a+8>>2]*e<<2;d=c[a>>2]+16+(-c[a+12>>2]<<4);f=0;a:for(;;){if(!((f|0)<(c[a+4>>2]|0)))break a;h=d+(f<<1<<4);k=b+(f*e<<2);g(I,"memcpy given 16 bytes to copy. Problem with quantum=1 corrections perhaps?");l=k+16;if(h%4==k%4){for(;0!==k%4&&k<l;)A[h++]=A[k++];k>>=2;h>>=2;for(m=l>>2;k<m;)c[h++]=c[k++];k<<=2;h<<=2}for(;k<l;)A[h++]=A[k++];f+=1}}function da(c,a,b){var e,d,f,g,h;e=0;a:for(;;){if(!((e|0)<(a|0)))break a;d=S[c+(e<<3<<2)>>2];f=S[c+((e<<3)+1<<2)>>
2];g=S[c+((e<<3)+2<<2)>>2];h=S[c+((e<<3)+3<<2)>>2];S[c+(e<<3<<2)>>2]=d*b;S[c+((e<<3)+1<<2)>>2]=f*b;S[c+((e<<3)+2<<2)>>2]=g*b;S[c+((e<<3)+3<<2)>>2]=h*b;e+=1}}function ma(c,a,b,e,d){var f,g,h,k,l,m,p,n,q,r,s,t;f=0;a:for(;;){if(!((f|0)<(e|0)))break a;g=S[c>>2];h=S[c+4>>2];k=S[c+8>>2];c=S[c+12>>2];l=S[a-16>>2];m=S[a-12>>2];p=S[a-8>>2];n=S[a-4>>2];q=S[a>>2];r=S[a+4>>2];s=S[a+8>>2];t=S[a+12>>2];S[a-16>>2]=l+(g+q)*d;S[a-12>>2]=m+(h+r)*d;S[a-8>>2]=p+(k+s)*d;S[a-4>>2]=n+(c+t)*d;c=a;a+=32;f+=1}f=(e|0)<(b|0)?
5:10;do if(5==f)a:for(d+=d,g=S[c>>2]*d,h=S[c+4>>2]*d,k=S[c+8>>2]*d,l=S[c+12>>2]*d;;){if(!((e|0)<(b|0))){f=9;break a}m=S[a-16>>2];p=S[a-12>>2];n=S[a-8>>2];q=S[a-4>>2];S[a-16>>2]=m+g;S[a-12>>2]=p+h;S[a-8>>2]=n+k;S[a-4>>2]=q+l;a+=32;e+=1}while(0)}function va(a){var b,e,d;b=0==(c[a+12>>2]|0)?1:5;a:do if(1==b){b=0<(c[a+4>>2]|0)?4:2;b:do if(2==b){if(1<(c[a+8>>2]|0))break b;b=10;break a}while(0);e=0;d=1;b=9;break a}else if(5==b){b=0<(c[a+8>>2]|0)?8:6;b:do if(6==b){if(1<(c[a+4>>2]|0))break b;b=10;break a}while(0);
e=1;d=0;b=9;break a}while(0);9==b&&(da(c[a>>2]+(e<<4),c[a+8>>2],1.2301740646362305),da(c[a>>2]+(d<<4),c[a+4>>2],1.625732421875),ma(c[a>>2]+(d<<4),c[a>>2]+(e<<4)+16,c[a+8>>2],ka(c[a+8>>2],c[a+4>>2]-e),-.4435068666934967),ma(c[a>>2]+(e<<4),c[a>>2]+(d<<4)+16,c[a+4>>2],ka(c[a+4>>2],c[a+8>>2]-d),-.8829110860824585),ma(c[a>>2]+(d<<4),c[a>>2]+(e<<4)+16,c[a+8>>2],ka(c[a+8>>2],c[a+4>>2]-e),.05298011749982834),ma(c[a>>2]+(e<<4),c[a>>2]+(d<<4)+16,c[a+4>>2],ka(c[a+4>>2],c[a+8>>2]-d),1.5861343145370483))}function Ea(a,
b){var e,d,f;e=b;d=c[a>>2]+(c[a+12>>2]<<2);f=c[a+8>>2];a:for(;;){var g=f;f=g-1;if(0==(g|0))break a;g=e;e=g+4;c[d>>2]=c[g>>2];d+=8}e=b+(c[a+8>>2]<<2);d=c[a>>2]+4+(-c[a+12>>2]<<2);f=c[a+4>>2];a:for(;;){g=f;f=g-1;if(0==(g|0))break a;g=e;e=g+4;c[d>>2]=c[g>>2];d+=8}}function ca(a,b,e){var d,f,g;d=b;f=c[a>>2]+(c[a+12>>2]<<2);g=c[a+8>>2];a:for(;;){var h=g;g=h-1;if(0==(h|0))break a;c[f>>2]=c[d>>2];f+=8;d+=e<<2}d=b+(c[a+8>>2]*e<<2);f=c[a>>2]+4+(-c[a+12>>2]<<2);g=c[a+4>>2];a:for(;;){a=g;g=a-1;if(0==(a|0))break a;
c[f>>2]=c[d>>2];f+=8;d+=e<<2}}function ra(a,b,e,d){var f;d=0!=(d|0)?37:1;do if(37==d){d=0!=(e|0)?40:38;a:do if(38==d){if(1!=(b|0)){d=40;break a}c[a>>2]=(c[a>>2]|0)/2|0;d=73;break a}while(0);do if(40==d){f=0;a:for(;;){if(!((f|0)<(e|0)))break a;d=0>(f|0)?43:44;if(43==d)var g=c[a>>2];else if(44==d){d=(f|0)>=(b|0)?45:46;if(45==d)var h=c[a+(b-1<<1<<2)>>2];else 46==d&&(h=c[a+(f<<1<<2)>>2]);g=h}d=0>(f+1|0)?49:50;if(49==d)var k=c[a>>2];else if(50==d){d=(f+1|0)>=(b|0)?51:52;if(51==d)var l=c[a+(b-1<<1<<2)>>
2];else 52==d&&(l=c[a+(f+1<<1<<2)>>2]);k=l}c[a+((f<<1)+1<<2)>>2]-=k+(g+2)>>2;f+=1}f=0;a:for(;;){if(!((f|0)<(b|0))){d=72;break a}d=0>(f|0)?59:60;if(59==d)var m=c[a+4>>2];else if(60==d){d=(f|0)>=(e|0)?61:62;if(61==d)var p=c[a+((e-1<<1)+1<<2)>>2];else 62==d&&(p=c[a+((f<<1)+1<<2)>>2]);m=p}d=0>(f-1|0)?65:66;if(65==d)var n=c[a+4>>2];else if(66==d){d=(f-1|0)>=(e|0)?67:68;if(67==d)var q=c[a+((e-1<<1)+1<<2)>>2];else 68==d&&(q=c[a+((f-1<<1)+1<<2)>>2]);n=q}c[a+(f<<1<<2)>>2]+=m+n>>1;f+=1}}while(0)}else if(1==
d){d=0<(b|0)?3:2;a:do if(2==d){d=1<(e|0)?3:36;break a}while(0);do if(3==d){f=0;a:for(;;){if(!((f|0)<(e|0)))break a;d=0>(f-1|0)?6:7;if(6==d)var r=c[a+4>>2];else if(7==d){d=(f-1|0)>=(b|0)?8:9;if(8==d)var s=c[a+((b-1<<1)+1<<2)>>2];else 9==d&&(s=c[a+((f-1<<1)+1<<2)>>2]);r=s}d=0>(f|0)?12:13;if(12==d)var t=c[a+4>>2];else if(13==d){d=(f|0)>=(b|0)?14:15;if(14==d)var v=c[a+((b-1<<1)+1<<2)>>2];else 15==d&&(v=c[a+((f<<1)+1<<2)>>2]);t=v}c[a+(f<<1<<2)>>2]-=t+(r+2)>>2;f+=1}f=0;a:for(;;){if(!((f|0)<(b|0))){d=35;
break a}d=0>(f|0)?22:23;if(22==d)var u=c[a>>2];else if(23==d){d=(f|0)>=(e|0)?24:25;if(24==d)var w=c[a+(e-1<<1<<2)>>2];else 25==d&&(w=c[a+(f<<1<<2)>>2]);u=w}d=0>(f+1|0)?28:29;if(28==d)var x=c[a>>2];else if(29==d){d=(f+1|0)>=(e|0)?30:31;if(30==d)var E=c[a+(e-1<<1<<2)>>2];else 31==d&&(E=c[a+(f+1<<1<<2)>>2]);x=E}c[a+((f<<1)+1<<2)>>2]+=u+x>>1;f+=1}}while(0)}while(0)}function Ba(a,b,e){1==(0!=(a|0)?1:2)&&(c[a>>2]=b,c[a+4>>2]=e)}function aa(a,b,e){var d=L;L+=516;g(L<la);var f,h,k,l,m=d+4;k=0;l=c[a>>2];f=
0!=(l|0)?1:9;do if(1==f){f=1==b?2:2==b?3:4==b?4:5;5!=f&&(2==f?k=c[l>>2]:3==f?k=c[l+4>>2]:4==f&&(k=c[l+8>>2]));f=0==(k|0)?7:8;do if(7==f)h=0;else if(8==f){f=0!=(e|0)?11:16;a:do if(11==f){if(0==(l|0)){f=16;break a}var n,q;f=m;h=f+512;q=0;0>q&&(q+=256);for(q=q+(q<<8)+(q<<16)+16777216*q;0!==f%4&&f<h;)A[f++]=0;f>>=2;for(n=h>>2;f<n;)c[f++]=q;for(f<<=2;f<h;)A[f++]=0;c[d>>2]=arguments[aa.length];f=512<p(e)>>>0?13:14;Ph(m,e,c[d>>2]);cb[k](m,c[a+4>>2])}while(0);h=1}while(0)}else 9==f&&(h=0);while(0);L=d;return h}
function Vb(a){var b,e,d,f,h,k,l,m;k=0;l=c[a+64>>2];m=c[a+72>>2];w(m,2);e=w(m,2);b=0==(c[l+80>>2]|0)?1:2;do if(1==b)c[c[l+76>>2]+(c[l+80>>2]<<2)>>2]=e,c[l+80>>2]+=1;else if(2==b){d=0;a:for(;;){(d|0)<(c[l+80>>2]|0)?b=4:(f=0,b=5);4==b&&(f=0==(k<<24>>24|0));if(!f)break a;k=((c[c[l+76>>2]+(d<<2)>>2]|0)==(e|0)?1:0)&255;d+=1}b=0==(k<<24>>24|0)?8:9;8==b&&(c[c[l+76>>2]+(c[l+80>>2]<<2)>>2]=e,c[l+80>>2]+=1)}while(0);d=w(m,4);11==(0!=(d|0)?12:11)&&(d=P(m)+8);f=w(m,1);h=w(m,1);c[a+8>>2]=e;c[a+16>>2]=f;c[a+32>>
2]=c[m+24>>2]-12+d;c[a+4>>2]=16;k=c[l+108>>2]+5588*c[a+8>>2];b=0!=(c[a+68>>2]|0)?13:22;13==b&&(b=0!=(c[k>>2]|0)?14:20,14==b?(15==(0==(e|0)?15:16)&&(c[c[a+68>>2]+80>>2]=D(m)-13),c[c[c[a+68>>2]+88>>2]+572*e+4>>2]=e,c[c[c[a+68>>2]+88>>2]+572*e+8>>2]=D(m)-12,c[c[c[a+68>>2]+88>>2]+572*e+16>>2]=c[c[c[a+68>>2]+88>>2]+572*e+8>>2]+d-1,c[c[c[a+68>>2]+88>>2]+572*e+564>>2]=h,b=0!=(h|0)?17:18,17==b?(b=U(20*h),c[c[c[a+68>>2]+88>>2]+572*e+568>>2]=b):18==b&&(b=U(200),c[c[c[a+68>>2]+88>>2]+572*e+568>>2]=b)):20==b&&
(c[c[c[a+68>>2]+88>>2]+572*e+16>>2]+=d),c[c[c[c[a+68>>2]+88>>2]+572*e+568>>2]+20*f>>2]=D(m)-12,c[c[c[c[a+68>>2]+88>>2]+572*e+568>>2]+20*f+8>>2]=c[c[c[c[a+68>>2]+88>>2]+572*e+568>>2]+20*f>>2]+d-1);b=1==(c[k>>2]|0)?23:28;do if(23==b){d=c[k+5584>>2];m=k;e=c[a+56>>2];g(I,"memcpy given 5588 bytes to copy. Problem with quantum=1 corrections perhaps?");f=e+5588;if(m%4==e%4){for(;0!==e%4&&e<f;)A[m++]=A[e++];e>>=2;m>>=2;for(h=f>>2;e<h;)c[m++]=c[e++];e<<=2;m<<=2}for(;e<f;)A[m++]=A[e++];c[k+5172>>2]=0;c[k+5164>>
2]=0;c[k+5168>>2]=0;c[k+5584>>2]=d;d=0;a:for(;;){if(!((d|0)<(c[c[a+60>>2]+16>>2]|0))){b=27;break a}m=c[k+5584>>2]+1076*d;e=c[c[a+56>>2]+5584>>2]+1076*d;g(I,"memcpy given 1076 bytes to copy. Problem with quantum=1 corrections perhaps?");f=e+1076;if(m%4==e%4){for(;0!==e%4&&e<f;)A[m++]=A[e++];e>>=2;m>>=2;for(h=f>>2;e<h;)c[m++]=c[e++];e<<=2;m<<=2}for(;e<f;)A[m++]=A[e++];d+=1}c[c[l+108>>2]+5588*c[a+8>>2]>>2]=0}while(0)}function Cb(a){var b,e,d,f,g,h,k;d=0;h=c[a+72>>2];k=c[a+8>>2];b=0!=(c[a+68>>2]|0)?1:
4;1==b&&(c[c[c[c[a+68>>2]+88>>2]+572*c[a+8>>2]+568>>2]+20*c[a+16>>2]+4>>2]=D(h)+c[a+44>>2]-1,b=0==(c[a+16>>2]|0)?2:3,2==b&&(c[c[c[a+68>>2]+88>>2]+572*c[a+8>>2]+12>>2]=D(h)+c[a+44>>2]-1),c[c[a+68>>2]+8>>2]=0);e=bb(c[a+32>>2]-c[h+24>>2],P(h)+1);b=(e|0)==(P(h)+1|0)?5:6;5==b&&(d=1);f=c[c[a+48>>2]+(k<<2)>>2];f=Eb(f,c[c[a+52>>2]+(k<<2)>>2]+e);g=f+c[c[a+52>>2]+(k<<2)>>2];b=0;a:for(;;){if(!((b|0)<(e|0)))break a;var l=w(h,1);A[g+b]=l&255;b+=1}c[c[a+52>>2]+(k<<2)>>2]+=e;c[c[a+48>>2]+(k<<2)>>2]=f;b=0!=(d|0)?
12:11;12==b?c[a+4>>2]=64:11==b&&(c[a+4>>2]=8);c[a+16>>2]+=1}function ea(a){var b,e,d,f;b=2!=(c[c[a+64>>2]+44>>2]|0)?1:8;do if(1==b){d=c[a>>2];b=H;e=U(56);f=0!=(e|0)?2:1;2==f?(c[e+20>>2]=d,d=U(12),c[e+24>>2]=d,f=0!=(c[e+24>>2]|0)?4:3,4==f?b=e:3==f&&(b=0)):1==f&&(b=0);f=b;sd(f,c[a+60>>2],c[a+64>>2]);b=0;a:for(;;){if(!((b|0)<(c[c[a+64>>2]+80>>2]|0))){b=7;break a}td(f,c[a+60>>2],c[a+64>>2],b);e=c[c[c[a+64>>2]+76>>2]+(b<<2)>>2];d=ud(f,c[c[a+48>>2]+(e<<2)>>2],c[c[a+52>>2]+(e<<2)>>2],e,c[a+68>>2]);c[c[a+
48>>2]+(e<<2)>>2]=0;if(0==(d|0)){b=4;break a}b+=1}4==b&&(c[a+4>>2]|=128)}else if(8==b)a:for(b=0;;){if(!((b|0)<(c[c[a+64>>2]+80>>2]|0))){b=12;break a}e=c[c[c[a+64>>2]+76>>2]+(b<<2)>>2];c[c[a+48>>2]+(e<<2)>>2]=0;b+=1}while(0);b=0!=(c[a+4>>2]&128|0)?14:15;14==b?c[a+4>>2]=160:15==b&&(c[a+4>>2]=32)}function G(a){var b,e,d,f,g;e=c[a+72>>2];d=c[a+60>>2];f=c[a+64>>2];w(e,2);w(e,2);b=w(e,4);c[d+8>>2]=b;b=w(e,4);c[d+12>>2]=b;b=w(e,4);c[d>>2]=b;b=w(e,4);c[d+4>>2]=b;b=w(e,4);c[f+56>>2]=b;b=w(e,4);c[f+60>>2]=
b;b=w(e,4);c[f+48>>2]=b;b=w(e,4);c[f+52>>2]=b;b=0>(c[d>>2]|0)?4:1;a:do if(1==b){if(0>(c[d+8>>2]|0)){b=4;break a}if(0>(c[d+4>>2]|0)){b=4;break a}if(0>(c[d+12>>2]|0)){b=4;break a}b=w(e,2);c[d+16>>2]=b;b=wa(c[d+16>>2],48);c[d+24>>2]=b;b=0;b:for(;;){if(!((b|0)<(c[d+16>>2]|0)))break b;g=w(e,1);c[c[d+24>>2]+48*b+24>>2]=(g&127)+1;c[c[d+24>>2]+48*b+32>>2]=g>>7;g=w(e,1);c[c[d+24>>2]+48*b>>2]=g;g=w(e,1);c[c[d+24>>2]+48*b+4>>2]=g;c[c[d+24>>2]+48*b+36>>2]=0;c[c[d+24>>2]+48*b+40>>2]=c[f+36>>2];b+=1}c[f+68>>2]=
(c[d+8>>2]-c[f+48>>2]+c[f+56>>2]-1|0)/(c[f+56>>2]|0)|0;c[f+72>>2]=(c[d+12>>2]-c[f+52>>2]+c[f+60>>2]-1|0)/(c[f+60>>2]|0)|0;e=wa(c[f+68>>2]*c[f+72>>2],5588);c[f+108>>2]=e;e=U(c[f+68>>2]*c[f+72>>2]<<2);c[f+76>>2]=e;b=c[f+80>>2]=0;b:for(;;){if(!((b|0)<(c[f+68>>2]*c[f+72>>2]|0)))break b;c[c[f+108>>2]+5588*b+424>>2]=0;c[c[f+108>>2]+5588*b+420>>2]=0;c[c[f+108>>2]+5588*b>>2]=1;b+=1}c[f+92>>2]=0;c[f+84>>2]=0;c[f+88>>2]=0;c[f+100>>2]=0;c[f+96>>2]=0;e=wa(c[d+16>>2],1076);c[c[a+56>>2]+5584>>2]=e;b=0;b:for(;;){if(!((b|
0)<(c[f+68>>2]*c[f+72>>2]|0)))break b;e=U(1076*c[d+16>>2]);c[c[f+108>>2]+5588*b+5584>>2]=e;b+=1}e=wa(c[f+68>>2]*c[f+72>>2],4);c[a+48>>2]=e;e=wa(c[f+68>>2]*c[f+72>>2],4);c[a+52>>2]=e;c[a+4>>2]=4;if(0==(c[a+68>>2]|0)){b=19;break a}e=c[a+68>>2];c[e+16>>2]=c[d+8>>2]-c[d>>2];c[e+20>>2]=c[d+12>>2]-c[d+4>>2];c[e+52>>2]=c[d+16>>2];c[e+44>>2]=c[f+68>>2];c[e+48>>2]=c[f+72>>2];c[e+28>>2]=c[f+56>>2];c[e+32>>2]=c[f+60>>2];c[e+36>>2]=c[f+48>>2];c[e+40>>2]=c[f+52>>2];f=wa(c[f+68>>2]*c[f+72>>2],572);c[e+88>>2]=f;
b=19;break a}while(0);4==b&&aa(c[a>>2],1,vd,h([c[d>>2],0,0,0,c[d+8>>2],0,0,0,c[d+4>>2],0,0,0,c[d+12>>2],0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x))}function qa(a){var b,e,d,f,g;d=c[a+72>>2];f=c[a+64>>2];b=16==(c[a+4>>2]|0)?1:2;1==b?g=c[f+108>>2]+5588*c[a+8>>2]:2==b&&(g=c[a+56>>2]);f=g;g=c[a+60>>2];w(d,2);b=w(d,1);c[f+4>>2]=b;b=w(d,1);c[f+8>>2]=b;b=w(d,2);c[f+12>>2]=b;b=w(d,1);c[f+16>>2]=b;b=D(d);e=0;a:for(;;){if(!((e|0)<(c[g+16>>2]|0)))break a;c[c[f+5584>>2]+1076*e>>2]=c[f+4>>2]&
1;B(d,b);nc(a,e);e+=1}b=0!=(c[a+68>>2]|0)?8:13;do if(8==b)a:for(d=c[a+68>>2],c[d+24>>2]=c[f+8>>2],c[d+56>>2]=c[f+12>>2],e=U(c[g+16>>2]<<2),c[d+60>>2]=e,e=0;;){if(!((e|0)<(c[g+16>>2]|0))){b=12;break a}c[c[d+60>>2]+(e<<2)>>2]=c[c[f+5584>>2]+1076*e+4>>2]-1;e+=1}while(0)}function Ta(a){var b,e,d;e=c[a+64>>2];b=16==(c[a+4>>2]|0)?1:2;1==b?d=c[e+108>>2]+5588*c[a+8>>2]:2==b&&(d=c[a+56>>2]);b=d;e=c[a+60>>2];d=c[a+72>>2];w(d,2);e=w(d,256>=(c[e+16>>2]|0)?1:2);d=w(d,1);c[c[b+5584>>2]+1076*e>>2]=d;nc(a,e)}function Ha(a){var b,
e;e=c[a+64>>2];b=16==(c[a+4>>2]|0)?1:2;if(1==b)var d=c[e+108>>2]+5588*c[a+8>>2];else 2==b&&(d=c[a+56>>2]);b=d;e=c[a+72>>2];a=c[c[a+60>>2]+16>>2];w(e,2);a=w(e,256>=(a|0)?1:2);w(e,1);e=w(e,1);c[c[b+5584>>2]+1076*a+808>>2]=e}function M(a){var b,e,d,f,g,h;f=c[c[a+60>>2]+16>>2];g=c[a+64>>2];b=16==(c[a+4>>2]|0)?1:2;1==b?d=c[g+108>>2]+5588*c[a+8>>2]:2==b&&(d=c[a+56>>2]);g=d;a=c[a+72>>2];b=0!=(c[g+424>>2]|0)?4:5;4==b?e=c[g+420>>2]+1:5==b&&(e=0);d=e;c[g+424>>2]=1;b=(w(a,2)-2|0)/(((256>=(f|0)?1:2)<<1)+5|0)|
0;e=d;a:for(;;){if(!((e|0)<(b+d|0)))break a;h=g+428+148*e;var k=w(a,1);c[h>>2]=k;k=w(a,256>=(f|0)?1:2);c[h+4>>2]=k;k=w(a,2);c[h+8>>2]=k;k=w(a,1);c[h+12>>2]=k;k=w(a,256>=(f|0)?1:2);c[h+16>>2]=bb(k,f);k=w(a,1);c[h+36>>2]=k;e+=1}c[g+420>>2]=b+d-1}function za(a){var b,e,d,f;f=c[a+72>>2];b=w(f,2);w(f,1);e=w(f,1);a=(e>>4&1)+(e>>4&2);e=e>>6&1;b=(b-4|0)/((e+1<<1)+a|0)|0;d=0;a:for(;;){if(!((d|0)<(b|0)))break a;w(f,a);w(f,0!=(e|0)?4:2);d+=1}}function ya(a){var b,e;e=c[a+72>>2];a=w(e,2);w(e,1);a-=3;a:for(;;){if(!(0<
(a|0)))break a;b=w(e,4);a-=4;b:for(;;){if(!(0<(b|0)))break b;w(e,1);a-=1;if(0>=(a|0))break b;b-=1}}}function Ca(a){var b,e,d,f,g,h;g=c[a+64>>2];h=c[a+72>>2];a=w(h,2);c[g+92>>2]=1;e=w(h,1);a-=3;a:for(;;){if(!(0<(a|0)))break a;b=0==(c[g+100>>2]|0)?3:4;3==b?(f=w(h,4),a-=4):4==b&&(f=c[g+100>>2]);d=c[g+96>>2];b=0==(e|0)?6:7;6==b?(b=U(f),c[g+84>>2]=b,c[g+88>>2]=c[g+84>>2],c[g+104>>2]=f):7==b&&(b=Eb(c[g+84>>2],f+c[g+96>>2]),c[g+84>>2]=b,c[g+88>>2]=c[g+84>>2],c[g+104>>2]=f+c[g+96>>2]);b=f;b:for(;;){if(!(0<
(b|0)))break b;var k=w(h,1);A[c[g+84>>2]+d]=k&255;d+=1;a-=1;if(0==(a|0))break b;b-=1}c[g+100>>2]=b-1;c[g+96>>2]=d}}function Q(a){var b,e,d;d=c[c[a+64>>2]+108>>2]+5588*c[a+8>>2];a=c[a+72>>2];e=w(a,2);b=w(a,1);c[d+5172>>2]=1;b=0==(b|0)?1:2;1==b?(b=U(e-3),c[d+5164>>2]=b,c[d+5168>>2]=c[d+5164>>2],c[d+5176>>2]=0,c[d+5180>>2]=e-3):2==b&&(b=Eb(c[d+5164>>2],e-3+c[d+5176>>2]),c[d+5164>>2]=b,c[d+5168>>2]=c[d+5164>>2],c[d+5180>>2]=e-3+c[d+5176>>2]);b=c[d+5176>>2];e-=3;a:for(;;){if(!(0<(e|0)))break a;var f=w(a,
1);A[c[d+5164>>2]+b]=f&255;b+=1;e-=1}c[d+5176>>2]=b}function Ja(a){var b,e,d;d=wa(1,76);b=0!=(d|0)?2:1;2==b?(b=wa(1,5588),c[d+56>>2]=b,b=0!=(c[d+56>>2]|0)?4:3,4==b?(c[d>>2]=a,c[d+48>>2]=0,e=d):3==b&&(e=0)):1==b&&(e=0);return e}function Da(a){var b;b=wd;a:for(;;){if(0==(c[b>>2]|0))break a;if((c[b>>2]|0)==(a|0))break a;b+=12}return b}function Aa(a,b){var e,d;e=0!=(a|0)?1:3;a:do if(1==e){if(0==(b|0))break a;d=wa(1,116);c[d+36>>2]=c[b>>2];c[d+40>>2]=c[b+4>>2];c[d+44>>2]=c[b+8220>>2];c[a+64>>2]=d}while(0)}
function ha(a,b,e){var d,f,g,k,l;g=c[a>>2];c[a+72>>2]=b;c[a+68>>2]=e;if(1==(0!=(e|0)?1:2)){k=e+92;l=0;0>l&&(l+=256);for(l=l+(l<<8)+(l<<16)+16777216*l;0!==e%4&&e<k;)A[e++]=0;e>>=2;for(d=k>>2;e<d;)c[e++]=l;for(e<<=2;e<k;)A[e++]=0}e=wa(1,36);c[a+60>>2]=e;c[a+4>>2]=1;a:for(;;){l=w(b,2);if(255!=(l>>8|0)){d=4;break a}k=Da(l);if(0==(c[a+4>>2]&c[k+4>>2]|0)){d=6;break a}d=65424==(c[k>>2]|0)?8:10;do if(8==d&&1==(c[c[a+64>>2]+44>>2]|0)){d=9;break a}while(0);d=0!=(c[k+8>>2]|0)?11:12;if(11==d)cb[c[k+8>>2]](a);
if(0!=(c[a+4>>2]&128|0)){d=13;break a}if(32==(c[a+4>>2]|0)){d=15;break a}if(64==(c[a+4>>2]|0)){d=17;break a}}a:do if(4==d){aa(g,1,pc,h([D(b)-2,0,0,0,l,0,0,0],["i32",0,0,0,"i32",0,0,0],x));f=0;d=24;break a}else if(6==d){aa(g,1,qc,h([D(b)-2,0,0,0,l,0,0,0],["i32",0,0,0,"i32",0,0,0],x));f=0;d=24;break a}else if(9==d){aa(g,4,xd,h(1,"i32",x));f=e;d=24;break a}else if(13==d){f=0;d=24;break a}else if(15==d){d=19;break a}else if(17==d){d=19;break a}while(0);19==d&&(d=64==(c[a+4>>2]|0)?20:21,20==d&&ea(a),d=
32!=(c[a+4>>2]|0)?22:23,22==d&&aa(g,2,rc,h(1,"i32",x)),f=e);return f}function Ka(a,b){var e=L;L+=28;g(L<la);var d,f,k,l,m,fa;m=c[a>>2];c[a+72>>2]=b;k=wa(1,36);c[a+60>>2]=k;c[a+4>>2]=1;c[e>>2]=0;c[e+4>>2]=0;c[e+8>>2]=0;c[e+12>>2]=0;c[e+16>>2]=0;c[e+20>>2]=0;c[e+24>>2]=0;oc(m,b,e);l=D(b);d=6!=(c[e+8>>2]|0)?1:2;a:do if(1==d)aa(m,1,yd,h([c[e+8>>2],0,0,0],["i32",0,0,0],x)),f=0;else if(2==d){b:for(;;){if(0==(P(b)|0)){d=4;break b}d=(D(b)-l|0)==(c[e+20>>2]|0)?6:9;do if(6==d&&(oc(m,b,e),l=D(b),4!=(c[e+8>>
2]|0))){d=7;break b}while(0);fa=w(b,2);if(255!=(fa>>8|0)){d=10;break b}f=Da(fa);if(0==(c[a+4>>2]&c[f+4>>2]|0)){d=12;break b}d=0!=(c[f+8>>2]|0)?14:15;if(14==d)cb[c[f+8>>2]](a);if(32==(c[a+4>>2]|0)){d=16;break b}if(64==(c[a+4>>2]|0)){d=18;break b}}do if(4==d){ea(a);f=k;break a}else if(7==d){aa(m,1,zd,h(1,"i32",x));f=0;break a}else if(10==d){aa(m,1,pc,h([D(b)-2,0,0,0,fa,0,0,0],["i32",0,0,0,"i32",0,0,0],x));f=0;break a}else if(12==d){aa(m,1,qc,h([D(b)-2,0,0,0,fa,0,0,0],["i32",0,0,0,"i32",0,0,0],x));f=
0;break a}while(0);d=64==(c[a+4>>2]|0)?21:22;21==d&&ea(a);d=32!=(c[a+4>>2]|0)?23:24;23==d&&aa(m,2,rc,h(1,"i32",x));f=k}while(0);L=e;return f}function bb(c,a){var b;b=(c|0)<(a|0)?1:2;if(1==b)var e=c;else 2==b&&(e=a);return e}function mc(a,b,e){var d,f,g,h,k;g=c[a+64>>2];d=16==(c[a+4>>2]|0)?1:2;if(1==d)var l=c[g+108>>2]+5588*c[a+8>>2];else 2==d&&(l=c[a+56>>2]);b=c[l+5584>>2]+1076*b;a=c[a+72>>2];d=w(a,1);c[b+24>>2]=d&31;c[b+804>>2]=d>>5;d=1==(c[b+24>>2]|0)?4:5;if(4==d)f=1;else if(5==d){d=0==(c[b+24>>
2]|0)?6:7;if(6==d)var m=e-1;else 7==d&&(m=(e-1|0)/2|0);f=m}e=0;a:for(;;){if(!((e|0)<(f|0)))break a;d=0==(c[b+24>>2]|0)?12:13;12==d?(h=w(a,1)>>>3,k=0):13==d&&(d=w(a,2),h=d>>11,k=d&2047);c[b+28+(e<<3)>>2]=h;c[b+28+(e<<3)+4>>2]=k;e+=1}d=1==(c[b+24>>2]|0)?17:25;do if(17==d)a:for(e=1;;){if(!(97>(e|0))){d=24;break a}d=0<(c[b+28>>2]-((e-1|0)/3|0)|0)?20:21;if(20==d)var p=c[b+28>>2]-((e-1|0)/3|0);else 21==d&&(p=0);c[b+28+(e<<3)>>2]=p;c[b+28+(e<<3)+4>>2]=c[b+32>>2];e+=1}while(0)}function nc(a,b){var e,d,f,
g;d=c[a+64>>2];e=16==(c[a+4>>2]|0)?1:2;1==e?f=c[d+108>>2]+5588*c[a+8>>2]:2==e&&(f=c[a+56>>2]);f=c[f+5584>>2]+1076*b;g=c[a+72>>2];e=w(g,1);c[f+4>>2]=e+1;e=(c[d+36>>2]|0)>=(c[f+4>>2]|0)?4:5;4==e&&(aa(c[a>>2],1,Ad,h([b,0,0,0],["i32",0,0,0],x)),c[a+4>>2]|=128);e=w(g,1);c[f+8>>2]=e+2;e=w(g,1);c[f+12>>2]=e+2;e=w(g,1);c[f+16>>2]=e;e=w(g,1);c[f+20>>2]=e;e=0!=(c[f>>2]&1|0)?6:11;do if(6==e)a:for(d=0;;){if(!((d|0)<(c[f+4>>2]|0))){e=10;break a}e=w(g,1);c[f+812+(d<<2)>>2]=e&15;c[f+944+(d<<2)>>2]=e>>4;d+=1}while(0);
e=0!=(c[a+68>>2]|0)?12:21;a:do if(12==e){if(0!=(b|0))break a;d=0;b:for(;;){if(!((d|0)<(c[f+4>>2]|0))){e=20;break b}e=0!=(c[f>>2]&1|0)?16:17;16==e?(c[c[c[a+68>>2]+88>>2]+572*c[a+8>>2]+284+(d<<2)>>2]=c[f+812+(d<<2)>>2],c[c[c[a+68>>2]+88>>2]+572*c[a+8>>2]+416+(d<<2)>>2]=c[f+944+(d<<2)>>2]):17==e&&(c[c[c[a+68>>2]+88>>2]+572*c[a+8>>2]+284+(d<<2)>>2]=15,c[c[c[a+68>>2]+88>>2]+572*c[a+8>>2]+284+(d<<2)>>2]=15);d+=1}}while(0)}function pb(){var a=L;L+=20;g(L<la);var b=ia.L({z:["i32","i32"]});c[a+sc+b[0]>>2]=
1;c[a+sc+b[1]>>2]=2;c[a+tc+b[0]>>2]=3;c[a+tc+b[1]>>2]=4;b=(c[a>>2]+c[a+8>>2]|0)+1E-6*(c[a+4>>2]+c[a+12>>2]|0);L=a;return b}function bd(a,b,e){var d=L;L+=12;g(L<la);var f,k,l;l=c[a>>2];Ga(l,b,d);a:for(;;){f=1785737832!=(c[d+4>>2]|0)?2:7;do if(2==f){if(1785737827==(c[d+4>>2]|0)){f=3;break a}F(b,c[d>>2]-8);if(pa[b+24>>2]>>>0>=pa[b+20>>2]>>>0){f=5;break a}Ga(l,b,d)}while(0);if(1785737832==(c[d+4>>2]|0)){f=9;break a}}a:do if(3==f)aa(l,1,Bd,h(1,"i32",x)),k=0;else if(5==f)k=0;else if(9==f){f=0!=(cd(a,b)|
0)?11:10;do if(11==f){k=c[d+8>>2]+c[d>>2];f=255==(c[a+20>>2]|0)?12:15;do if(12==f){f=0!=(dd(a,b)|0)?14:13;do if(14!=f&&13==f){k=0;break a}while(0)}while(0);Ga(l,b,d);b:for(;;){if(!(D(b)>>>0<k>>>0)){f=34;break b}f=1668246642==(c[d+4>>2]|0)?18:21;18==f?(f=0!=(gd(a,b,d,e)|0)?20:19,19==f&&(B(b,c[d+8>>2]+8),F(b,c[d>>2]-8)),Ga(l,b,d)):21==f&&(f=1667523942==(c[d+4>>2]|0)?22:25,22==f?(f=0!=(hd(0,b,0,e)|0)?24:23,23==f&&(B(b,c[d+8>>2]+8),F(b,c[d>>2]-8)),Ga(l,b,d)):25==f&&(f=1885564018==(c[d+4>>2]|0)?26:29,
26==f?(f=0!=(id(0,b,0,e)|0)?28:27,27==f&&(B(b,c[d+8>>2]+8),F(b,c[d>>2]-8)),Ga(l,b,d)):29==f&&(f=1668112752==(c[d+4>>2]|0)?30:33,30==f?(f=0!=(jd(0,b,0,e)|0)?32:31,31==f&&(B(b,c[d+8>>2]+8),F(b,c[d>>2]-8)),Ga(l,b,d)):33==f&&(B(b,c[d+8>>2]+8),F(b,c[d>>2]-8),Ga(l,b,d)))))}B(b,k);k=1==(ja[e+16]&255|0)&1}else 10==f&&(k=0);while(0)}while(0);L=d;return k}function Ga(a,b,e){var d,f;c[e+8>>2]=D(b);d=w(b,4);c[e>>2]=d;d=w(b,4);c[e+4>>2]=d;d=1==(c[e>>2]|0)?1:6;a:do if(1==d){d=0!=(w(b,4)|0)?2:3;do if(2==d){aa(a,
1,Cd,h(1,"i32",x));f=0;d=10;break a}else if(3==d){a=w(b,4);c[e>>2]=a;d=0==(c[e>>2]|0)?4:5;4==d&&(c[e>>2]=P(b)+12);d=9;break a}while(0)}else if(6==d){d=0==(c[e>>2]|0)?7:8;7==d&&(c[e>>2]=P(b)+8);d=9;break a}while(0);9==d&&(f=1);return f}function cd(a,b){var e=L;L+=12;g(L<la);var d,f,k;k=c[a>>2];Ga(k,b,e);d=1768449138!=(c[e+4>>2]|0)?1:2;1==d?(aa(k,1,Dd,h(1,"i32",x)),f=0):2==d&&(d=w(b,4),c[a+12>>2]=d,d=w(b,4),c[a+8>>2]=d,d=w(b,2),c[a+16>>2]=d,d=U(12*c[a+16>>2]),c[a+68>>2]=d,d=w(b,1),c[a+20>>2]=d,d=w(b,
1),c[a+24>>2]=d,d=w(b,1),c[a+28>>2]=d,d=w(b,1),c[a+32>>2]=d,d=(D(b)-c[e+8>>2]|0)!=(c[e>>2]|0)?3:4,3==d?(aa(k,1,Ed,h(1,"i32",x)),f=0):4==d&&(f=1));L=e;return f}function dd(a,b){var e=L;L+=12;g(L<la);var d,f,k;k=c[a>>2];Ga(k,b,e);d=1651532643!=(c[e+4>>2]|0)?1:2;do if(1==d)aa(k,1,Fd,h(1,"i32",x)),f=0;else if(2==d){d=0;a:for(;;){if(!(d>>>0<pa[a+16>>2]>>>0))break a;var l=w(b,1);c[c[a+68>>2]+12*d+8>>2]=l;d+=1}d=(D(b)-c[e+8>>2]|0)!=(c[e>>2]|0)?7:8;7==d?(aa(k,1,Gd,h(1,"i32",x)),f=0):8==d&&(f=1)}while(0);
L=e;return f}function ed(a){1==(0!=(c[a+12>>2]|0)?1:2)&&(c[a+12>>2]=0)}function gd(a,b,e,d){var f,k,l,m,fa;f=0!=A[d+16]<<24>>24?1:2;a:do if(1==f)k=0;else if(2==f){m=c[a>>2];f=w(b,1);c[a+36>>2]=f;f=w(b,1);c[a+48>>2]=f;f=w(b,1);c[a+40>>2]=f;f=1==(c[a+36>>2]|0)?3:4;do if(3==f)l=w(b,4),c[a+44>>2]=l;else if(4==f){l=c[e+8>>2]+c[e>>2]-D(b);f=0>(l|0)?5:6;do if(5==f){aa(m,1,Hd,h(1,"i32",x));k=0;break a}else if(6==f&&(f=0<(l|0)?7:8,7==f)){fa=c[b+24>>2];var p=U(l);c[d>>2]=p;c[d+4>>2]=l;F(b,c[e+8>>2]+c[e>>2]-
D(b));var n=c[d>>2],p=fa;fa=l;g(0===fa%1,"memcpy given "+fa+" bytes to copy. Problem with quantum=1 corrections perhaps?");var q;q=p+fa;if(n%4==p%4&&8<fa){for(;0!==p%4&&p<q;)A[n++]=A[p++];p>>=2;n>>=2;for(fa=q>>2;p<fa;)c[n++]=c[p++];p<<=2;n<<=2}for(;p<q;)A[n++]=A[p++]}while(0)}while(0);f=(D(b)-c[e+8>>2]|0)!=(c[e>>2]|0)?10:11;10==f?(aa(m,1,Id,h(1,"i32",x)),k=0):11==f&&(k=A[d+16]=1)}while(0);return k}function hd(a,b,e,d){var f;e=0!=(c[d+8>>2]|0)?1:2;do if(1==e)f=0;else if(2==e){e=w(b,2);a=e&65535;e=
0==(e&65535|0)?3:4;do if(3==e)f=0;else if(4==e){f=U(6*(a&65535));e=U(8);c[d+8>>2]=e;c[c[d+8>>2]>>2]=f;R[c[d+8>>2]+4>>1]=a;e=0;a:for(;;){if(!((e&65535|0)<(a&65535|0))){e=8;break a}var g=w(b,2);R[f+6*(e&65535)>>1]=g&65535;g=w(b,2);R[f+6*(e&65535)+2>>1]=g&65535;g=w(b,2);R[f+6*(e&65535)+4>>1]=g&65535;e+=1}f=1}while(0)}while(0);return f}function id(a,b,e,d){var f,g,h,k,l;a=0!=(c[d+12>>2]|0)?1:2;do if(1==a)f=0;else if(2==a){h=w(b,2)&65535;k=w(b,1)&65535;e=U((k&65535)*(h&65535)<<2);f=U(k&65535);g=U(k&65535);
a=U(20);c[a+4>>2]=g;c[a+8>>2]=f;c[a>>2]=e;R[a+16>>1]=h;R[a+18>>1]=k;c[a+12>>2]=0;c[d+12>>2]=a;a=0;a:for(;;){if(!((a&65535|0)<(k&65535|0)))break a;l=w(b,1)&255;A[f+(a&65535)]=(l&127)+1&255;A[g+(a&65535)]=(0!=(l&128|0)?1:0)&255;a+=1}g=0;a:for(;;){if(!((g&65535|0)<(h&65535|0))){a=14;break a}a=0;b:for(;;){if(!((a&65535|0)<(k&65535|0)))break b;l=w(b,(ja[f+(a&65535)]&255)>>3);var m=e;e=m+4;c[m>>2]=l;a+=1}g+=1}f=1}while(0);return f}function jd(a,b,e,d){var f;a=0==(c[d+12>>2]|0)?1:2;do if(1==a)f=0;else if(2==
a){a=0!=(c[c[d+12>>2]+12>>2]|0)?3:4;do if(3==a)f=0;else if(4==a){a=R[c[d+12>>2]+18>>1];f=U((a&65535)<<2);e=0;a:for(;;){if(!((e&65535|0)<(a&65535|0))){a=8;break a}var g=w(b,2);R[f+((e&65535)<<2)>>1]=g&65535;g=w(b,1);A[f+((e&65535)<<2)+2]=g&255;g=w(b,1);A[f+((e&65535)<<2)+3]=g&255;e+=1}c[c[d+12>>2]+12>>2]=f;f=1}while(0)}while(0);return f}function kd(a,b,e){var d=L;L+=20;g(L<la);var f,k,l,m;f=0!=(a|0)?1:2;a:do if(1==f){if(0==(b|0)){f=2;break a}var p;l=d;f=l+20;p=0;0>p&&(p+=256);for(p=p+(p<<8)+(p<<16)+
16777216*p;0!==l%4&&l<f;)A[l++]=0;l>>=2;for(m=f>>2;l<m;)c[l++]=p;for(l<<=2;l<f;)A[l++]=0;l=c[a>>2];m=a;p=b;var n=d,q=H;f=H;var r=m,s=p,q=L;L+=12;g(L<la);var t=H,v=H,u=H,u=c[r>>2];Ga(u,s,q);t=1783636E3!=(c[q+4>>2]|0)?1:2;1==t?(aa(u,1,Jd,h(1,"i32",x)),v=0):2==t&&(t=218793738!=(w(s,4)|0)?3:4,3==t?(aa(u,1,Kd,h(1,"i32",x)),v=0):4==t&&(t=(D(s)-c[q+8>>2]|0)!=(c[q>>2]|0)?5:6,5==t?(aa(u,1,Ld,h(1,"i32",x)),v=0):6==t&&(v=1)));r=v;L=q;q=0!=(r|0)?2:1;if(2==q)if(q=0!=(nd(m,p)|0)?4:3,4==q)if(q=0!=(bd(m,p,n)|0)?
6:5,6==q){n=m;q=m+76;m+=72;r=L;L+=12;g(L<la);s=H;t=c[n>>2];Ga(t,p,r);b:for(;;)if(s=1785737827!=(c[r+4>>2]|0)?2:3,2==s&&(F(p,c[r>>2]-8),Ga(t,p,r)),1785737827==(c[r+4>>2]|0))break b;c[m>>2]=D(p);c[q>>2]=c[r>>2]-8;L=r;q=8;8==q?f=1:7==q&&(f=0)}else 5==q&&(f=0);else 3==q&&(f=0);else 1==q&&(f=0);f=0!=(f|0)?5:4;do if(5==f){m=ha(c[a+4>>2],b,e);f=0!=(m|0)?7:6;do if(7==f){f=16==(c[a+44>>2]|0)?8:9;8==f?c[m+20>>2]=1:9==f&&(f=17==(c[a+44>>2]|0)?10:11,10==f?c[m+20>>2]=2:11==f&&(f=18==(c[a+44>>2]|0)?12:13,12==f?
c[m+20>>2]=3:13==f&&(c[m+20>>2]=-1)));f=0!=(c[d+8>>2]|0)?17:18;17==f&&ld(m,d);f=0!=(c[d+12>>2]|0)?19:23;19==f&&(f=0!=(c[c[d+12>>2]+12>>2]|0)?21:20,21==f?md(d,m):20==f&&(c[d+12>>2]=0));f=0!=(c[d>>2]|0)?24:25;24==f&&(c[m+28>>2]=c[d>>2],c[d>>2]=0,c[m+32>>2]=c[d+4>>2]);k=m;f=26;break a}else if(6==f){ed(d);aa(l,1,Md,h(1,"i32",x));k=0;f=26;break a}while(0)}else if(4==f){ed(d);aa(l,1,Nd,h(1,"i32",x));k=0;f=26;break a}while(0)}while(0);2==f&&(k=0);L=d;return k}function ld(a,b){var e=L;L+=48;g(L<la);var d,
f,h,k,l,m;f=c[c[b+8>>2]>>2];k=R[c[b+8>>2]+4>>1];h=0;a:for(;;){if(!((h&65535|0)<(k&65535|0)))break a;m=db[f+6*(h&65535)+4>>1];d=0==(db[f+6*(h&65535)+4>>1]&65535|0)?3:4;if(3!=d&&4==d&&(l=R[f+6*(h&65535)>>1],m=(m&65535)-1&65535,d=(l&65535|0)!=(m&65535|0)?5:6,5==d)){var p=e;d=c[a+24>>2]+48*(l&65535);g(I,"memcpy given 48 bytes to copy. Problem with quantum=1 corrections perhaps?");var n,q;n=d+48;if(p%4==d%4){for(;0!==d%4&&d<n;)A[p++]=A[d++];d>>=2;p>>=2;for(q=n>>2;d<q;)c[p++]=c[d++];d<<=2;p<<=2}for(;d<
n;)A[p++]=A[d++];p=c[a+24>>2]+48*(l&65535);d=c[a+24>>2]+48*(m&65535);g(I,"memcpy given 48 bytes to copy. Problem with quantum=1 corrections perhaps?");n=d+48;if(p%4==d%4){for(;0!==d%4&&d<n;)A[p++]=A[d++];d>>=2;p>>=2;for(q=n>>2;d<q;)c[p++]=c[d++];d<<=2;p<<=2}for(;d<n;)A[p++]=A[d++];p=c[a+24>>2]+48*(m&65535);d=e;g(I,"memcpy given 48 bytes to copy. Problem with quantum=1 corrections perhaps?");n=d+48;if(p%4==d%4){for(;0!==d%4&&d<n;)A[p++]=A[d++];d>>=2;p>>=2;for(q=n>>2;d<q;)c[p++]=c[d++];d<<=2;p<<=2}for(;d<
n;)A[p++]=A[d++];R[f+6*(h&65535)+4>>1]=(l&65535)+1&65535;R[f+6*(m&65535)+4>>1]=(db[f+6*(m&65535)>>1]&65535)+1&65535}h+=1}c[b+8>>2]=0;L=e}function md(a,b){var d,e,f,h,k,l,m,p,n,q,r,s,t,v;h=c[c[a+12>>2]+8>>2];k=c[c[a+12>>2]+4>>2];l=c[c[a+12>>2]>>2];m=c[c[a+12>>2]+12>>2];s=R[c[a+12>>2]+18>>1];e=c[b+24>>2];f=U(48*(s&65535));r=0;a:for(;;){if(!((r&65535|0)<(s&65535|0)))break a;t=ja[m+((r&65535)<<2)+3]&255;p=R[m+((r&65535)<<2)>>1];n=f+48*(t&65535);d=e+48*(p&65535);g(I,"memcpy given 48 bytes to copy. Problem with quantum=1 corrections perhaps?");
q=d+48;if(n%4==d%4){for(;0!==d%4&&d<q;)A[n++]=A[d++];d>>=2;n>>=2;for(v=q>>2;d<v;)c[n++]=c[d++];d<<=2;n<<=2}for(;d<q;)A[n++]=A[d++];d=0==(ja[m+((r&65535)<<2)+2]&255|0)?3:4;3==d?c[e+48*(p&65535)+44>>2]=0:4==d&&(p=U(c[e+48*(p&65535)+8>>2]*c[e+48*(p&65535)+12>>2]<<2),c[f+48*(t&65535)+44>>2]=p,c[f+48*(t&65535)+24>>2]=ja[h+(r&65535)]&255,c[f+48*(t&65535)+32>>2]=ja[k+(r&65535)]&255);r+=1}h=(db[c[a+12>>2]+16>>1]&65535)-1;r=0;a:for(;;){if(!((r&65535|0)<(s&65535|0)))break a;d=0==(ja[m+((r&65535)<<2)+2]&255|
0)?9:10;do if(9!=d&&10==d)b:for(p=R[m+((r&65535)<<2)>>1],t=ja[m+((r&65535)<<2)+3]&255,k=c[e+48*(p&65535)+44>>2],p=c[f+48*(t&65535)+44>>2],q=c[f+48*(t&65535)+8>>2]*c[f+48*(t&65535)+12>>2],n=0;;){if(!(n>>>0<q>>>0)){d=19;break b}v=c[k+(n<<2)>>2];d=0>(c[k+(n<<2)>>2]|0)?13:14;13==d?v=0:14==d&&(d=(v|0)>(h|0)?15:16,15==d&&(v=h));c[p+(n<<2)>>2]=c[l+(v*(s&65535)+(t&65535)<<2)>>2];n+=1}while(0);r+=1}q=c[b+16>>2];r=0;a:for(;;){if(!((r&65535)>>>0<q>>>0))break a;r+=1}c[b+24>>2]=f;c[b+16>>2]=s&65535;c[a+12>>2]=
0}function nd(a,b){var d=L;L+=12;g(L<la);var e,f,k;k=c[a>>2];Ga(k,b,d);e=1718909296!=(c[d+4>>2]|0)?1:2;do if(1==e)aa(k,1,Od,h(1,"i32",x)),f=0;else if(2==e){e=w(b,4);c[a+52>>2]=e;e=w(b,4);c[a+56>>2]=e;c[a+60>>2]=(c[d>>2]-16|0)/4|0;e=U(c[a+60>>2]<<2);c[a+64>>2]=e;e=0;a:for(;;){if(!((e|0)<(c[a+60>>2]|0)))break a;var l=w(b,4);c[c[a+64>>2]+(e<<2)>>2]=l;e+=1}e=(D(b)-c[d+8>>2]|0)!=(c[d>>2]|0)?7:8;7==e?(aa(k,1,Pd,h(1,"i32",x)),f=0):8==e&&(f=1)}while(0);L=d;return f}function od(a,b,d,e){var f,g,h,k;f=0;a:for(;;){if(!((f|
0)<(e|0)))break a;g=c[a+(f<<2)>>2];h=c[b+(f<<2)>>2];k=c[d+(f<<2)>>2];g-=h+k>>2;k+=g;h+=g;c[a+(f<<2)>>2]=k;c[b+(f<<2)>>2]=g;c[d+(f<<2)>>2]=h;f+=1}}function pd(c,a,b,d){var e,f,g,h,k;e=0;a:for(;;){if(!((e|0)<(d|0)))break a;f=S[c+(e<<2)>>2];g=S[a+(e<<2)>>2];h=S[b+(e<<2)>>2];k=f+1.4019999504089355*h;h=f-.3441300094127655*g-.714139997959137*h;f+=1.7719999551773071*g;S[c+(e<<2)>>2]=k;S[a+(e<<2)>>2]=h;S[b+(e<<2)>>2]=f;e+=1}}function qb(c,a){var b,d;b=a;d=w(c,1)&255;a:for(;;){if(1!=((d&255)>>7|0))break a;
b<<=7;b|=d&127;d=w(c,1)&255}return b=b<<7|d&127}function oc(a,b,d){var e,f,g,k;k=g=0;c[d>>2]=0;c[d+4>>2]=0;c[d+16>>2]=0;c[d+20>>2]=0;f=w(b,1)&255;e=(f&255)>>5&3;e=0==e?1:1==e?2:2==e?3:3==e?4:5;5!=e&&(1==e?aa(a,1,Qd,h(1,"i32",x)):2==e?k=g=0:3==e?(g=1,k=0):4==e&&(k=g=1));7==(1==((f&255)>>4&1|0)?7:8)&&(c[d+4>>2]=1);c[d>>2]|=f&15;9==(1==((f&255)>>7|0)?9:10)&&(a=qb(b,c[d>>2]),c[d>>2]=a);11==(1==(g&255|0)?11:12)&&(c[d+8>>2]=0,g=qb(b,c[d+8>>2]),c[d+8>>2]=g);13==(1==(k&255|0)?13:14)&&(c[d+12>>2]=0,k=qb(b,
c[d+12>>2]),c[d+12>>2]=k);k=qb(b,c[d+16>>2]);c[d+16>>2]=k;k=qb(b,c[d+20>>2]);c[d+20>>2]=k;e=1==(c[d+8>>2]&1|0)?15:16;15==e&&(c[d+24>>2]=0,b=qb(b,c[d+24>>2]),c[d+24>>2]=b)}function fd(a){var b;b=0;a:for(;;){if(!(19>(b|0)))break a;c[a+24+(b<<2)>>2]=s;b+=1}}function rb(a,b,d){c[a+24+(b<<2)>>2]=s+(0+(d<<1)<<4)}function Rd(a,b,d){c[a+100>>2]=a+24;c[a+16>>2]=b;c[a+20>>2]=b+d;c[a+12>>2]=b;b=0==(d|0)?1:2;1==b?c[a>>2]=16711680:2==b&&(c[a>>2]=(ja[c[a+12>>2]]&255)<<16);uc(a);c[a>>2]<<=7;c[a+8>>2]-=7;c[a+4>>
2]=32768}function uc(a){var b,d;b=(c[a+12>>2]|0)!=(c[a+20>>2]|0)?1:11;1==b?(b=(c[a+12>>2]+1|0)!=(c[a+20>>2]|0)?2:3,2==b?d=ja[c[a+12>>2]+1]&255:3==b&&(d=255),b=255==(ja[c[a+12>>2]]&255|0)?5:9,5==b?(b=143<d>>>0?6:7,6==b?(c[a>>2]+=65280,c[a+8>>2]=8):7==b&&(c[a+12>>2]+=1,c[a>>2]+=d<<9,c[a+8>>2]=7)):9==b&&(c[a+12>>2]+=1,c[a>>2]+=d<<8,c[a+8>>2]=8)):11==b&&(c[a>>2]+=65280,c[a+8>>2]=8)}function Sd(a){var b,d;b=pa[a+4>>2]>>>0<pa[c[c[a+100>>2]>>2]>>2]>>>0?1:2;1==b?(c[a+4>>2]=c[c[c[a+100>>2]>>2]>>2],d=c[c[c[a+
100>>2]>>2]+4>>2],c[c[a+100>>2]>>2]=c[c[c[a+100>>2]>>2]+8>>2]):2==b&&(c[a+4>>2]=c[c[c[a+100>>2]>>2]>>2],d=1-c[c[c[a+100>>2]>>2]+4>>2],c[c[a+100>>2]>>2]=c[c[c[a+100>>2]>>2]+12>>2]);return d}function Td(a){var b;a:for(;;)if(b=0==(c[a+8>>2]|0)?2:3,2==b&&uc(a),c[a+4>>2]<<=1,c[a>>2]<<=1,c[a+8>>2]-=1,!(32768>pa[a+4>>2]>>>0))break a}function Ud(a){var b,d;b=pa[a+4>>2]>>>0<pa[c[c[a+100>>2]>>2]>>2]>>>0?1:2;1==b?(d=1-c[c[c[a+100>>2]>>2]+4>>2],c[c[a+100>>2]>>2]=c[c[c[a+100>>2]>>2]+12>>2]):2==b&&(d=c[c[c[a+100>>
2]>>2]+4>>2],c[c[a+100>>2]>>2]=c[c[c[a+100>>2]>>2]+8>>2]);return d}function vc(a,b){var d;d=0!=(a|0)?1:8;a:do if(1==d){if(0==(b|0))break a;d=c[a+12>>2];d=0==d?3:1==d?3:2==d?4:-1==d?5:6;b:do if(3==d){Aa(c[a+16>>2],b);d=7;break b}else if(4==d){Aa(c[c[a+20>>2]+4>>2],b);d=7;break b}else if(5==d){d=6;break b}while(0)}while(0)}function sa(a){var b,d;c[a+4>>2]-=c[c[c[a+100>>2]>>2]>>2];b=pa[a>>2]>>>16>>>0<pa[c[c[a+100>>2]>>2]>>2]>>>0?1:2;1==b?(d=Sd(a),Td(a)):2==b&&(c[a>>2]-=c[c[c[a+100>>2]>>2]>>2]<<16,b=
0==(c[a+4>>2]&32768|0)?3:4,3==b?(d=Ud(a),Td(a)):4==b&&(d=c[c[c[a+100>>2]>>2]+4>>2]));return d}function Wb(a){var b,d,e;e=wa(1,28);b=0!=(e|0)?2:1;a:do if(2==b){c[e+8>>2]=1;b=a;b=0==b?3:1==b?3:2==b?6:-1==b?9:10;b:do if(3==b){b=Ja(e);c[e+16>>2]=b;b=0!=(c[e+16>>2]|0)?5:4;do if(5==b){b=11;break b}else if(4==b){d=0;break a}while(0)}else if(6==b){b=e;var f=H,g=H,h=H,h=wa(1,80),f=0!=(h|0)?1:4;c:do if(1==f){c[h>>2]=b;f=Ja(b);c[h+4>>2]=f;f=0==(c[h+4>>2]|0)?2:3;do if(2==f){g=0;f=5;break c}else if(3==f){f=4;
break c}while(0)}while(0);4==f&&(g=h);c[e+20>>2]=g;b=0!=(c[e+20>>2]|0)?8:7;do if(8==b){b=11;break b}else if(7==b){d=0;break a}while(0)}else if(9==b){b=10;break b}while(0);10==b?d=0:11==b&&(c[e+12>>2]=a,d=e)}else 1==b&&(d=0);while(0);return d}function ib(a,b,d){var e,f;e=0!=(a|0)?1:9;a:do if(1==e){if(0==(b|0)){e=9;break a}e=c[a+12>>2];e=0==e?3:1==e?4:2==e?5:-1==e?6:7;do if(3==e){f=ha(c[a+16>>2],b,d);e=10;break a}else if(4==e){f=Ka(c[a+16>>2],b);e=10;break a}else if(5==e){f=kd(c[a+20>>2],b,d);e=10;
break a}while(0);e=9;break a}while(0);9==e&&(f=0);return f}function Vd(c,a){var b;b=(c|0)>(a|0)?1:2;if(1==b)var d=c;else 2==b&&(d=a);return d}function Ua(c,a){var b;b=(c|0)<(a|0)?1:2;if(1==b)var d=c;else 2==b&&(d=a);return d}function Wd(a,b,d){var e,f,g,h,k,l,m,p,n,q,r,s,t,v,u,w,x,E,y,A,z,D,C;p=c[b+108>>2]+5588*d;m=wa(c[p+420>>2]+1,232);e=0!=(m|0)?2:1;do if(2==e){l=0;a:for(;;){if(!((l|0)<(c[p+420>>2]+1|0))){e=39;break a}q=n=0;g=(d|0)%(c[b+68>>2]|0);h=(d|0)/(c[b+68>>2]|0)|0;c[m+232*l+200>>2]=Vd(c[b+
48>>2]+g*c[b+56>>2],c[a>>2]);c[m+232*l+204>>2]=Vd(c[b+52>>2]+h*c[b+60>>2],c[a+4>>2]);c[m+232*l+208>>2]=Ua(c[b+48>>2]+(g+1)*c[b+56>>2],c[a+8>>2]);c[m+232*l+212>>2]=Ua(c[b+52>>2]+(h+1)*c[b+60>>2],c[a+12>>2]);c[m+232*l+192>>2]=c[a+16>>2];g=wa(c[a+16>>2],16);c[m+232*l+196>>2]=g;if(0==(c[m+232*l+196>>2]|0)){e=5;break a}g=0;b:for(;;){if(!((g|0)<(c[m+192>>2]|0)))break b;u=c[m+232*l+196>>2]+(g<<4);h=c[p+5584>>2]+1076*g;c[u>>2]=c[c[a+24>>2]+48*g>>2];c[u+4>>2]=c[c[a+24>>2]+48*g+4>>2];c[u+8>>2]=c[h+4>>2];k=
wa(c[u+8>>2],16);c[u+12>>2]=k;if(0==(c[u+12>>2]|0)){e=9;break a}r=ta(c[m+200>>2],c[u>>2]);s=ta(c[m+204>>2],c[u+4>>2]);t=ta(c[m+208>>2],c[u>>2]);v=ta(c[m+212>>2],c[u+4>>2]);e=(c[u+8>>2]|0)>(n|0)?11:12;11==e&&(n=c[u+8>>2]);k=0;c:for(;;){if(!((k|0)<(c[u+8>>2]|0)))break c;C=c[u+12>>2]+(k<<4);e=0!=(c[h>>2]&1|0)?15:16;15==e?(c[C>>2]=c[h+812+(k<<2)>>2],c[C+4>>2]=c[h+944+(k<<2)>>2]):16==e&&(c[C>>2]=15,c[C+4>>2]=15);w=c[u+8>>2]-1-k;e=sb(r,w);x=sb(s,w);E=sb(t,w);w=sb(v,w);y=e>>(c[C>>2]|0)<<c[C>>2];A=x>>(c[C+
4>>2]|0)<<c[C+4>>2];z=sb(E,c[C>>2])<<c[C>>2];D=sb(w,c[C+4>>2])<<c[C+4>>2];e=(e|0)==(E|0)?18:19;if(18==e)var B=0;else 19==e&&(B=z-y>>(c[C>>2]|0));c[C+8>>2]=B;e=(x|0)==(w|0)?21:22;if(21==e)var F=0;else 22==e&&(F=D-A>>(c[C+4>>2]|0));c[C+12>>2]=F;e=(c[C+8>>2]*c[C+12>>2]|0)>(q|0)?24:25;24==e&&(q=c[C+8>>2]*c[C+12>>2]);k+=1}g+=1}c[m+232*l+20>>2]=1;c[m+232*l+16>>2]=q*c[m+232*l+20>>2];c[m+232*l+12>>2]=c[a+16>>2]*c[m+232*l+16>>2];c[m+232*l+8>>2]=n*c[m+232*l+12>>2];e=0==(l|0)?30:33;do if(30==e){if(g=wa(c[a+
16>>2]*n*c[p+12>>2]*q,2),c[m+232*l+4>>2]=g,0==(c[m+232*l+4>>2]|0)){e=31;break a}}else 33==e&&(c[m+232*l+4>>2]=c[m+232*(l-1)+4>>2]);while(0);e=0==(c[p+424>>2]|0)?35:36;35==e?(c[m+232*l+40>>2]=1,c[m+232*l+44>>2]=0,c[m+232*l+44+4>>2]=0,c[m+232*l+44+8>>2]=c[p+12>>2],c[m+232*l+44+12>>2]=n,c[m+232*l+44+16>>2]=c[a+16>>2],c[m+232*l+44+36>>2]=c[p+8>>2]):36==e&&(c[m+232*l+40>>2]=1,c[m+232*l+44>>2]=c[p+428+148*l>>2],c[m+232*l+44+4>>2]=c[p+428+148*l+4>>2],c[m+232*l+44+8>>2]=c[p+428+148*l+8>>2],c[m+232*l+44+12>>
2]=c[p+428+148*l+12>>2],c[m+232*l+44+16>>2]=c[p+428+148*l+16>>2],c[m+232*l+44+36>>2]=c[p+428+148*l+36>>2]);c[m+232*l+44+20>>2]=0;c[m+232*l+44+24>>2]=0;c[m+232*l+44+28>>2]=q;l+=1}39==e?f=m:5==e?f=0:9==e?f=0:31==e&&(f=0)}else 1==e&&(f=0);while(0);return f}function ta(c,a){return(c+a-1|0)/(a|0)|0}function sb(c,a){return c+(1<<a)-1>>(a|0)}function Xd(a){var b,d,e,f,g;g=e=0;b=0!=(c[a+40>>2]|0)?2:1;a:do if(2==b){c[a+40>>2]=0;c[a+36>>2]=c[a+64>>2];b=4;break a}else if(1==b){e=c[a+196>>2]+(c[a+24>>2]<<4);
b=18;break a}while(0);a:for(;;){b:do if(4==b){if(!((c[a+36>>2]|0)<(c[a+52>>2]|0))){b=26;break a}c[a+28>>2]=c[a+44>>2];b=6;break b}else if(18==b){c[a+32>>2]+=1;b=14;break b}while(0);b:for(;;){c:do if(6==b){if(!((c[a+28>>2]|0)<(c[a+56>>2]|0))){b=24;break b}c[a+24>>2]=c[a+48>>2];b=8;break c}else if(14==b){if((c[a+32>>2]|0)<(c[a+72>>2]|0)){b=15;break b}b=21;break c}while(0);c:for(;;){do if(8==b){if(!((c[a+24>>2]|0)<(c[a+60>>2]|0))){b=22;break c}e=c[a+196>>2]+(c[a+24>>2]<<4);if(!((c[a+28>>2]|0)>=(c[e+
8>>2]|0))){b=11;break c}b=21;continue c}else if(21==b){c[a+24>>2]+=1;b=8;continue c}while(0)}do if(22==b){c[a+28>>2]+=1;b=6;continue b}else if(11==b){f=c[e+12>>2]+(c[a+28>>2]<<4);b=0!=A[a]<<24>>24?13:12;12==b&&(c[a+72>>2]=c[f+8>>2]*c[f+12>>2]);c[a+32>>2]=c[a+68>>2];b=14;continue b}while(0)}do if(24==b){c[a+36>>2]+=1;b=4;continue a}else if(15==b){g=c[a+36>>2]*c[a+8>>2]+c[a+28>>2]*c[a+12>>2]+c[a+24>>2]*c[a+16>>2]+c[a+32>>2]*c[a+20>>2];if(0==R[c[a+4>>2]+(g<<1)>>1]<<16>>16){b=16;break a}b=18;continue a}while(0)}26==
b?d=0:16==b&&(d=R[c[a+4>>2]+(g<<1)>>1]=1);return d}function Yd(a){var b,d,e,f,g;g=e=0;b=0!=(c[a+40>>2]|0)?2:1;a:do if(2==b){c[a+40>>2]=0;c[a+28>>2]=c[a+44>>2];b=4;break a}else if(1==b){e=c[a+196>>2]+(c[a+24>>2]<<4);b=18;break a}while(0);a:for(;;){b:do if(4==b){if(!((c[a+28>>2]|0)<(c[a+56>>2]|0))){b=26;break a}c[a+36>>2]=c[a+64>>2];b=6;break b}else if(18==b){c[a+32>>2]+=1;b=14;break b}while(0);b:for(;;){c:do if(6==b){if(!((c[a+36>>2]|0)<(c[a+52>>2]|0))){b=24;break b}c[a+24>>2]=c[a+48>>2];b=8;break c}else if(14==
b){if((c[a+32>>2]|0)<(c[a+72>>2]|0)){b=15;break b}b=21;break c}while(0);c:for(;;){do if(8==b){if(!((c[a+24>>2]|0)<(c[a+60>>2]|0))){b=22;break c}e=c[a+196>>2]+(c[a+24>>2]<<4);if(!((c[a+28>>2]|0)>=(c[e+8>>2]|0))){b=11;break c}b=21;continue c}else if(21==b){c[a+24>>2]+=1;b=8;continue c}while(0)}do if(22==b){c[a+36>>2]+=1;b=6;continue b}else if(11==b){f=c[e+12>>2]+(c[a+28>>2]<<4);b=0!=A[a]<<24>>24?13:12;12==b&&(c[a+72>>2]=c[f+8>>2]*c[f+12>>2]);c[a+32>>2]=c[a+68>>2];b=14;continue b}while(0)}do if(24==
b){c[a+28>>2]+=1;b=4;continue a}else if(15==b){g=c[a+36>>2]*c[a+8>>2]+c[a+28>>2]*c[a+12>>2]+c[a+24>>2]*c[a+16>>2]+c[a+32>>2]*c[a+20>>2];if(0==R[c[a+4>>2]+(g<<1)>>1]<<16>>16){b=16;break a}b=18;continue a}while(0)}26==b?d=0:16==b&&(d=R[c[a+4>>2]+(g<<1)>>1]=1);return d}function Zd(a){var b,d,e,f,g,h,k,l,m,p,n,q;g=f=e=0;b=0!=(c[a+40>>2]|0)?2:1;a:do if(2==b){c[a+40>>2]=0;c[a+224>>2]=0;h=c[a+228>>2]=0;b:for(;;){if(!((h|0)<(c[a+192>>2]|0)))break b;e=c[a+196>>2]+(h<<4);k=0;c:for(;;){if(!((k|0)<(c[e+8>>2]|
0)))break c;f=c[e+12>>2]+(k<<4);l=c[e>>2]*(1<<c[f>>2]+c[e+8>>2]-1-k);m=c[e+4>>2]*(1<<c[f+4>>2]+c[e+8>>2]-1-k);b=0!=(c[a+224>>2]|0)?8:7;if(8==b)var r=Ua(c[a+224>>2],l);else 7==b&&(r=l);c[a+224>>2]=r;b=0!=(c[a+228>>2]|0)?11:10;if(11==b)var s=Ua(c[a+228>>2],m);else 10==b&&(s=m);c[a+228>>2]=s;k+=1}h+=1}b=0!=A[a]<<24>>24?19:18;18==b&&(c[a+104>>2]=c[a+204>>2],c[a+96>>2]=c[a+200>>2],c[a+108>>2]=c[a+212>>2],c[a+100>>2]=c[a+208>>2]);c[a+28>>2]=c[a+44>>2];b=20;break a}else if(1==b){b=48;break a}while(0);a:for(;;){b:do if(20==
b){if(!((c[a+28>>2]|0)<(c[a+56>>2]|0))){b=58;break a}c[a+220>>2]=c[a+104>>2];b=22;break b}else if(48==b){c[a+36>>2]+=1;b=44;break b}while(0);b:for(;;){c:do if(22==b){if(!((c[a+220>>2]|0)<(c[a+108>>2]|0))){b=56;break b}c[a+216>>2]=c[a+96>>2];b=24;break c}else if(44==b){if((c[a+36>>2]|0)<(c[a+52>>2]|0)){b=45;break b}b=51;break c}while(0);c:for(;;){do if(24==b){if(!((c[a+216>>2]|0)<(c[a+100>>2]|0))){b=54;break c}c[a+24>>2]=c[a+48>>2]}else 51==b&&(c[a+24>>2]+=1);while(0);b=(c[a+24>>2]|0)<(c[a+60>>2]|
0)?27:52;do if(27==b){e=c[a+196>>2]+(c[a+24>>2]<<4);b=(c[a+28>>2]|0)>=(c[e+8>>2]|0)?28:29;do if(28==b){b=51;continue c}else if(29==b){f=c[e+12>>2]+(c[a+28>>2]<<4);p=c[e+8>>2]-1-c[a+28>>2];n=ta(c[a+200>>2],c[e>>2]<<p);q=ta(c[a+204>>2],c[e+4>>2]<<p);h=ta(c[a+208>>2],c[e>>2]<<p);k=ta(c[a+212>>2],c[e+4>>2]<<p);l=c[f>>2]+p;m=c[f+4>>2]+p;b=0==((c[a+220>>2]|0)%(c[e+4>>2]<<m|0)|0)?33:30;d:do if(30==b){b=(c[a+220>>2]|0)==(c[a+204>>2]|0)?31:32;do if(31==b&&0!=((q<<p|0)%(1<<m|0)|0))break d;while(0);b=51;continue c}while(0);
b=0==((c[a+216>>2]|0)%(c[e>>2]<<l|0)|0)?37:34;d:do if(34==b){b=(c[a+216>>2]|0)==(c[a+200>>2]|0)?35:36;do if(35==b&&0!=((n<<p|0)%(1<<l|0)|0))break d;while(0);b=51;continue c}while(0);b=0==(c[f+8>>2]|0)?39:38;d:do if(38==b){if(0==(c[f+12>>2]|0))break d;b=(n|0)==(h|0)?42:41;do if(41==b&&(q|0)!=(k|0)){b=43;break c}while(0);b=51;continue c}while(0);b=51;continue c}while(0)}else if(52==b){c[a+216>>2]+=c[a+224>>2]-(c[a+216>>2]|0)%(c[a+224>>2]|0);b=24;continue c}while(0)}do if(54==b){c[a+220>>2]+=c[a+228>>
2]-(c[a+220>>2]|0)%(c[a+228>>2]|0);b=22;continue b}else if(43==b){b=(ta(c[a+216>>2],c[e>>2]<<p)>>(c[f>>2]|0))-(n>>(c[f>>2]|0));h=(ta(c[a+220>>2],c[e+4>>2]<<p)>>(c[f+4>>2]|0))-(q>>(c[f+4>>2]|0));c[a+32>>2]=b+h*c[f+8>>2];c[a+36>>2]=c[a+64>>2];b=44;continue b}while(0)}do if(56==b){c[a+28>>2]+=1;b=20;continue a}else if(45==b){g=c[a+36>>2]*c[a+8>>2]+c[a+28>>2]*c[a+12>>2]+c[a+24>>2]*c[a+16>>2]+c[a+32>>2]*c[a+20>>2];if(0==R[c[a+4>>2]+(g<<1)>>1]<<16>>16){b=46;break a}b=48;continue a}while(0)}58==b?d=0:46==
b&&(d=R[c[a+4>>2]+(g<<1)>>1]=1);return d}function $d(a){var b,d,e,f,g,h,k,l,m,p,n,q;g=f=e=0;b=0!=(c[a+40>>2]|0)?2:1;a:do if(2==b){c[a+40>>2]=0;c[a+224>>2]=0;h=c[a+228>>2]=0;b:for(;;){if(!((h|0)<(c[a+192>>2]|0)))break b;e=c[a+196>>2]+(h<<4);k=0;c:for(;;){if(!((k|0)<(c[e+8>>2]|0)))break c;f=c[e+12>>2]+(k<<4);l=c[e>>2]*(1<<c[f>>2]+c[e+8>>2]-1-k);m=c[e+4>>2]*(1<<c[f+4>>2]+c[e+8>>2]-1-k);b=0!=(c[a+224>>2]|0)?8:7;if(8==b)var r=Ua(c[a+224>>2],l);else 7==b&&(r=l);c[a+224>>2]=r;b=0!=(c[a+228>>2]|0)?11:10;
if(11==b)var s=Ua(c[a+228>>2],m);else 10==b&&(s=m);c[a+228>>2]=s;k+=1}h+=1}b=0!=A[a]<<24>>24?19:18;18==b&&(c[a+104>>2]=c[a+204>>2],c[a+96>>2]=c[a+200>>2],c[a+108>>2]=c[a+212>>2],c[a+100>>2]=c[a+208>>2]);c[a+220>>2]=c[a+104>>2];b=20;break a}else if(1==b){e=c[a+196>>2]+(c[a+24>>2]<<4);b=46;break a}while(0);a:for(;;){b:do if(20==b){if(!((c[a+220>>2]|0)<(c[a+108>>2]|0))){b=56;break a}c[a+216>>2]=c[a+96>>2];b=22;break b}else if(46==b){c[a+36>>2]+=1;b=42;break b}while(0);b:for(;;){c:do if(22==b){if(!((c[a+
216>>2]|0)<(c[a+100>>2]|0))){b=54;break b}c[a+24>>2]=c[a+48>>2];b=24;break c}else if(42==b){if((c[a+36>>2]|0)<(c[a+52>>2]|0)){b=43;break b}b=49;break c}while(0);c:for(;;){do if(24==b){if(!((c[a+24>>2]|0)<(c[a+60>>2]|0))){b=52;break c}e=c[a+196>>2]+(c[a+24>>2]<<4);c[a+28>>2]=c[a+44>>2]}else 49==b&&(c[a+28>>2]+=1);while(0);b=(c[a+28>>2]|0)<(Ua(c[a+56>>2],c[e+8>>2])|0)?27:50;do if(27==b){f=c[e+12>>2]+(c[a+28>>2]<<4);p=c[e+8>>2]-1-c[a+28>>2];n=ta(c[a+200>>2],c[e>>2]<<p);q=ta(c[a+204>>2],c[e+4>>2]<<p);
h=ta(c[a+208>>2],c[e>>2]<<p);k=ta(c[a+212>>2],c[e+4>>2]<<p);l=c[f>>2]+p;m=c[f+4>>2]+p;b=0==((c[a+220>>2]|0)%(c[e+4>>2]<<m|0)|0)?31:28;d:do if(28==b){b=(c[a+220>>2]|0)==(c[a+204>>2]|0)?29:30;do if(29==b&&0!=((q<<p|0)%(1<<m|0)|0))break d;while(0);b=49;continue c}while(0);b=0==((c[a+216>>2]|0)%(c[e>>2]<<l|0)|0)?35:32;d:do if(32==b){b=(c[a+216>>2]|0)==(c[a+200>>2]|0)?33:34;do if(33==b&&0!=((n<<p|0)%(1<<l|0)|0))break d;while(0);b=49;continue c}while(0);b=0==(c[f+8>>2]|0)?37:36;d:do if(36==b){if(0==(c[f+
12>>2]|0))break d;b=(n|0)==(h|0)?40:39;do if(39==b&&(q|0)!=(k|0)){b=41;break c}while(0);b=49;continue c}while(0);b=49;continue c}else if(50==b){c[a+24>>2]+=1;b=24;continue c}while(0)}do if(52==b){c[a+216>>2]+=c[a+224>>2]-(c[a+216>>2]|0)%(c[a+224>>2]|0);b=22;continue b}else if(41==b){b=(ta(c[a+216>>2],c[e>>2]<<p)>>(c[f>>2]|0))-(n>>(c[f>>2]|0));h=(ta(c[a+220>>2],c[e+4>>2]<<p)>>(c[f+4>>2]|0))-(q>>(c[f+4>>2]|0));c[a+32>>2]=b+h*c[f+8>>2];c[a+36>>2]=c[a+64>>2];b=42;continue b}while(0)}do if(54==b){c[a+
220>>2]+=c[a+228>>2]-(c[a+220>>2]|0)%(c[a+228>>2]|0);b=20;continue a}else if(43==b){g=c[a+36>>2]*c[a+8>>2]+c[a+28>>2]*c[a+12>>2]+c[a+24>>2]*c[a+16>>2]+c[a+32>>2]*c[a+20>>2];if(0==R[c[a+4>>2]+(g<<1)>>1]<<16>>16){b=44;break a}b=46;continue a}while(0)}56==b?d=0:44==b&&(d=R[c[a+4>>2]+(g<<1)>>1]=1);return d}function ae(a){var b,e,d,f,g,h,k,l,m,p,n,q;g=f=d=0;b=0!=(c[a+40>>2]|0)?2:1;a:do if(2==b){c[a+40>>2]=0;c[a+24>>2]=c[a+48>>2];b=4;break a}else if(1==b){d=c[a+196>>2]+(c[a+24>>2]<<4);b=42;break a}while(0);
a:for(;;){b:do if(4==b){if(!((c[a+24>>2]|0)<(c[a+60>>2]|0))){b=52;break a}d=c[a+196>>2]+(c[a+24>>2]<<4);c[a+224>>2]=0;h=c[a+228>>2]=0;c:for(;;){if(!((h|0)<(c[d+8>>2]|0)))break c;f=c[d+12>>2]+(h<<4);k=c[d>>2]*(1<<c[f>>2]+c[d+8>>2]-1-h);l=c[d+4>>2]*(1<<c[f+4>>2]+c[d+8>>2]-1-h);b=0!=(c[a+224>>2]|0)?9:8;if(9==b)var r=Ua(c[a+224>>2],k);else 8==b&&(r=k);c[a+224>>2]=r;b=0!=(c[a+228>>2]|0)?12:11;if(12==b)var s=Ua(c[a+228>>2],l);else 11==b&&(s=l);c[a+228>>2]=s;h+=1}b=0!=A[a]<<24>>24?17:16;16==b&&(c[a+104>>
2]=c[a+204>>2],c[a+96>>2]=c[a+200>>2],c[a+108>>2]=c[a+212>>2],c[a+100>>2]=c[a+208>>2]);c[a+220>>2]=c[a+104>>2];b=18;break b}else if(42==b){c[a+36>>2]+=1;b=38;break b}while(0);b:for(;;){c:do if(18==b){if(!((c[a+220>>2]|0)<(c[a+108>>2]|0))){b=50;break b}c[a+216>>2]=c[a+96>>2];b=20;break c}else if(38==b){if((c[a+36>>2]|0)<(c[a+52>>2]|0)){b=39;break b}b=45;break c}while(0);c:for(;;){do if(20==b){if(!((c[a+216>>2]|0)<(c[a+100>>2]|0))){b=48;break c}c[a+28>>2]=c[a+44>>2]}else 45==b&&(c[a+28>>2]+=1);while(0);
b=(c[a+28>>2]|0)<(Ua(c[a+56>>2],c[d+8>>2])|0)?23:46;do if(23==b){f=c[d+12>>2]+(c[a+28>>2]<<4);m=c[d+8>>2]-1-c[a+28>>2];p=ta(c[a+200>>2],c[d>>2]<<m);n=ta(c[a+204>>2],c[d+4>>2]<<m);h=ta(c[a+208>>2],c[d>>2]<<m);k=ta(c[a+212>>2],c[d+4>>2]<<m);l=c[f>>2]+m;q=c[f+4>>2]+m;b=0==((c[a+220>>2]|0)%(c[d+4>>2]<<q|0)|0)?27:24;d:do if(24==b){b=(c[a+220>>2]|0)==(c[a+204>>2]|0)?25:26;do if(25==b&&0!=((n<<m|0)%(1<<q|0)|0))break d;while(0);b=45;continue c}while(0);b=0==((c[a+216>>2]|0)%(c[d>>2]<<l|0)|0)?31:28;d:do if(28==
b){b=(c[a+216>>2]|0)==(c[a+200>>2]|0)?29:30;do if(29==b&&0!=((p<<m|0)%(1<<l|0)|0))break d;while(0);b=45;continue c}while(0);b=0==(c[f+8>>2]|0)?33:32;d:do if(32==b){if(0==(c[f+12>>2]|0))break d;b=(p|0)==(h|0)?36:35;do if(35==b&&(n|0)!=(k|0)){b=37;break c}while(0);b=45;continue c}while(0);b=45;continue c}else if(46==b){c[a+216>>2]+=c[a+224>>2]-(c[a+216>>2]|0)%(c[a+224>>2]|0);b=20;continue c}while(0)}do if(48==b){c[a+220>>2]+=c[a+228>>2]-(c[a+220>>2]|0)%(c[a+228>>2]|0);b=18;continue b}else if(37==b){b=
(ta(c[a+216>>2],c[d>>2]<<m)>>(c[f>>2]|0))-(p>>(c[f>>2]|0));h=(ta(c[a+220>>2],c[d+4>>2]<<m)>>(c[f+4>>2]|0))-(n>>(c[f+4>>2]|0));c[a+32>>2]=b+h*c[f+8>>2];c[a+36>>2]=c[a+64>>2];b=38;continue b}while(0)}do if(50==b){c[a+24>>2]+=1;b=4;continue a}else if(39==b){g=c[a+36>>2]*c[a+8>>2]+c[a+28>>2]*c[a+12>>2]+c[a+24>>2]*c[a+16>>2]+c[a+32>>2]*c[a+20>>2];if(0==R[c[a+4>>2]+(g<<1)>>1]<<16>>16){b=40;break a}b=42;continue a}while(0)}52==b?e=0:40==b&&(e=R[c[a+4>>2]+(g<<1)>>1]=1);return e}function Xb(a){var b;b=0==
(c[a+4>>2]|0)?1:7;1==b&&(c[a+4>>2]=8,b=(c[a+12>>2]|0)==(c[a+8>>2]|0)?2:3,2==b?A[a]=-1:3==b&&(b=255==(ja[a]&255|0)?4:5,4==b&&(c[a+4>>2]=7),A[a]=A[c[a+20>>2]+c[a+12>>2]],c[a+12>>2]+=1));c[a+4>>2]-=1;return(ja[a]&255)>>(c[a+4>>2]|0)&1}function be(a,b,d){var e,f,g,h;g=b*d;e=(g|0)>(c[a+28>>2]|0)?1:4;a:do if(1==e){e=Db(g<<2);c[a+12>>2]=e;e=0!=(c[a+12>>2]|0)?3:2;do if(3==e){c[a+28>>2]=g;e=4;break a}else if(2==e){f=0;e=9;break a}while(0)}while(0);a:do if(4==e){var k,l;f=c[a+12>>2];h=f+(g<<2);l=0;0>l&&(l+=
256);for(l=l+(l<<8)+(l<<16)+16777216*l;0!==f%4&&f<h;)A[f++]=0;f>>=2;for(k=h>>2;f<k;)c[f++]=l;for(f<<=2;f<h;)A[f++]=0;c[a+36>>2]=b+2;h=c[a+36>>2]*(d+2);e=(h|0)>(c[a+32>>2]|0)?5:8;do if(5==e){e=Db(h<<1);c[a+16>>2]=e;e=0!=(c[a+16>>2]|0)?7:6;do if(7==e)c[a+32>>2]=h;else if(6==e){f=0;break a}while(0)}while(0);f=c[a+16>>2];h=f+(h<<1);l=0;0>l&&(l+=256);for(l=l+(l<<8)+(l<<16)+16777216*l;0!==f%4&&f<h;)A[f++]=0;f>>=2;for(k=h>>2;f<k;)c[f++]=l;for(f<<=2;f<h;)A[f++]=0;c[a+20>>2]=b;c[a+24>>2]=d;f=1}while(0);return f}
function ce(a,b,d){var e,f,g,h,k,l,m,p,n,q,r,s,t,v,u,w,x,E,y;l=c[b+8>>2]-c[b>>2];f=0;a:for(;;){if(!((f|0)<(c[b+16>>2]|0)))break a;m=c[b+20>>2]+124*f;g=0;b:for(;;){if(!((g|0)<(c[m+24>>2]|0)))break b;p=m+28+(g<<5);h=0;c:for(;;){if(!((h|0)<(c[m+16>>2]*c[m+20>>2]|0)))break c;n=c[p+20>>2]+36*h;k=0;d:for(;;){if(!((k|0)<(c[n+16>>2]*c[n+20>>2]|0)))break d;q=c[n+24>>2]+44*k;de(a,q,c[p+16>>2],c[d+808>>2],c[d+16>>2]);v=c[q+8>>2]-c[p>>2];q=c[q+12>>2]-c[p+4>>2];e=0!=(c[p+16>>2]&1|0)?9:10;9==e&&(e=c[b+20>>2]+124*
(f-1),v+=c[e+8>>2]-c[e>>2]);e=0!=(c[p+16>>2]&2|0)?11:12;11==e&&(e=c[b+20>>2]+124*(f-1),q+=c[e+12>>2]-c[e+4>>2]);r=c[a+12>>2];s=c[a+20>>2];t=c[a+24>>2];e=0!=(c[d+808>>2]|0)?13:27;do if(13==e)e:for(x=1<<c[d+808>>2],w=0;;){if(!((w|0)<(t|0))){e=26;break e}u=0;f:for(;;){if(!((u|0)<(s|0)))break f;E=c[r+(w*s+u<<2)>>2];y=Qh(E);e=(y|0)>=(x|0)?18:22;if(18==e){y>>=c[d+808>>2]|0;e=0>(E|0)?19:20;if(19==e)var A=-y;else 20==e&&(A=y);c[r+(w*s+u<<2)>>2]=A}u+=1}w+=1}while(0);e=1==(c[d+20>>2]|0)?28:37;do if(28==e)e:for(x=
c[b+24>>2]+(q*l+v<<2),w=0;;){if(!((w|0)<(t|0))){e=36;break e}u=0;f:for(;;){if(!((u|0)<(s|0)))break f;E=c[r+(w*s+u<<2)>>2];c[x+(w*l+u<<2)>>2]=(E|0)/2|0;u+=1}w+=1}else if(37==e)e:for(x=c[b+24>>2]+(q*l+v<<2),w=0;;){if(!((w|0)<(t|0))){e=45;break e}E=x;u=0;f:for(;;){if(!((u|0)<(s|0)))break f;y=(c[r>>2]|0)*S[p+28>>2];S[E>>2]=y;r+=4;E+=4;u+=1}x+=l<<2;w+=1}while(0);k+=1}h+=1}g+=1}f+=1}}function de(a,b,e,d,f){var g,h,k,l,m,p,n,q;h=c[a+8>>2];k=c[a+4>>2];g=0!=(be(a,c[b+16>>2]-c[b+8>>2],c[b+20>>2]-c[b+12>>2])|
0)?2:1;a:do if(2==g)for(d=d+c[b+24>>2]-1,l=2,fd(k),rb(k,18,46),rb(k,17,3),rb(k,0,4),m=0;;){if(!((m|0)<(c[b+40>>2]|0)))break a;q=c[b+4>>2]+28*m;if((d|0)<=(c[b+24>>2]-1-4|0))g=5;else{var r=0;g=7}b:do if(5==g){if(!(2>(l|0))){r=0;break b}r=0!=(f&1|0)}while(0);n=(r?1:0)&255;g=0==(c[q>>2]|0)?8:9;do if(8!=g&&9==g)b:for(g=1==(n<<24>>24|0)?10:11,10==g?(p=h,g=c[q+12>>2],c[p+20>>2]=c[c[q>>2]>>2]+c[q+4>>2],c[p+8>>2]=g,c[p+12>>2]=0,A[p]=0,c[p+4>>2]=0):11==g&&Rd(k,c[c[q>>2]>>2]+c[q+4>>2],c[q+12>>2]),p=0;;){if(!((p|
0)<(c[q+8>>2]|0))){g=37;break b}g=0==l?15:1==l?22:2==l?29:30;15==g?(g=1==(n<<24>>24|0)?16:17,16==g?ee(a,d+1,0,f):17==g&&(g=0!=(f&8|0)?18:19,18==g?fe(a,d+1,e):19==g&&ge(a,d+1,e))):22==g?(g=1==(n<<24>>24|0)?23:24,23==g?he(a,d+1,f):24==g&&(g=0!=(f&8|0)?25:26,25==g?ie(a,d+1):26==g&&je(a,d+1))):29==g&&ke(a,d+1,e,f);g=0!=(f&2|0)?31:33;c:do if(31==g){if(0!=(n<<24>>24|0))break c;fd(k);rb(k,18,46);rb(k,17,3);rb(k,0,4)}while(0);l=g=l+1;g=3==(g|0)?34:35;34==g&&(l=0,d-=1);p+=1}while(0);m+=1}while(0)}function ee(a,
b,e,d){var f,g,h;b=1<<b;h=b|b>>1;g=0;a:for(;;){if(!((g|0)<(c[a+24>>2]|0)))break a;b=0;b:for(;;){if(!((b|0)<(c[a+20>>2]|0)))break b;e=g;c:for(;;){if((e|0)<(g+4|0))f=6;else{var k=0;f=7}6==f&&(k=(e|0)<(c[a+24>>2]|0));if(!k)break c;if(0!=(d&8|0))f=9;else{var l=0;f=12}if(9==f){if((e|0)==(g+3|0)){var m=1;f=11}else f=10;10==f&&(m=(e|0)==(c[a+24>>2]-1|0));l=m}f=l?1:0;le(a,c[a+16>>2]+((e+1)*c[a+36>>2]+b+1<<1),c[a+12>>2]+(e*c[a+20>>2]+b<<2),0,h,f);e+=1}b+=1}g+=4}}function fe(a,b,e){var d,f,g,h;b=1<<b;h=b|b>>
1;g=0;a:for(;;){if(!((g|0)<(c[a+24>>2]|0)))break a;b=0;b:for(;;){if(!((b|0)<(c[a+20>>2]|0)))break b;f=g;c:for(;;){if((f|0)<(g+4|0))d=6;else{var k=0;d=7}6==d&&(k=(f|0)<(c[a+24>>2]|0));if(!k)break c;if((f|0)==(g+3|0)){var l=1;d=10}else d=9;9==d&&(l=(f|0)==(c[a+24>>2]-1|0));d=l?1:0;me(a,c[a+16>>2]+((f+1)*c[a+36>>2]+b+1<<1),c[a+12>>2]+(f*c[a+20>>2]+b<<2),e,h,d);f+=1}b+=1}g+=4}}function ge(a,b,e){var d,f,g,h,k,l,m;h=c[a+12>>2];k=c[a+16>>2]+2;b=1<<b;g=b|b>>1;f=0;a:for(;;){if(!((f|0)<(c[a+24>>2]&-4|0)))break a;
b=0;b:for(;;){if(!((b|0)<(c[a+20>>2]|0)))break b;d=h+(b<<2);l=k+(b<<1);l+=c[a+36>>2]<<1;tb(a,l,d,e,g);d+=c[a+20>>2]<<2;l+=c[a+36>>2]<<1;tb(a,l,d,e,g);d+=c[a+20>>2]<<2;l+=c[a+36>>2]<<1;tb(a,l,d,e,g);d+=c[a+20>>2]<<2;l+=c[a+36>>2]<<1;tb(a,l,d,e,g);b+=1}h+=c[a+20>>2]<<2<<2;k+=c[a+36>>2]<<2<<1;f+=4}b=0;a:for(;;){if(!((b|0)<(c[a+20>>2]|0)))break a;l=h+(b<<2);m=k+(b<<1);d=f;b:for(;;){if(!((d|0)<(c[a+24>>2]|0)))break b;m+=c[a+36>>2]<<1;tb(a,m,l,e,g);l+=c[a+20>>2]<<2;d+=1}b+=1}}function he(a,b,d){var e,f,
g,h,k;h=1<<b>>1;b=0<(b|0)?1:2;1==b?e=-h:2==b&&(e=-1);k=e;g=0;a:for(;;){if(!((g|0)<(c[a+24>>2]|0)))break a;e=0;b:for(;;){if(!((e|0)<(c[a+20>>2]|0)))break b;f=g;c:for(;;){if((f|0)<(g+4|0))b=9;else{var l=0;b=10}9==b&&(l=(f|0)<(c[a+24>>2]|0));if(!l)break c;if(0!=(d&8|0))b=12;else{var m=0;b=15}if(12==b){if((f|0)==(g+3|0)){var p=1;b=14}else b=13;13==b&&(p=(f|0)==(c[a+24>>2]-1|0));m=p}b=m?1:0;ne(a,c[a+16>>2]+((f+1)*c[a+36>>2]+e+1<<1),c[a+12>>2]+(f*c[a+20>>2]+e<<2),h,k,b);f+=1}e+=1}g+=4}}function ie(a,b){var e,
d,f,g,h,k;h=1<<b>>1;e=0<(b|0)?1:2;1==e?d=-h:2==e&&(d=-1);k=d;g=0;a:for(;;){if(!((g|0)<(c[a+24>>2]|0)))break a;d=0;b:for(;;){if(!((d|0)<(c[a+20>>2]|0)))break b;f=g;c:for(;;){if((f|0)<(g+4|0))e=9;else{var l=0;e=10}9==e&&(l=(f|0)<(c[a+24>>2]|0));if(!l)break c;if((f|0)==(g+3|0)){var m=1;e=13}else e=12;12==e&&(m=(f|0)==(c[a+24>>2]-1|0));e=m?1:0;oe(a,c[a+16>>2]+((f+1)*c[a+36>>2]+d+1<<1),c[a+12>>2]+(f*c[a+20>>2]+d<<2),h,k,e);f+=1}d+=1}g+=4}}function je(a,b){var e,d,f,g,h,k,l,m,p;k=c[a+12>>2];l=c[a+16>>2]+
2;g=1<<b>>1;e=0<(b|0)?1:2;1==e?f=-g:2==e&&(f=-1);h=f;f=0;a:for(;;){if(!((f|0)<(c[a+24>>2]&-4|0)))break a;e=0;b:for(;;){if(!((e|0)<(c[a+20>>2]|0)))break b;d=k+(e<<2);m=l+(e<<1);m+=c[a+36>>2]<<1;ub(a,m,d,g,h);d+=c[a+20>>2]<<2;m+=c[a+36>>2]<<1;ub(a,m,d,g,h);d+=c[a+20>>2]<<2;m+=c[a+36>>2]<<1;ub(a,m,d,g,h);d+=c[a+20>>2]<<2;m+=c[a+36>>2]<<1;ub(a,m,d,g,h);e+=1}k+=c[a+20>>2]<<2<<2;l+=c[a+36>>2]<<2<<1;f+=4}e=0;a:for(;;){if(!((e|0)<(c[a+20>>2]|0)))break a;m=k+(e<<2);p=l+(e<<1);d=f;b:for(;;){if(!((d|0)<(c[a+
24>>2]|0)))break b;p+=c[a+36>>2]<<1;ub(a,p,m,g,h);m+=c[a+20>>2]<<2;d+=1}e+=1}}function ke(a,b,e,d){var f,g,h,k,l,m,p,n,q,r,s;p=d&32;n=c[a+4>>2];b=1<<b;b|=b>>1;f=0!=(d&8|0)?1:32;do if(1==f)a:for(h=0;;){if(!((h|0)<(c[a+24>>2]|0))){f=31;break a}d=0;b:for(;;){if(!((d|0)<(c[a+20>>2]|0)))break b;f=(h+3|0)<(c[a+24>>2]|0)?6:11;do if(6==f){if(0!=(R[c[a+16>>2]+((h+1)*c[a+36>>2]+(d+1)<<1)>>1]<<16>>16&20735|0)){var t=1;f=10}else f=7;c:do if(7==f){if(0!=(R[c[a+16>>2]+((h+2)*c[a+36>>2]+(d+1)<<1)>>1]<<16>>16&20735|
0)){t=1;f=10;break c}if(0!=(R[c[a+16>>2]+((h+3)*c[a+36>>2]+(d+1)<<1)>>1]<<16>>16&20735|0)){t=1;f=10;break c}t=0!=(R[c[a+16>>2]+((h+4)*c[a+36>>2]+(d+1)<<1)>>1]<<16>>16&20665|0)}while(0);k=(t^1)&1}else 11==f&&(k=0);while(0);f=0!=(k|0)?13:16;c:do if(13==f){c[n+100>>2]=n+92;f=0!=(sa(n)|0)?15:14;do if(15==f){c[n+100>>2]=n+96;l=sa(n);l<<=1;f=sa(n);l|=f;f=17;break c}else if(14==f){f=28;break c}while(0)}else if(16==f){l=0;f=17;break c}while(0);do if(17==f)c:for(g=h+l;;){if((g|0)<(h+4|0))f=19;else{var u=0;
f=20}19==f&&(u=(g|0)<(c[a+24>>2]|0));if(!u){f=27;break c}if((g|0)==(h+3|0)){var v=1;f=23}else f=22;22==f&&(v=(g|0)==(c[a+24>>2]-1|0));m=v?1:0;q=a;r=c[a+16>>2]+((g+1)*c[a+36>>2]+d+1<<1);s=c[a+12>>2]+(g*c[a+20>>2]+d<<2);var w=e,x=b;if(0!=(k|0))f=24;else{var E=0;f=25}24==f&&(E=(g|0)==(h+l|0));pe(q,r,s,w,x,E&1,m);g+=1}while(0);d+=1}h+=4}else if(32==f){m=c[a+12>>2];q=c[a+16>>2]+2;h=0;a:for(;;){if(!((h|0)<(c[a+24>>2]&-4|0)))break a;d=0;b:for(;;){if(!((d|0)<(c[a+20>>2]|0)))break b;r=m+(d<<2);s=q+(d<<1);
if(0!=(R[c[a+16>>2]+((h+1)*c[a+36>>2]+(d+1)<<1)>>1]<<16>>16&20735|0)){var y=1;f=40}else f=37;c:do if(37==f){if(0!=(R[c[a+16>>2]+((h+2)*c[a+36>>2]+(d+1)<<1)>>1]<<16>>16&20735|0)){y=1;break c}if(0!=(R[c[a+16>>2]+((h+3)*c[a+36>>2]+(d+1)<<1)>>1]<<16>>16&20735|0)){y=1;break c}y=0!=(R[c[a+16>>2]+((h+4)*c[a+36>>2]+(d+1)<<1)>>1]<<16>>16&20735|0)}while(0);k=(y^1)&1;f=0!=(k|0)?41:54;c:do if(41==f){c[n+100>>2]=n+92;f=0!=(sa(n)|0)?43:42;do if(43==f){c[n+100>>2]=n+96;l=sa(n);l<<=1;f=sa(n);l|=f;s+=l*c[a+36>>2]<<
1;r+=l*c[a+20>>2]<<2;g=h+l;d:for(;;){if((g|0)<(h+4|0))f=45;else{var A=0;f=46}45==f&&(A=(g|0)<(c[a+24>>2]|0));if(!A)break d;s+=c[a+36>>2]<<1;f=0!=(k|0)?48:50;e:do if(48==f){if((g|0)!=(h+l|0)){f=50;break e}qe(a,s,r,0,b);f=51;break e}while(0);50==f&&jb(a,s,r,e,b);r+=c[a+20>>2]<<2;g+=1}break c}else if(42==f)break c;while(0)}else if(54==f){s+=c[a+36>>2]<<1;jb(a,s,r,e,b);r+=c[a+20>>2]<<2;s+=c[a+36>>2]<<1;jb(a,s,r,e,b);r+=c[a+20>>2]<<2;s+=c[a+36>>2]<<1;jb(a,s,r,e,b);r+=c[a+20>>2]<<2;s+=c[a+36>>2]<<1;jb(a,
s,r,e,b);break c}while(0);d+=1}m+=c[a+20>>2]<<2<<2;q+=c[a+36>>2]<<2<<1;h+=4}d=0;a:for(;;){if(!((d|0)<(c[a+20>>2]|0))){f=67;break a}r=m+(d<<2);s=q+(d<<1);g=h;b:for(;;){if(!((g|0)<(c[a+24>>2]|0)))break b;s+=c[a+36>>2]<<1;jb(a,s,r,e,b);r+=c[a+20>>2]<<2;g+=1}d+=1}}while(0);69==(0!=(p|0)?69:70)&&(c[n+100>>2]=n+96,sa(n),sa(n),sa(n),sa(n))}function pe(a,b,d,e,f,g,h){var k,l;l=c[a+4>>2];h=0!=(h|0)?1:2;1==h?k=R[b>>1]<<16>>16&-1095:2==h&&(k=R[b>>1]<<16>>16);h=0!=(g|0)?4:5;a:do if(4==h){h=8;break a}else if(5==
h){if(0!=(k&20480|0)){h=13;break a}c[l+100>>2]=l+24+(A[Fb+(e<<8|k&255)]<<24>>24<<2);if(0==(sa(l)|0)){h=12;break a}h=8;break a}while(0);a:do if(8==h){c[l+100>>2]=l+24+(Gb(k)<<24>>24<<2);e=sa(l)^Hb(k)<<24>>24;h=0!=(e|0)?9:10;if(9==h)var m=-f;else 10==h&&(m=f);c[d>>2]=m;kb(b,e,c[a+36>>2]);break a}while(0);R[b>>1]=R[b>>1]<<16>>16&49151}function re(c){var a;a=0!=(c&8192|0)?1:2;if(1==a)var b=16;else 2==a&&(b=0!=(c&255|0)?15:14);return b}function Gb(c){return A[se+((c&4080)>>4)]}function Hb(c){return A[te+
((c&4080)>>4)]}function kb(c,a,b){var d;d=c+(-b<<1);b=c+(b<<1);R[d-2>>1]=(R[d-2>>1]<<16>>16|2)&65535;R[d>>1]=(R[d>>1]<<16>>16|R[Ib+(a<<1)>>1]<<16>>16)&65535;R[d+2>>1]=(R[d+2>>1]<<16>>16|4)&65535;R[c-2>>1]=(R[c-2>>1]<<16>>16|R[Ib+(a+2<<1)>>1]<<16>>16)&65535;R[c>>1]=(R[c>>1]<<16>>16|4096)&65535;R[c+2>>1]=(R[c+2>>1]<<16>>16|R[Ib+(a+4<<1)>>1]<<16>>16)&65535;R[b-2>>1]=(R[b-2>>1]<<16>>16|1)&65535;R[b>>1]=(R[b>>1]<<16>>16|R[Ib+(a+6<<1)>>1]<<16>>16)&65535;R[b+2>>1]=(R[b+2>>1]<<16>>16|8)&65535}function qe(a,
b,d,e,f){var g;g=c[a+4>>2];e=R[b>>1]<<16>>16;c[g+100>>2]=g+24+(Gb(e)<<24>>24<<2);g=sa(g)^Hb(e)<<24>>24;e=0!=(g|0)?1:2;if(1==e)var h=-f;else 2==e&&(h=f);c[d>>2]=h;kb(b,g,c[a+36>>2]);R[b>>1]=R[b>>1]<<16>>16&49151}function jb(a,b,d,e,f){var g,h;h=c[a+4>>2];g=R[b>>1]<<16>>16;if(1==(0!=(g&20480|0)?7:1)&&(c[h+100>>2]=h+24+(A[Fb+(e<<8|g&255)]<<24>>24<<2),e=0!=(sa(h)|0)?2:6,2==e)){c[h+100>>2]=h+24+(Gb(g)<<24>>24<<2);g=sa(h)^Hb(g)<<24>>24;e=0!=(g|0)?3:4;if(3==e)var k=-f;else 4==e&&(k=f);c[d>>2]=k;kb(b,g,c[a+
36>>2])}R[b>>1]=R[b>>1]<<16>>16&49151}function ub(a,b,d,e,f){var g;g=c[a+4>>2];a=R[b>>1]<<16>>16;if(1==(4096==(a&20480|0)?1:8)){c[g+100>>2]=g+24+(re(a)<<2);a=sa(g);a=0!=(a|0)?2:3;if(2==a)var h=e;else 3==a&&(h=f);e=h;a=0>(c[d>>2]|0)?5:6;if(5==a)var k=-e;else 6==a&&(k=e);c[d>>2]+=k;R[b>>1]=(R[b>>1]<<16>>16|8192)&65535}}function oe(a,b,d,e,f,g){var h;a=c[a+4>>2];g=0!=(g|0)?1:2;1==g?h=R[b>>1]<<16>>16&-1095:2==g&&(h=R[b>>1]<<16>>16);if(4==(4096==(h&20480|0)?4:11)){c[a+100>>2]=a+24+(re(h)<<2);a=sa(a);g=
0!=(a|0)?5:6;if(5==g)var k=e;else 6==g&&(k=f);e=k;g=0>(c[d>>2]|0)?8:9;if(8==g)var l=-e;else 9==g&&(l=e);c[d>>2]+=l;R[b>>1]=(R[b>>1]<<16>>16|8192)&65535}}function ne(a,b,d,e,f,g){var h;a=c[a+8>>2];g=0!=(g|0)?1:2;1==g?h=R[b>>1]<<16>>16&-1095:2==g&&(h=R[b>>1]<<16>>16);if(4==(4096==(h&20480|0)?4:11)){h=Xb(a);g=0!=(h|0)?5:6;if(5==g)var k=e;else 6==g&&(k=f);e=k;g=0>(c[d>>2]|0)?8:9;if(8==g)var l=-e;else 9==g&&(l=e);c[d>>2]+=l;R[b>>1]=(R[b>>1]<<16>>16|8192)&65535}}function tb(a,b,d,e,f){var g,h,k,l;l=c[a+
4>>2];k=R[b>>1]<<16>>16;g=0!=(k&255|0)?1:8;a:do if(1==g){if(0!=(k&20480|0))break a;c[l+100>>2]=l+24+(A[Fb+(e<<8|k&255)]<<24>>24<<2);g=0!=(sa(l)|0)?3:7;if(3==g){c[l+100>>2]=l+24+(Gb(k)<<24>>24<<2);h=sa(l)^Hb(k)<<24>>24;g=0!=(h|0)?4:5;if(4==g)var m=-f;else 5==g&&(m=f);c[d>>2]=m;kb(b,h,c[a+36>>2])}R[b>>1]=(R[b>>1]<<16>>16|16384)&65535}while(0)}function me(a,b,d,e,f,g){var h,k,l;l=c[a+4>>2];g=0!=(g|0)?1:2;1==g?h=R[b>>1]<<16>>16&-1095:2==g&&(h=R[b>>1]<<16>>16);k=h;g=0!=(k&255|0)?4:11;a:do if(4==g){if(0!=
(k&20480|0))break a;c[l+100>>2]=l+24+(A[Fb+(e<<8|k&255)]<<24>>24<<2);g=0!=(sa(l)|0)?6:10;if(6==g){c[l+100>>2]=l+24+(Gb(k)<<24>>24<<2);h=sa(l)^Hb(k)<<24>>24;g=0!=(h|0)?7:8;if(7==g)var m=-f;else 8==g&&(m=f);c[d>>2]=m;kb(b,h,c[a+36>>2])}R[b>>1]=(R[b>>1]<<16>>16|16384)&65535}while(0)}function le(a,b,d,e,f,g){var h,k;e=c[a+8>>2];g=0!=(g|0)?1:2;1==g?h=R[b>>1]<<16>>16&-1095:2==g&&(h=R[b>>1]<<16>>16);k=h;g=0!=(k&255|0)?4:11;a:do if(4==g){if(0!=(k&20480|0))break a;g=0!=(Xb(e)|0)?6:10;if(6==g){h=Xb(e);g=0!=
(h|0)?7:8;if(7==g)var l=-f;else 8==g&&(l=f);c[d>>2]=l;kb(b,h,c[a+36>>2])}R[b>>1]=(R[b>>1]<<16>>16|16384)&65535}while(0)}function ue(a,b,d,e,f,g){var h,k,l,m,p,n,q,r,s,t,u,v,w;l=b;q=n=0;s=c[a+4>>2];t=c[a+8>>2];m=Wd(s,t,e);h=0!=(m|0)?2:1;do if(2==h){p=r=0;a:for(;;){if(!((p|0)<=(c[c[t+108>>2]+5588*e+420>>2]|0))){h=36;break a}b:for(;;){h=m+232*p;v=H;w=c[h+80>>2];w=0==w?1:1==w?2:2==w?3:3==w?4:4==w?5:-1==w?6:7;7==w?v=0:1==w?v=Xd(h):2==w?v=Yd(h):3==w?v=Zd(h):4==w?v=$d(h):5==w?v=ae(h):6==w&&(v=0);if(0==(v|
0))break b;h=0==(c[t+40>>2]|0)?8:7;c:do if(7==h){if((c[t+40>>2]|0)>=(c[m+232*p+36>>2]+1|0)){h=8;break c}n=0;h=13;break c}while(0);8==h&&(h=0!=(g|0)?9:10,9==h?u=c[c[g+88>>2]+572*e+548>>2]+20*c[g+8>>2]:10==h&&(u=0),n=ve(a,l,b+d-l,f,c[t+108>>2]+5588*e,m+232*p,u));if(-999==(n|0)){h=14;break a}h=0<(n|0)?16:17;if(16==h){var x;x=c[m+232*p+28>>2];h=c[c[s+24>>2]+48*c[m+232*p+24>>2]+36>>2];v=(x|0)>(h|0)?1:2;if(1==v)var E=x;else 2==v&&(E=h);x=E}else 17==h&&(x=c[c[s+24>>2]+48*c[m+232*p+24>>2]+36>>2]);c[c[s+24>>
2]+48*c[m+232*p+24>>2]+36>>2]=x;h=0!=(g|0)?19:30;do if(19==h){v=c[g+88>>2]+572*e;w=c[v+548>>2]+20*c[g+8>>2];h=0!=(c[g+8>>2]|0)?21:20;do if(21==h){h=(c[c[v+548>>2]+20*(c[g+8>>2]-1)+8>>2]|0)>=(c[c[c[g+88>>2]+572*e+568>>2]+20*q+8>>2]|0)?22:23;do if(22==h)c[c[v+568>>2]+20*q+16>>2]=c[g+8>>2]-r,r=c[g+8>>2],q+=1,c[w>>2]=c[c[c[g+88>>2]+572*e+568>>2]+20*q+4>>2]+1;else if(23==h){h=0!=(A[t+16]<<24>>24|0)?24:26;c:do if(24==h){if(0==(c[w>>2]|0)){h=26;break c}var y=c[w>>2];h=27;break c}while(0);26==h&&(y=c[c[v+
548>>2]+20*(c[g+8>>2]-1)+8>>2]+1);c[w>>2]=y}while(0)}else 20==h&&(c[w>>2]=c[v+12>>2]+1);while(0);c[w+8>>2]=c[w>>2]+n-1;c[w+4>>2]+=c[w>>2]-1;c[g+8>>2]+=1}while(0);if(-999==(n|0))break b;l+=n}p+=1}36==h?(h=0!=(g|0)?37:38,37==h&&(c[c[c[g+88>>2]+572*e+568>>2]+20*q+16>>2]=c[g+8>>2]-r),h=-999==(n|0)?39:40,39==h?k=n:40==h&&(k=l-b)):14==h&&(k=-999)}else 1==h&&(k=-999);while(0);return k}function ve(a,b,e,d,f,k,l){var m,p,n,q,r,s,t,v,u,w,E,z,C,D,B,F;q=b;r=c[a+8>>2];s=c[k+24>>2];t=c[k+28>>2];v=c[k+32>>2];k=
c[k+36>>2];t=c[c[d+20>>2]+(s<<5)+20>>2]+124*t;u=0;m=0==(k|0)?1:13;do if(1==m)a:for(d=0;;){if(!((d|0)<(c[t+24>>2]|0))){m=12;break a}n=t+28+(d<<5);w=c[n+20>>2]+36*v;m=0==(c[n+8>>2]-c[n>>2]|0)?5:4;b:do if(4==m){if(0==(c[n+12>>2]-c[n+4>>2]|0))break b;wc(c[w+28>>2]);wc(c[w+32>>2]);n=0;c:for(;;){if(!((n|0)<(c[w+16>>2]*c[w+20>>2]|0)))break c;E=c[w+24>>2]+44*n;c[E+40>>2]=0;n+=1}break b}while(0);d+=1}while(0);m=0!=(c[f+4>>2]&2|0)?14:19;do if(14==m){m=255!=(ja[q]&255|0)?16:15;a:do if(15==m){if(145!=(ja[q+1]&
255|0)){m=16;break a}q+=6;m=18;break a}while(0);16==m&&aa(c[a>>2],2,we,h(1,"i32",x))}while(0);w=U(20);m=1==(c[r+92>>2]|0)?20:21;20==m?(u=c[r+84>>2],y(w,u,c[r+104>>2])):21==m&&(m=1==(c[f+5172>>2]|0)?22:23,22==m?(u=c[f+5164>>2],y(w,u,c[f+5180>>2])):23==m&&(u=q,y(w,u,b+e-u)));m=0!=(J(w,1)|0)?39:26;a:do if(39==m){d=0;b:for(;;){if(!((d|0)<(c[t+24>>2]|0)))break b;E=t+28+(d<<5);z=c[E+20>>2]+36*v;m=0==(c[E+8>>2]-c[E>>2]|0)?43:42;c:do if(42==m){if(0==(c[E+12>>2]-c[E+4>>2]|0))break c;n=0;d:for(;;){if(!((n|
0)<(c[z+16>>2]*c[z+20>>2]|0)))break d;F=c[z+24>>2]+44*n;m=0!=(c[F+40>>2]|0)?48:47;48==m?C=J(w,1):47==m&&(C=xc(w,c[z+28>>2],n,k+1));m=0!=(C|0)?51:50;do if(51==m){m=0!=(c[F+40>>2]|0)?57:52;do if(52==m){D=0;e:for(;;){if(!(0!=(xc(w,c[z+32>>2],n,D)|0)^1)){m=56;break e}D+=1}D-=1;c[F+24>>2]=c[E+24>>2]-D;c[F+28>>2]=3}while(0);m=w;var K=H;B=D=H;K=0!=(J(m,1)|0)?2:1;2==K?(K=0!=(J(m,1)|0)?4:3,4==K?(B=K=J(m,2),K=3!=(K|0)?5:6,5==K?D=B+3:6==K&&(B=K=J(m,5),K=31!=(K|0)?7:8,7==K?D=B+6:8==K&&(D=J(m,7)+37))):3==K&&(D=
2)):1==K&&(D=1);c[F+36>>2]=D;m=w;D=0;e:for(;;){if(0==(J(m,1)|0))break e;D+=1}m=D;c[F+28>>2]+=m;B=0;m=0!=(c[F+40>>2]|0)?59:58;59==m?(B=c[F+40>>2]-1,m=(c[c[F+4>>2]+28*B+8>>2]|0)==(c[c[F+4>>2]+28*B+16>>2]|0)?60:61,60==m&&(B+=1,Yb(F,B,c[c[f+5584>>2]+1076*s+16>>2],0))):58==m&&Yb(F,B,c[c[f+5584>>2]+1076*s+16>>2],1);D=c[F+36>>2];e:for(;;){m=c[c[F+4>>2]+28*B+16>>2]-c[c[F+4>>2]+28*B+8>>2];K=(m|0)<(D|0)?1:2;if(1==K)var G=m;else 2==K&&(G=D);c[c[F+4>>2]+28*B+20>>2]=G;m=c[c[F+4>>2]+28*B+20>>2];K=0;f:for(;;){if(!(1<
(m|0)))break f;m>>=1;K+=1}m=J(w,c[F+28>>2]+K);c[c[F+4>>2]+28*B+24>>2]=m;D-=c[c[F+4>>2]+28*B+20>>2];m=0<(D|0)?64:65;64==m&&(B+=1,Yb(F,B,c[c[f+5584>>2]+1076*s+16>>2],0));if(!(0<(D|0))){m=67;break e}}}else 50==m&&(c[F+36>>2]=0);while(0);n+=1}break c}while(0);d+=1}m=0!=(N(w)|0)?72:73;do if(72==m)p=-999;else if(73==m){u+=c[w+8>>2]-c[w>>2];m=0!=(c[f+4>>2]&4|0)?74:79;b:do if(74==m){m=255!=(ja[u]&255|0)?76:75;c:do if(75==m){if(146!=(ja[u+1]&255|0))break c;u+=2;break b}while(0);aa(c[a>>2],1,xe,h(1,"i32",x));
p=-999;break a}while(0);m=0!=(l|0)?80:81;80==m&&(c[l+4>>2]=u-b);m=1==(c[r+92>>2]|0)?82:83;82==m?(c[r+104>>2]+=c[r+84>>2]-u,c[r+84>>2]=u):83==m&&(m=1==(c[f+5172>>2]|0)?84:85,84==m?(c[f+5180>>2]+=c[f+5164>>2]-u,c[f+5164>>2]=u):85==m&&(q=u));d=0;b:for(;;){if(!((d|0)<(c[t+24>>2]|0))){m=114;break b}n=t+28+(d<<5);E=c[n+20>>2]+36*v;m=0==(c[n+8>>2]-c[n>>2]|0)?91:90;c:do if(90==m){if(0==(c[n+12>>2]-c[n+4>>2]|0))break c;n=0;d:for(;;){if(!((n|0)<(c[E+16>>2]*c[E+20>>2]|0)))break d;z=c[E+24>>2]+44*n;F=0;m=0!=
(c[z+36>>2]|0)?96:95;do if(96==m)e:for(m=0!=(c[z+40>>2]|0)?98:97,98==m?(F=c[z+4>>2]+28*(c[z+40>>2]-1),m=(c[F+8>>2]|0)==(c[F+16>>2]|0)?99:100,99==m&&(F+=28,c[z+40>>2]+=1)):97==m&&(F=c[z+4>>2],c[z+40>>2]+=1,c[z+32>>2]=0);;){if(q+c[F+24>>2]>>>0>b+e>>>0){m=103;break b}m=Eb(c[z>>2],c[z+32>>2]+c[F+24>>2]<<2);c[z>>2]=m;B=c[z>>2]+c[z+32>>2];D=q;m=c[F+24>>2];g(0===m%1,"memcpy given "+m+" bytes to copy. Problem with quantum=1 corrections perhaps?");K=D+m;if(B%4==D%4&&8<m){for(;0!==D%4&&D<K;)A[B++]=A[D++];D>>=
2;B>>=2;for(m=K>>2;D<m;)c[B++]=c[D++];D<<=2;B<<=2}for(;D<K;)A[B++]=A[D++];m=0==(c[F+8>>2]|0)?105:106;105==m&&(c[F>>2]=z,c[F+4>>2]=c[z+32>>2]);q+=c[F+24>>2];c[z+32>>2]+=c[F+24>>2];c[F+12>>2]+=c[F+24>>2];c[F+8>>2]+=c[F+20>>2];c[z+36>>2]-=c[F+20>>2];m=0<(c[z+36>>2]|0)?107:108;107==m&&(F+=28,c[z+40>>2]+=1);if(!(0<(c[z+36>>2]|0))){m=110;break e}}while(0);n+=1}break c}while(0);d+=1}114==m?p=q-b:103==m&&(p=-999)}while(0)}else if(26==m){N(w);u+=c[w+8>>2]-c[w>>2];m=0!=(c[f+4>>2]&4|0)?27:32;do if(27==m){m=
255!=(ja[u]&255|0)?29:28;b:do if(28==m){if(146!=(ja[u+1]&255|0)){m=29;break b}u+=2;m=31;break b}while(0);29==m&&Ya(ye,h(1,"i32",x))}while(0);m=0!=(l|0)?33:34;33==m&&(c[l+4>>2]=q-b);m=1==(c[r+92>>2]|0)?35:36;35==m?(c[r+104>>2]+=c[r+84>>2]-u,c[r+84>>2]=u,p=q-b):36==m&&(m=1==(c[f+5172>>2]|0)?37:38,37==m?(c[f+5180>>2]+=c[f+5164>>2]-u,c[f+5164>>2]=u,p=q-b):38==m&&(p=u-b))}while(0);return p}function Yb(a,b,d,e){var f=Eb(c[a+4>>2],28*(b+1));c[a+4>>2]=f;b=c[a+4>>2]+28*b;c[b>>2]=0;c[b+4>>2]=0;c[b+8>>2]=0;
c[b+12>>2]=0;a=0!=(d&4|0)?1:2;if(1==a)c[b+16>>2]=1;else if(2==a)if(a=0!=(d&1|0)?3:9,3==a)if(a=0!=(e|0)?4:5,4==a)c[b+16>>2]=10;else{if(5==a){if(1==(c[b-28+16>>2]|0)){var g=1;a=7}else a=6;6==a&&(g=10==(c[b-28+16>>2]|0));c[b+16>>2]=g?2:1}}else 9==a&&(c[b+16>>2]=109)}function eb(c,a){var b;b=(c|0)>(a|0)?1:2;if(1==b)var d=c;else 2==b&&(d=a);return d}function Va(c,a){var b;b=(c|0)<(a|0)?1:2;if(1==b)var d=c;else 2==b&&(d=a);return d}function fb(c,a){return(c+a-1|0)/(a|0)|0}function ua(c,a){return c+(1<<
a)-1>>(a|0)}function sd(a,b,d){var e,f,g,h,k,l,m,p,n,q;p=m=l=k=0;c[a+28>>2]=b;c[c[a+24>>2]>>2]=c[d+68>>2];c[c[a+24>>2]+4>>2]=c[d+72>>2];f=U(c[d+68>>2]*c[d+72>>2]*840);c[c[a+24>>2]+8>>2]=f;g=0;a:for(;;){if(!((g|0)<(c[d+80>>2]|0)))break a;h=c[c[d+76>>2]+(g<<2)>>2];f=c[c[a+24>>2]+8>>2]+840*c[c[d+76>>2]+(h<<2)>>2];c[f+16>>2]=c[b+16>>2];n=wa(c[b+16>>2],32);c[f+20>>2]=n;g+=1}f=0;a:for(;;){if(!((f|0)<(c[b+16>>2]|0)))break a;g=0;b:for(;;){if(!((g|0)<(c[d+80>>2]|0)))break b;h=c[c[d+76>>2]+(g<<2)>>2];q=c[c[a+
24>>2]+8>>2]+840*c[c[d+76>>2]+(h<<2)>>2];n=c[q+20>>2]+(f<<5);e=(h|0)%(c[d+68>>2]|0);h=(h|0)/(c[d+68>>2]|0)|0;c[q>>2]=eb(c[d+48>>2]+e*c[d+56>>2],c[b>>2]);c[q+4>>2]=eb(c[d+52>>2]+h*c[d+60>>2],c[b+4>>2]);c[q+8>>2]=Va(c[d+48>>2]+(e+1)*c[d+56>>2],c[b+8>>2]);c[q+12>>2]=Va(c[d+52>>2]+(h+1)*c[d+60>>2],c[b+12>>2]);c[n>>2]=fb(c[q>>2],c[c[b+24>>2]+48*f>>2]);c[n+4>>2]=fb(c[q+4>>2],c[c[b+24>>2]+48*f+4>>2]);c[n+8>>2]=fb(c[q+8>>2],c[c[b+24>>2]+48*f>>2]);c[n+12>>2]=fb(c[q+12>>2],c[c[b+24>>2]+48*f+4>>2]);e=0==(g|
0)?9:10;if(9==e)var r=c[n>>2];else 10==e&&(r=Va(k,c[n>>2]));k=r;e=0==(g|0)?12:13;if(12==e)var s=c[n+4>>2];else 13==e&&(s=Va(l,c[n>>2]));l=s;e=0==(g|0)?15:16;if(15==e)var t=c[n+8>>2];else 16==e&&(t=eb(m,c[n+8>>2]));m=t;e=0==(g|0)?18:19;if(18==e)var u=c[n+12>>2];else 19==e&&(u=eb(p,c[n+12>>2]));p=u;g+=1}g=ua(m-k,c[c[b+24>>2]+48*f+40>>2]);n=ua(p-l,c[c[b+24>>2]+48*f+40>>2]);c[c[b+24>>2]+48*f+8>>2]=g;c[c[b+24>>2]+48*f+12>>2]=n;c[c[b+24>>2]+48*f+16>>2]=k;c[c[b+24>>2]+48*f+20>>2]=l;f+=1}}function td(a,b,
d,e){var f,g,h,k,l,m,p,n,q,r,s,t,u,v,w,E,x,z,y,D,A,C,B,F,K;c[a+32>>2]=d;m=c[d+108>>2]+5588*c[c[d+76>>2]+(e<<2)>>2];d=c[c[a+24>>2]+8>>2]+840*c[c[d+76>>2]+(e<<2)>>2];a=0;a:for(;;){if(!((a|0)<(c[d+16>>2]|0)))break a;e=c[m+5584>>2]+1076*a;p=c[d+20>>2]+(a<<5);c[p>>2]=fb(c[d>>2],c[c[b+24>>2]+48*a>>2]);c[p+4>>2]=fb(c[d+4>>2],c[c[b+24>>2]+48*a+4>>2]);c[p+8>>2]=fb(c[d+8>>2],c[c[b+24>>2]+48*a>>2]);c[p+12>>2]=fb(c[d+12>>2],c[c[b+24>>2]+48*a+4>>2]);c[p+16>>2]=c[e+4>>2];g=U(124*c[p+16>>2]);c[p+20>>2]=g;g=0;b:for(;;){if(!((g|
0)<(c[p+16>>2]|0)))break b;r=c[p+16>>2]-1-g;z=c[p+20>>2]+124*g;c[z>>2]=ua(c[p>>2],r);c[z+4>>2]=ua(c[p+4>>2],r);c[z+8>>2]=ua(c[p+8>>2],r);c[z+12>>2]=ua(c[p+12>>2],r);c[z+24>>2]=0==(g|0)?1:3;f=0!=(c[e>>2]&1|0)?5:6;5==f?(n=c[e+812+(g<<2)>>2],q=c[e+944+(g<<2)>>2]):6==f&&(q=n=15);h=c[z>>2]>>(n|0)<<n;s=c[z+4>>2]>>(q|0)<<q;t=ua(c[z+8>>2],n)<<n;u=ua(c[z+12>>2],q)<<q;f=(c[z>>2]|0)==(c[z+8>>2]|0)?8:9;if(8==f)var G=0;else 9==f&&(G=t-h>>(n|0));c[z+16>>2]=G;f=(c[z+4>>2]|0)==(c[z+12>>2]|0)?11:12;if(11==f)var J=
0;else 12==f&&(J=u-s>>(q|0));c[z+20>>2]=J;f=0==(g|0)?14:15;14==f?(v=h,w=s,E=n,x=q):15==f&&(v=ua(h,1),w=ua(s,1),E=n-1,x=q-1);s=Va(c[e+8>>2],E);t=Va(c[e+12>>2],x);h=0;c:for(;;){if(!((h|0)<(c[z+24>>2]|0)))break c;u=z+28+(h<<5);f=0==(g|0)?19:20;if(19==f)var L=0;else 20==f&&(L=h+1);c[u+16>>2]=L;if(1==(c[u+16>>2]|0)){var M=1;f=23}else f=22;22==f&&(M=3==(c[u+16>>2]|0));k=M?1:0;if(2==(c[u+16>>2]|0)){var O=1;f=25}else f=24;24==f&&(O=3==(c[u+16>>2]|0));y=O?1:0;f=0==(c[u+16>>2]|0)?26:27;26==f?(c[u>>2]=ua(c[p>>
2],r),c[u+4>>2]=ua(c[p+4>>2],r),c[u+8>>2]=ua(c[p+8>>2],r),c[u+12>>2]=ua(c[p+12>>2],r)):27==f&&(c[u>>2]=ua(c[p>>2]-(1<<r)*k,r+1),c[u+4>>2]=ua(c[p+4>>2]-(1<<r)*y,r+1),c[u+8>>2]=ua(c[p+8>>2]-(1<<r)*k,r+1),c[u+12>>2]=ua(c[p+12>>2]-(1<<r)*y,r+1));f=0==(g|0)?29:30;if(29==f)var P=0;else 30==f&&(P=3*(g-1)+h+1);k=e+28+(P<<3);f=0==(c[e+20>>2]|0)?32:33;if(32==f)var N=0;else if(33==f){N=c[u+16>>2];y=H;f=0==(N|0)?1:2;d:do if(1==f)y=0;else if(2==f){f=1==(N|0)?4:3;e:do if(3==f){if(2==(N|0)){f=4;break e}y=2;break d}while(0);
y=1}while(0);N=y}f=N;y=c[c[b+24>>2]+48*a+24>>2]+f;f=(c[k+4>>2]|0)/2048+1;y=lb(2,y-c[k>>2]|0);S[u+28>>2]=f*y*.5;c[u+24>>2]=c[k>>2]+c[e+804>>2]-1;k=U(c[z+16>>2]*c[z+20>>2]*36);c[u+20>>2]=k;k=0;d:for(;;){if(!((k|0)<(c[z+16>>2]*c[z+20>>2]|0)))break d;y=v+(k|0)%(c[z+16>>2]|0)*(1<<E);D=w+((k|0)/(c[z+16>>2]|0)|0)*(1<<x);l=y+(1<<E);A=D+(1<<x);f=c[u+20>>2]+36*k;c[f>>2]=eb(y,c[u>>2]);c[f+4>>2]=eb(D,c[u+4>>2]);c[f+8>>2]=Va(l,c[u+8>>2]);c[f+12>>2]=Va(A,c[u+12>>2]);y=c[f>>2]>>(s|0)<<s;D=c[f+4>>2]>>(t|0)<<t;l=
ua(c[f+8>>2],s)<<s;A=ua(c[f+12>>2],t)<<t;c[f+16>>2]=l-y>>(s|0);c[f+20>>2]=A-D>>(t|0);l=U(c[f+16>>2]*c[f+20>>2]*44);c[f+24>>2]=l;l=yc(c[f+16>>2],c[f+20>>2]);c[f+28>>2]=l;l=yc(c[f+16>>2],c[f+20>>2]);c[f+32>>2]=l;l=0;e:for(;;){if(!((l|0)<(c[f+16>>2]*c[f+20>>2]|0)))break e;A=y+(l|0)%(c[f+16>>2]|0)*(1<<s);C=D+((l|0)/(c[f+16>>2]|0)|0)*(1<<t);B=A+(1<<s);F=C+(1<<t);K=c[f+24>>2]+44*l;c[K>>2]=0;c[K+4>>2]=0;c[K+8>>2]=eb(A,c[f>>2]);c[K+12>>2]=eb(C,c[f+4>>2]);c[K+16>>2]=Va(B,c[f+8>>2]);c[K+20>>2]=Va(F,c[f+12>>
2]);c[K+40>>2]=0;l+=1}k+=1}h+=1}g+=1}a+=1}}function ud(a,b,d,e,f){var g,k,l,m,p,n,q,r,s,t,u,v,w,E,z;m=0;c[a+44>>2]=e;c[a+36>>2]=c[c[a+24>>2]+8>>2]+840*e;c[a+40>>2]=c[c[a+32>>2]+108>>2]+5588*e;n=c[a+36>>2];p=pb();aa(c[a+20>>2],4,ze,h([e+1,0,0,0,c[c[a+32>>2]+68>>2]*c[c[a+32>>2]+72>>2],0,0,0],["i32",0,0,0,"i32",0,0,0],x));g=0!=(f|0)?1:13;do if(1==g){r=s=0;a:for(;;){if(!((r|0)<(c[f+52>>2]|0))){g=12;break a}q=c[c[a+32>>2]+108>>2];t=c[q+5584>>2]+1076*r;u=c[n+20>>2]+(r<<5);q=0;b:for(;;){if(!((q|0)<(c[u+
16>>2]|0)))break b;g=c[u+20>>2]+124*q;c[c[f+88>>2]+572*e+20+(q<<2)>>2]=c[g+16>>2];c[c[f+88>>2]+572*e+152+(q<<2)>>2]=c[g+20>>2];s+=c[g+16>>2]*c[g+20>>2];g=0!=(c[t>>2]&1|0)?6:7;6==g?(c[c[f+88>>2]+572*e+284+(q<<2)>>2]=c[t+812+(q<<2)>>2],c[c[f+88>>2]+572*e+416+(q<<2)>>2]=c[t+944+(q<<2)>>2]):7==g&&(c[c[f+88>>2]+572*e+284+(q<<2)>>2]=15,c[c[f+88>>2]+572*e+284+(q<<2)>>2]=15);q+=1}r+=1}r=U(c[f+56>>2]*s*20);c[c[f+88>>2]+572*e+548>>2]=r;c[f+8>>2]=0}while(0);g=c[a+20>>2];r=c[a+28>>2];s=c[a+32>>2];t=U(12);q=0!=
(t|0)?2:1;2==q?(c[t>>2]=g,c[t+4>>2]=r,c[t+8>>2]=s,v=t):1==q&&(v=0);g=-999==(ue(v,b,d,e,n,f)|0)?14:15;14==g&&(m=1,aa(c[a+20>>2],1,Ae,h(1,"i32",x)));b=pb();e=c[a+20>>2];d=U(40);f=0!=(d|0)?2:1;2==f?(c[d>>2]=e,l=U(104),c[d+4>>2]=l,l=U(28),c[d+8>>2]=l,c[d+12>>2]=0,c[d+16>>2]=0,c[d+28>>2]=0,c[d+32>>2]=0,l=d):1==f&&(l=0);d=l;l=0;a:for(;;){if(!((l|0)<(c[n+16>>2]|0)))break a;e=c[n+20>>2]+(l<<5);f=Db((c[e+8>>2]-c[e>>2])*(c[e+12>>2]-c[e+4>>2])+3<<2);c[e+24>>2]=f;ce(d,e,c[c[a+40>>2]+5584>>2]+1076*l);l+=1}b=pb()-
b;aa(c[a+20>>2],4,Be,h([b,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x));b=pb();l=0;a:for(;;){if(!((l|0)<(c[n+16>>2]|0))){g=32;break a}d=c[n+20>>2]+(l<<5);g=0!=(c[c[a+32>>2]+36>>2]|0)?22:25;do if(22==g&&(c[c[c[a+28>>2]+24>>2]+48*l+36>>2]=c[c[n+20>>2]+(l<<5)+16>>2]-c[c[a+32>>2]+36>>2]-1,0>(c[c[c[a+28>>2]+24>>2]+48*l+36>>2]|0))){g=23;break a}while(0);e=c[c[c[a+28>>2]+24>>2]+48*l+36>>2]+1;g=0<(e|0)?26:30;26==g&&(g=1==(c[c[c[a+40>>2]+5584>>2]+1076*l+20>>2]|0)?27:28,27==g?K(d,e,2):28==g&&X(d,e));l+=1}do if(32==
g){b=pb()-b;aa(c[a+20>>2],4,Ce,h([b,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x));g=0!=(c[c[a+40>>2]+16>>2]|0)?33:37;33==g&&(l=(c[c[n+20>>2]+8>>2]-c[c[n+20>>2]>>2])*(c[c[n+20>>2]+12>>2]-c[c[n+20>>2]+4>>2]),g=1==(c[c[c[a+40>>2]+5584>>2]+20>>2]|0)?34:35,34==g?od(c[c[n+20>>2]+24>>2],c[c[n+20>>2]+32+24>>2],c[c[n+20>>2]+64+24>>2],l):35==g&&pd(c[c[n+20>>2]+24>>2],c[c[n+20>>2]+32+24>>2],c[c[n+20>>2]+64+24>>2],l));l=0;a:for(;;){if(!((l|0)<(c[n+16>>2]|0)))break a;d=c[n+20>>2]+(l<<5);e=c[c[a+28>>2]+24>>2]+48*
l;f=c[d+20>>2]+124*c[e+36>>2];g=0!=(c[e+32>>2]|0)?40:41;if(40==g)var y=0;else 41==g&&(y=1<<c[e+24>>2]-1);v=y;g=0!=(c[e+32>>2]|0)?43:44;if(43==g)var D=-(1<<c[e+24>>2]-1);else 44==g&&(D=0);r=D;g=0!=(c[e+32>>2]|0)?46:47;if(46==g)var A=(1<<c[e+24>>2]-1)-1;else 47==g&&(A=(1<<c[e+24>>2])-1);s=A;q=c[d+8>>2]-c[d>>2];t=c[e+8>>2];u=ua(c[e+16>>2],c[e+40>>2]);w=ua(c[e+20>>2],c[e+40>>2]);g=0!=(c[e+44>>2]|0)?50:49;49==g&&(g=U(c[e+8>>2]*c[e+12>>2]<<2),c[e+44>>2]=g);g=1==(c[c[c[a+40>>2]+5584>>2]+1076*l+20>>2]|0)?
51:60;do if(51==g)b:for(E=c[f+4>>2];;){if(!((E|0)<(c[f+12>>2]|0))){g=59;break b}g=c[f>>2];c:for(;;){if(!((g|0)<(c[f+8>>2]|0)))break c;z=c[c[d+24>>2]+(g-c[f>>2]+(E-c[f+4>>2])*q<<2)>>2];z+=v;c[c[e+44>>2]+(g-u+(E-w)*t<<2)>>2]=De(z,r,s);g+=1}E+=1}else if(60==g)b:for(E=c[f+4>>2];;){if(!((E|0)<(c[f+12>>2]|0))){g=68;break b}g=c[f>>2];c:for(;;){if(!((g|0)<(c[f+8>>2]|0)))break c;z=S[c[d+24>>2]+(g-c[f>>2]+(E-c[f+4>>2])*q<<2)>>2];z=0<z?-Math.round(-z):Math.round(z);z+=v;c[c[e+44>>2]+(g-u+(E-w)*t<<2)>>2]=De(z,
r,s);g+=1}E+=1}while(0);l+=1}p=pb()-p;aa(c[a+20>>2],4,Ee,h([p,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x));g=0!=(m|0)?72:73;72==g?k=0:73==g&&(k=1)}else 23==g&&(aa(c[a+20>>2],1,Fe,h([c[c[a+32>>2]+36>>2],0,0,0,c[c[n+20>>2]+(l<<5)+16>>2],0,0,0],["i32",0,0,0,"i32",0,0,0],x)),k=0);while(0);return k}function De(c,a,b){var e,d;e=(c|0)<(a|0)?1:2;1==e?d=a:2==e&&(e=(c|0)>(b|0)?3:4,3==e?d=b:4==e&&(d=c));return d}function wc(a){var b;b=0==(a|0)?1:2;a:do if(1!=b&&2==b)for(b=0;;){if(!((b|0)<(c[a+8>>2]|0)))break a;
c[c[a+12>>2]+(b<<4)+4>>2]=999;c[c[a+12>>2]+(b<<4)+8>>2]=0;c[c[a+12>>2]+(b<<4)+12>>2]=0;b+=1}while(0)}function yc(a,b){var e=L;L+=256;g(L<la);var d,f,h=e+128,k,l,m,p,n,q,r;m=U(16);d=0!=(m|0)?2:1;do if(2==d){c[m>>2]=a;c[m+4>>2]=b;r=0;c[e>>2]=a;c[h>>2]=b;c[m+8>>2]=0;a:for(;;)if(k=c[e+(r<<2)>>2]*c[h+(r<<2)>>2],c[e+(r+1<<2)>>2]=(c[e+(r<<2)>>2]+1|0)/2|0,c[h+(r+1<<2)>>2]=(c[h+(r<<2)>>2]+1|0)/2|0,c[m+8>>2]+=k,r+=1,!(1<(k|0)))break a;d=0==(c[m+8>>2]|0)?6:7;do if(6==d)f=0;else if(7==d){k=wa(c[m+8>>2],16);c[m+
12>>2]=k;d=0!=(c[m+12>>2]|0)?9:8;do if(9==d){f=c[m+12>>2];l=k=c[m+12>>2]+(c[m>>2]*c[m+4>>2]<<4);p=0;a:for(;;){if(!((p|0)<(r-1|0))){d=26;break a}n=0;b:for(;;){if(!((n|0)<(c[h+(p<<2)>>2]|0)))break b;q=c[e+(p<<2)>>2];c:for(;;){q=d=q-1;if(!(0<=(d|0)))break c;c[f>>2]=k;f+=16;q=d=q-1;d=0<=(d|0)?16:17;16==d&&(c[f>>2]=k,f+=16);k+=16}d=0!=(n&1|0)?20:19;c:do if(19==d){if((n|0)==(c[h+(p<<2)>>2]-1|0)){d=20;break c}k=l;l+=c[e+(p<<2)>>2]<<4;d=22;break c}while(0);20==d&&(l=k);n+=1}p+=1}c[f>>2]=0;wc(m);f=m}else 8==
d&&(f=0);while(0)}while(0)}else 1==d&&(f=0);while(0);L=e;return f}function xc(a,b,d,e){var f=L;L+=124;g(L<la);var h,k;k=f;b=c[b+12>>2]+(d<<4);a:for(;;){if(0==(c[b>>2]|0))break a;d=k;k=d+4;c[d>>2]=b;b=c[b>>2]}d=0;a:for(;;){h=(d|0)>(c[b+8>>2]|0)?5:6;5==h?c[b+8>>2]=d:6==h&&(d=c[b+8>>2]);b:for(;;){if((d|0)<(e|0))h=9;else{var l=0;h=10}9==h&&(l=(d|0)<(c[b+4>>2]|0));if(!l)break b;h=0!=(J(a,1)|0)?12:13;12==h?c[b+4>>2]=d:13==h&&(d+=1)}c[b+8>>2]=d;if((k|0)==(f|0))break a;k=b=k-4;b=c[b>>2]}a=(c[b+4>>2]|0)<(e|
0)?1:0;L=f;return a}function Ge(){C(c[c[O>>2]+8>>2],He,h(1,"i32",x));C(c[c[O>>2]+8>>2],Ie,h(1,"i32",x));C(c[c[O>>2]+8>>2],Je,h(1,"i32",x));C(c[c[O>>2]+8>>2],vb,h(1,"i32",x));C(c[c[O>>2]+8>>2],vb,h(1,"i32",x));C(c[c[O>>2]+8>>2],Ke,h(1,"i32",x));C(c[c[O>>2]+8>>2],Le,h(1,"i32",x));C(c[c[O>>2]+8>>2],Me,h(1,"i32",x));C(c[c[O>>2]+8>>2],Ne,h(1,"i32",x));C(c[c[O>>2]+8>>2],Oe,h(1,"i32",x));C(c[c[O>>2]+8>>2],Pe,h(1,"i32",x));C(c[c[O>>2]+8>>2],Qe,h(1,"i32",x));C(c[c[O>>2]+8>>2],Re,h(1,"i32",x));C(c[c[O>>2]+
8>>2],Se,h(1,"i32",x));C(c[c[O>>2]+8>>2],Te,h(1,"i32",x));C(c[c[O>>2]+8>>2],Ue,h(1,"i32",x));C(c[c[O>>2]+8>>2],Ve,h(1,"i32",x));C(c[c[O>>2]+8>>2],We,h(1,"i32",x));C(c[c[O>>2]+8>>2],Xe,h(1,"i32",x));C(c[c[O>>2]+8>>2],Ye,h(1,"i32",x));C(c[c[O>>2]+8>>2],Ze,h(1,"i32",x));C(c[c[O>>2]+8>>2],$e,h(1,"i32",x));C(c[c[O>>2]+8>>2],af,h(1,"i32",x));C(c[c[O>>2]+8>>2],bf,h(1,"i32",x));C(c[c[O>>2]+8>>2],cf,h(1,"i32",x));C(c[c[O>>2]+8>>2],df,h(1,"i32",x));C(c[c[O>>2]+8>>2],ef,h(1,"i32",x));C(c[c[O>>2]+8>>2],ff,h(1,
"i32",x));C(c[c[O>>2]+8>>2],gf,h(1,"i32",x));C(c[c[O>>2]+8>>2],hf,h(1,"i32",x));C(c[c[O>>2]+8>>2],jf,h(1,"i32",x));C(c[c[O>>2]+8>>2],kf,h(1,"i32",x));C(c[c[O>>2]+8>>2],lf,h(1,"i32",x));C(c[c[O>>2]+8>>2],mf,h(1,"i32",x));C(c[c[O>>2]+8>>2],nf,h(1,"i32",x));C(c[c[O>>2]+8>>2],vb,h(1,"i32",x));C(c[c[O>>2]+8>>2],vb,h(1,"i32",x))}function of(a,b){var d,e,f,g;g=0;f=pf(b);d=0!=(f|0)?2:1;do if(2==d){C(c[c[O>>2]+12>>2],qf,h(1,"i32",x));a:for(;;){e=d=wb(f);if(0==(d|0)){d=9;break a}d=0==(Jb(Kb,e+4)|0)?7:6;b:do if(6==
d){if(0==(Jb(zc,e+4)|0))break b;Lb(c[c[a+4>>2]+(g<<2)>>2],e+4);g+=1;continue a}while(0)}e=0}else 1==d&&(C(c[c[O>>2]+12>>2],Ac,h([b,0,0,0],["i8*",0,0,0],x)),e=1);while(0);return e}function Zb(a){var b,d;a:{d=a+p(a);do{if(46==A[d])break a;d--}while(d>=a);d=0}a=0==(d|0)?1:2;a:do if(1==a)b=-1;else if(2==a){d+=1;a=0!=(d|0)?3:10;do if(3==a){b=0;b:for(;;){if(!(14>b>>>0)){a=9;break b}if(0==(Rh(d,c[Fa+(b<<2)>>2])|0)){a=6;break b}b+=1}do if(9!=a&&6==a){b=c[rf+(b<<2)>>2];break a}while(0)}while(0);b=-1}while(0);
return b}function sf(a,b,d,e){var f=L;L+=20480;g(L<la);var k,l=f+4096,m=f+8192,n=f+12288,q=f+16384,r,s,t,u;r=q;s=r+4096;u=0;0>u&&(u+=256);for(u=u+(u<<8)+(u<<16)+16777216*u;0!==r%4&&r<s;)A[r++]=0;r>>=2;for(t=s>>2;r<t;)c[r++]=u;for(r<<=2;r<s;)A[r++]=0;Lb(f,c[c[b+4>>2]+(a<<2)>>2]);C(c[c[O>>2]+12>>2],tf,h([a,0,0,0,f,0,0,0],["i32",0,0,0,"i8*",0,0,0],x));c[e+8200>>2]=Zb(f);a=-1==(c[e+8200>>2]|0)?1:2;do if(1==a)k=1;else if(2==a){gb(l,uf,h([c[d>>2],0,0,0,f,0,0,0],["i8*",0,0,0,"i8*",0,0,0],x));xb(e+8,l,4096);
k=n;a=vf(f,Kb);Lb(k,a);a:for(;;){k=a=vf(0,Kb);if(0==(a|0))break a;a=n;b=q;r=p(a);s=0;do{var v;t=b+s;u=a+r+s;for(v=t+1;t<v;)A[u++]=A[t++];s++}while(0!=A[b+s-1]);gb(q,Bc,h([k,0,0,0],["i8*",0,0,0],x))}a=1==(A[d+9]<<24>>24|0)?6:7;6==a&&(gb(m,wf,h([c[d>>2],0,0,0,n,0,0,0,c[d+4>>2],0,0,0],["i8*",0,0,0,"i8*",0,0,0,"i8*",0,0,0],x)),xb(e+4104,m,4096));k=0}while(0);L=f;return k}function xf(a,b,d,e,f){var k=L;L+=84;g(L<la);var l,m,n,q,r,s=k+32,t;g(I,"memcpy given 32 bytes to copy. Problem with quantum=1 corrections perhaps?");
var u;n=$b;t=k;l=n+32;if(t%4==n%4){for(;0!==n%4&&n<l;)A[t++]=A[n++];n>>=2;t>>=2;for(u=l>>2;n<u;)c[t++]=c[n++];n<<=2;t<<=2}for(;n<l;)A[t++]=A[n++];A[e+9]=0;a:for(;;){n=yf(a,b,zf,k,32);if(-1==(n|0)){l=2;break a}l=n;if(105==l)l=4;else if(111==l)l=8;else if(79==l)l=12;else if(114==l)l=22;else if(108==l)l=23;else if(104==l){l=24;break a}else l=121==l?25:120==l?26:27;do if(27==l)C(c[c[O>>2]+12>>2],Af,h([n,0,0,0,c[xa>>2],0,0,0],["i32",0,0,0,"i8*",0,0,0],x));else if(4==l){q=c[xa>>2];c[d+8200>>2]=Zb(q);if(0!=
c[d+8200>>2]&&1!=c[d+8200>>2]&&2!=c[d+8200>>2]){l=6;break a}xb(d+8,q,4095)}else if(8==l){r=c[xa>>2];c[d+8204>>2]=Zb(r);t=c[d+8204>>2];if(11!=t&&10!=t&&12!=t&&14!=t&&15!=t&&16!=t&&17!=t){l=10;break a}xb(d+4104,r,4095)}else if(12==l){l=c[xa>>2];gb(s,Bc,h([l,0,0,0],["i8*",0,0,0],x));A[e+9]=1;c[d+8204>>2]=Zb(s);l=c[d+8204>>2];if(11==l)l=13;else if(10==l)l=14;else if(12==l)l=15;else if(14==l)l=16;else if(15==l)l=17;else if(16==l)l=18;else if(17==l)l=19;else{l=20;break a}13==l?c[e+4>>2]=Cc:14==l?c[e+4>>
2]=Dc:15==l?c[e+4>>2]=Ec:16==l?c[e+4>>2]=Fc:17==l?c[e+4>>2]=ac:18==l?c[e+4>>2]=ac:19==l&&(c[e+4>>2]=Gc)}else 22==l?Bf(c[xa>>2],Hc,h([d,0,0,0],["i32*",0,0,0],x)):23==l?Bf(c[xa>>2],Hc,h([d+4,0,0,0],["i32*",0,0,0],x)):25==l?(t=U(p(c[xa>>2])+1),c[e>>2]=t,Lb(c[e>>2],c[xa>>2]),A[e+8]=1):26==l&&(t=c[xa>>2],xb(f,t,4096));while(0)}a:do if(2==l){l=1==(A[e+8]<<24>>24|0)?30:37;b:do if(30==l){l=0==(A[d+8]<<24>>24|0)?32:31;do if(32==l){l=0==(A[e+9]<<24>>24|0)?33:34;do if(33==l){C(c[c[O>>2]+12>>2],Cf,h(1,"i32",
x));C(c[c[O>>2]+12>>2],Df,h(1,"i32",x));m=1;break a}else if(34==l){l=0==(A[d+4104]<<24>>24|0)?36:35;do if(36!=l&&35==l){C(c[c[O>>2]+12>>2],Ef,h(1,"i32",x));m=1;break a}while(0)}while(0)}else if(31==l){C(c[c[O>>2]+12>>2],Ff,h(1,"i32",x));m=1;break a}while(0)}else if(37==l){l=0==(A[d+8]<<24>>24|0)?39:38;c:do if(38==l){if(0==(A[d+4104]<<24>>24|0))break c;l=41;break b}while(0);C(c[c[O>>2]+12>>2],Gf,h([c[b>>2],0,0,0],["i8*",0,0,0],x));C(c[c[O>>2]+12>>2],Hf,h([c[b>>2],0,0,0],["i8*",0,0,0],x));m=1;break a}while(0);
m=0}else 24==l?(Ge(),m=1):6==l?(C(c[c[O>>2]+12>>2],If,h([q,0,0,0],["i8*",0,0,0],x)),m=1):10==l?(C(c[c[O>>2]+12>>2],Ic,h([r,0,0,0],["i8*",0,0,0],x)),m=1):20==l&&(C(c[c[O>>2]+12>>2],Ic,h([s,0,0,0],["i8*",0,0,0],x)),m=1);while(0);L=k;return m}function Jc(a,b){var d=L;L+=12436;g(L<la);var e,f,k=d+8224,l=d+8236,m,p,n,q,r,s,t,u,v=d+8248,w=d+8340;f=0;m=l;r=m+12;n=0;0>n&&(n+=256);for(n=n+(n<<8)+(n<<16)+16777216*n;0!==m%4&&m<r;)A[m++]=0;m>>=2;for(p=r>>2;m<p;)c[m++]=n;for(m<<=2;m<r;)A[m++]=0;c[l>>2]=4;c[l+
4>>2]=6;c[l+8>>2]=8;if(1==(0!=(d|0)?1:2)){m=d;r=m+8224;n=0;0>n&&(n+=256);for(n=n+(n<<8)+(n<<16)+16777216*n;0!==m%4&&m<r;)A[m++]=0;m>>=2;for(p=r>>2;m<p;)c[m++]=n;for(m<<=2;m<r;)A[m++]=0;c[d+4>>2]=0;c[d>>2]=0;c[d+8220>>2]=0;c[d+8200>>2]=-1;c[d+8204>>2]=-1}A[w]=0;m=k;r=m+12;n=0;0>n&&(n+=256);for(n=n+(n<<8)+(n<<16)+16777216*n;0!==m%4&&m<r;)A[m++]=0;m>>=2;for(p=r>>2;m<p;)c[m++]=n;for(m<<=2;m<r;)A[m++]=0;e=1==(xf(a,b,d,k,w)|0)?1:2;a:do if(1==e)f=1;else if(2==e){e=1==(A[k+8]<<24>>24|0)?3:16;do if(3==e){q=
c[k>>2];n=H;r=0;s=pf(q);p=0!=(s|0)?2:1;do if(2==p){b:for(;;){m=p=wb(s);if(0==(p|0)){p=8;break b}p=0==(Jb(Kb,m+4)|0)?6:5;c:do if(5==p){if(0==(Jb(zc,m+4)|0))break c;r+=1;continue b}while(0)}n=r}else 1==p&&(C(c[c[O>>2]+12>>2],Ac,h([q,0,0,0],["i8*",0,0,0],x)),n=0);while(0);q=n;s=U(8);e=0!=(s|0)?4:11;do if(4==e){m=U(q<<12);c[s>>2]=m;m=U(q<<2);c[s+4>>2]=m;e=0!=(c[s>>2]|0)?6:5;do if(6==e)b:for(m=0;;){if(!((m|0)<(q|0))){e=10;break b}c[c[s+4>>2]+(m<<2)>>2]=c[s>>2]+(m<<12);m+=1}else if(5==e){f=1;break a}while(0)}while(0);
e=1==(of(s,c[k>>2])|0)?12:13;do if(12==e){f=1;break a}else if(13==e){e=0==(q|0)?14:15;do if(14==e){C(c[c[O>>2]+8>>2],Jf,h(1,"i32",x));f=1;break a}while(0)}while(0)}else 16==e&&(q=1);while(0);r=0;b:for(;;){if(!((r|0)<(q|0))){e=93;break b}m=0;C(c[c[O>>2]+12>>2],vb,h(1,"i32",x));e=1==(A[k+8]<<24>>24|0)?20:23;c:do if(20==e){e=0!=sf(r,s,k,d)<<24>>24?21:22;do if(21==e){C(c[c[O>>2]+12>>2],Kf,h(1,"i32",x));e=92;break c}else if(22==e){e=23;break c}while(0)}while(0);c:do if(23==e){e=Wa(d+8,Lf);if(0==(e|0)){e=
24;break b}Mf(e,2);p=e;p in T.a?(p=T.a[p],n=p.object.d?(V(Nf),-1):p.position):(V(Ra),n=-1);Mf(e,0);p=U(n);var z=e;t=1*n;0!=t&&((u=Of(z,p,t),z=T.a[z],-1==u)?z&&(z.error=I):u<t&&(z.f=I));Za(e);e=c[d+8200>>2];e=0==e?26:1==e?36:2==e?46:56;do if(56==e){C(c[c[O>>2]+12>>2],Pf,h(1,"i32",x));break c}else if(26==e){t=Wb(0);Ba(t,l,c[c[O>>2]+12>>2]);vc(t,d);u=E(t,p,n);e=0!=A[w]<<24>>24?27:28;27==e?m=ib(t,u,v):28==e&&(m=ib(t,u,0));if(0==(m|0)){e=30;break b}e=0!=A[w]<<24>>24?32:35;32==e&&(e=bc(v,w)&255,e=0!=e<<
24>>24?33:34,33==e&&C(c[c[O>>2]+12>>2],cc,h(1,"i32",x)))}else if(36==e){t=Wb(2);Ba(t,l,c[c[O>>2]+12>>2]);vc(t,d);u=E(t,p,n);e=0!=A[w]<<24>>24?37:38;37==e?m=ib(t,u,v):38==e&&(m=ib(t,u,0));if(0==(m|0)){e=40;break b}e=0!=A[w]<<24>>24?42:45;42==e&&(e=bc(v,w)&255,e=0!=e<<24>>24?43:44,43==e&&C(c[c[O>>2]+12>>2],cc,h(1,"i32",x)))}else if(46==e){t=Wb(1);Ba(t,l,c[c[O>>2]+12>>2]);vc(t,d);u=E(t,p,n);e=0!=A[w]<<24>>24?47:48;47==e?m=ib(t,u,v):48==e&&(m=ib(t,u,0));if(0==(m|0)){e=50;break b}e=0!=A[w]<<24>>24?52:
55;52==e&&(e=bc(v,w)&255,e=0!=e<<24>>24?53:54,53==e&&C(c[c[O>>2]+12>>2],cc,h(1,"i32",x)))}while(0);e=3==(c[m+20>>2]|0)?58:59;58==e&&Qf(m);e=0!=(c[m+28>>2]|0)?60:61;60==e&&(c[m+28>>2]=0,c[m+32>>2]=0);p=c[d+8204>>2];e=10==p?62:11==p?66:12==p?70:15==p?74:16==p?78:17==p?82:86;86==e?C(c[c[O>>2]+12>>2],Mb,h([d+4104,0,0,0],["i8*",0,0,0],x)):62==e?(e=0!=(Rf(m,d+4104)|0)?63:64,63==e?C(c[c[O>>2]+8>>2],Mb,h([d+4104,0,0,0],["i8*",0,0,0],x)):64==e&&C(c[c[O>>2]+8>>2],dc,h([d+4104,0,0,0],["i8*",0,0,0],x))):66==
e?(e=0!=(Sf(m,d+4104)|0)?67:68,67==e?C(c[c[O>>2]+8>>2],Mb,h([d+4104,0,0,0],["i8*",0,0,0],x)):68==e&&C(c[c[O>>2]+8>>2],dc,h([d+4104,0,0,0],["i8*",0,0,0],x))):70==e?(e=0!=(Tf(m,d+4104)|0)?71:72,71==e?C(c[c[O>>2]+8>>2],Mb,h([d+4104,0,0,0],["i8*",0,0,0],x)):72==e&&C(c[c[O>>2]+8>>2],dc,h([d+4104,0,0,0],["i8*",0,0,0],x))):74==e?(c[Kc>>2]=c[m+8>>2]-c[m>>2],c[Lc>>2]=c[m+12>>2]-c[m+4>>2],e=0!=(Uf(m,d+4104)|0)?75:76,75==e?C(c[c[O>>2]+8>>2],Vf,h([d+4104,0,0,0],["i8*",0,0,0],x)):76==e&&C(c[c[O>>2]+8>>2],ec,h([d+
4104,0,0,0],["i8*",0,0,0],x))):78==e?(e=0!=(Wf(m,d+4104)|0)?79:80,79==e?C(c[c[O>>2]+8>>2],Xf,h([d+4104,0,0,0],["i8*",0,0,0],x)):80==e&&C(c[c[O>>2]+8>>2],ec,h([d+4104,0,0,0],["i8*",0,0,0],x))):82==e&&(e=0!=(Yf(m,d+4104)|0)?83:84,83==e?C(c[c[O>>2]+8>>2],Zf,h([d+4104,0,0,0],["i8*",0,0,0],x)):84==e&&C(c[c[O>>2]+8>>2],ec,h([d+4104,0,0,0],["i8*",0,0,0],x)));e=0!=A[w]<<24>>24?90:91}while(0);r+=1}93==e?f=0:24==e?(C(c[c[O>>2]+12>>2],$f,h([d+8,0,0,0],["i8*",0,0,0],x)),f=1):30==e?(C(c[c[O>>2]+12>>2],fc,h(1,
"i32",x)),f=1):40==e?(C(c[c[O>>2]+12>>2],fc,h(1,"i32",x)),f=1):50==e&&(C(c[c[O>>2]+12>>2],fc,h(1,"i32",x)),f=1)}while(0);L=d;return f}function ag(a,b,e,d,f){var h=L;L+=20;g(L<la);var k,l;k=0!=(b|0)?1:3;a:do if(1==k){if(0==(e|0)){k=3;break a}if(0==(d|0)){k=3;break a}var m,p;k=h;l=k+18;p=0;0>p&&(p+=256);for(p=p+(p<<8)+(p<<16)+16777216*p;0!==k%4&&k<l;)A[k++]=0;k>>=2;for(m=l>>2;k<m;)c[k++]=p;for(k<<=2;k<l;)A[k++]=0;A[h+16]=b&255;R[h+12>>1]=e&65535;R[h+14>>1]=d&65535;A[h+2]=2;A[h+17]=8;k=0!=(f|0)?5:6;
5==k&&(A[h+17]=(ja[h+17]&255|32)&255);Na(h,18,1,a);l=1;k=7;break a}while(0);3==k&&(l=0);L=h;return l}function Wf(a,b){var e=L;L+=4;g(L<la);var d,f,k,l,m,p,n,q,r,s,t,u,v;u=Wa(b,$a);d=0!=(u|0)?2:1;do if(2==d){k=0;a:for(;;){if(!((k|0)<(c[a+16>>2]-1|0))){d=10;break a}if((c[c[a+24>>2]>>2]|0)!=(c[c[a+24>>2]+48*(k+1)>>2]|0)){d=7;break a}if((c[c[a+24>>2]+4>>2]|0)!=(c[c[a+24>>2]+48*(k+1)+4>>2]|0)){d=7;break a}if((c[c[a+24>>2]+24>>2]|0)!=(c[c[a+24>>2]+48*(k+1)+24>>2]|0)){d=7;break a}k+=1}do if(10==d){k=c[c[a+
24>>2]+8>>2];l=c[c[a+24>>2]+12>>2];if(2==(c[a+16>>2]|0)){var w=1;d=12}else d=11;11==d&&(w=4==(c[a+16>>2]|0));p=w&1;d=0!=(p|0)?32:24;d=0!=(ag(u,d,k,l,1)|0)?14:13;do if(14==d){n=c[a+16>>2]-1;t=255/((1<<c[c[a+24>>2]+24>>2])-1|0);m=0;a:for(;;){if(!((m|0)<(l|0))){d=27;break a}v=m*k;f=0;b:for(;;){if(!((f|0)<(k|0)))break b;q=c[c[c[a+24>>2]+44>>2]+(v<<2)>>2]|0;d=2<(c[a+16>>2]|0)?19:20;19==d?(r=c[c[c[a+24>>2]+48+44>>2]+(v<<2)>>2]|0,s=c[c[c[a+24>>2]+96+44>>2]+(v<<2)>>2]|0):20==d&&(s=r=q);A[e]=Math.floor(s*
t);Na(e,1,1,u);A[e]=Math.floor(r*t);Na(e,1,1,u);A[e]=Math.floor(q*t);Na(e,1,1,u);d=0!=(p|0)?22:23;22==d&&(q=c[c[c[a+24>>2]+48*n+44>>2]+(v<<2)>>2]|0,A[e]=Math.floor(q*t),Na(e,1,1,u));f+=1;v+=1}m+=1}f=0}else 13==d&&(f=1);while(0)}else 7==d&&(C(c[c[O>>2]+12>>2],bg,h(1,"i32",x)),f=1);while(0)}else 1==d&&(C(c[c[O>>2]+12>>2],yb,h([b,0,0,0],["i8*",0,0,0],x)),f=1);while(0);L=e;return f}function Tf(a,b){var e,d,f,g,k,l,m,p,n,q,r,s;e=3==(c[a+16>>2]|0)?1:41;a:do if(1==e){if((c[c[a+24>>2]>>2]|0)!=(c[c[a+24>>
2]+48>>2]|0)){e=41;break a}if((c[c[a+24>>2]+48>>2]|0)!=(c[c[a+24>>2]+96>>2]|0)){e=41;break a}if((c[c[a+24>>2]+4>>2]|0)!=(c[c[a+24>>2]+48+4>>2]|0)){e=41;break a}if((c[c[a+24>>2]+48+4>>2]|0)!=(c[c[a+24>>2]+96+4>>2]|0)){e=41;break a}if((c[c[a+24>>2]+24>>2]|0)!=(c[c[a+24>>2]+48+24>>2]|0)){e=41;break a}if((c[c[a+24>>2]+48+24>>2]|0)!=(c[c[a+24>>2]+96+24>>2]|0)){e=41;break a}m=Wa(b,$a);e=0!=(m|0)?9:8;do if(9==e){f=c[c[a+24>>2]+8>>2];g=c[c[a+24>>2]+12>>2];C(m,Mc,h(1,"i32",x));C(m,na,h([g*f*3+(f|0)%2*g*3+
54&255,0,0,0,g*f*3+(f|0)%2*g*3+54>>8&255,0,0,0,g*f*3+(f|0)%2*g*3+54>>16&255,0,0,0,g*f*3+(f|0)%2*g*3+54>>24&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h(16,"i32",x));C(m,na,h([54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([f&255,0,0,0,f>>8&255,0,0,0,f>>16&255,0,0,0,f>>24&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",
0,0,0],x));C(m,na,h([g&255,0,0,0,g>>8&255,0,0,0,g>>16&255,0,0,0,g>>24&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,Nb,h([1,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0],x));C(m,Nb,h([24,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0],x));C(m,na,h(16,"i32",x));C(m,na,h([3*g*f+(f|0)%2*g*3&255,0,0,0,g*f*3+(f|0)%2*g*3>>8&255,0,0,0,g*f*3+(f|0)%2*g*3>>16&255,0,0,0,g*f*3+(f|0)%2*g*3>>24&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([154,0,0,0,30,0,0,0,0,0,0,0,0,0,
0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([154,0,0,0,30,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h(16,"i32",x));C(m,na,h(16,"i32",x));e=8<(c[c[a+24>>2]+24>>2]|0)?10:11;10==e?(p=c[c[a+24>>2]+24>>2]-8,Ya(Nc,h([c[c[a+24>>2]+24>>2],0,0,0],["i32",0,0,0],x))):11==e&&(p=0);e=8<(c[c[a+24>>2]+48+24>>2]|0)?13:14;13==e?(n=c[c[a+24>>2]+48+24>>2]-8,Ya(cg,h([c[c[a+24>>2]+48+24>>2],0,0,0],["i32",0,0,0],x))):14==e&&(n=0);e=8<(c[c[a+24>>2]+96+24>>
2]|0)?16:17;16==e?(q=c[c[a+24>>2]+96+24>>2]-8,Ya(dg,h([c[c[a+24>>2]+96+24>>2],0,0,0],["i32",0,0,0],x))):17==e&&(q=0);k=0;b:for(;;){if(!((k|0)<(f*g|0)))break b;l=c[c[c[a+24>>2]+44>>2]+(f*g-(((k|0)/(f|0)|0)+1)*f+(k|0)%(f|0)<<2)>>2];e=0!=(c[c[a+24>>2]+32>>2]|0)?21:22;if(21==e)var t=1<<c[c[a+24>>2]+24>>2]-1;else 22==e&&(t=0);l+=t;l=(l>>(p|0))+(l>>(p-1|0)|0)%2&255;r=c[c[c[a+24>>2]+48+44>>2]+(f*g-(((k|0)/(f|0)|0)+1)*f+(k|0)%(f|0)<<2)>>2];e=0!=(c[c[a+24>>2]+48+32>>2]|0)?24:25;if(24==e)var u=1<<c[c[a+24>>
2]+48+24>>2]-1;else 25==e&&(u=0);r+=u;r=(r>>(n|0))+(r>>(n-1|0)|0)%2&255;s=c[c[c[a+24>>2]+96+44>>2]+(f*g-(((k|0)/(f|0)|0)+1)*f+(k|0)%(f|0)<<2)>>2];e=0!=(c[c[a+24>>2]+96+32>>2]|0)?27:28;if(27==e)var v=1<<c[c[a+24>>2]+96+24>>2]-1;else 28==e&&(v=0);s+=v;e=(s>>(q|0))+(s>>(q-1|0)|0)%2&255;C(m,Oc,h([e&255,0,0,0,r&255,0,0,0,l&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));e=0==((k+1|0)%(f|0)|0)?30:38;do if(30==e){e=0!=((3*f|0)%4|0)?31:32;if(31==e)var w=4-(3*f|0)%4;else 32==e&&(w=0);l=w;c:for(;;){if(!(0<
(l|0))){e=37;break c}C(m,Ob,h(4,"i32",x));l-=1}}while(0);k+=1}Za(m);e=65;break a}else if(8==e){C(c[c[O>>2]+12>>2],yb,h([b,0,0,0],["i8*",0,0,0],x));d=1;e=66;break a}while(0)}while(0);a:do if(41==e){m=Wa(b,$a);f=c[c[a+24>>2]+8>>2];g=c[c[a+24>>2]+12>>2];C(m,Mc,h(1,"i32",x));C(m,na,h([g*f+1078+(f|0)%2*g&255,0,0,0,g*f+1078+(f|0)%2*g>>8&255,0,0,0,g*f+1078+(f|0)%2*g>>16&255,0,0,0,g*f+1078+(f|0)%2*f>>24&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h(16,"i32",x));C(m,na,h([54,0,
0,0,4,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([f&255,0,0,0,f>>8&255,0,0,0,f>>16&255,0,0,0,f>>24&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([g&255,0,0,0,g>>8&255,0,0,0,g>>16&255,0,0,0,g>>24&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,Nb,h([1,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0],x));C(m,Nb,h([8,0,0,
0,0,0,0,0],["i32",0,0,0,"i32",0,0,0],x));C(m,na,h(16,"i32",x));C(m,na,h([g*f+(f|0)%2*g&255,0,0,0,g*f+(f|0)%2*g>>8&255,0,0,0,g*f+(f|0)%2*g>>16&255,0,0,0,g*f+(f|0)%2*g>>24&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([154,0,0,0,30,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([154,0,0,0,30,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,
0,"i32",0,0,0,"i32",0,0,0],x));C(m,na,h([0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));e=8<(c[c[a+24>>2]+24>>2]|0)?42:43;42==e?(p=c[c[a+24>>2]+24>>2]-8,Ya(Nc,h([c[c[a+24>>2]+24>>2],0,0,0],["i32",0,0,0],x))):43==e&&(p=0);k=0;b:for(;;){if(!(256>(k|0)))break b;C(m,na,h([k,0,0,0,k,0,0,0,k,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));k+=1}k=0;b:for(;;){if(!((k|0)<(f*g|0)))break b;n=c[c[c[a+24>>2]+44>>2]+(f*g-(((k|0)/(f|0)|0)+1)*f+(k|0)%(f|
0)<<2)>>2];e=0!=(c[c[a+24>>2]+32>>2]|0)?51:52;if(51==e)var z=1<<c[c[a+24>>2]+24>>2]-1;else 52==e&&(z=0);n+=z;e=(n>>(p|0))+(n>>(p-1|0)|0)%2&255;C(m,Ob,h([e&255,0,0,0],["i32",0,0,0],x));e=0==((k+1|0)%(f|0)|0)?54:62;do if(54==e){e=0!=((f|0)%4|0)?55:56;if(55==e)var E=4-(f|0)%4;else 56==e&&(E=0);l=E;c:for(;;){if(!(0<(l|0))){e=61;break c}C(m,Ob,h(4,"i32",x));l-=1}}while(0);k+=1}Za(m);e=65;break a}while(0);65==e&&(d=0);return d}function Sf(a,b){var e=L;L+=260;g(L<la);var d,f,k,l,m,n,q,r,s,t,u=e+256;n=0;
a:for(;;){if(!((n|0)<(c[a+16>>2]|0))){d=29;break a}m=c[a+24>>2]+48*n;r=e;s=0;d=p(b);k=d-4;l=k+6;if(46!=(A[b+k]<<24>>24|0)){d=3;break a}d=256<l>>>0?5:6;5==d&&(r=U(l+1));xb(r,b,k);d=1<(c[a+16>>2]|0)?7:8;7==d?gb(r+k,eg,h([n,0,0,0],["i32",0,0,0],x)):8==d&&Lb(r+k,fg);q=Wa(r,$a);if(0==(q|0)){d=10;break a}k=c[c[a+24>>2]+48*n+8>>2];l=c[c[a+24>>2]+48*n+12>>2];C(q,gg,h([0!=(c[m+32>>2]|0)?45:43,0,0,0,c[m+24>>2],0,0,0,k,0,0,0,l,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));d=8>=(c[m+24>>2]|0)?
14:15;14==d?s=1:15==d&&(d=16>=(c[m+24>>2]|0)?16:17,16==d?s=2:17==d&&(s=4));m=0;b:for(;;){if(!((m|0)<(k*l|0)))break b;t=c[c[c[a+24>>2]+48*n+44>>2]+(m<<2)>>2];d=s-1;c:for(;;){if(!(0<=(d|0)))break c;A[u]=t>>(d<<3|0)&255;Na(u,1,1,q);d-=1}m+=1}Za(q);n+=1}29==d?f=0:3==d?(C(c[c[O>>2]+12>>2],hg,h(1,"i32",x)),f=1):10==d&&(C(c[c[O>>2]+12>>2],yb,h([r,0,0,0],["i8*",0,0,0],x)),f=1);L=e;return f}function Rf(a,b){var e=L;L+=256;g(L<la);var d,f,k,l,m,p,n,q,r,s,t,u,v,w;k=b;a:for(;;){if(0==A[k]<<24>>24)break a;k+=
1}k=k-1-1;t=A[k];d=3==(c[a+16>>2]|0)?4:40;a:do if(4==d){if((c[c[a+24>>2]>>2]|0)!=(c[c[a+24>>2]+48>>2]|0)){d=40;break a}if((c[c[a+24>>2]+48>>2]|0)!=(c[c[a+24>>2]+96>>2]|0)){d=40;break a}if((c[c[a+24>>2]+4>>2]|0)!=(c[c[a+24>>2]+48+4>>2]|0)){d=40;break a}if((c[c[a+24>>2]+48+4>>2]|0)!=(c[c[a+24>>2]+96+4>>2]|0)){d=40;break a}if((c[c[a+24>>2]+24>>2]|0)!=(c[c[a+24>>2]+48+24>>2]|0)){d=40;break a}if((c[c[a+24>>2]+48+24>>2]|0)!=(c[c[a+24>>2]+96+24>>2]|0)){d=40;break a}if(103==(t<<24>>24|0)){d=40;break a}if(71==
(t<<24>>24|0)){d=40;break a}s=Wa(b,$a);d=0!=(s|0)?14:13;do if(14==d){k=c[c[a+24>>2]+8>>2];l=c[c[a+24>>2]+12>>2];d=8<(c[c[a+24>>2]+24>>2]|0)?15:16;15==d?m=255:16==d&&(m=(1<<c[c[a+24>>2]+24>>2])-1);d=m;c[c[a+24>>2]+16>>2]=c[c[a+24>>2]+16>>2]-((c[a>>2]+c[c[a+24>>2]>>2]-1|0)/(c[c[a+24>>2]>>2]|0)|0)+(1<<c[c[a+24>>2]+40>>2])-1>>(c[c[a+24>>2]+40>>2]|0);c[c[a+24>>2]+20>>2]=c[c[a+24>>2]+20>>2]-((c[a+4>>2]+c[c[a+24>>2]+4>>2]-1|0)/(c[c[a+24>>2]+4>>2]|0)|0)+(1<<c[c[a+24>>2]+40>>2])-1>>(c[c[a+24>>2]+40>>2]|0);
C(s,ig,h([k,0,0,0,l,0,0,0,d,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));d=8<(c[c[a+24>>2]+24>>2]|0)?18:19;18==d?(p=c[c[a+24>>2]+24>>2]-8,Ya(jg,h([c[c[a+24>>2]+24>>2],0,0,0],["i32",0,0,0],x))):19==d&&(p=0);d=8<(c[c[a+24>>2]+48+24>>2]|0)?21:22;21==d?(n=c[c[a+24>>2]+48+24>>2]-8,Ya(kg,h([c[c[a+24>>2]+48+24>>2],0,0,0],["i32",0,0,0],x))):22==d&&(n=0);d=8<(c[c[a+24>>2]+96+24>>2]|0)?24:25;24==d?(q=c[c[a+24>>2]+96+24>>2]-8,Ya(lg,h([c[c[a+24>>2]+96+24>>2],0,0,0],["i32",0,0,0],x))):25==d&&(q=0);m=0;b:for(;;){if(!((m|
0)<(k*l|0)))break b;u=c[c[c[a+24>>2]+44>>2]+(m<<2)>>2];d=0!=(c[c[a+24>>2]+32>>2]|0)?29:30;if(29==d)var z=1<<c[c[a+24>>2]+24>>2]-1;else 30==d&&(z=0);u+=z;u=(u>>(p|0))+(u>>(p-1|0)|0)%2&255;v=c[c[c[a+24>>2]+48+44>>2]+(m<<2)>>2];d=0!=(c[c[a+24>>2]+48+32>>2]|0)?32:33;if(32==d)var E=1<<c[c[a+24>>2]+48+24>>2]-1;else 33==d&&(E=0);v+=E;v=(v>>(n|0))+(v>>(n-1|0)|0)%2&255;w=c[c[c[a+24>>2]+96+44>>2]+(m<<2)>>2];d=0!=(c[c[a+24>>2]+96+32>>2]|0)?35:36;if(35==d)var y=1<<c[c[a+24>>2]+96+24>>2]-1;else 36==d&&(y=0);w+=
y;d=(w>>(q|0))+(w>>(q-1|0)|0)%2&255;C(s,Oc,h([u&255,0,0,0,v&255,0,0,0,d&255,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));m+=1}Za(s);d=69;break a}else if(13==d){C(c[c[O>>2]+12>>2],yb,h([b,0,0,0],["i8*",0,0,0],x));f=1;d=70;break a}while(0)}while(0);a:do if(40==d){d=103==(t<<24>>24|0)?42:41;b:do if(41==d){if(71==(t<<24>>24|0)){d=42;break b}var D=c[a+16>>2];d=44;break b}while(0);42==d&&(D=1);n=D;d=(c[a+16>>2]|0)>(n|0)?45:46;45==d&&(C(c[c[O>>2]+12>>2],mg,h(1,"i32",x)),C(c[c[O>>2]+12>>2],ng,h(1,"i32",
x)));p=0;b:for(;;){if(!((p|0)<(n|0))){d=68;break b}d=1<(n|0)?49:50;49==d?gb(e,og,h([p,0,0,0,b,0,0,0],["i32",0,0,0,"i8*",0,0,0],x)):50==d&&gb(e,pg,h([b,0,0,0],["i8*",0,0,0],x));s=Wa(e,$a);if(0==(s|0)){d=52;break b}k=c[c[a+24>>2]+48*p+8>>2];l=c[c[a+24>>2]+48*p+12>>2];d=8<(c[c[a+24>>2]+48*p+24>>2]|0)?54:55;if(54==d)var B=255;else 55==d&&(B=(1<<c[c[a+24>>2]+48*p+24>>2])-1);d=B;c[c[a+24>>2]+48*p+16>>2]=c[c[a+24>>2]+48*p+16>>2]-((c[a>>2]+c[c[a+24>>2]+48*p>>2]-1|0)/(c[c[a+24>>2]+48*p>>2]|0)|0)+(1<<c[c[a+
24>>2]+48*p+40>>2])-1>>(c[c[a+24>>2]+48*p+40>>2]|0);c[c[a+24>>2]+48*p+20>>2]=c[c[a+24>>2]+48*p+20>>2]-((c[a+4>>2]+c[c[a+24>>2]+48*p+4>>2]-1|0)/(c[c[a+24>>2]+48*p+4>>2]|0)|0)+(1<<c[c[a+24>>2]+48*p+40>>2])-1>>(c[c[a+24>>2]+48*p+40>>2]|0);C(s,qg,h([k,0,0,0,l,0,0,0,d,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));d=8<(c[c[a+24>>2]+48*p+24>>2]|0)?57:58;57==d?(r=c[c[a+24>>2]+24>>2]-8,Ya(rg,h([p,0,0,0,c[c[a+24>>2]+48*p+24>>2],0,0,0],["i32",0,0,0,"i32",0,0,0],x))):58==d&&(r=0);m=0;c:for(;;){if(!((m|0)<
(k*l|0)))break c;q=c[c[c[a+24>>2]+48*p+44>>2]+(m<<2)>>2];d=0!=(c[c[a+24>>2]+48*p+32>>2]|0)?62:63;if(62==d)var F=1<<c[c[a+24>>2]+48*p+24>>2]-1;else 63==d&&(F=0);q+=F;q=(q>>(r|0))+(q>>(r-1|0)|0)%2&255;C(s,Ob,h([q&255,0,0,0],["i32",0,0,0],x));m+=1}Za(s);p+=1}do if(68==d){d=69;break a}else if(52==d){C(c[c[O>>2]+12>>2],yb,h([e,0,0,0],["i8*",0,0,0],x));f=1;d=70;break a}while(0)}while(0);69==d&&(f=0);L=e;return f}function Uf(a,b){var d=L;L+=16;g(L<la);var e,f,k,l,m,p,n,q,r,s=d+4,t,u=d+8,v=d+12;e=0==(c[a+
16>>2]*c[a+8>>2]*c[a+12>>2]|0)?1:2;do if(1==e)C(c[c[O>>2]+12>>2],sg,h(1,"i32",x)),f=1;else if(2==e){k=Wa(b,$a);e=0!=(k|0)?4:3;do if(4==e){C(c[c[O>>2]+8>>2],tg,h([c[a+16>>2],0,0,0],["i32",0,0,0],x));l=0;a:for(;;){if(!((l|0)<(c[a+16>>2]|0))){e=58;break a}C(c[c[O>>2]+8>>2],ug,h([l,0,0,0,c[c[a+24>>2]+48*l+8>>2],0,0,0,c[c[a+24>>2]+48*l+12>>2],0,0,0,c[c[a+24>>2]+48*l+24>>2],0,0,0,1==(c[c[a+24>>2]+48*l+32>>2]|0)?vg:wg,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i8*",0,0,0],x));m=c[c[a+24>>2]+
48*l+8>>2];p=c[c[a+24>>2]+48*l+12>>2];e=8>=(c[c[a+24>>2]+48*l+24>>2]|0)?7:29;do if(7==e){e=1==(c[c[a+24>>2]+48*l+32>>2]|0)?8:17;do if(8==e)b:for(r=(1<<c[c[a+24>>2]+48*l+24>>2])-1,q=c[c[a+24>>2]+48*l+44>>2],e=0;;){if(!((e|0)<(p|0))){e=16;break b}n=0;c:for(;;){if(!((n|0)<(m|0)))break c;A[d]=c[q>>2]&r&255;Na(d,1,1,k);q+=4;n+=1}e+=1}else if(17==e){e=0==(c[c[a+24>>2]+48*l+32>>2]|0)?18:27;do if(18==e)b:for(r=(1<<c[c[a+24>>2]+48*l+24>>2])-1,q=c[c[a+24>>2]+48*l+44>>2],e=0;;){if(!((e|0)<(p|0))){e=26;break b}n=
0;c:for(;;){if(!((n|0)<(m|0)))break c;A[s]=c[q>>2]&r&255;Na(s,1,1,k);q+=4;n+=1}e+=1}while(0)}while(0)}else if(29==e){if(!(16>=(c[c[a+24>>2]+48*l+24>>2]|0))){e=52;break a}e=1==(c[c[a+24>>2]+48*l+32>>2]|0)?31:40;do if(31==e)b:for(t=(1<<c[c[a+24>>2]+48*l+24>>2])-1,q=c[c[a+24>>2]+48*l+44>>2],e=0;;){if(!((e|0)<(p|0))){e=39;break b}n=0;c:for(;;){if(!((n|0)<(m|0)))break c;r=c[q>>2]&t&65535;A[u]=r<<16>>16>>8&255;Na(u,1,1,k);A[u]=r&255;Na(u,1,1,k);q+=4;n+=1}e+=1}else if(40==e){e=0==(c[c[a+24>>2]+48*l+32>>
2]|0)?41:50;do if(41==e)b:for(t=(1<<c[c[a+24>>2]+48*l+24>>2])-1,q=c[c[a+24>>2]+48*l+44>>2],e=0;;){if(!((e|0)<(p|0))){e=49;break b}n=0;c:for(;;){if(!((n|0)<(m|0)))break c;r=c[q>>2]&t&65535;A[v]=(r&65535)>>8&255;Na(v,1,1,k);A[v]=r&255;Na(v,1,1,k);q+=4;n+=1}e+=1}while(0)}while(0)}while(0);l+=1}58==e?(Za(k),f=0):52==e&&(e=32>=(c[c[a+24>>2]+48*l+24>>2]|0)?53:54,53==e?(C(c[c[O>>2]+12>>2],xg,h(1,"i32",x)),f=1):54==e&&(C(c[c[O>>2]+12>>2],yg,h([c[c[a+24>>2]+48*l+24>>2],0,0,0],["i32",0,0,0],x)),f=1))}else 3==
e&&(C(c[c[O>>2]+12>>2],zg,h([b,0,0,0],["i8*",0,0,0],x)),f=1);while(0)}while(0);L=d;return f}function Yf(a,b){var e=L;L+=16;g(L<la);var d,f,k,l=e+4,p,n,q,r,s,t,u,v,w,z,E,y,D,B,F,K,G,J,M,N,P,R,S,Z=e+8,Q;S=-1;J=P=R=0;K=1;M=c[c[a+24>>2]+24>>2];N=c[c[a+24>>2]+24>>2];d=8<(N|0)?1:3;a:do if(1==d){if(!(16>(N|0)))break a;N=16;J=1}while(0);d=1!=(N|0)?4:9;a:do if(4==d){if(2==(N|0)){d=9;break a}if(4==(N|0)){d=9;break a}if(8==(N|0)){d=9;break a}if(16==(N|0)){d=9;break a}C(c[c[O>>2]+12>>2],Ag,h([b,0,0,0,N,0,0,0],
["i8*",0,0,0,"i32",0,0,0],x));f=K;d=127;break a}while(0);do if(9==d){k=Wa(b,$a);d=0==(k|0)?10:11;do if(10==d)f=K;else if(11==d){f=c[l>>2]=0;p=Sh(Bg,0,0,0);c[e>>2]=p;d=0==(c[e>>2]|0)?12:13;a:do if(12!=d&&13==d){p=Th(c[e>>2]);c[l>>2]=p;d=0==(c[l>>2]|0)?14:15;do if(14!=d&&15==d){d=17;do if(16!=d&&17==d){Uh(c[e>>2],k);Vh(c[e>>2],9);d=16==(N|0)?18:19;18==d?S=-1:19==d&&(d=8==(N|0)?20:21,20==d?S=255:21==d&&(d=4==(N|0)?22:23,22==d?S=15:23==d&&(d=2==(N|0)?24:25,24==d?S=3:25==d&&(d=1==(N|0)?26:27,26==d&&(S=
1)))));w=c[a+16>>2];d=3<=(w|0)?32:77;b:do if(32==d){if((c[c[a+24>>2]>>2]|0)!=(c[c[a+24>>2]+48>>2]|0)){d=77;break b}if((c[c[a+24>>2]+48>>2]|0)!=(c[c[a+24>>2]+96>>2]|0)){d=77;break b}if((c[c[a+24>>2]+4>>2]|0)!=(c[c[a+24>>2]+48+4>>2]|0)){d=77;break b}if((c[c[a+24>>2]+48+4>>2]|0)!=(c[c[a+24>>2]+96+4>>2]|0)){d=77;break b}if((c[c[a+24>>2]+24>>2]|0)!=(c[c[a+24>>2]+48+24>>2]|0)){d=77;break b}if((c[c[a+24>>2]+48+24>>2]|0)!=(c[c[a+24>>2]+96+24>>2]|0)){d=77;break b}f=3<(w|0)&1;G=16==(N|0)&1;u=c[c[a+24>>2]+8>>
2];v=c[c[a+24>>2]+12>>2];p=c[c[a+24>>2]+44>>2];n=c[c[a+24>>2]+48+44>>2];q=c[c[a+24>>2]+96+44>>2];A[Z+2]=N&255;A[Z+1]=N&255;A[Z]=N&255;d=0!=(f|0)?39:40;39==d?(A[Z+4]=N&255,r=c[c[a+24>>2]+144+44>>2],z=6):40==d&&(r=A[Z+4]=0,z=2);Cg(c[e>>2],c[l>>2],Z);Dg(c[e>>2],c[l>>2],u,v,N,z,0,0,0);Eg(c[e>>2],c[l>>2]);d=8>(M|0)?42:43;42==d&&Fg(c[e>>2]);d=0!=(J|0)?44:45;44==d&&(P=16-M,R=M-P);d=0!=(c[c[a+24>>2]+32>>2]|0)?46:47;if(46==d)var X=1<<c[c[a+24>>2]+24>>2]-1;else 47==d&&(X=0);E=X;d=0!=(c[c[a+24>>2]+48+32>>2]|
0)?49:50;if(49==d)var aa=1<<c[c[a+24>>2]+48+24>>2]-1;else 50==d&&(aa=0);y=aa;d=0!=(c[c[a+24>>2]+96+32>>2]|0)?52:53;if(52==d)var ba=1<<c[c[a+24>>2]+96+24>>2]-1;else 53==d&&(ba=0);D=ba;s=U(u*w<<1);F=0;c:for(;;){if(!((F|0)<(v|0)))break c;t=s;B=0;d:for(;;){if(!((B|0)<(u|0)))break d;d=0!=(G|0)?59:70;59==d?(Q=c[p>>2]+E,p+=4,d=0!=(J|0)?60:61,60==d&&(Q=(Q<<P)+(Q>>(R|0))),d=t,t=d+1,A[d]=Q>>8&255,d=t,t=d+1,A[d]=Q&255,Q=c[n>>2]+y,n+=4,d=0!=(J|0)?62:63,62==d&&(Q=(Q<<P)+(Q>>(R|0))),d=t,t=d+1,A[d]=Q>>8&255,d=t,
t=d+1,A[d]=Q&255,Q=c[q>>2]+D,q+=4,d=0!=(J|0)?64:65,64==d&&(Q=(Q<<P)+(Q>>(R|0))),d=t,t=d+1,A[d]=Q>>8&255,d=t,t=d+1,A[d]=Q&255,d=0!=(f|0)?66:69,66==d&&(d=r,r=d+4,Q=c[d>>2],d=0!=(J|0)?67:68,67==d&&(Q=(Q<<P)+(Q>>(R|0))),d=t,t=d+1,A[d]=Q>>8&255,d=t,t=d+1,A[d]=Q&255)):70==d&&(d=c[p>>2]+E&S&255,Q=t,t=Q+1,A[Q]=d,p+=4,d=c[n>>2]+y&S&255,Q=t,t=Q+1,A[Q]=d,n+=4,d=c[q>>2]+D&S&255,Q=t,t=Q+1,A[Q]=d,q+=4,d=0!=(f|0)?71:72,71==d&&(d=c[r>>2]&S&255,Q=t,t=Q+1,A[Q]=d,r+=4));B+=1}Pc(c[e>>2],s);F+=1}d=121;break b}while(0);
do if(77==d){d=1==(w|0)?82:78;b:do if(78==d){d=2==(w|0)?79:119;c:do if(79==d){if((c[c[a+24>>2]>>2]|0)!=(c[c[a+24>>2]+48>>2]|0))break c;if((c[c[a+24>>2]+4>>2]|0)!=(c[c[a+24>>2]+48+4>>2]|0))break c;if((c[c[a+24>>2]+24>>2]|0)==(c[c[a+24>>2]+48+24>>2]|0))break b}while(0);C(c[c[O>>2]+12>>2],Gg,h([b,0,0,0],["i8*",0,0,0],x));break a}while(0);p=c[c[a+24>>2]+44>>2];d=0!=(J|0)?83:84;83==d&&(P=16-M,R=M-P);A[Z+3]=N&255;A[Z+4]=0;A[Z+2]=0;A[Z+1]=0;z=r=A[Z]=0;d=2==(w|0)?85:86;85==d&&(f=1,A[Z+4]=N&255,r=c[c[a+24>>
2]+48+44>>2],z=4);u=c[c[a+24>>2]+8>>2];v=c[c[a+24>>2]+12>>2];Dg(c[e>>2],c[l>>2],u,v,ja[Z+3]&255,z,0,0,0);Cg(c[e>>2],c[l>>2],Z);Eg(c[e>>2],c[l>>2]);d=0!=(c[c[a+24>>2]+32>>2]|0)?87:88;if(87==d)var ca=1<<c[c[a+24>>2]+24>>2]-1;else 88==d&&(ca=0);E=ca;d=8>(M|0)?90:91;90==d&&Fg(c[e>>2]);d=8<(N|0)?92:107;do if(92==d)b:for(s=U(u*w<<1),F=0;;){if(!((F|0)<(v|0))){d=106;break b}t=s;B=0;c:for(;;){if(!((B|0)<(u|0)))break c;n=c[p>>2]+E;p+=4;d=0!=(J|0)?97:98;97==d&&(n=(n<<P)+(n>>(R|0)));q=t;t=q+1;A[q]=n>>8&255;q=
t;t=q+1;A[q]=n&255;d=0!=(f|0)?99:102;99==d&&(n=r,r=n+4,n=c[n>>2],d=0!=(J|0)?100:101,100==d&&(n=(n<<P)+(n>>(R|0))),q=t,t=q+1,A[q]=n>>8&255,q=t,t=q+1,A[q]=n&255);B+=1}Pc(c[e>>2],s);F+=1}else if(107==d)b:for(s=wa(u,w<<1),F=0;;){if(!((F|0)<(v|0))){d=117;break b}t=s;B=0;c:for(;;){if(!((B|0)<(u|0)))break c;n=c[p>>2]+E&S&255;q=t;t=q+1;A[q]=n;p+=4;d=0!=(f|0)?112:113;112==d&&(n=c[r>>2]&S&255,q=t,t=q+1,A[q]=n,r+=4);B+=1}Pc(c[e>>2],s);F+=1}while(0)}while(0);Wh(c[e>>2],c[l>>2]);K=0}while(0)}while(0)}while(0);
d=0!=(c[e>>2]|0)?123:124;123==d&&Xh(e,l);Za(k);d=0!=(K|0)?125:126;if(125==d&&(f=b,-1==Yh(f)))a:if(f=T.m(m(f)),f.q&&f.n)if(!f.object.write||f.Z)V(Oa);else if(f.object.c){p=H;for(p in f.object.b){V(Hg);break a}f.path==T.P?V(Ig):delete f.k.b[f.name]}else V(Pb);else V(f.error);f=K}while(0)}while(0);L=e;return f}function bc(a,b){var d,e,f,g,k,l,m,p,n,q,r,t,s,u,v,w,z,E,y,D,A,B,F,K,J,G;r=0;d=0!=(a|0)?2:1;do if(2==d){q=Wa(b,Jg);d=0!=(q|0)?4:3;do if(4==d){d=0!=(oa[0]=pa[c[a+88>>2]+556>>2],oa[1]=pa[c[a+88>>
2]+556+4>>2],Pa[0])?5:6;5==d?t=1:6==d&&(t=0);d=0!=(c[c[a+88>>2]+552>>2]|0)?8:9;8==d?s=1:9==d&&(s=0);C(q,gc,h([c[a+16>>2],0,0,0,c[a+20>>2],0,0,0],["i32",0,0,0,"i32",0,0,0],x));C(q,ab,h([c[a+24>>2],0,0,0],["i32",0,0,0],x));C(q,gc,h([c[a+28>>2],0,0,0,c[a+32>>2],0,0,0],["i32",0,0,0,"i32",0,0,0],x));C(q,gc,h([c[a+44>>2],0,0,0,c[a+48>>2],0,0,0],["i32",0,0,0,"i32",0,0,0],x));C(q,ab,h([c[a+52>>2],0,0,0],["i32",0,0,0],x));C(q,ab,h([c[a+56>>2],0,0,0],["i32",0,0,0],x));C(q,ab,h([c[c[a+60>>2]>>2],0,0,0],["i32",
0,0,0],x));k=c[c[a+60>>2]>>2];a:for(;;){if(!(0<=(k|0)))break a;C(q,Kg,h([1<<c[c[a+88>>2]+284+(k<<2)>>2],0,0,0,1<<c[c[a+88>>2]+284+(k<<2)>>2],0,0,0],["i32",0,0,0,"i32",0,0,0],x));k-=1}C(q,La,h(1,"i32",x));C(q,ab,h([c[a+76>>2],0,0,0],["i32",0,0,0],x));C(q,ab,h([c[a+80>>2],0,0,0],["i32",0,0,0],x));C(q,ab,h([c[a+84>>2],0,0,0],["i32",0,0,0],x));C(q,Lg,h(1,"i32",x));C(q,Mg,h(1,"i32",x));d=0!=t<<24>>24?15:16;15==d&&C(q,Ng,h(1,"i32",x));d=0!=s<<24>>24?17:18;17==d&&C(q,Og,h(1,"i32",x));d=0!=(t<<24>>24|0)?
19:21;a:do if(19==d){if(0==(s<<24>>24|0))break a;C(q,Pg,h(1,"i32",x))}while(0);C(q,La,h(1,"i32",x));e=0;a:for(;;){if(!((e|0)<(c[a+44>>2]*c[a+48>>2]|0)))break a;C(q,Qg,h([c[c[a+88>>2]+572*e+4>>2],0,0,0,c[c[a+88>>2]+572*e+8>>2],0,0,0,c[c[a+88>>2]+572*e+12>>2],0,0,0,c[c[a+88>>2]+572*e+16>>2],0,0,0,c[c[a+88>>2]+572*e+564>>2],0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));d=0!=t<<24>>24?24:25;24==d&&(m=(oa[0]=c[c[a+88>>2]+572*e+556>>2],oa[1]=c[c[a+88>>2]+572*e+556+4>>2],Pa[0]),
C(q,Qc,h([m,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x)));d=0!=s<<24>>24?26:27;26==d&&C(q,Rg,h([c[c[a+88>>2]+572*e+552>>2],0,0,0],["i32",0,0,0],x));d=0!=(t<<24>>24|0)?28:30;b:do if(28==d){if(0==(s<<24>>24|0))break b;m=(oa[0]=c[c[a+88>>2]+572*e+556>>2],oa[1]=c[c[a+88>>2]+572*e+556+4>>2],Pa[0])/(c[c[a+88>>2]+572*e+552>>2]|0);C(q,Qc,h([m,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x))}while(0);C(q,La,h(1,"i32",x));e+=1}e=0;a:for(;;){if(!((e|0)<(c[a+44>>2]*c[a+48>>2]|0)))break a;f=m=z=0;b:for(;;){if(!((f|
0)<(c[a+52>>2]|0)))break b;d=(z|0)<(c[c[a+60>>2]+(f<<2)>>2]|0)?37:38;37==d&&(z=c[c[a+60>>2]+(f<<2)>>2]);f+=1}C(q,Sg,h([e,0,0,0],["i32",0,0,0],x));C(q,Tg,h(1,"i32",x));k=0;b:for(;;){if(!((k|0)<(c[c[a+88>>2]+572*e+564>>2]|0)))break b;C(q,Ug,h([k,0,0,0,e,0,0,0,c[c[c[a+88>>2]+572*e+568>>2]+20*k+12>>2],0,0,0,c[c[c[a+88>>2]+572*e+568>>2]+20*k+16>>2],0,0,0,c[c[c[a+88>>2]+572*e+568>>2]+20*k>>2],0,0,0,c[c[c[a+88>>2]+572*e+568>>2]+20*k+4>>2],0,0,0,c[c[c[a+88>>2]+572*e+568>>2]+20*k+8>>2],0,0,0],["i32",0,0,0,
"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));k+=1}d=0==(c[a+24>>2]|0)?45:68;do if(45==d)b:for(C(q,Vg,h(1,"i32",x)),d=0!=t<<24>>24?46:47,46==d&&C(q,zb,h(1,"i32",x)),C(q,La,h(1,"i32",x)),g=0;;){if(!((g|0)<(c[a+56>>2]|0))){d=67;break b}k=0;c:for(;;){if(!((k|0)<(z+1|0)))break c;f=0;d:for(;;){if(!((f|0)<(c[a+52>>2]|0)))break d;if((k|0)>(c[c[a+60>>2]+(f<<2)>>2]|0))break d;p=c[c[a+88>>2]+572*e+20+(k<<2)>>2]*c[c[a+88>>2]+572*e+152+(k<<2)>>2];l=0;e:for(;;){if(!((l|0)<(p|0)))break e;
d=c[c[c[a+88>>2]+572*e+548>>2]+20*m>>2];u=c[c[c[a+88>>2]+572*e+548>>2]+20*m+4>>2];v=c[c[c[a+88>>2]+572*e+548>>2]+20*m+8>>2];w=(oa[0]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12>>2],oa[1]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12+4>>2],Pa[0]);C(q,Wg,h([m,0,0,0,e,0,0,0,g,0,0,0,k,0,0,0,f,0,0,0,l,0,0,0,d,0,0,0,u,0,0,0,v,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));d=0!=t<<24>>24?58:59;58==d&&C(q,Ab,h([w,0,0,0,0,0,0,0],["double",0,0,0,0,0,
0,0],x));C(q,La,h(1,"i32",x));r+=w;m+=1;l+=1}f+=1}k+=1}g+=1}else if(68==d){d=1==(c[a+24>>2]|0)?69:92;do if(69==d)b:for(C(q,Xg,h(1,"i32",x)),d=0!=t<<24>>24?70:71,70==d&&C(q,zb,h(1,"i32",x)),C(q,La,h(1,"i32",x)),k=0;;){if(!((k|0)<(z+1|0))){d=91;break b}g=0;c:for(;;){if(!((g|0)<(c[a+56>>2]|0)))break c;f=0;d:for(;;){if(!((f|0)<(c[a+52>>2]|0)))break d;if((k|0)>(c[c[a+60>>2]+(f<<2)>>2]|0))break d;p=c[c[a+88>>2]+572*e+20+(k<<2)>>2]*c[c[a+88>>2]+572*e+152+(k<<2)>>2];l=0;e:for(;;){if(!((l|0)<(p|0)))break e;
d=c[c[c[a+88>>2]+572*e+548>>2]+20*m>>2];u=c[c[c[a+88>>2]+572*e+548>>2]+20*m+4>>2];v=c[c[c[a+88>>2]+572*e+548>>2]+20*m+8>>2];w=(oa[0]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12>>2],oa[1]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12+4>>2],Pa[0]);C(q,Yg,h([m,0,0,0,e,0,0,0,k,0,0,0,g,0,0,0,f,0,0,0,l,0,0,0,d,0,0,0,u,0,0,0,v,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));d=0!=t<<24>>24?82:83;82==d&&C(q,Ab,h([w,0,0,0,0,0,0,0],["double",0,0,0,0,0,
0,0],x));C(q,La,h(1,"i32",x));r+=w;m+=1;l+=1}f+=1}g+=1}k+=1}else if(92==d){d=2==(c[a+24>>2]|0)?93:128;do if(93==d)b:for(C(q,Zg,h(1,"i32",x)),d=0!=t<<24>>24?94:95,94==d&&C(q,zb,h(1,"i32",x)),C(q,La,h(1,"i32",x)),k=0;;){if(!((k|0)<(z+1|0))){d=127;break b}E=c[c[a+88>>2]+572*e+20+(k<<2)>>2]*c[c[a+88>>2]+572*e+152+(k<<2)>>2];l=0;c:for(;;){if(!((l|0)<(E|0)))break c;f=c[a+36>>2]+e;g=Qa((e|0)/(c[a+44>>2]|0));y=f-(g|0)*c[a+44>>2]*c[a+28>>2];f=c[a+36>>2];g=Qa((e|0)/(c[a+44>>2]|0));D=f+(g|0)*c[a+32>>2];A=y+
c[a+28>>2];B=D+c[a+32>>2];f=0;d:for(;;){if(!((f|0)<(c[a+52>>2]|0)))break d;g=c[c[a+88>>2]+572*e+20+(k<<2)>>2];F=lb(2,c[c[a+88>>2]+572*e+284+(k<<2)>>2]+c[c[a+60>>2]+(f<<2)>>2]-k|0)|0;K=lb(2,c[c[a+88>>2]+572*e+416+(k<<2)>>2]+c[c[a+60>>2]+(f<<2)>>2]-k|0)|0;w=l;u=Qa((l|0)/(g|0));J=w-(u|0)*g;G=Qa((l|0)/(g|0))|0;if((k|0)>(c[c[a+60>>2]+(f<<2)>>2]|0))break d;n=D;e:for(;;){if(!((n|0)<(B|0)))break e;d=(G*K|0)==(n|0)?106:119;do if(106==d)f:for(p=y;;){if(!((p|0)<(A|0))){d=118;break f}d=(J*F|0)==(p|0)?109:116;
do if(109==d)g:for(g=0;;){if(!((g|0)<(c[a+56>>2]|0))){d=115;break g}d=c[c[c[a+88>>2]+572*e+548>>2]+20*m>>2];u=c[c[c[a+88>>2]+572*e+548>>2]+20*m+4>>2];v=c[c[c[a+88>>2]+572*e+548>>2]+20*m+8>>2];w=(oa[0]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12>>2],oa[1]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12+4>>2],Pa[0]);C(q,$g,h([m,0,0,0,e,0,0,0,k,0,0,0,l,0,0,0,f,0,0,0,g,0,0,0,d,0,0,0,u,0,0,0,v,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));d=0!=t<<
24>>24?112:113;112==d&&C(q,Ab,h([w,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x));C(q,La,h(1,"i32",x));r+=w;m+=1;g+=1}while(0);p+=1}while(0);n+=1}f+=1}l+=1}k+=1}else if(128==d){d=3==(c[a+24>>2]|0)?129:170;do if(129==d){k=c[a+36>>2]+e;f=Qa((e|0)/(c[a+44>>2]|0));E=k-(f|0)*c[a+44>>2]*c[a+28>>2];k=c[a+36>>2];f=Qa((e|0)/(c[a+44>>2]|0));y=k+(f|0)*c[a+32>>2];D=E+c[a+28>>2];A=y+c[a+32>>2];k=B=0;b:for(;;){if(!((k|0)<(z+1|0)))break b;f=c[c[a+88>>2]+572*e+20+(k<<2)>>2]*c[c[a+88>>2]+572*e+152+(k<<2)>>2];d=(f|0)>
(B|0)?132:133;132==d&&(B=f);k+=1}C(q,ah,h(1,"i32",x));d=0!=t<<24>>24?136:137;136==d&&C(q,zb,h(1,"i32",x));C(q,La,h(1,"i32",x));l=0;b:for(;;){if(!((l|0)<(B|0))){d=169;break b}f=0;c:for(;;){if(!((f|0)<(c[a+52>>2]|0)))break c;k=0;d:for(;;){if(!((k|0)<(c[c[a+60>>2]+(f<<2)>>2]+1|0)))break d;d=c[c[a+88>>2]+572*e+20+(k<<2)>>2]*c[c[a+88>>2]+572*e+152+(k<<2)>>2];g=c[c[a+88>>2]+572*e+20+(k<<2)>>2];F=lb(2,c[c[a+88>>2]+572*e+284+(k<<2)>>2]+c[c[a+60>>2]+(f<<2)>>2]-k|0)|0;K=lb(2,c[c[a+88>>2]+572*e+416+(k<<2)>>
2]+c[c[a+60>>2]+(f<<2)>>2]-k|0)|0;w=l;u=Qa((l|0)/(g|0));J=w-(u|0)*g;G=Qa((l|0)/(g|0))|0;d=(l|0)>=(d|0)?144:145;do if(144!=d&&145==d)e:for(n=y;;){if(!((n|0)<(A|0))){d=163;break e}d=(G*K|0)==(n|0)?148:161;do if(148==d)f:for(p=E;;){if(!((p|0)<(D|0))){d=160;break f}d=(J*F|0)==(p|0)?151:158;do if(151==d)g:for(g=0;;){if(!((g|0)<(c[a+56>>2]|0))){d=157;break g}d=c[c[c[a+88>>2]+572*e+548>>2]+20*m>>2];u=c[c[c[a+88>>2]+572*e+548>>2]+20*m+4>>2];v=c[c[c[a+88>>2]+572*e+548>>2]+20*m+8>>2];w=(oa[0]=c[c[c[a+88>>2]+
572*e+548>>2]+20*m+12>>2],oa[1]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12+4>>2],Pa[0]);C(q,Rc,h([m,0,0,0,e,0,0,0,l,0,0,0,f,0,0,0,k,0,0,0,g,0,0,0,d,0,0,0,u,0,0,0,v,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));d=0!=t<<24>>24?154:155;154==d&&C(q,Ab,h([w,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x));C(q,La,h(1,"i32",x));r+=w;m+=1;g+=1}while(0);p+=1}while(0);n+=1}while(0);k+=1}f+=1}l+=1}}else if(170==d){k=E=0;b:for(;;){if(!((k|0)<(z+
1|0)))break b;f=c[c[a+88>>2]+572*e+20+(k<<2)>>2]*c[c[a+88>>2]+572*e+152+(k<<2)>>2];d=(f|0)>(E|0)?173:174;173==d&&(E=f);k+=1}C(q,bh,h(1,"i32",x));d=0!=t<<24>>24?177:178;177==d&&C(q,zb,h(1,"i32",x));C(q,La,h(1,"i32",x));f=0;b:for(;;){if(!((f|0)<(c[a+52>>2]|0))){d=210;break b}k=c[a+36>>2]+e;l=Qa((e|0)/(c[a+44>>2]|0));y=k-(l|0)*c[a+44>>2]*c[a+28>>2];k=c[a+36>>2];l=Qa((e|0)/(c[a+44>>2]|0));D=k+(l|0)*c[a+32>>2];A=y+c[a+28>>2];B=D+c[a+32>>2];l=0;c:for(;;){if(!((l|0)<(E|0)))break c;k=0;d:for(;;){if(!((k|
0)<(c[c[a+60>>2]+(f<<2)>>2]+1|0)))break d;d=c[c[a+88>>2]+572*e+20+(k<<2)>>2]*c[c[a+88>>2]+572*e+152+(k<<2)>>2];g=c[c[a+88>>2]+572*e+20+(k<<2)>>2];F=lb(2,c[c[a+88>>2]+572*e+284+(k<<2)>>2]+c[c[a+60>>2]+(f<<2)>>2]-k|0)|0;K=lb(2,c[c[a+88>>2]+572*e+416+(k<<2)>>2]+c[c[a+60>>2]+(f<<2)>>2]-k|0)|0;w=l;u=Qa((l|0)/(g|0));J=w-(u|0)*g;G=Qa((l|0)/(g|0))|0;d=(l|0)>=(d|0)?185:186;do if(185!=d&&186==d)e:for(n=D;;){if(!((n|0)<(B|0))){d=204;break e}d=(G*K|0)==(n|0)?189:202;do if(189==d)f:for(p=y;;){if(!((p|0)<(A|0))){d=
201;break f}d=(J*F|0)==(p|0)?192:199;do if(192==d)g:for(g=0;;){if(!((g|0)<(c[a+56>>2]|0))){d=198;break g}d=c[c[c[a+88>>2]+572*e+548>>2]+20*m>>2];u=c[c[c[a+88>>2]+572*e+548>>2]+20*m+4>>2];v=c[c[c[a+88>>2]+572*e+548>>2]+20*m+8>>2];w=(oa[0]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12>>2],oa[1]=c[c[c[a+88>>2]+572*e+548>>2]+20*m+12+4>>2],Pa[0]);C(q,Rc,h([m,0,0,0,e,0,0,0,f,0,0,0,l,0,0,0,k,0,0,0,g,0,0,0,d,0,0,0,u,0,0,0,v,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,
0,"i32",0,0,0,"i32",0,0,0],x));d=0!=t<<24>>24?195:196;195==d&&C(q,Ab,h([w,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x));C(q,La,h(1,"i32",x));r+=w;m+=1;g+=1}while(0);p+=1}while(0);n+=1}while(0);k+=1}l+=1}f+=1}}while(0)}while(0)}while(0)}while(0);e+=1}d=0!=t<<24>>24?217:218;217==d&&(e=(oa[0]=c[a>>2],oa[1]=c[a+4>>2],Pa[0]),C(q,ch,h([e,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x)),C(q,dh,h([r,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0],x)));d=0!=(c[a+64>>2]|0)?219:224;do if(219==d)a:for(C(q,eh,h(1,"i32",x)),
C(q,ab,h([c[a+64>>2],0,0,0],["i32",0,0,0],x)),C(q,fh,h(1,"i32",x)),p=0;;){if(!((p|0)<(c[a+64>>2]|0))){d=223;break a}C(q,gh,h([db[c[a+68>>2]+12*p>>1]&65535,0,0,0,c[c[a+68>>2]+12*p+4>>2],0,0,0,c[c[a+68>>2]+12*p+8>>2],0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0],x));p+=1}while(0);Za(q);C(c[c[O>>2]+12>>2],hh,h([b,0,0,0],["i8*",0,0,0],x));e=0}else 3==d&&(C(c[c[O>>2]+12>>2],ih,h([b,0,0,0],["i8*",0,0,0],x)),e=1);while(0)}else 1==d&&(e=1);while(0);return e}function Qf(a){var b;b=3>(c[a+16>>2]|0)?1:2;a:do if(1==
b)c[a+20>>2]=2;else if(2==b){b=1==(c[c[a+24>>2]>>2]|0)?3:9;b:do if(3==b){if(2!=(c[c[a+24>>2]+48>>2]|0)){b=9;break b}if(2!=(c[c[a+24>>2]+96>>2]|0)){b=9;break b}if(1!=(c[c[a+24>>2]+4>>2]|0)){b=9;break b}if(2!=(c[c[a+24>>2]+48+4>>2]|0)){b=9;break b}if(2!=(c[c[a+24>>2]+96+4>>2]|0)){b=9;break b}jh(a);b=26;break b}while(0);do if(9==b){b=1==(c[c[a+24>>2]>>2]|0)?10:16;b:do if(10==b){if(2!=(c[c[a+24>>2]+48>>2]|0)){b=16;break b}if(2!=(c[c[a+24>>2]+96>>2]|0)){b=16;break b}if(1!=(c[c[a+24>>2]+4>>2]|0)){b=16;
break b}if(1!=(c[c[a+24>>2]+48+4>>2]|0)){b=16;break b}if(1!=(c[c[a+24>>2]+96+4>>2]|0)){b=16;break b}kh(a);b=25;break b}while(0);b:do if(16==b){b=1==(c[c[a+24>>2]>>2]|0)?17:23;c:do if(17==b){if(1!=(c[c[a+24>>2]+48>>2]|0))break c;if(1!=(c[c[a+24>>2]+96>>2]|0))break c;if(1!=(c[c[a+24>>2]+4>>2]|0))break c;if(1!=(c[c[a+24>>2]+48+4>>2]|0))break c;if(1!=(c[c[a+24>>2]+96+4>>2]|0))break c;lh(a);b=25;break b}while(0);C(c[c[O>>2]+12>>2],mh,h([nh,0,0,0,256,0,0,0],["i8*",0,0,0,"i32",0,0,0],x));break a}while(0)}while(0);
c[a+20>>2]=1}while(0)}function jh(a){var b,d,e,f,g,h,k,l,m,p,n,q,r,t,s,u;s=c[c[a+24>>2]+24>>2];r=1<<s-1;t=(1<<s)-1;n=c[c[a+24>>2]+8>>2];q=c[c[a+24>>2]+12>>2];e=n*q;k=c[c[a+24>>2]+44>>2];l=c[c[a+24>>2]+48+44>>2];m=c[c[a+24>>2]+96+44>>2];var w=U(e<<2);b=w;var v=U(e<<2);d=v;var z=U(e<<2);e=z;s=0;a:for(;;){if(!((s|0)<(q|0)))break a;p=k+(n<<2);f=b+(n<<2);g=d+(n<<2);h=e+(n<<2);u=0;b:for(;;){if(!((u|0)<(n|0)))break b;hb(r,t,c[k>>2],c[l>>2],c[m>>2],b,d,e);k+=4;b+=4;d+=4;e+=4;hb(r,t,c[k>>2],c[l>>2],c[m>>2],
b,d,e);k+=4;b+=4;d+=4;e+=4;hb(r,t,c[p>>2],c[l>>2],c[m>>2],f,g,h);p+=4;f+=4;g+=4;h+=4;hb(r,t,c[p>>2],c[l>>2],c[m>>2],f,g,h);p+=4;f+=4;g+=4;h+=4;l+=4;m+=4;u+=2}k+=n<<2;b+=n<<2;d+=n<<2;e+=n<<2;s+=2}c[c[a+24>>2]+44>>2]=w;c[c[a+24>>2]+48+44>>2]=v;c[c[a+24>>2]+96+44>>2]=z;c[c[a+24>>2]+48+8>>2]=n;c[c[a+24>>2]+48+12>>2]=q;c[c[a+24>>2]+96+8>>2]=n;c[c[a+24>>2]+96+12>>2]=q;c[c[a+24>>2]+48>>2]=c[c[a+24>>2]>>2];c[c[a+24>>2]+96>>2]=c[c[a+24>>2]>>2];c[c[a+24>>2]+48+4>>2]=c[c[a+24>>2]+4>>2];c[c[a+24>>2]+96+4>>2]=
c[c[a+24>>2]+4>>2]}function kh(a){var b,d,e,f,g,h,k,l,m,p,n,q;n=c[c[a+24>>2]+24>>2];m=1<<n-1;p=(1<<n)-1;k=c[c[a+24>>2]+8>>2];l=c[c[a+24>>2]+12>>2];e=k*l;f=c[c[a+24>>2]+44>>2];g=c[c[a+24>>2]+48+44>>2];h=c[c[a+24>>2]+96+44>>2];var r=U(e<<2);b=r;var t=U(e<<2);d=t;var s=U(e<<2);e=s;n=0;a:for(;;){if(!((n|0)<(l|0)))break a;q=0;b:for(;;){if(!((q|0)<(k|0)))break b;hb(m,p,c[f>>2],c[g>>2],c[h>>2],b,d,e);f+=4;b+=4;d+=4;e+=4;hb(m,p,c[f>>2],c[g>>2],c[h>>2],b,d,e);f+=4;b+=4;d+=4;e+=4;g+=4;h+=4;q+=2}n+=1}c[c[a+
24>>2]+44>>2]=r;c[c[a+24>>2]+48+44>>2]=t;c[c[a+24>>2]+96+44>>2]=s;c[c[a+24>>2]+48+8>>2]=k;c[c[a+24>>2]+48+12>>2]=l;c[c[a+24>>2]+96+8>>2]=k;c[c[a+24>>2]+96+12>>2]=l;c[c[a+24>>2]+48>>2]=c[c[a+24>>2]>>2];c[c[a+24>>2]+96>>2]=c[c[a+24>>2]>>2];c[c[a+24>>2]+48+4>>2]=c[c[a+24>>2]+4>>2];c[c[a+24>>2]+96+4>>2]=c[c[a+24>>2]+4>>2]}function hb(a,b,d,e,f,g,h,k){var l;e-=a;f-=a;l=d+(1.402*(f|0)|0);a=0>(l|0)?1:2;1==a?l=0:2==a&&3==((l|0)>(b|0)?3:4)&&(l=b);c[g>>2]=l;g=d-(.344*(e|0)+.714*(f|0)|0);a=0>(g|0)?6:7;6==a?
g=0:7==a&&8==((g|0)>(b|0)?8:9)&&(g=b);c[h>>2]=g;d+=1.772*(e|0)|0;a=0>(d|0)?11:12;11==a?d=0:12==a&&13==((d|0)>(b|0)?13:14)&&(d=b);c[k>>2]=d}function lh(a){var b,d,e,f,g,h,k,l,m,p;l=c[c[a+24>>2]+24>>2];m=1<<l-1;p=(1<<l)-1;k=c[c[a+24>>2]+8>>2]*c[c[a+24>>2]+12>>2];f=c[c[a+24>>2]+44>>2];g=c[c[a+24>>2]+48+44>>2];h=c[c[a+24>>2]+96+44>>2];var n=U(k<<2);b=n;var q=U(k<<2);d=q;var r=U(k<<2);e=r;l=0;a:for(;;){if(!((l|0)<(k|0)))break a;hb(m,p,c[f>>2],c[g>>2],c[h>>2],b,d,e);f+=4;g+=4;h+=4;b+=4;d+=4;e+=4;l+=1}c[c[a+
24>>2]+44>>2]=n;c[c[a+24>>2]+48+44>>2]=q;c[c[a+24>>2]+96+44>>2]=r}function yf(a,b,d,e,f){var g,k,l,m,n,q,r;n=1;a:for(;;){if((c[ba>>2]|0)>=(a|0)){g=4;break a}if(0==(c[b+(c[ba>>2]<<2)>>2]|0)){g=4;break a}if(45!=(A[c[b+(c[ba>>2]<<2)>>2]]<<24>>24|0)){g=4;break a}g=45==(A[c[b+(c[ba>>2]<<2)>>2]]<<24>>24|0)?6:14;b:do if(6==g){if(0!=(A[c[b+(c[ba>>2]<<2)>>2]+1]<<24>>24|0))break b;g=(c[ba>>2]|0)>=(a-1|0)?8:9;8==g?n=0:9==g&&(g=45==(A[c[b+(c[ba>>2]+1<<2)>>2]]<<24>>24|0)?10:11,10==g?n=0:11==g&&(n=2))}while(0);
if(0==(n<<24>>24|0)){g=15;break a}if(45!=(A[c[b+(c[ba>>2]<<2)>>2]]<<24>>24|0)){g=76;break a}q=c[b+(c[ba>>2]<<2)>>2]+1;r=e;m=16;g=1<(n<<24>>24|0)?18:19;18==g?(q=c[b+(c[ba>>2]+1<<2)>>2],c[ba>>2]+=1):19==g&&(q=c[b+(c[ba>>2]<<2)>>2]+1);if(1<p(q)>>>0){g=21;break a}if(58==(A[d]<<24>>24|0)){g=49;break a}g=(c[Sc>>2]|0)!=(c[ba>>2]|0)?51:52;51==g&&(c[Sc>>2]=c[ba>>2],c[mb>>2]=0);c[Qb>>2]=A[c[b+(c[ba>>2]<<2)>>2]+(c[mb>>2]+1)]<<24>>24;var t;b:{l=d;l--;do if(l++,t=A[l],t==c[Qb>>2]){t=l;break b}while(t);t=0}l=t;
if(0==(t|0)){g=75;break a}if(0!=(A[l]<<24>>24|0)){g=55;break a}c[ba>>2]+=1}a:do if(4==g)k=-1;else if(15==g)c[ba>>2]+=1,k=63;else if(76==g)C(c[c[O>>2]+12>>2],oh,h(1,"i32",x)),c[ba>>2]+=1,k=63;else if(21==g){a=0;b:for(;;){if(!((a|0)<(f|0))){g=47;break b}if(0==(Jb(c[r>>2],q)|0)){g=24;break b}a+=m;r+=16}do if(47==g)C(c[c[O>>2]+12>>2],Tc,h([q,0,0,0],["i8*",0,0,0],x)),c[ba>>2]+=1,k=63;else if(24==g){g=0==(c[r+4>>2]|0)?25:29;do if(25==g){g=0!=(c[b+(c[ba>>2]+1<<2)>>2]|0)?26:28;b:do if(26==g){if(45==(A[c[b+
(c[ba>>2]+1<<2)>>2]]<<24>>24|0)){g=28;break b}C(c[c[O>>2]+12>>2],ph,h([q,0,0,0,c[b+(c[ba>>2]+1<<2)>>2],0,0,0],["i8*",0,0,0,"i8*",0,0,0],x));c[ba>>2]+=1}while(0)}else if(29==g){c[xa>>2]=c[b+(c[ba>>2]+1<<2)>>2];g=0!=(c[xa>>2]|0)?30:35;do if(30==g){g=45==(A[c[xa>>2]]<<24>>24|0)?31:34;do if(31==g){g=0!=(c[Rb>>2]|0)?32:33;do if(32==g){C(c[c[O>>2]+12>>2],hc,h([q,0,0,0],["i8*",0,0,0],x));k=63;break a}while(0)}while(0)}while(0);g=0!=(c[xa>>2]|0)?40:36;b:do if(36==g){if(1!=(c[r+4>>2]|0)){g=40;break b}g=0!=
(c[Rb>>2]|0)?38:39;do if(38==g){C(c[c[O>>2]+12>>2],qh,h([q,0,0,0],["i8*",0,0,0],x));k=63;break a}while(0)}while(0);c[ba>>2]+=1}while(0);c[ba>>2]+=1;g=0!=(c[r+8>>2]|0)?42:43;42==g?(c[c[r+8>>2]>>2]=c[r+12>>2],k=0):43==g&&(k=c[r+12>>2])}while(0)}else if(49==g)k=58;else if(75==g)C(c[c[O>>2]+12>>2],Tc,h([q,0,0,0],["i8*",0,0,0],x)),c[ba>>2]+=1,k=63;else if(55==g){g=58==(A[l+1]<<24>>24|0)?56:72;do if(56==g){g=58==(A[l+2]<<24>>24|0)?58:57;b:do if(57==g){if(0!=(A[c[b+(c[ba>>2]<<2)>>2]+(c[mb>>2]+2)]<<24>>24|
0)){g=58;break b}c[xa>>2]=c[b+(c[ba>>2]+1<<2)>>2];g=0!=(c[xa>>2]|0)?62:67;do if(62==g){g=45==(A[c[xa>>2]]<<24>>24|0)?63:66;do if(63==g){g=0!=(c[Rb>>2]|0)?64:65;do if(64==g){C(c[c[O>>2]+12>>2],hc,h([q,0,0,0],["i8*",0,0,0],x));k=63;break a}while(0)}while(0)}while(0);g=0!=(c[xa>>2]|0)?71:68;do if(68==g){g=0!=(c[Rb>>2]|0)?69:70;do if(69==g){C(c[c[O>>2]+12>>2],hc,h([q,0,0,0],["i8*",0,0,0],x));k=63;break a}while(0)}while(0);c[ba>>2]+=1;g=74;break b}while(0);58==g&&(g=c[b+(c[ba>>2]<<2)>>2]+c[mb>>2]+2,c[xa>>
2]=g,g=0!=A[g]<<24>>24?60:59,59==g&&(c[xa>>2]=0));c[ba>>2]+=1;k=c[Qb>>2]}else 72==g&&(c[mb>>2]+=1,k=c[Qb>>2]);while(0)}while(0);return k}function U(a){return ia.J(a||1)}function Db(a){a=ia.J(a+16);return a+16-a%16}function rh(a,b){function d(a){var e;"float"===a||"double"===a?e=(oa[0]=c[b+f>>2],oa[1]=c[b+f+4>>2],Pa[0]):"i64"==a?(e=[c[b+f>>2],c[b+f+4>>2]],e=t(e[0],32)+t(e[1],32)*Math.pow(2,32)):e=c[b+f>>2];f+=ia.U(a);return Number(e)}for(var e=a,f=0,g=[],h,k;;){var l=e;h=A[e];if(0===h)break;k=A[e+
1];if(37==h){var m=Y,p=Y,n=Y,s=Y;a:for(;;){switch(k){case 43:m=I;break;case 45:p=I;break;case 35:n=I;break;case 48:if(s)break a;else{s=I;break}default:break a}e++;k=A[e+1]}var u=0;if(42==k)u=d("i32"),e++,k=A[e+1];else for(;48<=k&&57>=k;)u=10*u+(k-48),e++,k=A[e+1];var w=Y;if(46==k){var z=0,w=I;e++;k=A[e+1];if(42==k)z=d("i32"),e++;else for(;;){k=A[e+1];if(48>k||57<k)break;z=10*z+(k-48);e++}k=A[e+1]}else z=6;var E;switch(String.fromCharCode(k)){case "h":k=A[e+2];104==k?(e++,E=1):E=2;break;case "l":k=
A[e+2];108==k?(e++,E=8):E=4;break;case "L":case "q":case "j":E=8;break;case "z":case "t":case "I":E=4;break;default:E=W}E&&e++;k=A[e+1];if(-1!="diuoxXp".split("").indexOf(String.fromCharCode(k))){l=100==k||105==k;E=E||4;h=d("i"+8*E);4>=E&&(h=(l?v:t)(h&Math.pow(256,E)-1,8*E));var y=Math.abs(h),x,l="";if(100==k||105==k)x=v(h,8*E).toString(10);else if(117==k)x=t(h,8*E).toString(10),h=Math.abs(h);else if(111==k)x=(n?"0":"")+y.toString(8);else if(120==k||88==k){l=n?"0x":"";if(0>h){h=-h;x=(y-1).toString(16);
n=[];for(y=0;y<x.length;y++)n.push((15-parseInt(x[y],16)).toString(16));for(x=n.join("");x.length<2*E;)x="f"+x}else x=y.toString(16);88==k&&(l=l.toUpperCase(),x=x.toUpperCase())}else 112==k&&(0===y?x="(nil)":(l="0x",x=y.toString(16)));if(w)for(;x.length<z;)x="0"+x;for(m&&(l=0>h?"-"+l:"+"+l);l.length+x.length<u;)p?x+=" ":s?x="0"+x:l=" "+l;x=l+x;x.split("").forEach(function(a){g.push(a.charCodeAt(0))})}else if(-1!="fFeEgG".split("").indexOf(String.fromCharCode(k))){h=d(4===E?"float":"double");if(isNaN(h))x=
"nan",s=Y;else if(isFinite(h)){w=Y;E=Math.min(z,20);if(103==k||71==k)w=I,z=z||1,E=parseInt(h.toExponential(E).split("e")[1],10),z>E&&-4<=E?(k=(103==k?"f":"F").charCodeAt(0),z-=E+1):(k=(103==k?"e":"E").charCodeAt(0),z--),E=Math.min(z,20);if(101==k||69==k)x=h.toExponential(E),/[eE][-+]\d$/.test(x)&&(x=x.slice(0,-1)+"0"+x.slice(-1));else if(102==k||70==k)x=h.toFixed(E);l=x.split("e");if(w&&!n)for(;1<l[0].length&&-1!=l[0].indexOf(".")&&("0"==l[0].slice(-1)||"."==l[0].slice(-1));)l[0]=l[0].slice(0,-1);
else for(n&&-1==x.indexOf(".")&&(l[0]+=".");z>E++;)l[0]+="0";x=l[0]+(1<l.length?"e"+l[1]:"");69==k&&(x=x.toUpperCase());m&&0<=h&&(x="+"+x)}else x=(0>h?"-":"")+"inf",s=Y;for(;x.length<u;)p?x+=" ":x=!s||"-"!=x[0]&&"+"!=x[0]?(s?"0":" ")+x:x[0]+"0"+x.slice(1);97>k&&(x=x.toUpperCase());x.split("").forEach(function(a){g.push(a.charCodeAt(0))})}else if(115==k){(m=d("i8*"))?(m=r(m),w&&m.length>z&&(m=m.slice(0,z))):m=q("(null)",I);if(!p)for(;m.length<u--;)g.push(32);g=g.concat(m);if(p)for(;m.length<u--;)g.push(32)}else if(99==
k){for(p&&g.push(d("i8"));0<--u;)g.push(32);p||g.push(d("i8"))}else if(110==k)p=d("i32*"),c[p>>2]=g.length;else if(37==k)g.push(h);else for(y=l;y<e+2;y++)g.push(A[y]);e+=2}else g.push(h),e+=1}return g}function gb(a,c,b){c=rh(c,b);b=c.length;for(var d=0;d<b;d++)A[a+d]=c[d];A[a+d]=0;return c.length}function wa(a,b){var d=U(a*b),e=0,f,g,h;f=d;g=f+a*b;0>e&&(e+=256);for(e=e+(e<<8)+(e<<16)+16777216*e;0!==f%4&&f<g;)A[f++]=e;f>>=2;for(h=g>>2;f<h;)c[f++]=e;for(f<<=2;f<g;)A[f++]=e;return d}function V(a){V.r||
(V.r=h([0],"i32",u));return c[V.r>>2]=a}function Zh(a,c,b){var d=T.a[a];if(d){if(d.i){if(0>b)return V(nb),-1;if(d.object.d){if(d.object.j){for(var e=0;e<b;e++)try{d.object.j(A[c+e])}catch(f){return V(Sb),-1}d.object.timestamp=Date.now();return e}V(Uc);return-1}e=d.position;a=T.a[a];if(!a||a.object.d)V(Ra),c=-1;else if(a.i)if(a.object.c)V(Tb),c=-1;else if(0>b||0>e)V(nb),c=-1;else{for(var g=a.object.b;g.length<e;)g.push(0);for(var h=0;h<b;h++)g[e+h]=ja[c+h];a.object.timestamp=Date.now();c=h}else V(Oa),
c=-1;-1!=c&&(d.position+=c);return c}V(Oa);return-1}V(Ra);return-1}function Na(a,c,b,d){c*=b;0!=c&&-1==Zh(d,a,c)&&T.a[d]&&(T.a[d].error=I)}function C(a,c,b){c=rh(c,b);b=ia.xa();Na(h(c,"i8",x),1,c.length,a);ia.wa(b)}function Lb(a,c){var b=0;do{var d,e,f;d=c+b;e=a+b;for(f=d+1;d<f;)A[e++]=A[d++];b++}while(0!=A[c+b-1])}function Eb(a,b){if(!b)return 0;var d=U(b);if(a){var e=d,f=a;g(0===b%1,"memcpy given "+b+" bytes to copy. Problem with quantum=1 corrections perhaps?");var h,k;h=f+b;if(e%4==f%4&&8<b){for(;0!==
f%4&&f<h;)A[e++]=A[f++];f>>=2;e>>=2;for(k=h>>2;f<k;)c[e++]=c[f++];f<<=2;e<<=2}for(;f<h;)A[e++]=A[f++]}return d}function xb(a,c,b){for(var d=Y,e,f=0;f<b;f++)e=d?0:A[c+f],A[a+f]=e,d=d||0==A[c+f]}function Ya(a,b){C(c[ic>>2],a,b)}function pf(a){a=T.B(m(a));if(a===W)return V(Ub),0;var c=T.G(a);if(c===W)return 0;if(c.c){if(!c.A)return V(Oa),0}else return V(Pb),0;var b=T.a.length,d=[],e;for(e in c.b)d.push(e);T.a[b]={path:a,object:c,position:-2,h:I,i:Y,p:Y,error:Y,f:Y,e:[],b:d,F:U(jc.l)};return b}function wb(a){if(!T.a[a]||
!T.a[a].object.c)return V(Ra),0;wb.result||(wb.result=U(4));var b=T.a[a].F,d=wb.result;if(T.a[a]&&T.a[a].object.c){var e=T.a[a],f=e.position,g=0,h;for(h in e.b)g++;if(-2>f||f>=g)c[d>>2]=0;else{-2===f?(f=".",h=1):-1===f?(f="..",h=1):(f=e.b[f],h=e.object.b[f].Y);e.position++;g=jc;c[b+g.fa>>2]=h;c[b+g.ga>>2]=e.position;c[b+g.ha>>2]=f.length+1;for(h=0;h<f.length;h++)A[b+g.Q+h]=f.charCodeAt(h);A[b+g.Q+h]=0;A[b+g.ia]=e.object.d?2:e.object.c?4:e.object.link!==H?10:8;c[d>>2]=b}}else V(Ra);return 0===c[wb.result>>
2]?0:T.a[a].F}function Jb(a,c){var b;a:{for(b=0;b<Sa;){var d=A[a+b],e=A[c+b];if(d==e&&0==d)break;if(0==d){b=-1;break a}if(0==e){b=1;break a}if(d==e)b++;else{b=d>e?1:-1;break a}}b=0}return b}function Rh(a,c){for(var b=0;3>b;){var d=65<=A[a+b]&&90>=A[a+b]?A[a+b]-65+97:A[a+b],e=65<=A[c+b]&&90>=A[c+b]?A[c+b]-65+97:A[c+b];if(d==e&&0==d)break;if(0==d)return-1;if(0==e)return 1;if(d==e)b++;else return d>e?1:-1}return 0}function $h(a,b,d,e){a=m(a);for(var f=0,g=0,h=0,f=0;f<a.length&&!(0>=k);f++){var k=b();
if(0>=k)break;if("%"===a[f]){f++;for(var l=f;48<=a[f].charCodeAt(0)&&57>=a[f].charCodeAt(0);)f++;var p;f!=l&&(p=parseInt(a.slice(l,f),10));l=a[f];f++;for(var n=0,r=[];(n<p||isNaN(p))&&0<k;)if("d"===l&&48<=k&&57>=k||"x"===l&&(48<=k&&57>=k||97<=k&&102>=k||65<=k&&70>=k)||"s"===l&&(f>=a.length||k!==a[f].charCodeAt(0)))r.push(String.fromCharCode(k)),k=b(),n++;else break;if(0===r.length)break;r=r.join("");n=c[e+h>>2];h+=ia.U("void*");switch(l){case "d":c[n>>2]=parseInt(r,10);break;case "x":c[n>>2]=parseInt(r,
16);break;case "s":for(l=q(r),r=0;r<l.length;r++)A[n+r]=l[r]}g++}else if(a[f].charCodeAt(0)!==k){d(k);break}}}function Bf(a,c,b){var d=0;$h(c,function(){return A[a+d++]},function(){d--},b)}function ai(a,b,d){var e=c[d>>2],f=b&3;d=0!=f;var f=1!=f,g=Boolean(b&512),h=Boolean(b&2048),k=Boolean(b&1024),l=Boolean(b&8);a=T.m(m(a));if(!a.q)return V(a.error),-1;if(b=a.object||W){if(g&&h)return V(Vc),-1;if((d||g||k)&&b.c)return V(Tb),-1;if(f&&!b.A||d&&!b.write)return V(Oa),-1;if(k&&!b.d)b.b=[];else if(!T.la(b))return V(Sb),
-1;a=a.path}else{if(!g)return V(Ub),-1;if(!a.k.write)return V(Oa),-1;b=T.N(a.k,a.name,[],e&256,e&128);a=a.I+"/"+a.name}e=T.a.length;if(b.c){d=0;jc&&(d=U(jc.l));var f=[],p;for(p in b.b)f.push(p);T.a[e]={path:a,object:b,position:-2,h:I,i:Y,p:Y,error:Y,f:Y,e:[],b:f,F:d}}else T.a[e]={path:a,object:b,position:0,h:f,i:d,p:l,error:Y,f:Y,e:[]};return e}function Wa(a,c){var b;c=m(c);if("r"==c[0])b=-1!=c.indexOf("+")?2:0;else if("w"==c[0])b=-1!=c.indexOf("+")?2:1,b|=1536;else if("a"==c[0])b=-1!=c.indexOf("+")?
2:1,b|=512,b|=8;else return V(nb),0;b=ai(a,b,h([511,0,0,0],"i32",x));return-1==b?0:b}function Mf(a,c){var b;if(T.a[a]&&!T.a[a].d){b=T.a[a];var d=0;1===c?d+=b.position:2===c&&(d+=b.object.b.length);0>d?(V(nb),b=-1):(b.e=[],b=b.position=d)}else V(Ra),b=-1;-1!=b&&(T.a[a].f=Y)}function bi(a,c,b,d){var e=T.a[a];if(!e||e.object.d)return V(Ra),-1;if(e.h){if(e.object.c)return V(Tb),-1;if(0>b||0>d)return V(nb),-1;for(a=0;e.e.length&&0<b;)A[c++]=e.e.pop(),b--,a++;e=e.object.b;b=Math.min(e.length-d,b);for(var f=
0;f<b;f++)A[c+f]=e[d+f],a++;return a}V(Oa);return-1}function Of(a,c,b){var d=T.a[a];if(d){if(d.h){if(0>b)return V(nb),-1;if(d.object.d){if(d.object.input){for(a=0;d.e.length&&0<b;)A[c++]=d.e.pop(),b--,a++;for(var e=0;e<b;e++){try{var f=d.object.input()}catch(g){return V(Sb),-1}if(f===W||f===H)break;a++;A[c+e]=f}return a}V(Uc);return-1}f=d.e.length;a=bi(a,c,b,d.position);-1!=a&&(d.position+=d.e.length-f+a);return a}V(Oa);return-1}V(Ra);return-1}function Za(a){T.a[a]||V(Ra);T.a[a]?delete T.a[a]:V(Ra)}
function Wc(a){if(!(a in T.a))return-1;var c=T.a[a];if(c.f||c.error)return-1;a=Of(a,Wc.r,1);return 0==a?(c.f=I,-1):-1==a?(c.error=I,-1):A[Wc.r]}function Yh(a){a=T.m(m(a));if(!a.q||!a.n)return V(a.error),-1;if(a.object.c)return V(Tb),-1;if(a.object.write)return delete a.k.b[a.name],0;V(Oa);return-1}function Xc(a){a=a||ga.arguments;var c=W;if(ga._main){for(c=ga.ea(a);0<Yc.length;){a=Yc.pop();var b=a.ma;"number"===typeof b&&(b=cb[b]);b(a.da===H?W:a.da)}ci.print()}return c}var sc,tc,Ra,Oa,Tb,nb,Sb,Uc,
Ub,Pb,Vc,Nf,Hg,Ig,ga={arguments:[]},kc=[],sh="object"===typeof process,th="object"===typeof window,uh="function"===typeof importScripts,di=!th&&!sh&&!uh;if(sh){e=function(a){process.stdout.write(a+"\n")};printErr=function(a){process.stderr.write(a+"\n")};var vh=require("fs");read=function(a){var c=vh.readFileSync(a).toString();!c&&"/"!=a[0]&&(a=__dirname.split("/").slice(0,-1).join("/")+"/src/"+a,c=vh.readFileSync(a).toString());return c};kc=process.argv.slice(2)}else if(di)this.read||(read=function(a){snarf(a)}),
kc=this.arguments?arguments:scriptArgs;else if(th)printErr=function(a){console.log(a)},read=function(a){var c=new XMLHttpRequest;c.open("GET",a,Y);c.send(W);return c.responseText},this.arguments&&(kc=arguments);else if(uh)load=importScripts;else throw"Unknown runtime environment. Where are we?";"undefined"==typeof load&&"undefined"!=typeof read&&(load=function(a){d(read(a))});"undefined"===typeof printErr&&(printErr=function(){});"undefined"===typeof e&&(e=printErr);try{this.Module=ga}catch(ei){this.Module=
ga={}}ga.arguments||(ga.arguments=kc);var ia={xa:function(){return L},wa:function(a){L=a},Fa:function(a,c){c=c||4;return isNumber(a)&&isNumber(c)?Math.ceil(a/c)*c:"Math.ceil(("+a+")/"+c+")*"+c},oa:function(a){return a in ia.ba||a in ia.aa},pa:function(a){return"*"==a[a.length-1]},qa:function(a){return isPointerType(a)?Y:/^\[\d+\ x\ (.*)\]/.test(a)?I:/<?{ [^}]* }>?/.test(a)?I:"%"==a[0]},ba:{i1:0,i8:0,i16:0,i32:0,i64:0},aa:{"float":0,"double":0},Ja:function(a,c){return(a|0|c|0)+4294967296*(Math.round(a/
4294967296)|Math.round(c/4294967296))},Ba:function(a,c){return((a|0)&(c|0))+4294967296*(Math.round(a/4294967296)&Math.round(c/4294967296))},Oa:function(a,c){return((a|0)^(c|0))+4294967296*(Math.round(a/4294967296)^Math.round(c/4294967296))},H:function(a){if(1==ia.t)return 1;var c={"%i1":1,"%i8":1,"%i16":2,"%i32":4,"%i64":8,"%float":4,"%double":8}["%"+a];c||"*"!=a[a.length-1]||(c=ia.t);return c},U:function(a){return Math.max(ia.H(a),ia.t)},ja:function(a,c){var b={};return c?a.filter(function(a){return b[a[c]]?
Y:b[a[c]]=I}):a.filter(function(a){return b[a]?Y:b[a]=I})},set:function(){for(var a="object"===typeof arguments[0]?arguments[0]:arguments,c={},b=0;b<a.length;b++)c[a[b]]=0;return c},L:function(a){a.g=0;a.u=0;var c=[],b=-1;a.T=a.z.map(function(d){var e;if(ia.oa(d)||ia.pa(d))d=e=ia.H(d);else if(ia.qa(d))e=Types.types[d].g,d=Types.types[d].u;else throw"Unclear type in struct: "+d+", in "+a.ra+" :: "+dump(Types.types[a.ra]);d=a.Ka?1:Math.min(d,ia.t);a.u=Math.max(a.u,d);d=ia.K(a.g,d);a.g=d+e;0<=b&&c.push(d-
b);return b=d});a.g=ia.K(a.g,a.u);0==c.length?a.S=a.g:1==ia.ja(c).length&&(a.S=c[0]);a.Ha=1!=a.S;return a.T},na:function(a,c,b){var d,e;if(c){b=b||0;d=("undefined"===typeof Types?ia.Na:Types.types)[c];if(!d)return W;a||(a=("undefined"===typeof Types?ia:Types).La[c.replace(/.*\./,"")]);if(!a)return W;g(d.z.length===a.length,"Number of named fields must match the type for "+c+". Perhaps due to inheritance, which is not supported yet?");e=d.T}else d={z:a.map(function(a){return a[0]})},e=ia.L(d);var f=
{l:d.g};c?a.forEach(function(a,c){if("string"===typeof a)f[a]=e[c]+b;else{var g,h;for(h in a)g=h;f[g]=ia.na(a[g],d.z[c],e[c])}}):a.forEach(function(a,c){f[a[1]]=e[c]});return f},va:function(a){var c=L;g(0<a,"Trying to allocate 0");L+=a;L=4*Math.ceil(L/4);g(L<Zc+la,"Ran out of stack");return c},J:function(a){var b=wh=Xa;g(0<a,"Trying to allocate 0");Xa+=a;Xa=4*Math.ceil(Xa/4);if(Xa>=Sa){printErr("Warning: Enlarging memory arrays, this is not fast! "+[Xa,Sa]);g(Xa>=Sa&&wh<Sa);for(g(4<Sa);Sa<=Xa;)Sa=
Math.ceil(1.25*Sa/Bb)*Bb;a=A;var d=new ArrayBuffer(Sa);A=new Int8Array(d);R=new Int16Array(d);c=new Int32Array(d);ja=new Uint8Array(d);db=new Uint16Array(d);pa=new Uint32Array(d);S=new Float32Array(d);A.set(a)}return b},K:function(a,c){return Math.ceil(a/(c?c:4))*(c?c:4)},t:4,Aa:0},ci={ca:0,M:0,s:{},Ia:function(a,c){c||(this.M++,this.M>=this.ca&&f("\n\nToo many corrections!"))},print:function(){var a=[],c;for(c in this.s)a.push({ua:c,ka:this.s[c][0],Ma:this.s[c][1],total:this.s[c][0]+this.s[c][1]});
a.sort(function(a,c){return c.total-a.total});for(c=0;c<a.length;c++){var b=a[c];e(b.ua+" : "+b.total+" hits, %"+Math.ceil(100*b.ka/b.total)+" failures")}}},Yc=[],xh=new ArrayBuffer(8),oa=new Int32Array(xh),Pa=new Float64Array(xh);ga.setValue=k;ga.getValue=l;var x=1,u=2;ga.ALLOC_NORMAL=0;ga.ALLOC_STACK=x;ga.ALLOC_STATIC=u;ga.allocate=h;ga.Pointer_stringify=m;ga.Array_stringify=function(a){for(var c="",b=0;b<a.length;b++)c+=String.fromCharCode(a[b]);return c};var cb,Bb=4096,A,ja,R,db,c,pa,S,Zc,L,la,
Xa,wh,Sa=ga.TOTAL_MEMORY||10485760;g(!!Int32Array&&!!Float64Array&&!!(new Int32Array(1)).subarray&&!!(new Int32Array(1)).set,"Cannot fallback to non-typed array case: Code is too specialized");var ob=new ArrayBuffer(Sa);A=new Int8Array(ob);R=new Int16Array(ob);c=new Int32Array(ob);ja=new Uint8Array(ob);db=new Uint16Array(ob);pa=new Uint32Array(ob);S=new Float32Array(ob);c[0]=255;g(255===ja[0]&&0===ja[3],"Typed arrays 2 must be run on a little-endian system");for(var yh=q("(null)"),lc=0;lc<yh.length;lc++)A[lc]=
yh[lc];ga.HEAP=H;ga.HEAP8=A;ga.HEAP16=R;ga.HEAP32=c;ga.HEAPU8=ja;ga.HEAPU16=db;ga.HEAPU32=pa;ga.HEAPF32=S;Zc=L=Math.ceil(10/Bb)*Bb;la=Zc+1048576;Xa=Math.ceil(la/Bb)*Bb;ga.Array_copy=n;ga.String_len=p;ga.String_copy=r;ga.intArrayFromString=q;ga.intArrayToString=function(a){for(var c=[],b=0;b<a.length;b++){var d=a[b];255<d&&(g(Y,"Character code "+d+" ("+String.fromCharCode(d)+")  at offset "+b+" not in 0x00-0xFF."),d&=255);c.push(String.fromCharCode(d))}return c.join("")};E.X=1;K.X=1;X.X=1;Ma.X=1;Ia.X=
1;da.X=1;ma.X=1;va.X=1;Ea.X=1;ca.X=1;ra.X=1;aa.X=1;Vb.X=1;Cb.X=1;ea.X=1;G.X=1;qa.X=1;Ta.X=1;Ha.X=1;M.X=1;za.X=1;ya.X=1;Ca.X=1;Q.X=1;ha.X=1;Ka.X=1;mc.X=1;nc.X=1;bd.X=1;Ga.X=1;cd.X=1;dd.X=1;gd.X=1;hd.X=1;id.X=1;jd.X=1;kd.X=1;ld.X=1;md.X=1;nd.X=1;od.X=1;pd.X=1;oc.X=1;Rd.X=1;uc.X=1;Sd.X=1;Ud.X=1;sa.X=1;Wb.X=1;ib.X=1;Wd.X=1;Xd.X=1;Yd.X=1;Zd.X=1;$d.X=1;ae.X=1;Xb.X=1;be.X=1;ce.X=1;de.X=1;ee.X=1;fe.X=1;ge.X=1;he.X=1;ie.X=1;je.X=1;ke.X=1;pe.X=1;kb.X=1;qe.X=1;jb.X=1;ub.X=1;oe.X=1;ne.X=1;tb.X=1;me.X=1;le.X=
1;ue.X=1;ve.X=1;Yb.X=1;sd.X=1;td.X=1;ud.X=1;yc.X=1;xc.X=1;Ge.X=1;of.X=1;sf.X=1;xf.X=1;ga._main=Jc;Jc.X=1;ag.X=1;Wf.X=1;Tf.X=1;Sf.X=1;Rf.X=1;Uf.X=1;Yf.X=1;bc.X=1;Qf.X=1;jh.X=1;kh.X=1;hb.X=1;lh.X=1;yf.X=1;var Qa=Math.floor,Ph=gb;Oa=13;Ra=9;Ig=16;Vc=17;nb=22;Sb=5;Tb=21;Ub=2;Pb=20;Hg=39;Uc=6;Nf=29;var $c=0,ic=0,ad=0,O=0,T={P:"/",sa:2,a:[W],V:I,B:function(a,c){if("string"!==typeof a)return W;c===H&&(c=T.P);a&&"/"==a[0]&&(c="");for(var b=(c+"/"+a).split("/").reverse(),d=[""];b.length;){var e=b.pop();""==
e||"."==e||(".."==e?1<d.length&&d.pop():d.push(e))}return 1==d.length?"/":d.join("/")},m:function(a,c,b){var d={Z:Y,n:Y,error:0,name:W,path:W,object:W,q:Y,I:W,k:W};a=T.B(a);if("/"==a)d.Z=I,d.n=d.q=I,d.name="/",d.path=d.I="/",d.object=d.k=T.root;else if(a!==W){b=b||0;a=a.slice(1).split("/");for(var e=T.root,f=[""];a.length;){1==a.length&&e.c&&(d.q=I,d.I=1==f.length?"/":f.join("/"),d.k=e,d.name=a[0]);var g=a.shift();if(e.c)if(e.A){if(!e.b.hasOwnProperty(g)){d.error=Ub;break}}else{d.error=Oa;break}else{d.error=
Pb;break}e=e.b[g];if(e.link&&(!c||0!=a.length)){if(40<b){d.error=40;break}d=T.B(e.link,f.join("/"));return T.m([d].concat(a).join("/"),c,b+1)}f.push(g);0==a.length&&(d.n=I,d.path=f.join("/"),d.object=e)}}return d},G:function(a,c){T.R();var b=T.m(a,c);if(b.n)return b.object;V(b.error);return W},O:function(a,c,b,d,e){a||(a="/");"string"===typeof a&&(a=T.G(a));if(!a)throw V(Oa),Error("Parent path must exist.");if(!a.c)throw V(Pb),Error("Parent must be a folder.");if(!a.write&&!T.V)throw V(Oa),Error("Parent folder must be writeable.");
if(!c||"."==c||".."==c)throw V(Ub),Error("Name must not be empty.");if(a.b.hasOwnProperty(c))throw V(Vc),Error("Can't overwrite object.");a.b[c]={A:d===H?I:d,write:e===H?Y:e,timestamp:Date.now(),Y:T.sa++};for(var f in b)b.hasOwnProperty(f)&&(a.b[c][f]=b[f]);return a.b[c]},D:function(a,c,b,d){return T.O(a,c,{c:I,d:Y,b:{}},b,d)},Ea:function(a,c,b,d){a=T.G(a);if(a===W)throw Error("Invalid parent.");for(c=c.split("/").reverse();c.length;){var e=c.pop();e&&(a.b.hasOwnProperty(e)||T.D(a,e,b,d),a=a.b[e])}return a},
w:function(a,c,b,d,e){b.c=Y;return T.O(a,c,b,d,e)},N:function(a,c,b,d,e){if("string"===typeof b){for(var f=[],g=0;g<b.length;g++)f.push(b.charCodeAt(g));b=f}return T.w(a,c,{d:Y,b:b},d,e)},Ca:function(a,c,b,d,e){return T.w(a,c,{d:Y,url:b},d,e)},Da:function(a,c,b,d,e){return T.w(a,c,{d:Y,link:b},d,e)},v:function(a,c,b,d){if(!b&&!d)throw Error("A device must have at least one callback defined.");return T.w(a,c,{d:I,input:b,j:d},Boolean(b),Boolean(d))},la:function(a){if(a.d||a.c||a.link||a.b)return I;
var c=I;if("undefined"!==typeof XMLHttpRequest){var b=new XMLHttpRequest;b.open("GET",a.url,Y);"undefined"!=typeof Uint8Array&&(b.responseType="arraybuffer");b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined");b.send(W);200!=b.status&&0!=b.status&&(c=Y);a.b=b.response!==H?new Uint8Array(b.response||[]):q(b.responseText||"",I)}else if("undefined"!==typeof read)try{a.b=q(read(a.url),I)}catch(d){c=Y}else throw Error("Cannot load without read() or XMLHttpRequest.");c||V(Sb);return c},
R:function(){T.root||(T.root={A:I,write:Y,c:I,d:Y,timestamp:Date.now(),Y:1,b:{}})},o:function(a,c,b){if(!T.o.W){T.o.W=I;T.R();a||(a=function(){if(!a.C||!a.C.length){var c;"undefined"!=typeof window&&"function"==typeof window.prompt?c=window.prompt("Input: "):"function"==typeof readline&&(c=readline());c||(c="");a.C=q(c+"\n",I)}return a.C.shift()});c||(c=function(a){a===W||10===a?(c.$(c.buffer.join("")),c.buffer=[]):c.buffer.push(String.fromCharCode(a))});c.$||(c.$=e);c.buffer||(c.buffer=[]);b||(b=
c);T.D("/","tmp",I,I);var d=T.D("/","dev",I,Y),f=T.v(d,"stdin",a),g=T.v(d,"stdout",W,c);b=T.v(d,"stderr",W,b);T.v(d,"tty",a,c);T.a[1]={path:"/dev/stdin",object:f,position:0,h:I,i:Y,p:Y,error:Y,f:Y,e:[]};T.a[2]={path:"/dev/stdout",object:g,position:0,h:Y,i:I,p:Y,error:Y,f:Y,e:[]};T.a[3]={path:"/dev/stderr",object:b,position:0,h:Y,i:I,p:Y,error:Y,f:Y,e:[]};$c=h([1],"void*",u);ic=h([2],"void*",u);ad=h([3],"void*",u);T.a[$c]=T.a[1];T.a[ic]=T.a[2];T.a[ad]=T.a[3];O=h([h([0,0,0,0,$c,0,0,0,ic,0,0,0,ad,0,
0,0],"void*",u)],"void*",u)}},ta:function(){T.o.W&&(0<T.a[2].object.j.buffer.length&&T.a[2].object.j(10),0<T.a[3].object.j.buffer.length&&T.a[3].object.j(10))}};sc={l:8,ya:0,za:4};tc={l:8,ya:8,za:12};var Qh=Math.abs,lb=Math.pow,jc={l:1040,fa:0,Q:4,ga:1028,ha:1032,ia:1036},vf,Th,Uh,Sh,Vh,Cg,Dg,Eg,Fg,Pc,Wh,Xh;T.o();Yc.push({ma:function(){T.ta()}});V(0);Wc.r=h([0],"i8",u);ga.ea=function(a){function c(){for(var a=0;3>a;a++)d.push(0)}var b=a.length+1,d=[h(q("/bin/this.program"),"i8",u)];c();for(var e=
0;e<b-1;e+=1)d.push(h(q(a[e]),"i8",u)),c();d.push(0);d=h(d,"i32",u);return Jc(b,d)};var qd,rd,wd,pc,qc,xd,rc,yd,zd,zh,Ad,vd,Bd,Nd,Md,Od,Pd,Jd,Kd,Ld,Hd,Id,Fd,Gd,Dd,Ed,Cd,Qd,s,Ib,te,se,Fb,we,ye,xe,ze,Ae,Be,Fe,Ce,Ee,He,Ie,Je,vb,Ke,Le,Me,Ne,Oe,Pe,Qe,Re,Se,Te,Ue,Ve,We,Xe,Ye,Ze,$e,af,bf,cf,df,ef,ff,gf,hf,jf,kf,lf,mf,nf,Ac,Kb,zc,qf,Fa,Cc,Ah,Bh,Dc,Ec,Fc,ac,Ch,Gc,Dh,Eh,Fh,Gh,Hh,rf,tf,uf,Bc,wf,Ih,Jh,$b,zf,If,Ic,Hc,Af,Ff,Cf,Df,Ef,Gf,Hf,Kh,Lh,Mh,Jf,Kf,Lf,$f,fc,cc,Pf,Mb,dc,Kc,Lc,Vf,ec,Xf,Zf,$a,yb,bg,Mc,na,Nb,
Nc,cg,dg,Oc,Ob,hg,eg,fg,gg,ig,jg,kg,lg,mg,ng,og,pg,qg,rg,sg,zg,tg,ug,vg,wg,xg,yg,Bg,Ag,Gg,Jg,ih,gc,ab,Kg,La,Lg,Mg,Ng,Og,Pg,Qg,Qc,Rg,Sg,Tg,Ug,Vg,zb,Wg,Ab,Xg,Yg,Zg,$g,ah,Rc,bh,ch,dh,eh,fh,gh,hh,mh,nh,Rb,ba,Nh,Oh,Qb,xa,Sc,mb,ph,hc,qh,Tc,oh;qd=h([69,114,114,111,114,32,97,108,108,111,99,97,116,105,110,103,32,109,101,109,111,114,121,32,102,111,114,32,99,111,109,112,114,101,115,115,101,100,32,98,105,116,115,116,114,101,97,109,10,0],"i8",u);h([119,114,105,116,101,32,101,114,114,111,114,10,0],"i8",u);rd=h([114,
101,97,100,32,101,114,114,111,114,58,32,112,97,115,115,101,100,32,116,104,101,32,101,110,100,32,111,102,32,116,104,101,32,99,111,100,101,115,116,114,101,97,109,32,40,115,116,97,114,116,32,61,32,37,100,44,32,99,117,114,114,101,110,116,32,61,32,37,100,44,32,101,110,100,32,61,32,37,100,10,0],"i8",u);h([1,0,0,0,0,0,0,0,1.5,0,0,0,0,0,0,0,2.75,0,0,0,0,0,0,0,5.375,0,0,0,0,0,0,0,10.68,0,0,0,0,0,0,0,21.34,0,0,0,0,0,0,0,42.67,0,0,0,0,0,0,0,85.33,0,0,0,0,0,0,0,170.7,0,0,0,0,0,0,0,341.3,0,0,0,0,0,0,0,1.038,0,
0,0,0,0,0,0,1.592,0,0,0,0,0,0,0,2.919,0,0,0,0,0,0,0,5.703,0,0,0,0,0,0,0,11.33,0,0,0,0,0,0,0,22.64,0,0,0,0,0,0,0,45.25,0,0,0,0,0,0,0,90.48,0,0,0,0,0,0,0,180.9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.038,0,0,0,0,0,0,0,1.592,0,0,0,0,0,0,0,2.919,0,0,0,0,0,0,0,5.703,0,0,0,0,0,0,0,11.33,0,0,0,0,0,0,0,22.64,0,0,0,0,0,0,0,45.25,0,0,0,0,0,0,0,90.48,0,0,0,0,0,0,0,180.9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.7186,0,0,0,0,0,0,0,.9218,0,0,0,0,0,0,0,1.586,0,0,0,0,0,0,0,3.043,0,0,0,0,0,0,0,6.019,0,0,0,0,0,0,0,12.01,0,0,0,0,0,0,
0,24,0,0,0,0,0,0,0,47.97,0,0,0,0,0,0,0,95.93,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,
0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0],u);h([1,
0,0,0,0,0,0,0,1.965,0,0,0,0,0,0,0,4.177,0,0,0,0,0,0,0,8.403,0,0,0,0,0,0,0,16.9,0,0,0,0,0,0,0,33.84,0,0,0,0,0,0,0,67.69,0,0,0,0,0,0,0,135.3,0,0,0,0,0,0,0,270.6,0,0,0,0,0,0,0,540.9,0,0,0,0,0,0,0,2.022,0,0,0,0,0,0,0,3.989,0,0,0,0,0,0,0,8.355,0,0,0,0,0,0,0,17.04,0,0,0,0,0,0,0,34.27,0,0,0,0,0,0,0,68.63,0,0,0,0,0,0,0,137.3,0,0,0,0,0,0,0,274.6,0,0,0,0,0,0,0,549,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.022,0,0,0,0,0,0,0,3.989,0,0,0,0,0,0,0,8.355,0,0,0,0,0,0,0,17.04,0,0,0,0,0,0,0,34.27,0,0,0,0,0,0,0,68.63,0,0,0,0,
0,0,0,137.3,0,0,0,0,0,0,0,274.6,0,0,0,0,0,0,0,549,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.08,0,0,0,0,0,0,0,3.865,0,0,0,0,0,0,0,8.307,0,0,0,0,0,0,0,17.18,0,0,0,0,0,0,0,34.71,0,0,0,0,0,0,0,69.59,0,0,0,0,0,0,0,139.3,0,0,0,0,0,0,0,278.6,0,0,0,0,0,0,0,557.2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,
0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,
0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0],u);h([85,110,97,98,108,101,32,116,111,32,97,108,108,111,99,97,116,101,32,109,101,109,111,114,121,32,102,111,114,32,105,109,97,103,101,46,10,0],"i8",u);h([4,0,0,0,67,80,82,76,0,0,0,0,76,82,67,80,3,0,0,0,80,67,82,76,1,0,0,0,82,76,67,80,2,0,0,0,82,80,67,76,-1,0,0,0,0,0,0,0],["i32",0,0,0,"i8","i8","i8","i8","i32",
0,0,0,"i8","i8","i8","i8","i32",0,0,0,"i8","i8","i8","i8","i32",0,0,0,"i8","i8","i8","i8","i32",0,0,0,"i8","i8","i8","i8","i32",0,0,0,"i8","i8","i8","i8"],u);wd=h([65359,0,0,0,1,0,0,0,10,0,0,0,65424,0,0,0,12,0,0,0,12,0,0,0,65427,0,0,0,16,0,0,0,14,0,0,0,65497,0,0,0,8,0,0,0,16,0,0,0,65361,0,0,0,2,0,0,0,18,0,0,0,65362,0,0,0,20,0,0,0,20,0,0,0,65363,0,0,0,20,0,0,0,22,0,0,0,65374,0,0,0,20,0,0,0,24,0,0,0,65372,0,0,0,20,0,0,0,26,0,0,0,65373,0,0,0,20,0,0,0,28,0,0,0,65375,0,0,0,20,0,0,0,30,0,0,0,65365,0,0,
0,4,0,0,0,32,0,0,0,65367,0,0,0,4,0,0,0,34,0,0,0,65368,0,0,0,16,0,0,0,36,0,0,0,65376,0,0,0,4,0,0,0,38,0,0,0,65377,0,0,0,16,0,0,0,40,0,0,0,65425,0,0,0,0,0,0,0,0,0,0,0,65379,0,0,0,4,0,0,0,42,0,0,0,65380,0,0,0,20,0,0,0,44,0,0,0,0,0,0,0,20,0,0,0,46,0,0,0],["i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,
0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",
0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0,"i32",0,0,0,"i32",0,0,0,"void (%struct.opj_j2k.22*)*",0,0,0],u);pc=h([37,46,56,120,58,32,101,120,112,101,99,116,101,100,32,97,32,109,97,
114,107,101,114,32,105,110,115,116,101,97,100,32,111,102,32,37,120,10,0],"i8",u);qc=h([37,46,56,120,58,32,117,110,101,120,112,101,99,116,101,100,32,109,97,114,107,101,114,32,37,120,10,0],"i8",u);xd=h([77,97,105,110,32,72,101,97,100,101,114,32,100,101,99,111,100,101,100,46,10,0],"i8",u);rc=h([73,110,99,111,109,112,108,101,116,101,32,98,105,116,115,116,114,101,97,109,10,0],"i8",u);yd=h([91,74,80,84,45,115,116,114,101,97,109,93,32,58,32,69,120,112,101,99,116,105,110,103,32,77,97,105,110,32,104,101,97,
100,101,114,32,102,105,114,115,116,32,91,99,108,97,115,115,95,73,100,32,37,100,93,32,33,10,0],"i8",u);zd=h([91,74,80,84,45,115,116,114,101,97,109,93,32,58,32,69,120,112,101,99,116,105,110,103,32,84,105,108,101,32,105,110,102,111,32,33,10,0],"i8",u);h([116,105,108,101,32,110,117,109,98,101,114,32,37,100,32,47,32,37,100,10,0],"i8",u);zh=h([85,110,107,110,111,119,110,32,109,97,114,107,101,114,10,0],"i8",u);Ad=h([69,114,114,111,114,32,100,101,99,111,100,105,110,103,32,99,111,109,112,111,110,101,110,116,
32,37,100,46,10,84,104,101,32,110,117,109,98,101,114,32,111,102,32,114,101,115,111,108,117,116,105,111,110,115,32,116,111,32,114,101,109,111,118,101,32,105,115,32,104,105,103,104,101,114,32,116,104,97,110,32,116,104,101,32,110,117,109,98,101,114,32,111,102,32,114,101,115,111,108,117,116,105,111,110,115,32,111,102,32,116,104,105,115,32,99,111,109,112,111,110,101,110,116,10,77,111,100,105,102,121,32,116,104,101,32,99,112,95,114,101,100,117,99,101,32,112,97,114,97,109,101,116,101,114,46,10,10,0],"i8",
u);vd=h([37,115,58,32,105,110,118,97,108,105,100,32,105,109,97,103,101,32,115,105,122,101,32,40,120,48,58,37,100,44,32,120,49,58,37,100,44,32,121,48,58,37,100,44,32,121,49,58,37,100,41,10,0],"i8",u);Bd=h([69,120,112,101,99,116,101,100,32,74,80,50,72,32,77,97,114,107,101,114,10,0],"i8",u);Nd=h([70,97,105,108,101,100,32,116,111,32,100,101,99,111,100,101,32,106,112,50,32,115,116,114,117,99,116,117,114,101,10,0],"i8",u);Md=h([70,97,105,108,101,100,32,116,111,32,100,101,99,111,100,101,32,74,50,75,32,105,
109,97,103,101,10,0],"i8",u);h([73,110,118,97,108,105,100,32,110,117,109,98,101,114,32,111,102,32,99,111,109,112,111,110,101,110,116,115,32,115,112,101,99,105,102,105,101,100,32,119,104,105,108,101,32,115,101,116,116,105,110,103,32,117,112,32,74,80,50,32,101,110,99,111,100,101,114,10,0],"i8",u);h([70,97,105,108,101,100,32,116,111,32,101,110,99,111,100,101,32,105,109,97,103,101,10,0],"i8",u);Od=h([69,120,112,101,99,116,101,100,32,70,84,89,80,32,77,97,114,107,101,114,10,0],"i8",u);Pd=h([69,114,114,
111,114,32,119,105,116,104,32,70,84,89,80,32,66,111,120,10,0],"i8",u);Jd=h([69,120,112,101,99,116,101,100,32,74,80,32,77,97,114,107,101,114,10,0],"i8",u);Kd=h([69,114,114,111,114,32,119,105,116,104,32,74,80,32,77,97,114,107,101,114,10,0],"i8",u);Ld=h([69,114,114,111,114,32,119,105,116,104,32,74,80,32,66,111,120,32,115,105,122,101,10,0],"i8",u);Hd=h([69,114,114,111,114,32,119,105,116,104,32,67,79,76,82,32,98,111,120,32,115,105,122,101,10,0],"i8",u);Id=h([69,114,114,111,114,32,119,105,116,104,32,67,
79,76,82,32,66,111,120,10,0],"i8",u);Fd=h([69,120,112,101,99,116,101,100,32,66,80,67,67,32,77,97,114,107,101,114,10,0],"i8",u);Gd=h([69,114,114,111,114,32,119,105,116,104,32,66,80,67,67,32,66,111,120,10,0],"i8",u);Dd=h([69,120,112,101,99,116,101,100,32,73,72,68,82,32,77,97,114,107,101,114,10,0],"i8",u);Ed=h([69,114,114,111,114,32,119,105,116,104,32,73,72,68,82,32,66,111,120,10,0],"i8",u);Cd=h([67,97,110,110,111,116,32,104,97,110,100,108,101,32,98,111,120,32,115,105,122,101,115,32,104,105,103,104,
101,114,32,116,104,97,110,32,50,94,51,50,10,0],"i8",u);Qd=h([70,111,114,98,105,100,100,101,110,32,118,97,108,117,101,32,101,110,99,111,117,110,116,101,114,32,105,110,32,109,101,115,115,97,103,101,32,104,101,97,100,101,114,32,33,33,10,0],"i8",u);h([1.732,0,0,0,0,0,0,0,.8292,0,0,0,0,0,0,0,.8292,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0],u);h([1.732,0,0,0,0,0,0,0,1.805,0,0,0,0,0,0,0,1.573,0,0,0,0,0,0,0],["double",0,0,0,0,0,0,0,"double",0,0,0,0,0,0,0,"double",
0,0,0,0,0,0,0],u);s=h([22017,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22017,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,13313,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13313,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,6145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6145,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,2753,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2753,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1313,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1313,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,545,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,545,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,22017,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22017,0,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,21505,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21505,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,18433,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18433,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,14337,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14337,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,12289,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12289,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,9217,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9217,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,7169,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7169,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,5633,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5633,0,0,0,1,0,0,0,0,0,
0,0,0,0,0,0,22017,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22017,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,21505,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21505,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,20737,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20737,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,18433,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18433,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,14337,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14337,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,13313,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13313,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,12289,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12289,0,0,0,1,0,0,0,0,
0,0,0,0,0,0,0,10241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10241,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,9217,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9217,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,8705,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8705,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,7169,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7169,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,6145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6145,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,5633,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5633,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,5121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5121,0,0,0,1,0,0,0,0,0,0,0,0,0,
0,0,4609,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4609,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,4353,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4353,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,2753,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2753,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,2497,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2497,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,2209,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2209,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1313,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1313,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1089,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1089,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,673,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,673,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,545,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,545,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,321,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,321,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,273,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,273,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,133,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,133,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,73,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,73,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,
0,0,1,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,22017,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22017,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",
0,0,0,"%struct.opj_mqc_state*",0,0,0,"i32",0,0,0,"i32",0,0,0,"%struct.opj_mqc_state*",0,0,0,"%struct.opj_mqc_state*",0,0,0],u);h([49,46,52,46,48,0],"i8",u);h([83,101,116,32,105,110,100,101,120,32,116,111,32,78,85,76,76,32,119,104,101,110,32,99,97,108,108,105,110,103,32,116,104,101,32,111,112,106,95,101,110,99,111,100,101,32,102,117,110,99,116,105,111,110,46,10,84,111,32,101,120,116,114,97,99,116,32,116,104,101,32,105,110,100,101,120,44,32,117,115,101,32,116,104,101,32,111,112,106,95,101,110,99,111,
100,101,95,119,105,116,104,95,105,110,102,111,40,41,32,102,117,110,99,116,105,111,110,46,10,78,111,32,105,110,100,101,120,32,119,105,108,108,32,98,101,32,103,101,110,101,114,97,116,101,100,32,100,117,114,105,110,103,32,116,104,105,115,32,101,110,99,111,100,105,110,103,10,0],"i8",u);h([67,80,82,76,0],"i8",u);h([76,82,67,80,0],"i8",u);h([80,67,82,76,0],"i8",u);h([82,76,67,80,0],"i8",u);h([82,80,67,76,0],"i8",u);Ib=h([64,0,1088,0,32,0,544,0,128,0,2176,0,16,0,272,0],["i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0],u);te=h([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,0,0,0,1,1,0,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,1,1,0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,
1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"i8",u);se=h([9,10,12,13,10,10,13,13,12,13,12,13,13,13,13,13,9,10,12,11,10,9,13,12,12,11,12,11,13,12,13,12,9,10,12,11,10,10,11,11,12,13,9,10,13,13,10,10,9,10,12,13,10,9,11,12,12,11,9,10,13,12,10,9,9,10,12,13,10,9,11,12,12,13,12,13,11,12,11,12,9,10,12,11,10,10,11,11,12,11,12,11,11,11,11,11,9,10,12,11,10,9,13,12,12,13,9,10,11,12,10,9,9,10,12,13,10,10,13,13,12,11,9,10,11,11,10,10,9,10,12,13,10,10,13,13,12,11,9,10,11,11,10,10,9,10,12,11,10,9,13,12,12,13,
9,10,11,12,10,9,9,10,12,11,10,10,11,11,12,11,12,11,11,11,11,11,9,10,12,13,10,9,11,12,12,13,12,13,11,12,11,12,9,10,12,13,10,9,11,12,12,11,9,10,13,12,10,9,9,10,12,11,10,10,11,11,12,13,9,10,13,13,10,10,9,10,12,11,10,9,13,12,12,11,12,11,13,12,13,12,9,10,12,13,10,10,13,13,12,13,12,13,13,13,13,13],"i8",u);Fb=h([0,1,1,2,1,2,2,2,1,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,
7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,1,1,2,1,2,2,2,1,2,2,2,2,2,2,2,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,
8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,1,1,2,1,2,2,2,1,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,
4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,3,3,6,3,6,6,8,3,6,6,8,6,8,8,8,1,4,4,7,4,7,7,8,4,7,7,8,7,8,8,8,1,4,4,7,4,7,7,8,4,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,1,4,4,7,4,7,7,8,4,7,7,8,7,8,8,8,2,5,
5,7,5,7,7,8,5,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,1,4,4,7,4,7,7,8,4,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8,2,5,5,7,5,7,7,8,5,7,7,8,7,8,8,8],"i8",u);h([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,384,0,768,0,1152,0,1536,0,1920,0,2304,0,2688,0,3072,0,3456,0,3840,0,4224,0,4608,0,4992,0,5376,0,5760,0,6144,0,6528,0,6912,0,7296,0,7680,0,8064,0,8448,0,8832,0,9216,0,9600,0,9984,0,10368,0,10752,0,11136,0,11520,0,11904,0,12288,0,12672,0,13056,0,13440,0,13824,0,14208,0,14592,0,14976,0,15360,0,15744,0,16128,0,16512,0,16896,0,17280,0,17664,0,18048,0,18432,0,18816,0,19200,0,19584,0,19968,0,20352,0,20736,0,21120,0,21504,0,21888,0,22272,0,22656,0,23040,
0,23424,0,23808,0,24192,0,24576,0,24960,0,25344,0,25728,0,26112,0,26496,0,26880,0,27264,0,27648,0,28032,0,28416,0,28800,0,29184,0,29568,0,29952,0,30336,0],["i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0],u);h([0,0,0,0,0,0,0,0,0,0,0,0,128,0,128,0,128,0,128,0,256,0,256,0,256,0,384,0,384,0,512,0,512,0,640,0,640,0,768,0,768,0,896,0,1024,0,1024,0,1152,0,1280,0,1408,0,1408,0,1536,0,1664,0,1792,0,1920,0,2048,0,2176,0,2304,0,2432,0,2560,0,2688,0,2944,0,3072,0,3200,0,3328,0,3584,0,3712,0,3840,0,4096,0,4224,0,4480,0,4608,0,4864,0,4992,0,5248,
0,5376,0,5632,0,5888,0,6016,0,6272,0,6528,0,6784,0,6912,0,7168,0,7424,0,7680,0,7936,0,8192,0,8448,0,8704,0,8960,0,9216,0,9472,0,9856,0,10112,0,10368,0,10624,0,11008,0,11264,0,11520,0,11904,0,12160,0,12544,0,12800,0,13184,0,13440,0,13824,0,14080,0,14464,0,14848,0,15104,0,15488,0,15872,0,16256,0,16512,0,16896,0,17280,0,17664,0,18048,0,18432,0,18816,0,19200,0,19584,0,19968,0,20352,0,20864,0,21248,0,21632,0,22016,0,22528,0,22912,0,23296,0,23808,0,24192,0,24704,0,25088,0,25600,0,25984,0,26496,0,26880,
0,27392,0,27904,0,28288,0,28800,0,29312,0,29824,0,30208,0,30720,0,31232,0,31744,0,32256,0],["i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0],u);h([6144,0,6016,0,5888,0,5760,0,5632,0,5504,0,5376,0,5248,0,5120,0,4992,0,4864,0,4736,0,4608,0,4480,0,4352,0,4224,0,4096,0,3968,0,3840,0,3712,0,3584,0,3456,0,3328,0,3200,0,3072,0,2944,0,2816,0,2688,0,2560,0,2432,0,2304,0,2176,0,2048,0,1920,0,1792,0,1664,0,1536,0,1408,0,1280,0,1152,0,1024,0,896,0,768,0,640,0,512,0,384,0,256,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,256,0,384,0,512,0,640,0,768,0,896,0,1024,0,1152,0,1280,0,1408,0,1536,0,1664,0,1792,0,1920,0,2048,0,2176,0,2304,0,2432,0,2560,0,2688,0,2816,0,2944,0,3072,0,3200,0,3328,0,3456,0,3584,0,3712,0,3840,0,3968,0,4096,0,4224,0,4352,0,4480,0,4608,0,4736,0,4864,0,4992,0,5120,0,5248,0,5376,0,5504,0,5632,0,5760,0,5888,0,6016,0],["i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0],u);h([8192,0,7936,0,7680,0,7424,0,7168,0,6912,0,6784,0,6528,0,6272,0,6016,0,5888,0,5632,0,
5376,0,5248,0,4992,0,4864,0,4608,0,4480,0,4224,0,4096,0,3840,0,3712,0,3584,0,3328,0,3200,0,3072,0,2944,0,2688,0,2560,0,2432,0,2304,0,2176,0,2048,0,1920,0,1792,0,1664,0,1536,0,1408,0,1408,0,1280,0,1152,0,1024,0,1024,0,896,0,768,0,768,0,640,0,640,0,512,0,512,0,384,0,384,0,256,0,256,0,256,0,128,0,128,0,128,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,128,0,128,0,128,0,256,0,256,0,256,0,384,0,384,0,512,0,512,0,640,0,640,0,768,0,768,0,896,0,1024,0,1024,0,1152,0,1280,0,1408,0,1408,0,1536,0,
1664,0,1792,0,1920,0,2048,0,2176,0,2304,0,2432,0,2560,0,2688,0,2944,0,3072,0,3200,0,3328,0,3584,0,3712,0,3840,0,4096,0,4224,0,4480,0,4608,0,4864,0,4992,0,5248,0,5376,0,5632,0,5888,0,6016,0,6272,0,6528,0,6784,0,6912,0,7168,0,7424,0,7680,0,7936,0],["i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",
0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0,"i16",0],u);h([69,114,114,111,114,32,105,110,105,116,105,97,108,105,122,105,110,103,32,80,97,99,107,101,116,32,73,116,101,114,97,116,111,114,10,0],"i8",u);we=h([69,120,112,101,99,116,101,100,32,83,79,80,32,109,97,114,107,101,114,10,0],"i8",u);
ye=h([69,114,114,111,114,32,58,32,101,120,112,101,99,116,101,100,32,69,80,72,32,109,97,114,107,101,114,10,0],"i8",u);xe=h([69,120,112,101,99,116,101,100,32,69,80,72,32,109,97,114,107,101,114,10,0],"i8",u);h([105,109,97,103,101,32,123,10,0],"i8",u);h([32,32,116,119,61,37,100,44,32,116,104,61,37,100,32,120,48,61,37,100,32,120,49,61,37,100,32,121,48,61,37,100,32,121,49,61,37,100,10,0],"i8",u);h([32,32,116,105,108,101,32,123,10,0],"i8",u);h([32,32,32,32,120,48,61,37,100,44,32,121,48,61,37,100,44,32,120,
49,61,37,100,44,32,121,49,61,37,100,44,32,110,117,109,99,111,109,112,115,61,37,100,10,0],"i8",u);h([32,32,32,32,116,105,108,101,99,32,123,10,0],"i8",u);h([32,32,32,32,32,32,120,48,61,37,100,44,32,121,48,61,37,100,44,32,120,49,61,37,100,44,32,121,49,61,37,100,44,32,110,117,109,114,101,115,111,108,117,116,105,111,110,115,61,37,100,10,0],"i8",u);h([10,32,32,32,114,101,115,32,123,10,0],"i8",u);h([32,32,32,32,32,32,32,32,32,32,120,48,61,37,100,44,32,121,48,61,37,100,44,32,120,49,61,37,100,44,32,121,49,
61,37,100,44,32,112,119,61,37,100,44,32,112,104,61,37,100,44,32,110,117,109,98,97,110,100,115,61,37,100,10,0],"i8",u);h([32,32,32,32,32,32,32,32,98,97,110,100,32,123,10,0],"i8",u);h([32,32,32,32,32,32,32,32,32,32,120,48,61,37,100,44,32,121,48,61,37,100,44,32,120,49,61,37,100,44,32,121,49,61,37,100,44,32,115,116,101,112,115,105,122,101,61,37,102,44,32,110,117,109,98,112,115,61,37,100,10,0],"i8",u);h([32,32,32,32,32,32,32,32,32,32,112,114,101,99,32,123,10,0],"i8",u);h([32,32,32,32,32,32,32,32,32,32,
32,32,120,48,61,37,100,44,32,121,48,61,37,100,44,32,120,49,61,37,100,44,32,121,49,61,37,100,44,32,99,119,61,37,100,44,32,99,104,61,37,100,10,0],"i8",u);h([32,32,32,32,32,32,32,32,32,32,125,10,0],"i8",u);h([32,32,32,32,32,32,32,32,125,10,0],"i8",u);h([32,32,32,32,32,32,125,10,0],"i8",u);h([32,32,32,32,125,10,0],"i8",u);h([32,32,125,10,0],"i8",u);h([125,10,0],"i8",u);h([45,32,116,105,108,101,32,101,110,99,111,100,101,100,32,105,110,32,37,102,32,115,10,0],"i8",u);ze=h([116,105,108,101,32,37,100,32,111,
102,32,37,100,10,0],"i8",u);Ae=h([116,99,100,95,100,101,99,111,100,101,58,32,105,110,99,111,109,112,108,101,116,101,32,98,105,115,116,114,101,97,109,10,0],"i8",u);Be=h([45,32,116,105,101,114,115,45,49,32,116,111,111,107,32,37,102,32,115,10,0],"i8",u);Fe=h([69,114,114,111,114,32,100,101,99,111,100,105,110,103,32,116,105,108,101,46,32,84,104,101,32,110,117,109,98,101,114,32,111,102,32,114,101,115,111,108,117,116,105,111,110,115,32,116,111,32,114,101,109,111,118,101,32,91,37,100,43,49,93,32,105,115,
32,104,105,103,104,101,114,32,116,104,97,110,32,116,104,101,32,110,117,109,98,101,114,32,32,111,102,32,114,101,115,111,108,117,116,105,111,110,115,32,105,110,32,116,104,101,32,111,114,105,103,105,110,97,108,32,99,111,100,101,115,116,114,101,97,109,32,91,37,100,93,10,77,111,100,105,102,121,32,116,104,101,32,99,112,95,114,101,100,117,99,101,32,112,97,114,97,109,101,116,101,114,46,10,0],"i8",u);Ce=h([45,32,100,119,116,32,116,111,111,107,32,37,102,32,115,10,0],"i8",u);Ee=h([45,32,116,105,108,101,32,100,
101,99,111,100,101,100,32,105,110,32,37,102,32,115,10,0],"i8",u);He=h([72,69,76,80,32,102,111,114,32,106,50,107,95,116,111,95,105,109,97,103,101,10,45,45,45,45,10,10,0],"i8",u);Ie=h([45,32,116,104,101,32,45,104,32,111,112,116,105,111,110,32,100,105,115,112,108,97,121,115,32,116,104,105,115,32,104,101,108,112,32,105,110,102,111,114,109,97,116,105,111,110,32,111,110,32,115,99,114,101,101,110,10,10,0],"i8",u);Je=h([76,105,115,116,32,111,102,32,112,97,114,97,109,101,116,101,114,115,32,102,111,114,32,
116,104,101,32,74,80,69,71,32,50,48,48,48,32,100,101,99,111,100,101,114,58,10,0],"i8",u);vb=h([10,0],"i8",u);Ke=h([32,32,45,73,109,103,68,105,114,32,10,0],"i8",u);Le=h([9,73,109,97,103,101,32,102,105,108,101,32,68,105,114,101,99,116,111,114,121,32,112,97,116,104,32,10,0],"i8",u);Me=h([32,32,45,79,117,116,70,111,114,32,10,0],"i8",u);Ne=h([32,32,32,32,82,69,81,85,73,82,69,68,32,111,110,108,121,32,105,102,32,45,73,109,103,68,105,114,32,105,115,32,117,115,101,100,10,0],"i8",u);Oe=h([9,32,32,78,101,101,
100,32,116,111,32,115,112,101,99,105,102,121,32,111,110,108,121,32,102,111,114,109,97,116,32,119,105,116,104,111,117,116,32,102,105,108,101,110,97,109,101,32,60,66,77,80,62,32,32,10,0],"i8",u);Pe=h([32,32,32,32,67,117,114,114,101,110,116,108,121,32,97,99,99,101,112,116,115,32,80,71,77,44,32,80,80,77,44,32,80,78,77,44,32,80,71,88,44,32,80,78,71,44,32,66,77,80,44,32,84,73,70,44,32,82,65,87,32,97,110,100,32,84,71,65,32,102,111,114,109,97,116,115,10,0],"i8",u);Qe=h([32,32,45,105,32,60,99,111,109,112,
114,101,115,115,101,100,32,102,105,108,101,62,10,0],"i8",u);Re=h([32,32,32,32,82,69,81,85,73,82,69,68,32,111,110,108,121,32,105,102,32,97,110,32,73,110,112,117,116,32,105,109,97,103,101,32,100,105,114,101,99,116,111,114,121,32,110,111,116,32,115,112,101,99,105,102,105,101,100,10,0],"i8",u);Se=h([32,32,32,32,67,117,114,114,101,110,116,108,121,32,97,99,99,101,112,116,115,32,74,50,75,45,102,105,108,101,115,44,32,74,80,50,45,102,105,108,101,115,32,97,110,100,32,74,80,84,45,102,105,108,101,115,46,32,84,
104,101,32,102,105,108,101,32,116,121,112,101,10,0],"i8",u);Te=h([32,32,32,32,105,115,32,105,100,101,110,116,105,102,105,101,100,32,98,97,115,101,100,32,111,110,32,105,116,115,32,115,117,102,102,105,120,46,10,0],"i8",u);Ue=h([32,32,45,111,32,60,100,101,99,111,109,112,114,101,115,115,101,100,32,102,105,108,101,62,10,0],"i8",u);Ve=h([32,32,32,32,82,69,81,85,73,82,69,68,10,0],"i8",u);We=h([32,32,32,32,67,117,114,114,101,110,116,108,121,32,97,99,99,101,112,116,115,32,80,71,77,44,32,80,80,77,44,32,80,
78,77,44,32,80,71,88,44,32,80,78,71,44,32,66,77,80,44,32,84,73,70,44,32,82,65,87,32,97,110,100,32,84,71,65,32,102,105,108,101,115,10,0],"i8",u);Xe=h([32,32,32,32,66,105,110,97,114,121,32,100,97,116,97,32,105,115,32,119,114,105,116,116,101,110,32,116,111,32,116,104,101,32,102,105,108,101,32,40,110,111,116,32,97,115,99,105,105,41,46,32,73,102,32,97,32,80,71,88,10,0],"i8",u);Ye=h([32,32,32,32,102,105,108,101,110,97,109,101,32,105,115,32,103,105,118,101,110,44,32,116,104,101,114,101,32,119,105,108,108,
32,98,101,32,97,115,32,109,97,110,121,32,111,117,116,112,117,116,32,102,105,108,101,115,32,97,115,32,116,104,101,114,101,32,97,114,101,10,0],"i8",u);Ze=h([32,32,32,32,99,111,109,112,111,110,101,110,116,115,58,32,97,110,32,105,110,100,105,99,101,32,115,116,97,114,116,105,110,103,32,102,114,111,109,32,48,32,119,105,108,108,32,116,104,101,110,32,98,101,32,97,112,112,101,110,100,101,100,32,116,111,32,116,104,101,10,0],"i8",u);$e=h([32,32,32,32,111,117,116,112,117,116,32,102,105,108,101,110,97,109,101,
44,32,106,117,115,116,32,98,101,102,111,114,101,32,116,104,101,32,34,112,103,120,34,32,101,120,116,101,110,115,105,111,110,46,32,73,102,32,97,32,80,71,77,32,102,105,108,101,110,97,109,101,10,0],"i8",u);af=h([32,32,32,32,105,115,32,103,105,118,101,110,32,97,110,100,32,116,104,101,114,101,32,97,114,101,32,109,111,114,101,32,116,104,97,110,32,111,110,101,32,99,111,109,112,111,110,101,110,116,44,32,111,110,108,121,32,116,104,101,32,102,105,114,115,116,32,99,111,109,112,111,110,101,110,116,10,0],"i8",
u);bf=h([32,32,32,32,119,105,108,108,32,98,101,32,119,114,105,116,116,101,110,32,116,111,32,116,104,101,32,102,105,108,101,46,10,0],"i8",u);cf=h([32,32,45,114,32,60,114,101,100,117,99,101,32,102,97,99,116,111,114,62,10,0],"i8",u);df=h([32,32,32,32,83,101,116,32,116,104,101,32,110,117,109,98,101,114,32,111,102,32,104,105,103,104,101,115,116,32,114,101,115,111,108,117,116,105,111,110,32,108,101,118,101,108,115,32,116,111,32,98,101,32,100,105,115,99,97,114,100,101,100,46,32,84,104,101,10,0],"i8",u);
ef=h([32,32,32,32,105,109,97,103,101,32,114,101,115,111,108,117,116,105,111,110,32,105,115,32,101,102,102,101,99,116,105,118,101,108,121,32,100,105,118,105,100,101,100,32,98,121,32,50,32,116,111,32,116,104,101,32,112,111,119,101,114,32,111,102,32,116,104,101,10,0],"i8",u);ff=h([32,32,32,32,110,117,109,98,101,114,32,111,102,32,100,105,115,99,97,114,100,101,100,32,108,101,118,101,108,115,46,32,84,104,101,32,114,101,100,117,99,101,32,102,97,99,116,111,114,32,105,115,32,108,105,109,105,116,101,100,32,
98,121,32,116,104,101,10,0],"i8",u);gf=h([32,32,32,32,115,109,97,108,108,101,115,116,32,116,111,116,97,108,32,110,117,109,98,101,114,32,111,102,32,100,101,99,111,109,112,111,115,105,116,105,111,110,32,108,101,118,101,108,115,32,97,109,111,110,103,32,116,105,108,101,115,46,10,0],"i8",u);hf=h([32,32,45,108,32,60,110,117,109,98,101,114,32,111,102,32,113,117,97,108,105,116,121,32,108,97,121,101,114,115,32,116,111,32,100,101,99,111,100,101,62,10,0],"i8",u);jf=h([32,32,32,32,83,101,116,32,116,104,101,32,
109,97,120,105,109,117,109,32,110,117,109,98,101,114,32,111,102,32,113,117,97,108,105,116,121,32,108,97,121,101,114,115,32,116,111,32,100,101,99,111,100,101,46,32,73,102,32,116,104,101,114,101,32,97,114,101,10,0],"i8",u);kf=h([32,32,32,32,108,101,115,115,32,113,117,97,108,105,116,121,32,108,97,121,101,114,115,32,116,104,97,110,32,116,104,101,32,115,112,101,99,105,102,105,101,100,32,110,117,109,98,101,114,44,32,97,108,108,32,116,104,101,32,113,117,97,108,105,116,121,32,108,97,121,101,114,115,10,0],
"i8",u);lf=h([32,32,32,32,97,114,101,32,100,101,99,111,100,101,100,46,10,0],"i8",u);mf=h([32,32,45,120,32,32,10,0],"i8",u);nf=h([32,32,32,32,67,114,101,97,116,101,32,97,110,32,105,110,100,101,120,32,102,105,108,101,32,42,46,73,100,120,32,40,45,120,32,105,110,100,101,120,95,110,97,109,101,46,73,100,120,41,32,10,0],"i8",u);Ac=h([67,111,117,108,100,32,110,111,116,32,111,112,101,110,32,70,111,108,100,101,114,32,37,115,10,0],"i8",u);Kb=h([46,0],"i8",u);zc=h([46,46,0],"i8",u);qf=h([70,111,108,100,101,114,
32,111,112,101,110,101,100,32,115,117,99,99,101,115,115,102,117,108,108,121,10,0],"i8",u);Fa=h(56,"i8*",u);Cc=h([112,103,120,0],"i8",u);Ah=h([112,110,109,0],"i8",u);Bh=h([112,103,109,0],"i8",u);Dc=h([112,112,109,0],"i8",u);Ec=h([98,109,112,0],"i8",u);Fc=h([116,105,102,0],"i8",u);ac=h([114,97,119,0],"i8",u);Ch=h([116,103,97,0],"i8",u);Gc=h([112,110,103,0],"i8",u);Dh=h([106,50,107,0],"i8",u);Eh=h([106,112,50,0],"i8",u);Fh=h([106,112,116,0],"i8",u);Gh=h([106,50,99,0],"i8",u);Hh=h([106,112,99,0],"i8",
u);rf=h([11,0,0,0,10,0,0,0,10,0,0,0,10,0,0,0,12,0,0,0,14,0,0,0,15,0,0,0,16,0,0,0,17,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0],["i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0,"i32",0,0,0],u);tf=h([70,105,108,101,32,78,117,109,98,101,114,32,37,100,32,34,37,115,34,10,0],"i8",u);uf=h([37,115,47,37,115,0],"i8",u);Bc=h([46,37,115,0],"i8",u);wf=h([37,115,47,37,115,46,37,115,0],"i8",u);Ih=h([73,
109,103,68,105,114,0],"i8",u);Jh=h([79,117,116,70,111,114,0],"i8",u);$b=h([0,0,0,0,1,0,0,0,0,0,0,0,121,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,79,0,0,0],["i8*",0,0,0,"i32",0,0,0,"i32*",0,0,0,"i32",0,0,0,"i8*",0,0,0,"i32",0,0,0,"i32*",0,0,0,"i32",0,0,0],u);zf=h([105,58,111,58,114,58,108,58,120,58,104,0],"i8",u);If=h([33,33,32,85,110,114,101,99,111,103,110,105,122,101,100,32,102,111,114,109,97,116,32,102,111,114,32,105,110,102,105,108,101,32,58,32,37,115,32,91,97,99,99,101,112,116,32,111,110,108,121,32,42,46,
106,50,107,44,32,42,46,106,112,50,44,32,42,46,106,112,99,32,111,114,32,42,46,106,112,116,93,32,33,33,10,10,0],"i8",u);Ic=h([85,110,107,110,111,119,110,32,111,117,116,112,117,116,32,102,111,114,109,97,116,32,105,109,97,103,101,32,37,115,32,91,111,110,108,121,32,42,46,112,110,109,44,32,42,46,112,103,109,44,32,42,46,112,112,109,44,32,42,46,112,103,120,44,32,42,46,98,109,112,44,32,42,46,116,105,102,44,32,42,46,114,97,119,32,111,114,32,42,46,116,103,97,93,33,33,32,10,0],"i8",u);Hc=h([37,100,0],"i8",u);
Af=h([87,65,82,78,73,78,71,32,45,62,32,116,104,105,115,32,111,112,116,105,111,110,32,105,115,32,110,111,116,32,118,97,108,105,100,32,34,45,37,99,32,37,115,34,10,0],"i8",u);Ff=h([69,114,114,111,114,58,32,111,112,116,105,111,110,115,32,45,73,109,103,68,105,114,32,97,110,100,32,45,105,32,99,97,110,110,111,116,32,98,101,32,117,115,101,100,32,116,111,103,101,116,104,101,114,32,33,33,10,0],"i8",u);Cf=h([69,114,114,111,114,58,32,87,104,101,110,32,45,73,109,103,68,105,114,32,105,115,32,117,115,101,100,44,
32,45,79,117,116,70,111,114,32,60,70,79,82,77,65,84,62,32,109,117,115,116,32,98,101,32,117,115,101,100,32,33,33,10,0],"i8",u);Df=h([79,110,108,121,32,111,110,101,32,102,111,114,109,97,116,32,97,108,108,111,119,101,100,33,32,86,97,108,105,100,32,102,111,114,109,97,116,32,80,71,77,44,32,80,80,77,44,32,80,78,77,44,32,80,71,88,44,32,66,77,80,44,32,84,73,70,44,32,82,65,87,32,97,110,100,32,84,71,65,33,33,10,0],"i8",u);Ef=h([69,114,114,111,114,58,32,111,112,116,105,111,110,115,32,45,73,109,103,68,105,114,
32,97,110,100,32,45,111,32,99,97,110,110,111,116,32,98,101,32,117,115,101,100,32,116,111,103,101,116,104,101,114,32,33,33,10,0],"i8",u);Gf=h([69,120,97,109,112,108,101,58,32,37,115,32,45,105,32,105,109,97,103,101,46,106,50,107,32,45,111,32,105,109,97,103,101,46,112,103,109,10,0],"i8",u);Hf=h([32,32,32,32,84,114,121,58,32,37,115,32,45,104,10,0],"i8",u);Kh=h([91,69,82,82,79,82,93,32,37,115,0],"i8",u);Lh=h([91,87,65,82,78,73,78,71,93,32,37,115,0],"i8",u);Mh=h([91,73,78,70,79,93,32,37,115,0],"i8",u);
Jf=h([70,111,108,100,101,114,32,105,115,32,101,109,112,116,121,10,0],"i8",u);Kf=h([115,107,105,112,112,105,110,103,32,102,105,108,101,46,46,46,10,0],"i8",u);Lf=h([114,98,0],"i8",u);$f=h([69,82,82,79,82,32,45,62,32,102,97,105,108,101,100,32,116,111,32,111,112,101,110,32,37,115,32,102,111,114,32,114,101,97,100,105,110,103,10,0],"i8",u);fc=h([69,82,82,79,82,32,45,62,32,106,50,107,95,116,111,95,105,109,97,103,101,58,32,102,97,105,108,101,100,32,116,111,32,100,101,99,111,100,101,32,105,109,97,103,101,
33,10,0],"i8",u);cc=h([70,97,105,108,101,100,32,116,111,32,111,117,116,112,117,116,32,105,110,100,101,120,32,102,105,108,101,10,0],"i8",u);Pf=h([115,107,105,112,112,105,110,103,32,102,105,108,101,46,46,10,0],"i8",u);Mb=h([79,117,116,102,105,108,101,32,37,115,32,110,111,116,32,103,101,110,101,114,97,116,101,100,10,0],"i8",u);dc=h([71,101,110,101,114,97,116,101,100,32,79,117,116,102,105,108,101,32,37,115,10,0],"i8",u);Kc=h(1,"i32",u);Lc=h(1,"i32",u);Vf=h([69,114,114,111,114,32,103,101,110,101,114,97,
116,105,110,103,32,114,97,119,32,102,105,108,101,46,32,79,117,116,102,105,108,101,32,37,115,32,110,111,116,32,103,101,110,101,114,97,116,101,100,10,0],"i8",u);ec=h([83,117,99,99,101,115,115,102,117,108,108,121,32,103,101,110,101,114,97,116,101,100,32,79,117,116,102,105,108,101,32,37,115,10,0],"i8",u);Xf=h([69,114,114,111,114,32,103,101,110,101,114,97,116,105,110,103,32,116,103,97,32,102,105,108,101,46,32,79,117,116,102,105,108,101,32,37,115,32,110,111,116,32,103,101,110,101,114,97,116,101,100,10,
0],"i8",u);Zf=h([69,114,114,111,114,32,103,101,110,101,114,97,116,105,110,103,32,112,110,103,32,102,105,108,101,46,32,79,117,116,102,105,108,101,32,37,115,32,110,111,116,32,103,101,110,101,114,97,116,101,100,10,0],"i8",u);h([83,111,114,114,121,44,32,99,111,109,112,114,101,115,115,101,100,32,116,103,97,32,102,105,108,101,115,32,97,114,101,32,110,111,116,32,99,117,114,114,101,110,116,108,121,32,115,117,112,112,111,114,116,101,100,46,10,0],"i8",u);h([70,105,108,101,32,99,111,110,116,97,105,110,115,32,
97,32,112,97,108,101,116,116,101,32,45,32,110,111,116,32,121,101,116,32,115,117,112,112,111,114,116,101,100,46,0],"i8",u);h([114,98,0],"i8",u);h([70,97,105,108,101,100,32,116,111,32,111,112,101,110,32,37,115,32,102,111,114,32,114,101,97,100,105,110,103,32,33,33,10,0],"i8",u);h([67,117,114,114,101,110,116,108,121,32,117,110,115,117,112,112,111,114,116,101,100,32,98,105,116,32,100,101,112,116,104,32,58,32,37,115,10,0],"i8",u);$a=h([119,98,0],"i8",u);yb=h([69,82,82,79,82,32,45,62,32,102,97,105,108,101,
100,32,116,111,32,111,112,101,110,32,37,115,32,102,111,114,32,119,114,105,116,105,110,103,10,0],"i8",u);bg=h([85,110,97,98,108,101,32,116,111,32,99,114,101,97,116,101,32,97,32,116,103,97,32,102,105,108,101,32,119,105,116,104,32,115,117,99,104,32,74,50,75,32,105,109,97,103,101,32,99,104,97,114,97,116,101,114,105,115,116,105,99,115,46,0],"i8",u);h([69,114,114,111,114,44,32,110,111,116,32,97,32,66,77,80,32,102,105,108,101,33,10,0],"i8",u);h([78,111,32,68,101,108,116,97,32,115,117,112,112,111,114,116,
101,100,10,0],"i8",u);h([79,116,104,101,114,32,115,121,115,116,101,109,32,116,104,97,110,32,50,52,32,98,105,116,115,47,112,105,120,101,108,115,32,111,114,32,56,32,98,105,116,115,32,40,110,111,32,82,76,69,32,99,111,100,105,110,103,41,32,105,115,32,110,111,116,32,121,101,116,32,105,109,112,108,101,109,101,110,116,101,100,32,91,37,100,93,10,0],"i8",u);Mc=h([66,77,0],"i8",u);na=h([37,99,37,99,37,99,37,99,0],"i8",u);Nb=h([37,99,37,99,0],"i8",u);Nc=h([66,77,80,32,67,79,78,86,69,82,83,73,79,78,58,32,84,
114,117,110,99,97,116,105,110,103,32,99,111,109,112,111,110,101,110,116,32,48,32,102,114,111,109,32,37,100,32,98,105,116,115,32,116,111,32,56,32,98,105,116,115,10,0],"i8",u);cg=h([66,77,80,32,67,79,78,86,69,82,83,73,79,78,58,32,84,114,117,110,99,97,116,105,110,103,32,99,111,109,112,111,110,101,110,116,32,49,32,102,114,111,109,32,37,100,32,98,105,116,115,32,116,111,32,56,32,98,105,116,115,10,0],"i8",u);dg=h([66,77,80,32,67,79,78,86,69,82,83,73,79,78,58,32,84,114,117,110,99,97,116,105,110,103,32,99,
111,109,112,111,110,101,110,116,32,50,32,102,114,111,109,32,37,100,32,98,105,116,115,32,116,111,32,56,32,98,105,116,115,10,0],"i8",u);Oc=h([37,99,37,99,37,99,0],"i8",u);Ob=h([37,99,0],"i8",u);h([70,97,105,108,101,100,32,116,111,32,111,112,101,110,32,37,115,32,102,111,114,32,114,101,97,100,105,110,103,32,33,10,0],"i8",u);h([80,71,37,91,32,9,93,37,99,37,99,37,91,32,9,43,45,93,37,100,37,91,32,9,93,37,100,37,91,32,9,93,37,100,0],"i8",u);h([66,97,100,32,112,103,120,32,104,101,97,100,101,114,44,32,112,
108,101,97,115,101,32,99,104,101,99,107,32,105,110,112,117,116,32,102,105,108,101,10,0],"i8",u);hg=h([69,82,82,79,82,32,45,62,32,73,109,112,111,115,115,105,98,108,101,32,104,97,112,112,101,110,46,0],"i8",u);eg=h([45,37,100,46,112,103,120,0],"i8",u);fg=h([46,112,103,120,0],"i8",u);gg=h([80,71,32,77,76,32,37,99,32,37,100,32,37,100,32,37,100,10,0],"i8",u);h([37,100,32,37,100,10,50,53,53,0],"i8",u);h([37,117,0],"i8",u);ig=h([80,54,10,37,100,32,37,100,10,37,100,10,0],"i8",u);jg=h([80,78,77,32,67,79,78,
86,69,82,83,73,79,78,58,32,84,114,117,110,99,97,116,105,110,103,32,99,111,109,112,111,110,101,110,116,32,48,32,102,114,111,109,32,37,100,32,98,105,116,115,32,116,111,32,56,32,98,105,116,115,10,0],"i8",u);kg=h([80,78,77,32,67,79,78,86,69,82,83,73,79,78,58,32,84,114,117,110,99,97,116,105,110,103,32,99,111,109,112,111,110,101,110,116,32,49,32,102,114,111,109,32,37,100,32,98,105,116,115,32,116,111,32,56,32,98,105,116,115,10,0],"i8",u);lg=h([80,78,77,32,67,79,78,86,69,82,83,73,79,78,58,32,84,114,117,110,
99,97,116,105,110,103,32,99,111,109,112,111,110,101,110,116,32,50,32,102,114,111,109,32,37,100,32,98,105,116,115,32,116,111,32,56,32,98,105,116,115,10,0],"i8",u);mg=h([87,65,82,78,73,78,71,32,45,62,32,91,80,71,77,32,102,105,108,101,115,93,32,79,110,108,121,32,116,104,101,32,102,105,114,115,116,32,99,111,109,112,111,110,101,110,116,10,0],"i8",u);ng=h([32,32,32,32,32,32,32,32,32,32,32,105,115,32,119,114,105,116,116,101,110,32,116,111,32,116,104,101,32,102,105,108,101,10,0],"i8",u);og=h([37,100,46,37,
115,0],"i8",u);pg=h([37,115,0],"i8",u);qg=h([80,53,10,37,100,32,37,100,10,37,100,10,0],"i8",u);rg=h([80,78,77,32,67,79,78,86,69,82,83,73,79,78,58,32,84,114,117,110,99,97,116,105,110,103,32,99,111,109,112,111,110,101,110,116,32,37,100,32,102,114,111,109,32,37,100,32,98,105,116,115,32,116,111,32,56,32,98,105,116,115,10,0],"i8",u);sg=h([10,69,114,114,111,114,58,32,105,110,118,97,108,105,100,32,114,97,119,32,105,109,97,103,101,32,112,97,114,97,109,101,116,101,114,115,10,0],"i8",u);h([80,108,101,97,115,
101,32,117,115,101,32,116,104,101,32,70,111,114,109,97,116,32,111,112,116,105,111,110,32,45,70,58,10,0],"i8",u);h([45,70,32,114,97,119,87,105,100,116,104,44,114,97,119,72,101,105,103,104,116,44,114,97,119,67,111,109,112,44,114,97,119,66,105,116,68,101,112,116,104,44,115,47,117,32,40,83,105,103,110,101,100,47,85,110,115,105,103,110,101,100,41,10,0],"i8",u);h([69,120,97,109,112,108,101,58,32,45,105,32,108,101,110,97,46,114,97,119,32,45,111,32,108,101,110,97,46,106,50,107,32,45,70,32,53,49,50,44,53,
49,50,44,51,44,56,44,117,10,0],"i8",u);h([65,98,111,114,116,105,110,103,10,0],"i8",u);h([69,114,114,111,114,32,114,101,97,100,105,110,103,32,114,97,119,32,102,105,108,101,46,32,69,110,100,32,111,102,32,102,105,108,101,32,112,114,111,98,97,98,108,121,32,114,101,97,99,104,101,100,46,10,0],"i8",u);h([79,112,101,110,74,80,69,71,32,99,97,110,110,111,116,32,101,110,99,111,100,101,32,114,97,119,32,99,111,109,112,111,110,101,110,116,115,32,119,105,116,104,32,98,105,116,32,100,101,112,116,104,32,104,105,103,
104,101,114,32,116,104,97,110,32,49,54,32,98,105,116,115,46,10,0],"i8",u);h([87,97,114,110,105,110,103,46,32,69,110,100,32,111,102,32,114,97,119,32,102,105,108,101,32,110,111,116,32,114,101,97,99,104,101,100,46,46,46,32,112,114,111,99,101,115,115,105,110,103,32,97,110,121,119,97,121,10,0],"i8",u);zg=h([70,97,105,108,101,100,32,116,111,32,111,112,101,110,32,37,115,32,102,111,114,32,119,114,105,116,105,110,103,32,33,33,10,0],"i8",u);tg=h([82,97,119,32,105,109,97,103,101,32,99,104,97,114,97,99,116,101,
114,105,115,116,105,99,115,58,32,37,100,32,99,111,109,112,111,110,101,110,116,115,10,0],"i8",u);ug=h([67,111,109,112,111,110,101,110,116,32,37,100,32,99,104,97,114,97,99,116,101,114,105,115,116,105,99,115,58,32,37,100,120,37,100,120,37,100,32,37,115,10,0],"i8",u);vg=h([115,105,103,110,101,100,0],"i8",u);wg=h([117,110,115,105,103,110,101,100,0],"i8",u);xg=h([77,111,114,101,32,116,104,97,110,32,49,54,32,98,105,116,115,32,112,101,114,32,99,111,109,112,111,110,101,110,116,32,110,111,32,104,97,110,100,
108,101,100,32,121,101,116,10,0],"i8",u);yg=h([69,114,114,111,114,58,32,105,110,118,97,108,105,100,32,112,114,101,99,105,115,105,111,110,58,32,37,100,10,0],"i8",u);h([112,110,103,116,111,105,109,97,103,101,58,32,99,97,110,32,110,111,116,32,111,112,101,110,32,37,115,10,0],"i8",u);h([137,80,78,71,13,10,26,10,0],"i8",u);h([112,110,103,116,111,105,109,97,103,101,58,32,37,115,32,105,115,32,110,111,32,118,97,108,105,100,32,80,78,71,32,102,105,108,101,10,0],"i8",u);Bg=h([49,46,50,46,52,54,0],"i8",u);Ag=
h([105,109,97,103,101,116,111,112,110,103,58,32,99,97,110,32,110,111,116,32,99,114,101,97,116,101,32,37,115,10,9,119,114,111,110,103,32,98,105,116,95,100,101,112,116,104,32,37,100,10,0],"i8",u);Gg=h([105,109,97,103,101,116,111,112,110,103,58,32,99,97,110,32,110,111,116,32,99,114,101,97,116,101,32,37,115,10,0],"i8",u);Jg=h([119,0],"i8",u);ih=h([102,97,105,108,101,100,32,116,111,32,111,112,101,110,32,105,110,100,101,120,32,102,105,108,101,32,91,37,115,93,32,102,111,114,32,119,114,105,116,105,110,103,
10,0],"i8",u);gc=h([37,100,32,37,100,10,0],"i8",u);ab=h([37,100,10,0],"i8",u);Kg=h([91,37,100,44,37,100,93,32,0],"i8",u);La=h([10,0],"i8",u);Lg=h([10,73,78,70,79,32,79,78,32,84,73,76,69,83,10,0],"i8",u);Mg=h([116,105,108,101,110,111,32,115,116,97,114,116,95,112,111,115,32,32,101,110,100,95,104,100,32,32,101,110,100,95,116,105,108,101,32,32,32,110,98,112,97,114,116,115,0],"i8",u);Ng=h([32,32,32,32,32,32,32,32,32,100,105,115,116,111,0],"i8",u);Og=h([32,32,32,32,32,110,98,112,105,120,0],"i8",u);Pg=h([32,
32,100,105,115,116,111,47,110,98,112,105,120,0],"i8",u);Qg=h([37,52,100,32,37,57,100,32,37,57,100,32,37,57,100,32,37,57,100,0],"i8",u);Qc=h([32,37,57,101,0],"i8",u);Rg=h([32,37,57,100,0],"i8",u);Sg=h([10,84,73,76,69,32,37,100,32,68,69,84,65,73,76,83,10,0],"i8",u);Tg=h([112,97,114,116,95,110,98,32,116,105,108,101,110,111,32,32,115,116,97,114,116,95,112,97,99,107,32,110,117,109,95,112,97,99,107,115,32,32,115,116,97,114,116,95,112,111,115,32,101,110,100,95,116,112,104,95,112,111,115,32,32,32,101,110,
100,95,112,111,115,10,0],"i8",u);Ug=h([37,52,100,32,37,57,100,32,32,32,37,57,100,32,37,57,100,32,32,37,57,100,32,37,49,49,100,32,37,57,100,10,0],"i8",u);Vg=h([76,82,67,80,10,112,97,99,107,95,110,98,32,116,105,108,101,110,111,32,108,97,121,110,111,32,114,101,115,110,111,32,99,111,109,112,110,111,32,112,114,101,99,110,111,32,115,116,97,114,116,95,112,111,115,32,101,110,100,95,112,104,95,112,111,115,32,101,110,100,95,112,111,115,0],"i8",u);zb=h([32,100,105,115,116,111,0],"i8",u);Wg=h([37,52,100,32,37,
54,100,32,37,55,100,32,37,53,100,32,37,54,100,32,32,37,54,100,32,32,32,32,37,54,100,32,32,32,32,32,37,54,100,32,37,55,100,0],"i8",u);Ab=h([32,37,56,101,0],"i8",u);Xg=h([82,76,67,80,10,112,97,99,107,95,110,98,32,116,105,108,101,110,111,32,114,101,115,110,111,32,108,97,121,110,111,32,99,111,109,112,110,111,32,112,114,101,99,110,111,32,115,116,97,114,116,95,112,111,115,32,101,110,100,95,112,104,95,112,111,115,32,101,110,100,95,112,111,115,10,0],"i8",u);Yg=h([37,52,100,32,37,54,100,32,37,53,100,32,37,
55,100,32,37,54,100,32,37,54,100,32,37,57,100,32,32,32,37,57,100,32,37,55,100,0],"i8",u);Zg=h([82,80,67,76,10,112,97,99,107,95,110,98,32,116,105,108,101,110,111,32,114,101,115,110,111,32,112,114,101,99,110,111,32,99,111,109,112,110,111,32,108,97,121,110,111,32,115,116,97,114,116,95,112,111,115,32,101,110,100,95,112,104,95,112,111,115,32,101,110,100,95,112,111,115,0],"i8",u);$g=h([37,52,100,32,37,54,100,32,37,53,100,32,37,54,100,32,37,54,100,32,37,55,100,32,37,57,100,32,32,32,37,57,100,32,37,55,100,
0],"i8",u);ah=h([80,67,82,76,10,112,97,99,107,95,110,98,32,116,105,108,101,110,111,32,112,114,101,99,110,111,32,99,111,109,112,110,111,32,114,101,115,110,111,32,108,97,121,110,111,32,115,116,97,114,116,95,112,111,115,32,101,110,100,95,112,104,95,112,111,115,32,101,110,100,95,112,111,115,0],"i8",u);Rc=h([37,52,100,32,37,54,100,32,37,54,100,32,37,54,100,32,37,53,100,32,37,55,100,32,37,57,100,32,32,32,37,57,100,32,37,55,100,0],"i8",u);bh=h([67,80,82,76,10,112,97,99,107,95,110,98,32,116,105,108,101,110,
111,32,99,111,109,112,110,111,32,112,114,101,99,110,111,32,114,101,115,110,111,32,108,97,121,110,111,32,115,116,97,114,116,95,112,111,115,32,101,110,100,95,112,104,95,112,111,115,32,101,110,100,95,112,111,115,0],"i8",u);ch=h([37,56,101,10,0],"i8",u);dh=h([37,46,56,101,10,0],"i8",u);eh=h([10,77,65,82,75,69,82,32,76,73,83,84,10,0],"i8",u);fh=h([116,121,112,101,9,115,116,97,114,116,95,112,111,115,32,32,32,32,108,101,110,103,116,104,10,0],"i8",u);gh=h([37,88,9,37,57,100,32,37,57,100,10,0],"i8",u);hh=
h([71,101,110,101,114,97,116,101,100,32,105,110,100,101,120,32,102,105,108,101,32,37,115,10,0],"i8",u);mh=h([37,115,58,37,100,58,99,111,108,111,114,95,115,121,99,99,95,116,111,95,114,103,98,10,9,67,65,78,32,78,79,84,32,67,79,78,86,69,82,84,10,0],"i8",u);nh=h([47,104,111,109,101,47,97,108,111,110,47,68,101,118,47,106,50,107,46,106,115,47,99,111,109,109,111,110,47,99,111,108,111,114,46,99,0],"i8",u);Rb=h([1],["i32",0,0,0,0],u);ba=h([1],["i32",0,0,0,0],u);Nh=h(1,"i8*",u);Oh=h(1,"i8",u);h(1,"i32",u);
Qb=h(1,"i32",u);h([37,115,58,32,105,108,108,101,103,97,108,32,111,112,116,105,111,110,32,45,45,32,37,99,10,0],"i8",u);xa=h(1,"i8*",u);h([37,115,58,32,111,112,116,105,111,110,32,114,101,113,117,105,114,101,115,32,97,110,32,97,114,103,117,109,101,110,116,32,45,45,32,37,99,10,0],"i8",u);Sc=h(1,"i32",u);mb=h(1,"i32",u);ph=h([37,115,58,32,111,112,116,105,111,110,32,100,111,101,115,32,110,111,116,32,114,101,113,117,105,114,101,32,97,110,32,97,114,103,117,109,101,110,116,46,32,73,103,110,111,114,105,110,
103,32,37,115,10,0],"i8",u);hc=h([37,115,58,32,111,112,116,105,111,110,32,114,101,113,117,105,114,101,115,32,97,110,32,97,114,103,117,109,101,110,116,10,0],"i8",u);qh=h([37,115,58,32,111,112,116,105,111,110,32,114,101,113,117,105,114,101,115,32,97,110,32,97,114,103,117,109,101,110,116,32,10,0],"i8",u);Tc=h([73,110,118,97,108,105,100,32,111,112,116,105,111,110,32,37,115,10,0],"i8",u);oh=h([73,110,118,97,108,105,100,32,111,112,116,105,111,110,10,0],"i8",u);c[s+8>>2]=s+32;c[s+12>>2]=s+48;c[s+24>>2]=
s+48;c[s+28>>2]=s+32;c[s+40>>2]=s+64;c[s+44>>2]=s+192;c[s+56>>2]=s+80;c[s+60>>2]=s+208;c[s+72>>2]=s+96;c[s+76>>2]=s+288;c[s+88>>2]=s+112;c[s+92>>2]=s+304;c[s+104>>2]=s+128;c[s+108>>2]=s+384;c[s+120>>2]=s+144;c[s+124>>2]=s+400;c[s+136>>2]=s+160;c[s+140>>2]=s+928;c[s+152>>2]=s+176;c[s+156>>2]=s+944;c[s+168>>2]=s+1216;c[s+172>>2]=s+1056;c[s+184>>2]=s+1232;c[s+188>>2]=s+1072;c[s+200>>2]=s+224;c[s+204>>2]=s+208;c[s+216>>2]=s+240;c[s+220>>2]=s+192;c[s+232>>2]=s+256;c[s+236>>2]=s+448;c[s+248>>2]=s+272;c[s+
252>>2]=s+464;c[s+264>>2]=s+288;c[s+268>>2]=s+448;c[s+280>>2]=s+304;c[s+284>>2]=s+464;c[s+296>>2]=s+320;c[s+300>>2]=s+448;c[s+312>>2]=s+336;c[s+316>>2]=s+464;c[s+328>>2]=s+352;c[s+332>>2]=s+544;c[s+344>>2]=s+368;c[s+348>>2]=s+560;c[s+360>>2]=s+384;c[s+364>>2]=s+576;c[s+376>>2]=s+400;c[s+380>>2]=s+592;c[s+392>>2]=s+416;c[s+396>>2]=s+640;c[s+408>>2]=s+432;c[s+412>>2]=s+656;c[s+424>>2]=s+928;c[s+428>>2]=s+672;c[s+440>>2]=s+944;c[s+444>>2]=s+688;c[s+456>>2]=s+480;c[s+460>>2]=s+464;c[s+472>>2]=s+496;c[s+
476>>2]=s+448;c[s+488>>2]=s+512;c[s+492>>2]=s+448;c[s+504>>2]=s+528;c[s+508>>2]=s+464;c[s+520>>2]=s+544;c[s+524>>2]=s+480;c[s+536>>2]=s+560;c[s+540>>2]=s+496;c[s+552>>2]=s+576;c[s+556>>2]=s+512;c[s+568>>2]=s+592;c[s+572>>2]=s+528;c[s+584>>2]=s+608;c[s+588>>2]=s+544;c[s+600>>2]=s+624;c[s+604>>2]=s+560;c[s+616>>2]=s+640;c[s+620>>2]=s+576;c[s+632>>2]=s+656;c[s+636>>2]=s+592;c[s+648>>2]=s+672;c[s+652>>2]=s+608;c[s+664>>2]=s+688;c[s+668>>2]=s+624;c[s+680>>2]=s+704;c[s+684>>2]=s+608;c[s+696>>2]=s+720;c[s+
700>>2]=s+624;c[s+712>>2]=s+736;c[s+716>>2]=s+640;c[s+728>>2]=s+752;c[s+732>>2]=s+656;c[s+744>>2]=s+768;c[s+748>>2]=s+672;c[s+760>>2]=s+784;c[s+764>>2]=s+688;c[s+776>>2]=s+800;c[s+780>>2]=s+704;c[s+792>>2]=s+816;c[s+796>>2]=s+720;c[s+808>>2]=s+832;c[s+812>>2]=s+736;c[s+824>>2]=s+848;c[s+828>>2]=s+752;c[s+840>>2]=s+864;c[s+844>>2]=s+768;c[s+856>>2]=s+880;c[s+860>>2]=s+784;c[s+872>>2]=s+896;c[s+876>>2]=s+800;c[s+888>>2]=s+912;c[s+892>>2]=s+816;c[s+904>>2]=s+928;c[s+908>>2]=s+832;c[s+920>>2]=s+944;c[s+
924>>2]=s+848;c[s+936>>2]=s+960;c[s+940>>2]=s+864;c[s+952>>2]=s+976;c[s+956>>2]=s+880;c[s+968>>2]=s+992;c[s+972>>2]=s+896;c[s+984>>2]=s+1008;c[s+988>>2]=s+912;c[s+1E3>>2]=s+1024;c[s+1004>>2]=s+928;c[s+1016>>2]=s+1040;c[s+1020>>2]=s+944;c[s+1032>>2]=s+1056;c[s+1036>>2]=s+960;c[s+1048>>2]=s+1072;c[s+1052>>2]=s+976;c[s+1064>>2]=s+1088;c[s+1068>>2]=s+992;c[s+1080>>2]=s+1104;c[s+1084>>2]=s+1008;c[s+1096>>2]=s+1120;c[s+1100>>2]=s+1024;c[s+1112>>2]=s+1136;c[s+1116>>2]=s+1040;c[s+1128>>2]=s+1152;c[s+1132>>
2]=s+1056;c[s+1144>>2]=s+1168;c[s+1148>>2]=s+1072;c[s+1160>>2]=s+1184;c[s+1164>>2]=s+1088;c[s+1176>>2]=s+1200;c[s+1180>>2]=s+1104;c[s+1192>>2]=s+1216;c[s+1196>>2]=s+1120;c[s+1208>>2]=s+1232;c[s+1212>>2]=s+1136;c[s+1224>>2]=s+1248;c[s+1228>>2]=s+1152;c[s+1240>>2]=s+1264;c[s+1244>>2]=s+1168;c[s+1256>>2]=s+1280;c[s+1260>>2]=s+1184;c[s+1272>>2]=s+1296;c[s+1276>>2]=s+1200;c[s+1288>>2]=s+1312;c[s+1292>>2]=s+1216;c[s+1304>>2]=s+1328;c[s+1308>>2]=s+1232;c[s+1320>>2]=s+1344;c[s+1324>>2]=s+1248;c[s+1336>>2]=
s+1360;c[s+1340>>2]=s+1264;c[s+1352>>2]=s+1376;c[s+1356>>2]=s+1280;c[s+1368>>2]=s+1392;c[s+1372>>2]=s+1296;c[s+1384>>2]=s+1408;c[s+1388>>2]=s+1312;c[s+1400>>2]=s+1424;c[s+1404>>2]=s+1328;c[s+1416>>2]=s+1440;c[s+1420>>2]=s+1344;c[s+1432>>2]=s+1456;c[s+1436>>2]=s+1360;c[s+1448>>2]=s+1440;c[s+1452>>2]=s+1376;c[s+1464>>2]=s+1456;c[s+1468>>2]=s+1392;c[s+1480>>2]=s+1472;c[s+1484>>2]=s+1472;c[s+1496>>2]=s+1488;c[s+1500>>2]=s+1488;c[Fa>>2]=Cc;c[Fa+4>>2]=Ah;c[Fa+8>>2]=Bh;c[Fa+12>>2]=Dc;c[Fa+16>>2]=Ec;c[Fa+
20>>2]=Fc;c[Fa+24>>2]=ac;c[Fa+28>>2]=Ch;c[Fa+32>>2]=Gc;c[Fa+36>>2]=Dh;c[Fa+40>>2]=Eh;c[Fa+44>>2]=Fh;c[Fa+48>>2]=Gh;c[Fa+52>>2]=Hh;c[$b>>2]=Ih;c[$b+16>>2]=Jh;c[Nh>>2]=Oh;cb=[0,0,function(a){ra(c[a>>2],c[a+4>>2],c[a+8>>2],c[a+12>>2])},0,function(a,c){C(c,Kh,h([a,0,0,0],["i8*",0,0,0],x))},0,function(a,c){C(c,Lh,h([a,0,0,0],["i8*",0,0,0],x))},0,function(a){C(c[c[O>>2]+8>>2],Mh,h([a,0,0,0],["i8*",0,0,0],x))},0,function(a){c[a+4>>2]=2;1==(0!=(c[a+68>>2]|0)?1:2)&&(c[c[a+68>>2]+76>>2]=D(c[a+72>>2])-2,c[c[a+
68>>2]+84>>2]=P(c[a+72>>2])+2-c[c[a+68>>2]+76>>2])},0,Vb,0,Cb,0,ea,0,G,0,qa,0,Ta,0,Ha,0,function(a){var b,d,e,f,g;f=c[a+72>>2];g=c[a+60>>2];b=w(f,2);e=D(f);d=0;a:for(;;){if(!((d|0)<(c[g+16>>2]|0)))break a;B(f,e);mc(a,d,b-2);d+=1}},0,function(a){var b,d,e;d=c[c[a+60>>2]+16>>2];e=c[a+72>>2];b=w(e,2);e=w(e,256>=(d|0)?1:2);mc(a,e,b-2-(256>=(d|0)?1:2))},0,M,0,za,0,ya,0,function(a){var b;a=c[a+72>>2];b=w(a,2);w(a,1);b-=3;a:for(;;){if(!(0<(b|0)))break a;w(a,1);b-=1}},0,Ca,0,Q,0,function(a){var b,d;b=c[a+
72>>2];d=c[c[a+60>>2]+16>>2];w(b,2);a=0;a:for(;;){if(!((a|0)<(d|0)))break a;w(b,2);w(b,2);a+=1}},0,function(a){a=c[a+72>>2];var b=w(a,2);F(a,b-2)},0,function(a){aa(c[a>>2],2,zh,h(1,"i32",x))},0];ga.FUNCTION_TABLE=cb;ga.run=Xc;try{T.V=Y}catch(fi){}ga.noInitialRun=I;ga.noInitialRun||Xc();g("jp2"==a||"j2k"==a,"You must specify the suffix as a second parameter. Is this a .j2k or a .jp2 file?");T.o();T.root.write=I;T.N("/","image."+a,b,I,Y);Xc(["-i","image."+a,"-o","image.raw"]);return{width:l(Kc,"i32"),
height:l(Lc,"i32"),data:T.root.b["image.raw"].b}};var Kinetic={};
!function(b){var a=Math.PI/180;Kinetic={version:"5.1.1",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,showWarnings:!0,Filters:{},Node:function(a){this._init(a)},Shape:function(a){this.__init(a)},Container:function(a){this.__init(a)},Stage:function(a){this.___init(a)},BaseLayer:function(a){this.___init(a)},Layer:function(a){this.____init(a)},FastLayer:function(a){this.____init(a)},
Group:function(a){this.___init(a)},isDragging:function(){var a=Kinetic.DD;return a?a.isDragging:!1},isDragReady:function(){var a=Kinetic.DD;return a?!!a.node:!1},_addId:function(a,b){void 0!==b&&(this.ids[b]=a)},_removeId:function(a){void 0!==a&&delete this.ids[a]},_addName:function(a,b){void 0!==b&&(void 0===this.names[b]&&(this.names[b]=[]),this.names[b].push(a))},_removeName:function(a,b){if(void 0!==a){var f=this.names[a];if(void 0!==f){for(var g=0;g<f.length;g++)f[g]._id===b&&f.splice(g,1);0===
f.length&&delete this.names[a]}}},getAngle:function(b){return this.angleDeg?b*a:b},_parseUA:function(a){var b=a.toLowerCase(),b=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||0>b.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[],f=!!a.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);a=!!a.match(/IEMobile/i);return{browser:b[1]||"",version:b[2]||"0",mobile:f,ieMobile:a}},UA:void 0};
Kinetic.UA=Kinetic._parseUA(b.navigator&&b.navigator.userAgent||"")}(this);
(function(b,a){if("object"==typeof exports){var e=a();if(global.window===global)Kinetic.document=global.document,Kinetic.window=global;else{var d=require("canvas"),f=require("jsdom").jsdom,f=f("<!DOCTYPE html><html><head></head><body></body></html>");Kinetic.document=f;Kinetic.window=Kinetic.document.createWindow();Kinetic.window.Image=d.Image;Kinetic._nodeCanvas=d}return Kinetic.root=b,void(module.exports=e)}"function"==typeof define&&define.amd&&define(a);Kinetic.document=document;Kinetic.window=
window;Kinetic.root=b})(this,function(){return Kinetic});
(function(){Kinetic.Collection=function(){var a=[].slice.call(arguments),b=a.length,d=0;for(this.length=b;b>d;d++)this[d]=a[d];return this};Kinetic.Collection.prototype=[];Kinetic.Collection.prototype.each=function(a){for(var b=0;b<this.length;b++)a(this[b],b)};Kinetic.Collection.prototype.toArray=function(){var a,b=[],d=this.length;for(a=0;d>a;a++)b.push(this[a]);return b};Kinetic.Collection.toCollection=function(a){var b,d=new Kinetic.Collection,e=a.length;for(b=0;e>b;b++)d.push(a[b]);return d};
Kinetic.Collection._mapMethod=function(a){Kinetic.Collection.prototype[a]=function(){var b,d=this.length,e=[].slice.call(arguments);for(b=0;d>b;b++)this[b][a].apply(this[b],e);return this}};Kinetic.Collection.mapMethods=function(a){a=a.prototype;for(var b in a)Kinetic.Collection._mapMethod(b)};Kinetic.Transform=function(a){this.m=a&&a.slice()||[1,0,0,1,0,0]};Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(a){var b=this.m;return{x:b[0]*a.x+b[2]*a.y+
b[4],y:b[1]*a.x+b[3]*a.y+b[5]}},translate:function(a,b){return this.m[4]+=this.m[0]*a+this.m[2]*b,this.m[5]+=this.m[1]*a+this.m[3]*b,this},scale:function(a,b){return this.m[0]*=a,this.m[1]*=a,this.m[2]*=b,this.m[3]*=b,this},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var d=this.m[1]*b+this.m[3]*a,e=this.m[0]*-a+this.m[2]*b,h=this.m[1]*-a+this.m[3]*b;return this.m[0]=this.m[0]*b+this.m[2]*a,this.m[1]=d,this.m[2]=e,this.m[3]=h,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},
skew:function(a,b){var d=this.m[1]+this.m[3]*b,e=this.m[2]+this.m[0]*a,h=this.m[3]+this.m[1]*a;return this.m[0]+=this.m[2]*b,this.m[1]=d,this.m[2]=e,this.m[3]=h,this},multiply:function(a){var b=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],e=this.m[1]*a.m[2]+this.m[3]*a.m[3],h=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],m=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];return this.m[0]=this.m[0]*a.m[0]+this.m[2]*a.m[1],this.m[1]=b,this.m[2]=d,this.m[3]=e,this.m[4]=h,this.m[5]=
m,this},invert:function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=-this.m[1]*a,d=-this.m[2]*a,e=this.m[0]*a,h=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),m=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*a,this.m[1]=b,this.m[2]=d,this.m[3]=e,this.m[4]=h,this.m[5]=m,this},getMatrix:function(){return this.m},setAbsolutePosition:function(a,b){var d=this.m[0],e=this.m[1],h=this.m[2],m=this.m[4],e=(d*(b-this.m[5])-e*(a-m))/(d*this.m[3]-e*h);return this.translate((a-m-
h*e)/d,e)}};var b=Math.PI/180,a=180/Math.PI,e={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},d=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(a){return!(!a||1!=a.nodeType)},
_isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isObject:function(a){return!!a&&a.constructor==Object},_isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},_isNumber:function(a){return"[object Number]"==Object.prototype.toString.call(a)},_isString:function(a){return"[object String]"==Object.prototype.toString.call(a)},_throttle:function(a,b,d){var e,h,m,n=null,p=0;d||(d={});var r=function(){p=!1===d.leading?0:(new Date).getTime();n=null;m=a.apply(e,
h);e=h=null};return function(){var q=(new Date).getTime();p||!1!==d.leading||(p=q);var t=b-(q-p);return e=this,h=arguments,0>=t?(clearTimeout(n),n=null,p=q,m=a.apply(e,h),e=h=null):n||!1===d.trailing||(n=setTimeout(r,t)),m}},_hasMethods:function(a){var b,d=[];for(b in a)this._isFunction(a[b])&&d.push(b);return 0<d.length},createCanvasElement:function(){var a=Kinetic.document.createElement("canvas");return a.style=a.style||{},a},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(a){for(;a=
a.parentNode;)if(a==Kinetic.document)return!0;return!1},_simplifyArray:function(a){var b,d,e=[],h=a.length,m=Kinetic.Util;for(b=0;h>b;b++)d=a[b],m._isNumber(d)?d=Math.round(1E3*d)/1E3:m._isString(d)||(d=d.toString()),e.push(d);return e},_getImage:function(a,b){var d,e;a?this._isElement(a)?b(a):this._isString(a)?(d=new Kinetic.window.Image,d.onload=function(){b(d)},d.src=a):a.data?(e=Kinetic.Util.createCanvasElement(),e.width=a.width,e.height=a.height,e.getContext("2d").putImageData(a,0,0),this._getImage(e.toDataURL(),
b)):b(null):b(null)},_getRGBAString:function(a){return["rgba(",a.red||0,",",a.green||0,",",a.blue||0,",",a.alpha||1,")"].join("")},_rgbToHex:function(a,b,d){return(16777216+(a<<16)+(b<<8)+d).toString(16).slice(1)},_hexToRgb:function(a){a=a.replace("#","");a=parseInt(a,16);return{r:a>>16&255,g:a>>8&255,b:255&a}},getRandomColor:function(){for(var a=(16777215*Math.random()<<0).toString(16);6>a.length;)a="0"+a;return"#"+a},get:function(a,b){return void 0===a?b:a},getRGB:function(a){var b;return a in e?
(b=e[a],{r:b[0],g:b[1],b:b[2]}):"#"===a[0]?this._hexToRgb(a.substring(1)):"rgb("===a.substr(0,4)?(b=d.exec(a.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},_merge:function(a,b){var d=this._clone(b),e;for(e in a)d[e]=this._isObject(a[e])?this._merge(a[e],d[e]):a[e];return d},cloneObject:function(a){var b={},d;for(d in a)b[d]=this._isObject(a[d])?this.cloneObject(a[d]):this._isArray(a[d])?this.cloneArray(a[d]):a[d];return b},cloneArray:function(a){return a.slice(0)},
_degToRad:function(a){return a*b},_radToDeg:function(b){return b*a},_capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},error:function(a){throw Error("Kinetic error: "+a);},warn:function(a){Kinetic.root.console&&console.warn&&Kinetic.showWarnings&&console.warn("Kinetic warning: "+a)},extend:function(a,b){for(var d in b.prototype)d in a.prototype||(a.prototype[d]=b.prototype[d])},addMethods:function(a,b){for(var d in b)a.prototype[d]=b[d]},_getControlPoints:function(a,b,d,e,h,m,n){var p=
Math.sqrt(Math.pow(d-a,2)+Math.pow(e-b,2)),r=Math.sqrt(Math.pow(h-d,2)+Math.pow(m-e,2)),q=n*p/(p+r);n=n*r/(p+r);return[d-q*(h-a),e-q*(m-b),d+n*(h-a),e+n*(m-b)]},_expandPoints:function(a,b){var d,e,h=a.length,m=[];for(d=2;h-2>d;d+=2)e=Kinetic.Util._getControlPoints(a[d-2],a[d-1],a[d],a[d+1],a[d+2],a[d+3],b),m.push(e[0]),m.push(e[1]),m.push(a[d]),m.push(a[d+1]),m.push(e[2]),m.push(e[3]);return m},_removeLastLetter:function(a){return a.substring(0,a.length-1)}}})();
(function(){var b=Kinetic.Util.createCanvasElement().getContext("2d"),a=Kinetic.UA.mobile?(window.devicePixelRatio||1)/(b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1):1;Kinetic.Canvas=function(a){this.init(a)};Kinetic.Canvas.prototype={init:function(b){b=b||{};this.pixelRatio=b.pixelRatio||Kinetic.pixelRatio||a;this._canvas=Kinetic.Util.createCanvasElement();this._canvas.style.padding=0;this._canvas.style.margin=
0;this._canvas.style.border=0;this._canvas.style.background="transparent";this._canvas.style.position="absolute";this._canvas.style.top=0;this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(a){this.pixelRatio=a;this.setSize(this.getWidth(),this.getHeight())},setWidth:function(a){this.width=this._canvas.width=a*this.pixelRatio;this._canvas.style.width=a+"px"},setHeight:function(a){this.height=this._canvas.height=
a*this.pixelRatio;this._canvas.style.height=a+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(a,b){this.setWidth(a);this.setHeight(b)},toDataURL:function(a,b){try{return this._canvas.toDataURL(a,b)}catch(f){try{return this._canvas.toDataURL()}catch(g){return Kinetic.Util.warn("Unable to get data URL. "+g.message),""}}}};Kinetic.SceneCanvas=function(a){a=a||{};var b=a.width||0,f=a.height||0;Kinetic.Canvas.call(this,a);this.context=new Kinetic.SceneContext(this);
this.setSize(b,f)};Kinetic.SceneCanvas.prototype={setWidth:function(a){var b=this.pixelRatio,f=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,a);f.scale(b,b)},setHeight:function(a){var b=this.pixelRatio,f=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,a);f.scale(b,b)}};Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas);Kinetic.HitCanvas=function(a){a=a||{};var b=a.width||0,f=a.height||0;Kinetic.Canvas.call(this,a);this.context=new Kinetic.HitContext(this);
this.setSize(b,f)};Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)})();
(function(){var b="arc arcTo beginPath bezierCurveTo clearRect clip closePath createLinearGradient createPattern createRadialGradient drawImage fill fillText getImageData createImageData lineTo moveTo putImageData quadraticCurveTo rect restore rotate save scale setLineDash setTransform stroke strokeText transform translate".split(" ");Kinetic.Context=function(a){this.init(a)};Kinetic.Context.prototype={init:function(a){this.canvas=a;this._context=a._canvas.getContext("2d");Kinetic.enableTrace&&(this.traceArr=
[],this._enableTrace())},fillShape:function(a){a.getFillEnabled()&&this._fill(a)},strokeShape:function(a){a.getStrokeEnabled()&&this._stroke(a)},fillStrokeShape:function(a){a.getFillEnabled()&&this._fill(a);a.getStrokeEnabled()&&this._stroke(a)},getTrace:function(a){var b,d,f,g,k=this.traceArr,l=k.length,h="";for(b=0;l>b;b++)d=k[b],(f=d.method)?(g=d.args,h+=f,h+=a?"()":Kinetic.Util._isArray(g[0])?"(["+g.join(",")+"])":"("+g.join(",")+")"):(h+=d.property,a||(h+="="+d.val)),h+=";";return h},clearTrace:function(){this.traceArr=
[]},_trace:function(a){var b=this.traceArr;b.push(a);b.length>=Kinetic.traceArrMax&&b.shift()},reset:function(){var a=this.getCanvas().getPixelRatio();this.setTransform(1*a,0,0,1*a,0,0)},getCanvas:function(){return this.canvas},clear:function(a){var b=this.getCanvas();a?this.clearRect(a.x||0,a.y||0,a.width||0,a.height||0):this.clearRect(0,0,b.getWidth(),b.getHeight())},_applyLineCap:function(a){(a=a.getLineCap())&&this.setAttr("lineCap",a)},_applyOpacity:function(a){a=a.getAbsoluteOpacity();1!==a&&
this.setAttr("globalAlpha",a)},_applyLineJoin:function(a){(a=a.getLineJoin())&&this.setAttr("lineJoin",a)},setAttr:function(a,b){this._context[a]=b},arc:function(){var a=arguments;this._context.arc(a[0],a[1],a[2],a[3],a[4],a[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var a=arguments;this._context.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])},clearRect:function(){var a=arguments;this._context.clearRect(a[0],a[1],a[2],a[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},
createImageData:function(){var a=arguments;return 2===a.length?this._context.createImageData(a[0],a[1]):1===a.length?this._context.createImageData(a[0]):void 0},createLinearGradient:function(){var a=arguments;return this._context.createLinearGradient(a[0],a[1],a[2],a[3])},createPattern:function(){var a=arguments;return this._context.createPattern(a[0],a[1])},createRadialGradient:function(){var a=arguments;return this._context.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5])},drawImage:function(){var a=
arguments,b=this._context;3===a.length?b.drawImage(a[0],a[1],a[2]):5===a.length?b.drawImage(a[0],a[1],a[2],a[3],a[4]):9===a.length&&b.drawImage(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},fill:function(){this._context.fill()},fillText:function(){var a=arguments;this._context.fillText(a[0],a[1],a[2])},getImageData:function(){var a=arguments;return this._context.getImageData(a[0],a[1],a[2],a[3])},lineTo:function(){var a=arguments;this._context.lineTo(a[0],a[1])},moveTo:function(){var a=arguments;
this._context.moveTo(a[0],a[1])},rect:function(){var a=arguments;this._context.rect(a[0],a[1],a[2],a[3])},putImageData:function(){var a=arguments;this._context.putImageData(a[0],a[1],a[2])},quadraticCurveTo:function(){var a=arguments;this._context.quadraticCurveTo(a[0],a[1],a[2],a[3])},restore:function(){this._context.restore()},rotate:function(){this._context.rotate(arguments[0])},save:function(){this._context.save()},scale:function(){var a=arguments;this._context.scale(a[0],a[1])},setLineDash:function(){var a=
arguments,b=this._context;this._context.setLineDash?b.setLineDash(a[0]):"mozDash"in b?b.mozDash=a[0]:"webkitLineDash"in b&&(b.webkitLineDash=a[0])},setTransform:function(){var a=arguments;this._context.setTransform(a[0],a[1],a[2],a[3],a[4],a[5])},stroke:function(){this._context.stroke()},strokeText:function(){var a=arguments;this._context.strokeText(a[0],a[1],a[2])},transform:function(){var a=arguments;this._context.transform(a[0],a[1],a[2],a[3],a[4],a[5])},translate:function(){var a=arguments;this._context.translate(a[0],
a[1])},_enableTrace:function(){var a,e,d=this,f=b.length,g=Kinetic.Util._simplifyArray,k=this.setAttr,l=function(a){var b,f=d[a];d[a]=function(){return e=g(Array.prototype.slice.call(arguments,0)),b=f.apply(d,arguments),d._trace({method:a,args:e}),b}};for(a=0;f>a;a++)l(b[a]);d.setAttr=function(){k.apply(d,arguments);d._trace({property:arguments[0],val:arguments[1]})}}};Kinetic.SceneContext=function(a){Kinetic.Context.call(this,a)};Kinetic.SceneContext.prototype={_fillColor:function(a){var b=a.fill()||
Kinetic.Util._getRGBAString({red:a.fillRed(),green:a.fillGreen(),blue:a.fillBlue(),alpha:a.fillAlpha()});this.setAttr("fillStyle",b);a._fillFunc(this)},_fillPattern:function(a){var b=a.getFillPatternImage(),d=a.getFillPatternX(),f=a.getFillPatternY(),g=a.getFillPatternScale(),k=Kinetic.getAngle(a.getFillPatternRotation()),l=a.getFillPatternOffset();a=a.getFillPatternRepeat();(d||f)&&this.translate(d||0,f||0);k&&this.rotate(k);g&&this.scale(g.x,g.y);l&&this.translate(-1*l.x,-1*l.y);this.setAttr("fillStyle",
this.createPattern(b,a||"repeat"));this.fill()},_fillLinearGradient:function(a){var b=a.getFillLinearGradientStartPoint(),d=a.getFillLinearGradientEndPoint();a=a.getFillLinearGradientColorStops();b=this.createLinearGradient(b.x,b.y,d.x,d.y);if(a){for(d=0;d<a.length;d+=2)b.addColorStop(a[d],a[d+1]);this.setAttr("fillStyle",b);this.fill()}},_fillRadialGradient:function(a){var b=a.getFillRadialGradientStartPoint(),d=a.getFillRadialGradientEndPoint(),f=a.getFillRadialGradientStartRadius(),g=a.getFillRadialGradientEndRadius();
a=a.getFillRadialGradientColorStops();b=this.createRadialGradient(b.x,b.y,f,d.x,d.y,g);for(d=0;d<a.length;d+=2)b.addColorStop(a[d],a[d+1]);this.setAttr("fillStyle",b);this.fill()},_fill:function(a){var b=a.fill()||a.fillRed()||a.fillGreen()||a.fillBlue(),d=a.getFillPatternImage(),f=a.getFillLinearGradientColorStops(),g=a.getFillRadialGradientColorStops(),k=a.getFillPriority();b&&"color"===k?this._fillColor(a):d&&"pattern"===k?this._fillPattern(a):f&&"linear-gradient"===k?this._fillLinearGradient(a):
g&&"radial-gradient"===k?this._fillRadialGradient(a):b?this._fillColor(a):d?this._fillPattern(a):f?this._fillLinearGradient(a):g&&this._fillRadialGradient(a)},_stroke:function(a){var b=a.dash(),d=a.getStrokeScaleEnabled();a.hasStroke()&&(d||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(a),b&&a.dashEnabled()&&this.setLineDash(b),this.setAttr("lineWidth",a.strokeWidth()),this.setAttr("strokeStyle",a.stroke()||Kinetic.Util._getRGBAString({red:a.strokeRed(),green:a.strokeGreen(),blue:a.strokeBlue(),
alpha:a.strokeAlpha()})),a._strokeFunc(this),d||this.restore())},_applyShadow:function(a){var b=Kinetic.Util,d=a.getAbsoluteOpacity(),f=b.get(a.getShadowColor(),"black"),g=b.get(a.getShadowBlur(),5),k=b.get(a.getShadowOpacity(),1);a=b.get(a.getShadowOffset(),{x:0,y:0});k&&this.setAttr("globalAlpha",k*d);this.setAttr("shadowColor",f);this.setAttr("shadowBlur",g);this.setAttr("shadowOffsetX",a.x);this.setAttr("shadowOffsetY",a.y)}};Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context);Kinetic.HitContext=
function(a){Kinetic.Context.call(this,a)};Kinetic.HitContext.prototype={_fill:function(a){this.save();this.setAttr("fillStyle",a.colorKey);a._fillFuncHit(this);this.restore()},_stroke:function(a){a.hasStroke()&&(this._applyLineCap(a),this.setAttr("lineWidth",a.strokeWidth()),this.setAttr("strokeStyle",a.colorKey),a._strokeFuncHit(this))}};Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)})();
(function(){Kinetic.Factory={addGetterSetter:function(b,a,e,d,f){this.addGetter(b,a,e);this.addSetter(b,a,d,f);this.addOverloadedGetterSetter(b,a)},addGetter:function(b,a,e){var d="get"+Kinetic.Util._capitalize(a);b.prototype[d]=function(){var b=this.attrs[a];return void 0===b?e:b}},addSetter:function(b,a,e,d){var f="set"+Kinetic.Util._capitalize(a);b.prototype[f]=function(b){return e&&(b=e.call(this,b)),this._setAttr(a,b),d&&d.call(this),this}},addComponentsGetterSetter:function(b,a,e,d,f){var g,
k,l=e.length,h=Kinetic.Util._capitalize,m="get"+h(a),n="set"+h(a);b.prototype[m]=function(){var b={};for(g=0;l>g;g++)k=e[g],b[k]=this.getAttr(a+h(k));return b};b.prototype[n]=function(b){var e,g=this.attrs[a];d&&(b=d.call(this,b));for(e in b)this._setAttr(a+h(e),b[e]);return this._fireChangeEvent(a,g,b),f&&f.call(this),this};this.addOverloadedGetterSetter(b,a)},addOverloadedGetterSetter:function(b,a){var e=Kinetic.Util._capitalize(a),d="set"+e,f="get"+e;b.prototype[a]=function(){return arguments.length?
(this[d](arguments[0]),this):this[f]()}},backCompat:function(b,a){for(var e in a)b.prototype[e]=b.prototype[a[e]]},afterSetFilter:function(){this._filterUpToDate=!1}};Kinetic.Validators={RGBComponent:function(b){return 255<b?255:0>b?0:Math.round(b)},alphaComponent:function(b){return 1<b?1:1E-4>b?1E-4:b}}})();
(function(){var b=["id"];Kinetic.Util.addMethods(Kinetic.Node,{_init:function(a){var b=this;this._id=Kinetic.idCounter++;this.eventListeners={};this.attrs={};this._cache={};this._filterUpToDate=!1;this.setAttrs(a);this.on("xChange.kinetic yChange.kinetic scaleXChange.kinetic scaleYChange.kinetic skewXChange.kinetic skewYChange.kinetic rotationChange.kinetic offsetXChange.kinetic offsetYChange.kinetic transformsEnabledChange.kinetic",function(){this._clearCache("transform");b._clearSelfAndDescendantCache("absoluteTransform")});
this.on("visibleChange.kinetic",function(){b._clearSelfAndDescendantCache("visible")});this.on("listeningChange.kinetic",function(){b._clearSelfAndDescendantCache("listening")});this.on("opacityChange.kinetic",function(){b._clearSelfAndDescendantCache("absoluteOpacity")})},_clearCache:function(a){a?delete this._cache[a]:this._cache={}},_getCache:function(a,b){return void 0===this._cache[a]&&(this._cache[a]=b.call(this)),this._cache[a]},_clearSelfAndDescendantCache:function(a){this._clearCache(a);
this.children&&this.getChildren().each(function(b){b._clearSelfAndDescendantCache(a)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(a){var b=a||{};a=b.x||0;var d=b.y||0,f=b.width||this.width(),g=b.height||this.height(),b=b.drawBorder||!1;this.getLayer();if(0===f||0===g)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var k=new Kinetic.SceneCanvas({pixelRatio:1,width:f,height:g}),l=new Kinetic.SceneCanvas({pixelRatio:1,
width:f,height:g}),h=new Kinetic.HitCanvas({width:f,height:g}),m=(this.transformsEnabled(),this.x(),this.y(),k.getContext()),n=h.getContext();return h.isCache=!0,this.clearCache(),m.save(),n.save(),b&&(m.save(),m.beginPath(),m.rect(0,0,f,g),m.closePath(),m.setAttr("strokeStyle","red"),m.setAttr("lineWidth",5),m.stroke(),m.restore()),m.translate(-1*a,-1*d),n.translate(-1*a,-1*d),"Shape"===this.nodeType&&(m.translate(-1*this.x(),-1*this.y()),n.translate(-1*this.x(),-1*this.y())),this.drawScene(k,this),
this.drawHit(h,this),m.restore(),n.restore(),this._cache.canvas={scene:k,filter:l,hit:h},this},_drawCachedSceneCanvas:function(a){a.save();this.getLayer()._applyTransform(this,a);a._applyOpacity(this);a.drawImage(this._getCachedSceneCanvas()._canvas,0,0);a.restore()},_getCachedSceneCanvas:function(){var a,b,d,f,g=this.filters(),k=this._cache.canvas,l=k.scene,k=k.filter,h=k.getContext();if(g){if(!this._filterUpToDate){try{for(a=g.length,h.clear(),h.drawImage(l._canvas,0,0),b=h.getImageData(0,0,k.getWidth(),
k.getHeight()),d=0;a>d;d++)f=g[d],f.call(this,b),h.putImageData(b,0,0)}catch(m){Kinetic.Util.warn("Unable to apply filter. "+m.message)}this._filterUpToDate=!0}return k}return l},_drawCachedHitCanvas:function(a){var b=this._cache.canvas.hit;a.save();this.getLayer()._applyTransform(this,a);a.drawImage(b._canvas,0,0);a.restore()},on:function(a,b){var d,f,g,k=a.split(" "),l=k.length;for(d=0;l>d;d++)f=k[d],g=f.split("."),f=g[0],g=g[1]||"",this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:g,
handler:b});return this},off:function(a){var b,d,f,g,k,l=(a||"").split(" "),h=l.length;if(!a)for(b in this.eventListeners)this._off(b);for(a=0;h>a;a++)if(d=l[a],f=d.split("."),g=f[0],k=f[1],g)this.eventListeners[g]&&this._off(g,k);else for(b in this.eventListeners)this._off(b,k);return this},dispatchEvent:function(a){this.fire(a.type,{target:this,type:a.type,evt:a})},addEventListener:function(a,b){this.on(a,function(a){b.call(this,a.evt)})},removeEventListener:function(a){this.off(a)},remove:function(){var a=
this.getParent();return a&&a.children&&(a.children.splice(this.index,1),a._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening"),this._clearSelfAndDescendantCache("absoluteOpacity"),this},destroy:function(){Kinetic._removeId(this.getId());Kinetic._removeName(this.getName(),this._id);this.remove()},getAttr:function(a){var b=
"get"+Kinetic.Util._capitalize(a);return Kinetic.Util._isFunction(this[b])?this[b]():this.attrs[a]},getAncestors:function(){for(var a=this.getParent(),b=new Kinetic.Collection;a;)b.push(a),a=a.getParent();return b},getAttrs:function(){return this.attrs||{}},setAttrs:function(a){var b,d;if(a)for(b in a)"children"===b||(d="set"+Kinetic.Util._capitalize(b),Kinetic.Util._isFunction(this[d])?this[d](a[b]):this._setAttr(b,a[b]));return this},isListening:function(){return this._getCache("listening",this._isListening)},
_isListening:function(){var a=this.getListening(),b=this.getParent();return"inherit"===a?b?b.isListening():!0:a},isVisible:function(){return this._getCache("visible",this._isVisible)},_isVisible:function(){var a=this.getVisible(),b=this.getParent();return"inherit"===a?b?b.isVisible():!0:a},shouldDrawHit:function(a){var b=this.getLayer();return a&&a.isCache||b&&b.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),
this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function a(m){b=[];d=m.length;for(f=0;d>f;f++)g=m[f],h++,"Shape"!==g.nodeType&&(b=b.concat(g.getChildren().toArray())),g._id===l._id&&(f=d);0<b.length&&b[0].getDepth()<=k&&a(b)}var b,d,f,g,k=this.getDepth(),l=this,h=0;return"Stage"!==l.nodeType&&a(l.getStage().getChildren()),h},getDepth:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},setPosition:function(a){return this.setX(a.x),this.setY(a.y),this},getPosition:function(){return{x:this.getX(),
y:this.getY()}},getAbsolutePosition:function(){var a=this.getAbsoluteTransform().getMatrix(),b=new Kinetic.Transform,d=this.offset();return b.m=a.slice(),b.translate(d.x,d.y),b.getTranslation()},setAbsolutePosition:function(a){var b,d=this._clearTransform();return this.attrs.x=d.x,this.attrs.y=d.y,delete d.x,delete d.y,b=this.getAbsoluteTransform(),b.invert(),b.translate(a.x,a.y),a={x:this.attrs.x+b.getTranslation().x,y:this.attrs.y+b.getTranslation().y},this.setPosition({x:a.x,y:a.y}),this._setTransform(d),
this},_setTransform:function(a){for(var b in a)this.attrs[b]=a[b];this._clearCache("transform");this._clearSelfAndDescendantCache("absoluteTransform")},_clearTransform:function(){var a={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=
0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),a},move:function(a){var b=a.x;a=a.y;var d=this.getX(),f=this.getY();return void 0!==b&&(d+=b),void 0!==a&&(f+=a),this.setPosition({x:d,y:f}),this},_eachAncestorReverse:function(a,b){var d,f,g=[];d=this.getParent();if(b&&b._id===this._id)return a(this),!0;for(g.unshift(this);d&&(!b||d._id!==b._id);)g.unshift(d),d=d.parent;d=g.length;for(f=0;d>f;f++)a(g[f])},
rotate:function(a){return this.setRotation(this.getRotation()+a),this},moveToTop:function(){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.")},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var a=this.index;return this.parent.getChildren().length-1>a?(this.parent.children.splice(a,
1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var a=this.index;return 0<a?(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var a=this.index;return 0<
a?(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(a){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this):void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.")},getAbsoluteOpacity:function(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var a=this.getOpacity();
return this.getParent()&&(a*=this.getParent().getAbsoluteOpacity()),a},moveTo:function(a){return Kinetic.Node.prototype.remove.call(this),a.add(this),this},toObject:function(){var a,b,d,f,g=Kinetic.Util,k={},l=this.getAttrs();k.attrs={};for(a in l)b=l[a],g._isFunction(b)||g._isElement(b)||g._isObject(b)&&g._hasMethods(b)||(d=this[a],delete l[a],f=d?d.call(this):null,l[a]=b,f!==b&&(k.attrs[a]=b));return k.className=this.getClassName(),k},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},
getLayer:function(){var a=this.getParent();return a?a.getLayer():null},getStage:function(){return this._getCache("stage",this._getStage)},_getStage:function(){var a=this.getParent();return a?a.getStage():void 0},fire:function(a,b,d){return d?this._fireAndBubble(a,b||{}):this._fire(a,b||{}),this},getAbsoluteTransform:function(a){return a?this._getAbsoluteTransform(a):this._getCache("absoluteTransform",this._getAbsoluteTransform)},_getAbsoluteTransform:function(a){var b,d,f=new Kinetic.Transform;return this._eachAncestorReverse(function(a){b=
a.transformsEnabled();d=a.getTransform();"all"===b?f.multiply(d):"position"===b&&f.translate(a.x(),a.y())},a),f},getTransform:function(){return this._getCache("transform",this._getTransform)},_getTransform:function(){var a=new Kinetic.Transform,b=this.getX(),d=this.getY(),f=Kinetic.getAngle(this.getRotation()),g=this.getScaleX(),k=this.getScaleY(),l=this.getSkewX(),h=this.getSkewY(),m=this.getOffsetX(),n=this.getOffsetY();return(0!==b||0!==d)&&a.translate(b,d),0!==f&&a.rotate(f),(0!==l||0!==h)&&a.skew(l,
h),(1!==g||1!==k)&&a.scale(g,k),(0!==m||0!==n)&&a.translate(-1*m,-1*n),a},clone:function(a){var e,d,f,g;d=this.getClassName();f=Kinetic.Util.cloneObject(this.attrs);for(g in b)delete f[b[g]];for(e in a)f[e]=a[e];var k=new Kinetic[d](f);for(e in this.eventListeners)for(a=this.eventListeners[e],d=a.length,f=0;d>f;f++)g=a[f],0>g.name.indexOf("kinetic")&&(k.eventListeners[e]||(k.eventListeners[e]=[]),k.eventListeners[e].push(g));return k},toDataURL:function(a){a=a||{};var b=a.mimeType||null,d=a.quality||
null,f=this.getStage(),g=a.x||0,k=a.y||0;a=new Kinetic.SceneCanvas({width:a.width||this.getWidth()||(f?f.getWidth():0),height:a.height||this.getHeight()||(f?f.getHeight():0),pixelRatio:1});f=a.getContext();return f.save(),(g||k)&&f.translate(-1*g,-1*k),this.drawScene(a),f.restore(),a.toDataURL(b,d)},toImage:function(a){Kinetic.Util._getImage(this.toDataURL(a),function(b){a.callback(b)})},setSize:function(a){return this.setWidth(a.width),this.setHeight(a.height),this},getSize:function(){return{width:this.getWidth(),
height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(a){return this.className===a||this.nodeType===a?[this]:[]},_off:function(a,b){var d,f,g=this.eventListeners[a];
for(d=0;d<g.length;d++)if(f=g[d].name,!("kinetic"===f&&"kinetic"!==b||b&&f!==b)){if(g.splice(d,1),0===g.length){delete this.eventListeners[a];break}d--}},_fireChangeEvent:function(a,b,d){this._fire(a+"Change",{oldVal:b,newVal:d})},setId:function(a){var b=this.getId();return Kinetic._removeId(b),Kinetic._addId(this,a),this._setAttr("id",a),this},setName:function(a){var b=this.getName();return Kinetic._removeName(b,this._id),Kinetic._addName(this,a),this._setAttr("name",a),this},setAttr:function(){var a=
Array.prototype.slice.call(arguments),b=a[0],a=a[1],d=this["set"+Kinetic.Util._capitalize(b)];return Kinetic.Util._isFunction(d)?d.call(this,a):this._setAttr(b,a),this},_setAttr:function(a,b){var d;void 0!==b&&(d=this.attrs[a],this.attrs[a]=b,this._fireChangeEvent(a,d,b))},_setComponentAttr:function(a,b,d){var f;void 0!==d&&(f=this.attrs[a],f||(this.attrs[a]=this.getAttr(a)),this.attrs[a][b]=d,this._fireChangeEvent(a,f,d))},_fireAndBubble:function(a,b,d){var f=!0;if(b&&"Shape"===this.nodeType&&(b.target=
this),"mouseenter"===a&&d&&(this._id===d._id||this.isAncestorOf&&this.isAncestorOf(d))?f=!1:"mouseleave"===a&&d&&(this._id===d._id||this.isAncestorOf&&this.isAncestorOf(d))&&(f=!1),f)this._fire(a,b),f=("mouseenter"===a||"mouseleave"===a)&&(d&&d.isAncestorOf&&d.isAncestorOf(this)||!(!d||!d.isAncestorOf)),b&&!b.cancelBubble&&this.parent&&this.parent.isListening()&&!f&&(d&&d.parent?this._fireAndBubble.call(this.parent,a,b,d.parent):this._fireAndBubble.call(this.parent,a,b))},_fire:function(a,b){var d,
f=this.eventListeners[a];if(b.type=a,f)for(d=0;d<f.length;d++)f[d].handler.call(this,b)},draw:function(){return this.drawScene(),this.drawHit(),this}});Kinetic.Node.create=function(a,b){return this._createNode(JSON.parse(a),b)};Kinetic.Node._createNode=function(a,b){var d,f,g;d=Kinetic.Node.prototype.getClassName.call(a);var k=a.children;if(b&&(a.attrs.container=b),d=new Kinetic[d](a.attrs),k)for(f=k.length,g=0;f>g;g++)d.add(this._createNode(k[g]));return d};Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,
"position");Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0);Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0);Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1);Kinetic.Factory.addGetter(Kinetic.Node,"name");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name");Kinetic.Factory.addGetter(Kinetic.Node,"id");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id");Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,
"scale",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1);Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0);Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0);Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",
0);Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance");Kinetic.Factory.addSetter(Kinetic.Node,"width",0);Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width");Kinetic.Factory.addSetter(Kinetic.Node,"height",0);Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height");Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit");Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(a){return this._filterUpToDate=
!1,a});Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit");Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size");Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});Kinetic.Collection.mapMethods(Kinetic.Node)})();
(function(){Kinetic.Filters.Grayscale=function(b){var a,e=b.data,d=e.length;for(b=0;d>b;b+=4)a=.34*e[b]+.5*e[b+1]+.16*e[b+2],e[b]=a,e[b+1]=a,e[b+2]=a}})();(function(){Kinetic.Filters.Brighten=function(b){var a=255*this.brightness(),e=b.data,d=e.length;for(b=0;d>b;b+=4)e[b]+=a,e[b+1]+=a,e[b+2]+=a};Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Invert=function(b){var a=b.data,e=a.length;for(b=0;e>b;b+=4)a[b]=255-a[b],a[b+1]=255-a[b+1],a[b+2]=255-a[b+2]}})();
(function(){function b(){this.a=this.b=this.g=this.r=0;this.next=null}var a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,
367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,
310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],e=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,
23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(d){var f=Math.round(this.blurRadius());if(0<f){var g,k,l,h,m,n,p,r,q,t,v,y,z,D,B,P,F,J,N,E,w,K,Z,X=d.data,ka=d.width;
d=d.height;g=f+f+1;var Ma=ka-1,Ia=d-1,da=f+1,ma=da*(da+1)/2,va=new b,Ea=null,ca=va;Z=l=null;var ra=a[f],Ba=e[f];for(l=1;g>l;l++)ca=ca.next=new b,l==da&&(Ea=ca);ca.next=va;for(k=n=m=0;d>k;k++){B=P=F=J=p=r=q=t=0;v=da*(N=X[m]);y=da*(E=X[m+1]);z=da*(w=X[m+2]);D=da*(K=X[m+3]);p+=ma*N;r+=ma*E;q+=ma*w;t+=ma*K;ca=va;for(l=0;da>l;l++)ca.r=N,ca.g=E,ca.b=w,ca.a=K,ca=ca.next;for(l=1;da>l;l++)h=m+((l>Ma?Ma:l)<<2),p+=(ca.r=N=X[h])*(Z=da-l),r+=(ca.g=E=X[h+1])*Z,q+=(ca.b=w=X[h+2])*Z,t+=(ca.a=K=X[h+3])*Z,B+=N,P+=
E,F+=w,J+=K,ca=ca.next;l=va;Z=Ea;for(g=0;ka>g;g++)X[m+3]=K=t*ra>>Ba,0!==K?(K=255/K,X[m]=(p*ra>>Ba)*K,X[m+1]=(r*ra>>Ba)*K,X[m+2]=(q*ra>>Ba)*K):X[m]=X[m+1]=X[m+2]=0,p-=v,r-=y,q-=z,t-=D,v-=l.r,y-=l.g,z-=l.b,D-=l.a,h=n+((h=g+f+1)<Ma?h:Ma)<<2,B+=l.r=X[h],P+=l.g=X[h+1],F+=l.b=X[h+2],J+=l.a=X[h+3],p+=B,r+=P,q+=F,t+=J,l=l.next,v+=N=Z.r,y+=E=Z.g,z+=w=Z.b,D+=K=Z.a,B-=N,P-=E,F-=w,J-=K,Z=Z.next,m+=4;n+=ka}for(g=0;ka>g;g++){P=F=J=B=r=q=t=p=0;m=g<<2;v=da*(N=X[m]);y=da*(E=X[m+1]);z=da*(w=X[m+2]);D=da*(K=X[m+3]);
p+=ma*N;r+=ma*E;q+=ma*w;t+=ma*K;ca=va;for(l=0;da>l;l++)ca.r=N,ca.g=E,ca.b=w,ca.a=K,ca=ca.next;h=ka;for(l=1;f>=l;l++)m=h+g<<2,p+=(ca.r=N=X[m])*(Z=da-l),r+=(ca.g=E=X[m+1])*Z,q+=(ca.b=w=X[m+2])*Z,t+=(ca.a=K=X[m+3])*Z,B+=N,P+=E,F+=w,J+=K,ca=ca.next,Ia>l&&(h+=ka);m=g;l=va;Z=Ea;for(k=0;d>k;k++)h=m<<2,X[h+3]=K=t*ra>>Ba,0<K?(K=255/K,X[h]=(p*ra>>Ba)*K,X[h+1]=(r*ra>>Ba)*K,X[h+2]=(q*ra>>Ba)*K):X[h]=X[h+1]=X[h+2]=0,p-=v,r-=y,q-=z,t-=D,v-=l.r,y-=l.g,z-=l.b,D-=l.a,h=g+((h=k+da)<Ia?h:Ia)*ka<<2,p+=B+=l.r=X[h],r+=
P+=l.g=X[h+1],q+=F+=l.b=X[h+2],t+=J+=l.a=X[h+3],l=l.next,v+=N=Z.r,y+=E=Z.g,z+=w=Z.b,D+=K=Z.a,B-=N,P-=E,F-=w,J-=K,Z=Z.next,m+=ka}}};Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){function b(a,b,f){b=4*(f*a.width+b);f=[];return f.push(a.data[b++],a.data[b++],a.data[b++],a.data[b++]),f}function a(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))}Kinetic.Filters.Mask=function(e){var d;d=this.threshold();var f=b(e,0,0),g=b(e,e.width-1,0),k=b(e,0,e.height-1),l=b(e,e.width-1,e.height-1);d=d||10;if(a(f,g)<d&&a(g,l)<d&&a(l,k)<d&&a(k,f)<d){f=[g,f,l,k];g=[0,0,0];for(k=0;k<f.length;k++)g[0]+=f[k][0],g[1]+=f[k][1],g[2]+=f[k][2];f=(g[0]/=
f.length,g[1]/=f.length,g[2]/=f.length,g);g=[];for(k=0;k<e.width*e.height;k++)l=a(f,[e.data[4*k],e.data[4*k+1],e.data[4*k+2]]),g[k]=d>l?0:255;d=g}else d=void 0;if(d){for(var f=e.width,g=e.height,k=[1,1,1,1,0,1,1,1,1],l=Math.round(Math.sqrt(k.length)),h=Math.floor(l/2),m=[],n=0;g>n;n++)for(var p=0;f>p;p++){for(var r=n*f+p,q=0,t=0;l>t;t++)for(var v=0;l>v;v++){var y=n+t-h,z=p+v-h;0<=y&&g>y&&0<=z&&f>z&&(q+=d[y*f+z]*k[t*l+v])}m[r]=2040===q?255:0}d=m;f=e.width;g=e.height;k=[1,1,1,1,1,1,1,1,1];l=Math.round(Math.sqrt(k.length));
h=Math.floor(l/2);m=[];for(n=0;g>n;n++)for(p=0;f>p;p++){r=n*f+p;for(t=q=0;l>t;t++)for(v=0;l>v;v++)y=n+t-h,z=p+v-h,0<=y&&g>y&&0<=z&&f>z&&(q+=d[y*f+z]*k[t*l+v]);m[r]=1020<=q?255:0}d=m;f=e.width;g=e.height;k=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9];l=Math.round(Math.sqrt(k.length));h=Math.floor(l/2);m=[];for(n=0;g>n;n++)for(p=0;f>p;p++){r=n*f+p;for(t=q=0;l>t;t++)for(v=0;l>v;v++)y=n+t-h,z=p+v-h,0<=y&&g>y&&0<=z&&f>z&&(q+=d[y*f+z]*k[t*l+v]);m[r]=q}d=m;for(f=0;f<e.width*e.height;f++)e.data[4*f+3]=d[f]}return e};
Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.RGB=function(b){var a,e=b.data,d=e.length,f=this.red(),g=this.green(),k=this.blue();for(b=0;d>b;b+=4)a=(.34*e[b]+.5*e[b+1]+.16*e[b+2])/255,e[b]=a*f,e[b+1]=a*g,e[b+2]=a*k,e[b+3]=e[b+3]};Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(b){return this._filterUpToDate=!1,255<b?255:0>b?0:Math.round(b)});Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(b){return this._filterUpToDate=!1,255<b?255:0>b?0:Math.round(b)});Kinetic.Factory.addGetterSetter(Kinetic.Node,
"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.HSV=function(b){var a,e,d,f,g;b=b.data;var k=b.length;a=Math.pow(2,this.value());var l=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360;e=a*l*Math.cos(h*Math.PI/180);d=a*l*Math.sin(h*Math.PI/180);var l=.299*a+.701*e+.167*d,h=.587*a-.587*e+.33*d,m=.114*a-.114*e-.497*d,n=.299*a-.299*e-.328*d,p=.587*a+.413*e+.035*d,r=.114*a-.114*e+.293*d,q=.299*a-.3*e+1.25*d,t=.587*a-.586*e-1.05*d,v=.114*a+.886*e-.2*d;for(a=0;k>a;a+=4)e=b[a+0],d=b[a+1],f=b[a+2],g=b[a+3],b[a+0]=
l*e+h*d+m*f,b[a+1]=n*e+p*d+r*f,b[a+2]=q*e+t*d+v*f,b[a+3]=g};Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter);Kinetic.Filters.HSL=function(b){var a,e,d,f,g;b=b.data;var k=b.length,l=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,m=127*this.luminance();a=1*l*Math.cos(h*Math.PI/180);e=1*l*Math.sin(h*Math.PI/
180);var l=.299+.701*a+.167*e,h=.587-.587*a+.33*e,n=.114-.114*a-.497*e,p=.299-.299*a-.328*e,r=.587+.413*a+.035*e,q=.114-.114*a+.293*e,t=.299-.3*a+1.25*e,v=.587-.586*a-1.05*e,y=.114+.886*a-.2*e;for(a=0;k>a;a+=4)e=b[a+0],d=b[a+1],f=b[a+2],g=b[a+3],b[a+0]=l*e+h*d+n*f+m,b[a+1]=p*e+r*d+q*f+m,b[a+2]=t*e+v*d+y*f+m,b[a+3]=g}})();
(function(){Kinetic.Filters.Emboss=function(b){var a=10*this.embossStrength(),e=255*this.embossWhiteLevel(),d=this.embossDirection(),f=this.embossBlend(),g=0,k=0,l=b.data,h=b.width;b=b.height;var m=4*h,n=b;switch(d){case "top-left":k=g=-1;break;case "top":g=-1;k=0;break;case "top-right":g=-1;k=1;break;case "right":g=0;k=1;break;case "bottom-right":k=g=1;break;case "bottom":g=1;k=0;break;case "bottom-left":g=1;k=-1;break;case "left":g=0,k=-1}do{var d=(n-1)*m,p=g;1>n+p&&(p=0);n+p>b&&(p=0);var p=(n-
1+p)*h*4,r=h;do{var q=d+4*(r-1),t=k;1>r+t&&(t=0);r+t>h&&(t=0);var t=p+4*(r-1+t),v=l[q+1]-l[t+1],y=l[q+2]-l[t+2],t=l[q]-l[t],z=0<t?t:-t,D=0<y?y:-y;((0<v?v:-v)>z&&(t=v),D>z&&(t=y),t*=a,f)?(v=l[q]+t,y=l[q+1]+t,t=l[q+2]+t,l[q]=255<v?255:0>v?0:v,l[q+1]=255<y?255:0>y?0:y,l[q+2]=255<t?255:0>t?0:t):(t=e-t,0>t?t=0:255<t&&(t=255),l[q]=l[q+1]=l[q+2]=t)}while(--r)}while(--n)};Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,
"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)})();
(function(){function b(a,b,d,f,g){var k;d-=b;g-=f;return 0===d?f+g/2:0===g?f:(k=(a-b)/d,g*k+f)}Kinetic.Filters.Enhance=function(a){var e,d=a.data,f=d.length,g=d[0],k=g,l=d[1],h=l,m=d[2],n=m,p=this.enhance();if(0!==p){for(a=0;f>a;a+=4)e=d[a+0],g>e?g=e:e>k&&(k=e),e=d[a+1],l>e?l=e:e>h&&(h=e),e=d[a+2],m>e?m=e:e>n&&(n=e);k===g&&(k=255,g=0);h===l&&(h=255,l=0);n===m&&(n=255,m=0);var r,q,t,v,y,z,D,B,P;0<p?(q=k+p*(255-k),t=g-p*(g-0),y=h+p*(255-h),z=l-p*(l-0),B=n+p*(255-n),P=m-p*(m-0)):(r=.5*(k+g),q=k+p*(k-
r),t=g+p*(g-r),v=.5*(h+l),y=h+p*(h-v),z=l+p*(l-v),D=.5*(n+m),B=n+p*(n-D),P=m+p*(m-D));for(a=0;f>a;a+=4)d[a+0]=b(d[a+0],g,k,t,q),d[a+1]=b(d[a+1],l,h,z,y),d[a+2]=b(d[a+2],m,n,P,B)}};Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Posterize=function(b){var a;a=Math.round(254*this.levels())+1;b=b.data;var e=b.length,d=255/a;for(a=0;e>a;a+=1)b[a]=Math.floor(b[a]/d)*d};Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Noise=function(b){var a;a=255*this.noise();b=b.data;var e=b.length,d=a/2;for(a=0;e>a;a+=4)b[a+0]+=d-2*d*Math.random(),b[a+1]+=d-2*d*Math.random(),b[a+2]+=d-2*d*Math.random()};Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Pixelate=function(b){var a,e,d,f,g,k,l,h,m,n,p,r,q,t,v=Math.ceil(this.pixelSize()),y=b.width,z=b.height,D=Math.ceil(y/v),B=Math.ceil(z/v);b=b.data;for(r=0;D>r;r+=1)for(q=0;B>q;q+=1){l=k=g=f=0;h=r*v;m=h+v;n=q*v;p=n+v;t=0;for(a=h;m>a;a+=1)if(!(a>=y))for(e=n;p>e;e+=1)e>=z||(d=4*(y*e+a),f+=b[d+0],g+=b[d+1],k+=b[d+2],l+=b[d+3],t+=1);f/=t;g/=t;k/=t;for(a=h;m>a;a+=1)if(!(a>=y))for(e=n;p>e;e+=1)e>=z||(d=4*(y*e+a),b[d+0]=f,b[d+1]=g,b[d+2]=k,b[d+3]=l)}};Kinetic.Factory.addGetterSetter(Kinetic.Node,
"pixelSize",8,null,Kinetic.Factory.afterSetFilter)})();(function(){Kinetic.Filters.Threshold=function(b){var a=255*this.threshold(),e=b.data,d=e.length;for(b=0;d>b;b+=1)e[b]=e[b]<a?0:255};Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)})();
(function(){Kinetic.Filters.Sepia=function(b){var a,e,d,f,g,k,l,h=b.data,m=b.width,n=b.height,p=4*m;do{b=(n-1)*p;a=m;do e=b+4*(a-1),d=h[e],f=h[e+1],g=h[e+2],k=.393*d+.769*f+.189*g,l=.349*d+.686*f+.168*g,d=.272*d+.534*f+.131*g,h[e]=255<k?255:k,h[e+1]=255<l?255:l,h[e+2]=255<d?255:d,h[e+3]=h[e+3];while(--a)}while(--n)}})();
(function(){Kinetic.Filters.Solarize=function(b){var a=b.data,e=b.width,d=4*e;b=b.height;do{var f=(b-1)*d,g=e;do{var k=f+4*(g-1),l=a[k],h=a[k+1],m=a[k+2];127<l&&(l=255-l);127<h&&(h=255-h);127<m&&(m=255-m);a[k]=l;a[k+1]=h;a[k+2]=m}while(--g)}while(--b)}})();
(function(){var b=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(a){var e,d,f,g,k,l,h,m,n=a.width,p=a.height,r=Math.round(this.kaleidoscopePower()),q=Math.round(this.kaleidoscopeAngle());g=Math.floor(q%360*n/360);if(!(1>r)){b.width=n;b.height=p;var q=b.getContext("2d").getImageData(0,0,n,p),t,v,y;e=a.data;d=q.data;var z=a.width;f=a.height;k=n/2||z/2;l=p/2||f/2;var D=v=0,B=0,P=0,F=Math.sqrt(k*k+l*l);t=z-k;v=f-l;y=Math.sqrt(t*t+v*v);var F=y>F?y:F,J,N;m=360/z*Math.PI/180;for(J=
0;z>J;J+=1)for(N=Math.sin(J*m),h=Math.cos(J*m),y=0;f>y;y+=1)t=Math.floor(k+F*y/f*h),v=Math.floor(l+F*y/f*N),t=4*(v*z+t),v=e[t+0],D=e[t+1],B=e[t+2],P=e[t+3],t=4*(J+y*z),d[t+0]=v,d[t+1]=D,d[t+2]=B,d[t+3]=P;for(z=n/Math.pow(2,r);8>=z;)z*=2,r-=1;F=z=Math.ceil(z);y=0;J=F;N=1;g+z>n&&(y=F,J=0,N=-1);for(d=0;p>d;d+=1)for(e=y;e!==J;e+=N)f=Math.round(e+g)%n,h=4*(n*d+f),f=q.data[h+0],k=q.data[h+1],l=q.data[h+2],h=q.data[h+3],m=4*(n*d+e),q.data[m+0]=f,q.data[m+1]=k,q.data[m+2]=l,q.data[m+3]=h;for(d=0;p>d;d+=1)for(F=
Math.floor(z),g=0;r>g;g+=1){for(e=0;F+1>e;e+=1)h=4*(n*d+e),f=q.data[h+0],k=q.data[h+1],l=q.data[h+2],h=q.data[h+3],m=4*(n*d+2*F-e-1),q.data[m+0]=f,q.data[m+1]=k,q.data[m+2]=l,q.data[m+3]=h;F*=2}f={polarRotation:0};n=q.data;a=a.data;p=q.width;q=q.height;r=f.polarCenterX||p/2;g=f.polarCenterY||q/2;y=F=l=k=0;e=Math.sqrt(r*r+g*g);d=p-r;z=q-g;d=Math.sqrt(d*d+z*z);e=d>e?d:e;f=f.polarRotation||0;for(d=0;p>d;d+=1)for(z=0;q>z;z+=1)l=d-r,F=z-g,k=Math.sqrt(l*l+F*F)*q/e,l=(180*Math.atan2(F,l)/Math.PI+360+f)%
360,l=l*p/360,l=Math.floor(l),k=Math.floor(k),J=4*(k*p+l),k=n[J+0],l=n[J+1],F=n[J+2],y=n[J+3],J=4*(z*p+d),a[J+0]=k,a[J+1]=l,a[J+2]=F,a[J+3]=y}};Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter);Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)})();
(function(){function b(a){setTimeout(a,1E3/60)}function a(){return d.apply(Kinetic.root,arguments)}var e=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),d=Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||b;Kinetic.Animation=function(a,b){var d=
Kinetic.Animation;this.func=a;this.setLayers(b);this.id=d.animIdCounter++;this.frame={time:0,timeDiff:0,lastTime:e()}};Kinetic.Animation.prototype={setLayers:function(a){var b=[];this.layers=b=a?0<a.length?a:[a]:[]},getLayers:function(){return this.layers},addLayer:function(a){var b,d,e=this.layers;if(e)for(b=e.length,d=0;b>d;d++){if(e[d]._id===a._id)return!1}else this.layers=[];return this.layers.push(a),!0},isRunning:function(){var a,b=Kinetic.Animation.animations,d=b.length;for(a=0;d>a;a++)if(b[a].id===
this.id)return!0;return!1},start:function(){var a=Kinetic.Animation;this.stop();this.frame.timeDiff=0;this.frame.lastTime=e();a._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(a){this.frame.timeDiff=a-this.frame.lastTime;this.frame.lastTime=a;this.frame.time+=this.frame.timeDiff;this.frame.frameRate=1E3/this.frame.timeDiff}};Kinetic.Animation.animations=[];Kinetic.Animation.animIdCounter=0;Kinetic.Animation.animRunning=!1;Kinetic.Animation._addAnimation=
function(a){this.animations.push(a);this._handleAnimation()};Kinetic.Animation._removeAnimation=function(a){var b=a.id,d=this.animations,e=d.length;for(a=0;e>a;a++)if(d[a].id===b){this.animations.splice(a,1);break}};Kinetic.Animation._runFrames=function(){var a,b,d,f,m,n,p,r,q={},t=this.animations,v=!1;for(f=0;f<t.length;f++){a=t[f];b=a.layers;d=a.func;a._updateFrameObject(e());n=b.length;for(m=0;n>m;m++)p=b[m],void 0!==p._id&&(q[p._id]=p);d&&(v=!1!==d.call(a,a.frame)||v)}if(v)for(r in q)q[r].draw()};
Kinetic.Animation._animationLoop=function(){var b=Kinetic.Animation;b.animations.length?(a(b._animationLoop),b._runFrames()):b.animRunning=!1};Kinetic.Animation._handleAnimation=function(){this.animRunning||(this.animRunning=!0,this._animationLoop())};var f=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(a){f.call(this,a)};Kinetic.BaseLayer.prototype.batchDraw=function(){var a=this,b=Kinetic.Animation;this.batchAnim||(this.batchAnim=new b(function(){a.lastBatchDrawTime&&500<e()-
a.lastBatchDrawTime&&a.batchAnim.stop()},this));this.lastBatchDrawTime=e();this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())};Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(a){a.batchDraw()})}})(this);
(function(){var b={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=0;Kinetic.Tween=function(d){var f,g=this,k=d.node,l=k._id,h=d.duration||1,m=d.easing||Kinetic.Easings.Linear,n=!!d.yoyo;this.node=k;this._id=a++;this.anim=new Kinetic.Animation(function(){g.tween.onEnterFrame()},k.getLayer());this.tween=new e(f,function(a){g._tweenFunc(a)},m,0,1,1E3*h,n);this._addListeners();Kinetic.Tween.attrs[l]||(Kinetic.Tween.attrs[l]={});Kinetic.Tween.attrs[l][this._id]||(Kinetic.Tween.attrs[l][this._id]={});
Kinetic.Tween.tweens[l]||(Kinetic.Tween.tweens[l]={});for(f in d)void 0===b[f]&&this._addAttr(f,d[f]);this.reset();this.onFinish=d.onFinish;this.onReset=d.onReset};Kinetic.Tween.attrs={};Kinetic.Tween.tweens={};Kinetic.Tween.prototype={_addAttr:function(a,b){var e,k,l,h;e=this.node;var m=e._id;if(k=Kinetic.Tween.tweens[m][a],k&&delete Kinetic.Tween.attrs[m][k][a],e=e.getAttr(a),Kinetic.Util._isArray(b))for(k=[],h=b.length,l=0;h>l;l++)k.push(b[l]-e[l]);else k=b-e;Kinetic.Tween.attrs[m][this._id][a]=
{start:e,diff:k};Kinetic.Tween.tweens[m][a]=this._id},_tweenFunc:function(a){var b,e,k,l,h,m,n,p=this.node,r=Kinetic.Tween.attrs[p._id][this._id];for(b in r){if(e=r[b],k=e.start,l=e.diff,Kinetic.Util._isArray(k))for(h=[],n=k.length,m=0;n>m;m++)h.push(k[m]+l[m]*a);else h=k+l*a;p.setAttr(b,h)}},_addListeners:function(){var a=this;this.tween.onPlay=function(){a.anim.start()};this.tween.onReverse=function(){a.anim.start()};this.tween.onPause=function(){a.anim.stop()};this.tween.onFinish=function(){a.onFinish&&
a.onFinish()};this.tween.onReset=function(){a.onReset&&a.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){this.node;return this.tween.reset(),this},seek:function(a){this.node;return this.tween.seek(1E3*a),this},pause:function(){return this.tween.pause(),this},finish:function(){this.node;return this.tween.finish(),this},destroy:function(){var a,b=this.node._id,e=this._id,k=Kinetic.Tween.tweens[b];this.pause();for(a in k)delete Kinetic.Tween.tweens[b][a];
delete Kinetic.Tween.attrs[b][e]}};var e=function(a,b,e,k,l,h,m){this.prop=a;this.propFunc=b;this._pos=this.begin=k;this.duration=h;this.prevPos=this._change=0;this.yoyo=m;this._finish=this._startTime=this._position=this._time=0;this.func=e;this._change=l-this.begin;this.pause()};e.prototype={fire:function(a){(a=this[a])&&a()},setTime:function(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>a?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=a,this.update())},
getTime:function(){return this._time},setPosition:function(a){this.prevPos=this._pos;this.propFunc(a);this._pos=a},getPosition:function(a){return void 0===a&&(a=this._time),this.func(a,this.begin,this._change,this.duration)},play:function(){this.state=2;this._startTime=this.getTimer()-this._time;this.onEnterFrame();this.fire("onPlay")},reverse:function(){this.state=3;this._time=this.duration-this._time;this._startTime=this.getTimer()-this._time;this.onEnterFrame();this.fire("onReverse")},seek:function(a){this.pause();
this._time=a;this.update();this.fire("onSeek")},reset:function(){this.pause();this._time=0;this.update();this.fire("onReset")},finish:function(){this.pause();this._time=this.duration;this.update();this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var a=this.getTimer()-this._startTime;2===this.state?this.setTime(a):3===this.state&&this.setTime(this.duration-a)},pause:function(){this.state=1;this.fire("onPause")},getTimer:function(){return(new Date).getTime()}};
Kinetic.Easings={BackEaseIn:function(a,b,e,k){return e*(a/=k)*a*(2.70158*a-1.70158)+b},BackEaseOut:function(a,b,e,k){return e*((a=a/k-1)*a*(2.70158*a+1.70158)+1)+b},BackEaseInOut:function(a,b,e,k){var l=1.70158;return 1>(a/=k/2)?e/2*a*a*(((l*=1.525)+1)*a-l)+b:e/2*((a-=2)*a*(((l*=1.525)+1)*a+l)+2)+b},ElasticEaseIn:function(a,b,e,k,l,h){var m=0;return 0===a?b:1==(a/=k)?b+e:(h||(h=.3*k),!l||l<Math.abs(e)?(l=e,m=h/4):m=h/(2*Math.PI)*Math.asin(e/l),-(l*Math.pow(2,10*(a-=1))*Math.sin(2*(a*k-m)*Math.PI/
h))+b)},ElasticEaseOut:function(a,b,e,k,l,h){var m=0;return 0===a?b:1==(a/=k)?b+e:(h||(h=.3*k),!l||l<Math.abs(e)?(l=e,m=h/4):m=h/(2*Math.PI)*Math.asin(e/l),l*Math.pow(2,-10*a)*Math.sin(2*(a*k-m)*Math.PI/h)+e+b)},ElasticEaseInOut:function(a,b,e,k,l,h){var m=0;return 0===a?b:2==(a/=k/2)?b+e:(h||(h=.3*k*1.5),!l||l<Math.abs(e)?(l=e,m=h/4):m=h/(2*Math.PI)*Math.asin(e/l),1>a?-.5*l*Math.pow(2,10*(a-=1))*Math.sin(2*(a*k-m)*Math.PI/h)+b:l*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*k-m)*Math.PI/h)*.5+e+b)},BounceEaseOut:function(a,
b,e,k){return(a/=k)<1/2.75?7.5625*e*a*a+b:2/2.75>a?e*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?e*(7.5625*(a-=2.25/2.75)*a+.9375)+b:e*(7.5625*(a-=2.625/2.75)*a+.984375)+b},BounceEaseIn:function(a,b,e,k){return e-Kinetic.Easings.BounceEaseOut(k-a,0,e,k)+b},BounceEaseInOut:function(a,b,e,k){return k/2>a?.5*Kinetic.Easings.BounceEaseIn(2*a,0,e,k)+b:.5*Kinetic.Easings.BounceEaseOut(2*a-k,0,e,k)+.5*e+b},EaseIn:function(a,b,e,k){return e*(a/=k)*a+b},EaseOut:function(a,b,e,k){return-e*(a/=k)*(a-2)+b},EaseInOut:function(a,
b,e,k){return 1>(a/=k/2)?e/2*a*a+b:-e/2*(--a*(a-2)-1)+b},StrongEaseIn:function(a,b,e,k){return e*(a/=k)*a*a*a*a+b},StrongEaseOut:function(a,b,e,k){return e*((a=a/k-1)*a*a*a*a+1)+b},StrongEaseInOut:function(a,b,e,k){return 1>(a/=k/2)?e/2*a*a*a*a*a+b:e/2*((a-=2)*a*a*a*a+2)+b},Linear:function(a,b,e,k){return e*a/k+b}}})();
(function(){Kinetic.DD={anim:new Kinetic.Animation(function(){var a=this.dirty;return this.dirty=!1,a}),isDragging:!1,justDragged:!1,offset:{x:0,y:0},node:null,_drag:function(a){var b=Kinetic.DD,f=b.node;if(f){if(!b.isDragging){var g=f.getStage().getPointerPosition(),k=f.dragDistance(),g=Math.max(Math.abs(g.x-b.startPointerPos.x),Math.abs(g.y-b.startPointerPos.y));if(k>g)return}f._setDragPosition(a);b.isDragging||(b.isDragging=!0,f.fire("dragstart",{type:"dragstart",target:f,evt:a},!0));f.fire("dragmove",
{type:"dragmove",target:f,evt:a},!0)}},_endDragBefore:function(a){var b,f=Kinetic.DD,g=f.node;g&&(b=g.getLayer(),f.anim.stop(),f.isDragging&&(f.isDragging=!1,f.justDragged=!0,Kinetic.listenClickTap=!1,a&&(a.dragEndNode=g)),delete f.node,(b||g).draw())},_endDragAfter:function(a){a=a||{};var b=a.dragEndNode;a&&b&&b.fire("dragend",{type:"dragend",target:b,evt:a},!0)}};Kinetic.Node.prototype.startDrag=function(){var a=Kinetic.DD,b=this.getStage(),f=this.getLayer(),b=b.getPointerPosition(),g=this.getAbsolutePosition();
b&&(a.node&&a.node.stopDrag(),a.node=this,a.startPointerPos=b,a.offset.x=b.x-g.x,a.offset.y=b.y-g.y,a.anim.setLayers(f||this.getLayers()),a.anim.start(),this._setDragPosition())};Kinetic.Node.prototype._setDragPosition=function(a){var b=Kinetic.DD,f=this.getStage().getPointerPosition(),g=this.getDragBoundFunc();f&&(f={x:f.x-b.offset.x,y:f.y-b.offset.y},void 0!==g&&(f=g.call(this,f,a)),this.setAbsolutePosition(f),this._lastPos&&this._lastPos.x===f.x&&this._lastPos.y===f.y||(b.anim.dirty=!0),this._lastPos=
f)};Kinetic.Node.prototype.stopDrag=function(){var a=Kinetic.DD,b={};a._endDragBefore(b);a._endDragAfter(b)};Kinetic.Node.prototype.setDraggable=function(a){this._setAttr("draggable",a);this._dragChange()};var b=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var a=Kinetic.DD;a.node&&a.node._id===this._id&&this.stopDrag();b.call(this)};Kinetic.Node.prototype.isDragging=function(){var a=Kinetic.DD;return!(!a.node||a.node._id!==this._id||!a.isDragging)};Kinetic.Node.prototype._listenDrag=
function(){var a=this;this._dragCleanup();"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)}):this.on("mousedown.kinetic touchstart.kinetic",function(b){1!==b.evt.button&&2!==b.evt.button&&(Kinetic.DD.node||a.startDrag(b))})};Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var a=this.getStage(),b=Kinetic.DD;a&&b.node&&b.node._id===this._id&&b.node.stopDrag()}};
Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))};Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc");Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1);Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var a=Kinetic.document.documentElement;a.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0);
a.addEventListener("touchend",Kinetic.DD._endDragBefore,!0);a.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1);a.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)})();
(function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(b){this.children=new Kinetic.Collection;Kinetic.Node.call(this,b)},getChildren:function(b){if(b){var a=new Kinetic.Collection;return this.children.each(function(e){b(e)&&a.push(e)}),a}return this.children},hasChildren:function(){return 0<this.getChildren().length},removeChildren:function(){for(var b,a=Kinetic.Collection.toCollection(this.children),e=0;e<a.length;e++)b=a[e],delete b.parent,b.index=0,b.hasChildren()&&b.removeChildren(),
b.remove();return this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var b,a=Kinetic.Collection.toCollection(this.children),e=0;e<a.length;e++)b=a[e],delete b.parent,b.index=0,b.destroy();return this.children=new Kinetic.Collection,this},add:function(b){if(!(1<arguments.length)){if(b.getParent())return void b.moveTo(this);var a=this.children;return this._validateAdd(b),b.index=a.length,b.parent=this,a.push(b),this._fire("add",{child:b}),this}for(a=0;a<arguments.length;a++)this.add(arguments[a])},
destroy:function(){this.hasChildren()&&this.destroyChildren();Kinetic.Node.prototype.destroy.call(this)},find:function(b){var a,e,d,f,g=[],k=b.replace(/ /g,"").split(","),l=k.length;for(b=0;l>b;b++)if(e=k[b],"#"===e.charAt(0))(a=this._getNodeById(e.slice(1)))&&g.push(a);else if("."===e.charAt(0))a=this._getNodesByName(e.slice(1)),g=g.concat(a);else for(d=this.getChildren(),f=d.length,a=0;f>a;a++)g=g.concat(d[a]._get(e));return Kinetic.Collection.toCollection(g)},_getNodeById:function(b){b=Kinetic.ids[b];
return void 0!==b&&this.isAncestorOf(b)?b:null},_getNodesByName:function(b){return this._getDescendants(Kinetic.names[b]||[])},_get:function(b){for(var a=Kinetic.Node.prototype._get.call(this,b),e=this.getChildren(),d=e.length,f=0;d>f;f++)a=a.concat(e[f]._get(b));return a},toObject:function(){var b=Kinetic.Node.prototype.toObject.call(this);b.children=[];for(var a=this.getChildren(),e=a.length,d=0;e>d;d++)b.children.push(a[d].toObject());return b},_getDescendants:function(b){for(var a=[],e=b.length,
d=0;e>d;d++){var f=b[d];this.isAncestorOf(f)&&a.push(f)}return a},isAncestorOf:function(b){for(b=b.getParent();b;){if(b._id===this._id)return!0;b=b.getParent()}return!1},clone:function(b){var a=Kinetic.Node.prototype.clone.call(this,b);return this.getChildren().each(function(b){a.add(b.clone())}),a},getAllIntersections:function(b){var a=[];return this.find("Shape").each(function(e){e.isVisible()&&e.intersects(b)&&a.push(e)}),a},_setChildrenIndices:function(){this.children.each(function(b,a){b.index=
a})},drawScene:function(b,a){var e=this.getLayer(),d=(e=b||e&&e.getCanvas())&&e.getContext(),f=this._cache.canvas,f=f&&f.scene;return this.isVisible()&&(f?this._drawCachedSceneCanvas(d):this._drawChildren(e,"drawScene",a)),this},drawHit:function(b,a){var e=this.getLayer(),d=b||e&&e.hitCanvas,f=d&&d.getContext(),g=this._cache.canvas,g=g&&g.hit;return this.shouldDrawHit(d)&&(e&&e.clearHitCache(),g?this._drawCachedHitCanvas(f):this._drawChildren(d,"drawHit",a)),this},_drawChildren:function(b,a,e){var d,
f,g=this.getLayer(),k=b&&b.getContext(),l=this.getClipWidth(),h=this.getClipHeight(),m=l&&h;m&&g&&(d=this.getClipX(),f=this.getClipY(),k.save(),g._applyTransform(this,k),k.beginPath(),k.rect(d,f,l,h),k.clip(),k.reset());this.children.each(function(d){d[a](b,e)});m&&k.restore()},shouldDrawHit:function(b){var a=this.getLayer();return b&&b.isCache||a&&a.hitGraphEnabled()&&this.isVisible()&&!Kinetic.isDragging()}});Kinetic.Util.extend(Kinetic.Container,Kinetic.Node);Kinetic.Container.prototype.get=Kinetic.Container.prototype.find;
Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]);Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX");Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY");Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth");Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight");Kinetic.Collection.mapMethods(Kinetic.Container)})();
(function(){function b(a){a.fill()}function a(a){a.stroke()}function e(a){a.fill()}function d(a){a.stroke()}function f(){this._clearCache(g)}var g="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(g){this.nodeType="Shape";this._fillFunc=b;this._strokeFunc=a;this._fillFuncHit=e;this._strokeFuncHit=d;for(var l,h=Kinetic.shapes;l=Kinetic.Util.getRandomColor(),!l||l in h;);this.colorKey=l;h[l]=this;Kinetic.Node.call(this,g);this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",
f)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(g,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||
this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},intersects:function(a){var b,d=this.getStage().bufferHitCanvas;return d.getContext().clear(),this.drawScene(d),b=d.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data,0<b[3]},destroy:function(){Kinetic.Node.prototype.destroy.call(this);delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||
1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(a,b){var d,e,f,g=this.getLayer(),r=(a||g.getCanvas()).getContext(),q=this._cache.canvas,t=this.sceneFunc(),v=this.hasShadow();this.isVisible()&&(q?this._drawCachedSceneCanvas(r):t&&((r.save(),this._useBufferCanvas())?((d=this.getStage(),e=d.bufferCanvas,f=e.getContext(),f.clear(),f.save(),f._applyLineJoin(this),g)?g._applyTransform(this,f,b):(d=this.getAbsoluteTransform(b).getMatrix(),r.transform(d[0],
d[1],d[2],d[3],d[4],d[5])),t.call(this,f),f.restore(),v&&(r.save(),r._applyShadow(this),r.drawImage(e._canvas,0,0),r.restore()),r._applyOpacity(this),r.drawImage(e._canvas,0,0)):((r._applyLineJoin(this),g)?g._applyTransform(this,r,b):(d=this.getAbsoluteTransform(b).getMatrix(),r.transform(d[0],d[1],d[2],d[3],d[4],d[5])),v&&(r.save(),r._applyShadow(this),t.call(this,r),r.restore()),r._applyOpacity(this),t.call(this,r)),r.restore()));return this},drawHit:function(a,b){var d=this.getLayer(),e=a||d.hitCanvas,
f=e.getContext(),g=this.hitFunc()||this.sceneFunc(),r=this._cache.canvas,r=r&&r.hit;this.shouldDrawHit(e)&&((d&&d.clearHitCache(),r)?this._drawCachedHitCanvas(f):g&&((f.save(),f._applyLineJoin(this),d)?d._applyTransform(this,f,b):(d=this.getAbsoluteTransform(b).getMatrix(),f.transform(d[0],d[1],d[2],d[3],d[4],d[5])),g.call(this,f),f.restore()));return this},drawHitFromCache:function(a){var b,d,e,f,g,r,q,t;a=a||0;var v=this._cache.canvas,y=this._getCachedSceneCanvas(),z=y.getContext(),v=v.hit.getContext(),
D=y.getWidth(),y=y.getHeight();v.clear();try{b=z.getImageData(0,0,D,y);d=b.data;e=v.getImageData(0,0,D,y);f=e.data;g=d.length;r=Kinetic.Util._hexToRgb(this.colorKey);for(q=0;g>q;q+=4)t=d[q+3],t>a&&(f[q]=r.r,f[q+1]=r.g,f[q+2]=r.b,f[q+3]=255);v.putImageData(e,0,0)}catch(B){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}});Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke");Kinetic.Factory.addGetterSetter(Kinetic.Shape,
"strokeRed",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap");
Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent);
Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity");Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage");Kinetic.Factory.addGetterSetter(Kinetic.Shape,
"fill");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",
0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat");Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,
"strokeEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color");Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",
0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,
"fillLinearGradientEndPoint",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,
"fillRadialGradientEndPoint",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0);Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0);Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});
Kinetic.Collection.mapMethods(Kinetic.Shape)})();
(function(){function b(b,d){b.content.addEventListener(d,function(e){b[a+d](e)},!1)}var a="_",e="mousedown mousemove mouseup mouseout touchstart touchmove touchend mouseover".split(" "),d=e.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(a){this.nodeType="Stage";Kinetic.Container.call(this,a);this._id=Kinetic.idCounter++;this._buildDOM();this._bindContentEvents();this._enableNestedTransforms=!1;Kinetic.stages.push(this)},_validateAdd:function(a){"Layer"!==a.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},
setContainer:function(a){if("string"===typeof a){var b=a;if(a=Kinetic.document.getElementById(a),!a)throw"Can not find container in document with id "+b;}return this._setAttr("container",a),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(a){return Kinetic.Node.prototype.setHeight.call(this,a),this._resizeDOM(),this},setWidth:function(a){return Kinetic.Node.prototype.setWidth.call(this,a),this._resizeDOM(),this},clear:function(){var a,
b=this.children,d=b.length;for(a=0;d>a;a++)b[a].clear();return this},clone:function(a){return a||(a={}),a.container=Kinetic.document.createElement("div"),Kinetic.Container.prototype.clone.call(this,a)},destroy:function(){var a=this.content;Kinetic.Container.prototype.destroy.call(this);a&&Kinetic.Util._isInDocument(a)&&this.getContainer().removeChild(a);a=Kinetic.stages.indexOf(this);-1<a&&Kinetic.stages.splice(a,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},
getContent:function(){return this.content},toDataURL:function(a){function b(h){var m=r[h].toDataURL(),v=new Kinetic.window.Image;v.onload=function(){p.drawImage(v,0,0);h<r.length-1?b(h+1):a.callback(n.toDataURL(d,e))};v.src=m}a=a||{};var d=a.mimeType||null,e=a.quality||null,h=a.x||0,m=a.y||0,n=new Kinetic.SceneCanvas({width:a.width||this.getWidth(),height:a.height||this.getHeight(),pixelRatio:1}),p=n.getContext()._context,r=this.children;(h||m)&&p.translate(-1*h,-1*m);b(0)},toImage:function(a){var b=
a.callback;a.callback=function(a){Kinetic.Util._getImage(a,function(a){b(a)})};this.toDataURL(a)},getIntersection:function(a){var b,d,e=this.getChildren();for(b=e.length-1;0<=b;b--)if(d=e[b].getIntersection(a))return d;return null},_resizeDOM:function(){if(this.content){var a,b,d=this.getWidth(),e=this.getHeight(),h=this.getChildren(),m=h.length;this.content.style.width=d+"px";this.content.style.height=e+"px";this.bufferCanvas.setSize(d,e);this.bufferHitCanvas.setSize(d,e);for(a=0;m>a;a++)b=h[a],
b.setSize(d,e),b.draw()}},add:function(a){if(!(1<arguments.length))return Kinetic.Container.prototype.add.call(this,a),a._setCanvasSize(this.width(),this.height()),a.draw(),this.content.appendChild(a.canvas._canvas),this;for(var b=0;b<arguments.length;b++)this.add(arguments[b])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var a=0;d>a;a++)b(this,e[a])},_mouseover:function(a){Kinetic.UA.mobile||
(this._setPointerPosition(a),this._fire("contentMouseover",{evt:a}))},_mouseout:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.targetShape;b&&!Kinetic.isDragging()&&(b._fireAndBubble("mouseout",{evt:a}),b._fireAndBubble("mouseleave",{evt:a}),this.targetShape=null);this.pointerPos=void 0;this._fire("contentMouseout",{evt:a})}},_mousemove:function(a){if(Kinetic.UA.ieMobile)return this._touchmove(a);if(("undefined"==typeof a.webkitMovementX&&"undefined"==typeof a.webkitMovementY||
0!==a.webkitMovementY||0!==a.webkitMovementX)&&!Kinetic.UA.mobile){this._setPointerPosition(a);var b,d=Kinetic.DD;Kinetic.isDragging()||(b=this.getIntersection(this.getPointerPosition()),b&&b.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===b._id?b._fireAndBubble("mousemove",{evt:a}):(this.targetShape&&(this.targetShape._fireAndBubble("mouseout",{evt:a},b),this.targetShape._fireAndBubble("mouseleave",{evt:a},b)),b._fireAndBubble("mouseover",{evt:a},this.targetShape),b._fireAndBubble("mouseenter",
{evt:a},this.targetShape),this.targetShape=b):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble("mouseout",{evt:a}),this.targetShape._fireAndBubble("mouseleave",{evt:a}),this.targetShape=null),this._fire("contentMousemove",{evt:a}));d&&d._drag(a);a.preventDefault&&a.preventDefault()}},_mousedown:function(a){if(Kinetic.UA.ieMobile)return this._touchstart(a);if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=
!0;b&&b.isListening()&&(this.clickStartShape=b,b._fireAndBubble("mousedown",{evt:a}));this._fire("contentMousedown",{evt:a})}a.preventDefault&&a.preventDefault()},_mouseup:function(a){if(Kinetic.UA.ieMobile)return this._touchend(a);if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),d=this.clickStartShape,e=!1,h=Kinetic.DD;Kinetic.inDblClickWindow?(e=!0,Kinetic.inDblClickWindow=!1):h&&h.justDragged?h&&(h.justDragged=!1):Kinetic.inDblClickWindow=
!0;setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow);b&&b.isListening()&&(b._fireAndBubble("mouseup",{evt:a}),Kinetic.listenClickTap&&d&&d._id===b._id&&(b._fireAndBubble("click",{evt:a}),e&&b._fireAndBubble("dblclick",{evt:a})));this._fire("contentMouseup",{evt:a});Kinetic.listenClickTap&&(this._fire("contentClick",{evt:a}),e&&this._fire("contentDblclick",{evt:a}));Kinetic.listenClickTap=!1}a.preventDefault&&a.preventDefault()},_touchstart:function(a){this._setPointerPosition(a);
var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0;b&&b.isListening()&&(this.tapStartShape=b,b._fireAndBubble("touchstart",{evt:a}),b.isListening()&&a.preventDefault&&a.preventDefault());this._fire("contentTouchstart",{evt:a})},_touchend:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),d=!1;Kinetic.inDblClickWindow?(d=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0;setTimeout(function(){Kinetic.inDblClickWindow=
!1},Kinetic.dblClickWindow);b&&b.isListening()&&(b._fireAndBubble("touchend",{evt:a}),Kinetic.listenClickTap&&b._id===this.tapStartShape._id&&(b._fireAndBubble("tap",{evt:a}),d&&b._fireAndBubble("dbltap",{evt:a})),b.isListening()&&a.preventDefault&&a.preventDefault());Kinetic.listenClickTap&&(this._fire("contentTouchend",{evt:a}),d&&this._fire("contentDbltap",{evt:a}));Kinetic.listenClickTap=!1},_touchmove:function(a){this._setPointerPosition(a);var b,d=Kinetic.DD;Kinetic.isDragging()||(b=this.getIntersection(this.getPointerPosition()),
b&&b.isListening()&&(b._fireAndBubble("touchmove",{evt:a}),b.isListening()&&a.preventDefault&&a.preventDefault()),this._fire("contentTouchmove",{evt:a}));d&&(d._drag(a),Kinetic.isDragging()&&a.preventDefault())},_setPointerPosition:function(a){var b,d=this._getContentPosition(),e=a.offsetX,h=a.clientX,m=null,n=null;a=a?a:window.event;void 0!==a.touches?0<a.touches.length&&(b=a.touches[0],m=b.clientX-d.left,n=b.clientY-d.top):void 0!==e?(m=e,n=a.offsetY):"mozilla"===Kinetic.UA.browser?(m=a.layerX,
n=a.layerY):void 0!==h&&d&&(m=h-d.left,n=a.clientY-d.top);null!==m&&null!==n&&(this.pointerPos={x:m,y:n})},_getContentPosition:function(){var a=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:a.top,left:a.left}},_buildDOM:function(){var a=this.getContainer();if(!a){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";a=Kinetic.document.createElement("div")}a.innerHTML="";this.content=Kinetic.document.createElement("div");
this.content.style.position="relative";this.content.style.display="inline-block";this.content.className="kineticjs-content";this.content.setAttribute("role","presentation");a.appendChild(this.content);this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1});this.bufferHitCanvas=new Kinetic.HitCanvas;this._resizeDOM()},_onContent:function(a,b){var d,e,h=a.split(" "),m=h.length;for(d=0;m>d;d++)e=h[d],this.content.addEventListener(e,b,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},
clearCache:function(){}});Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container);Kinetic.Factory.addGetter(Kinetic.Stage,"container");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")})();
(function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(b){this.nodeType="Layer";Kinetic.Container.call(this,b)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(b){return this.getContext().clear(b),this.getHitCanvas().getContext().clear(b),this},clearHitCache:function(){this._hitImageData=void 0},
setZIndex:function(b){Kinetic.Node.prototype.setZIndex.call(this,b);var a=this.getStage();return a&&(a.content.removeChild(this.getCanvas()._canvas),b<a.getChildren().length-1?a.content.insertBefore(this.getCanvas()._canvas,a.getChildren()[b+1].getCanvas()._canvas):a.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var b=this.getStage();b&&(b.content.removeChild(this.getCanvas()._canvas),b.content.appendChild(this.getCanvas()._canvas))},
moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var b=this.getStage();b&&(b.content.removeChild(this.getCanvas()._canvas),this.index<b.getChildren().length-1?b.content.insertBefore(this.getCanvas()._canvas,b.getChildren()[this.index+1].getCanvas()._canvas):b.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var b=this.getStage();if(b){var a=b.getChildren();b.content.removeChild(this.getCanvas()._canvas);b.content.insertBefore(this.getCanvas()._canvas,
a[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var b=this.getStage();if(b){var a=b.getChildren();b.content.removeChild(this.getCanvas()._canvas);b.content.insertBefore(this.getCanvas()._canvas,a[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var b=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),b&&b.parentNode&&Kinetic.Util._isInDocument(b)&&b.parentNode.removeChild(b),this},
getStage:function(){return this.parent},setSize:function(b,a){this.canvas.setSize(b,a)},getWidth:function(){return this.parent?this.parent.getWidth():void 0},setWidth:function(){Kinetic.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},getHeight:function(){return this.parent?this.parent.getHeight():void 0},setHeight:function(){Kinetic.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}});Kinetic.Util.extend(Kinetic.BaseLayer,
Kinetic.Container);Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0);Kinetic.Collection.mapMethods(Kinetic.BaseLayer)})();
(function(){var b=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],a=b.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(a){this.nodeType="Layer";this.canvas=new Kinetic.SceneCanvas;this.hitCanvas=new Kinetic.HitCanvas;Kinetic.BaseLayer.call(this,a)},_setCanvasSize:function(a,b){this.canvas.setSize(a,b);this.hitCanvas.setSize(a,b)},_validateAdd:function(a){a=a.getType();"Group"!==a&&"Shape"!==a&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},
getIntersection:function(e){var d,f,g,k;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var l=1,h=!1;;){for(f=0;a>f;f++){if(g=b[f],d=this._getIntersection({x:e.x+g.x*l,y:e.y+g.y*l}),k=d.shape)return k;d.antialiased&&(h=!0)}if(!h)break;l+=1}},_getImageData:function(a,b){var f=this.hitCanvas.width||1,g=this.hitCanvas.height||1,k=Math.round(b)*f+Math.round(a);return this._hitImageData||(this._hitImageData=this.hitCanvas.context.getImageData(0,0,f,g)),[this._hitImageData.data[4*k+0],this._hitImageData.data[4*
k+1],this._hitImageData.data[4*k+2],this._hitImageData.data[4*k+3]]},_getIntersection:function(a){var b,f;a=this.hitCanvas.context.getImageData(a.x,a.y,1,1).data;var g=a[3];return 255===g?(b=Kinetic.Util._rgbToHex(a[0],a[1],a[2]),f=Kinetic.shapes["#"+b],{shape:f}):0<g?{antialiased:!0}:{}},drawScene:function(a,b){var f=this.getLayer(),f=a||f&&f.getCanvas();return this._fire("beforeDraw",{node:this}),this.getClearBeforeDraw()&&f.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,f,
b),this._fire("draw",{node:this}),this},_applyTransform:function(a,b,f){a=a.getAbsoluteTransform(f).getMatrix();b.transform(a[0],a[1],a[2],a[3],a[4],a[5])},drawHit:function(a,b){var f=this.getLayer(),g=a||f&&f.hitCanvas;return f&&f.getClearBeforeDraw()&&f.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,g,b),this},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this.imageData=null,this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,
a),a?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this},setSize:function(a,b){Kinetic.BaseLayer.prototype.setSize.call(this,a,b);this.hitCanvas.setSize(a,b)}});Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer);Kinetic.Factory.addGetterSetter(Kinetic.Layer,
"hitGraphEnabled",!0);Kinetic.Collection.mapMethods(Kinetic.Layer)})();
(function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(b){this.nodeType="Layer";this.canvas=new Kinetic.SceneCanvas;Kinetic.BaseLayer.call(this,b)},_validateAdd:function(b){"Shape"!==b.getType()&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(b,a){this.canvas.setSize(b,a)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(b){var a=this.getLayer();b=b||a&&a.getCanvas();return this.getClearBeforeDraw()&&
b.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,b),this},_applyTransform:function(b,a,e){e&&e._id===this._id||(b=b.getTransform().getMatrix(),a.transform(b[0],b[1],b[2],b[3],b[4],b[5]))},draw:function(){return this.drawScene(),this},clear:function(b){return this.getContext().clear(b),this},setVisible:function(b){return Kinetic.Node.prototype.setVisible.call(this,b),this.getCanvas()._canvas.style.display=b?"block":"none",this}});Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer);
Kinetic.Collection.mapMethods(Kinetic.FastLayer)})();(function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(b){this.nodeType="Group";Kinetic.Container.call(this,b)},_validateAdd:function(b){b=b.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to groups.")}});Kinetic.Util.extend(Kinetic.Group,Kinetic.Container);Kinetic.Collection.mapMethods(Kinetic.Group)})();
(function(){Kinetic.Rect=function(b){this.___init(b)};Kinetic.Rect.prototype={___init:function(b){Kinetic.Shape.call(this,b);this.className="Rect";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var a=this.getCornerRadius(),e=this.getWidth(),d=this.getHeight();b.beginPath();a?(b.moveTo(a,0),b.lineTo(e-a,0),b.arc(e-a,a,a,3*Math.PI/2,0,!1),b.lineTo(e,d-a),b.arc(e-a,d-a,a,0,Math.PI/2,!1),b.lineTo(a,d),b.arc(a,d-a,a,Math.PI/2,Math.PI,!1),b.lineTo(0,a),b.arc(a,a,a,Math.PI,3*Math.PI/2,!1)):b.rect(0,
0,e,d);b.closePath();b.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0);Kinetic.Collection.mapMethods(Kinetic.Rect)})();
(function(){var b=2*Math.PI-1E-4;Kinetic.Circle=function(a){this.___init(a)};Kinetic.Circle.prototype={___init:function(a){Kinetic.Shape.call(this,a);this.className="Circle";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.beginPath();a.arc(0,0,this.getRadius(),0,b,!1);a.closePath();a.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a);this.setRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,
a);this.setRadius(a/2)}};Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0);Kinetic.Collection.mapMethods(Kinetic.Circle)})();
(function(){var b=2*Math.PI-1E-4;Kinetic.Ellipse=function(a){this.___init(a)};Kinetic.Ellipse.prototype={___init:function(a){Kinetic.Shape.call(this,a);this.className="Ellipse";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var e=this.getRadiusX(),d=this.getRadiusY();a.beginPath();a.save();e!==d&&a.scale(1,d/e);a.arc(0,0,e,0,b,!1);a.restore();a.closePath();a.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadiusX()},getHeight:function(){return 2*this.getRadiusY()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,
a);this.setRadius({x:a/2})},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a);this.setRadius({y:a/2})}};Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape);Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]);Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0);Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0);Kinetic.Collection.mapMethods(Kinetic.Ellipse)})();
(function(){var b=2*Math.PI-1E-4;Kinetic.Ring=function(a){this.___init(a)};Kinetic.Ring.prototype={___init:function(a){Kinetic.Shape.call(this,a);this.className="Ring";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.beginPath();a.arc(0,0,this.getInnerRadius(),0,b,!1);a.moveTo(this.getOuterRadius(),0);a.arc(0,0,this.getOuterRadius(),b,0,!0);a.closePath();a.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,
a);this.setOuterRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a);this.setOuterRadius(a/2)}};Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0);Kinetic.Collection.mapMethods(Kinetic.Ring)})();
(function(){Kinetic.Wedge=function(b){this.___init(b)};Kinetic.Wedge.prototype={___init:function(b){Kinetic.Shape.call(this,b);this.className="Wedge";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath();b.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise());b.lineTo(0,0);b.closePath();b.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0);Kinetic.Factory.addGetterSetter(Kinetic.Wedge,
"angle",0);Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1);Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});Kinetic.Collection.mapMethods(Kinetic.Wedge)})();
(function(){Math.PI/180;Kinetic.Arc=function(b){this.___init(b)};Kinetic.Arc.prototype={___init:function(b){Kinetic.Shape.call(this,b);this.className="Arc";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var a=Kinetic.getAngle(this.angle()),e=this.clockwise();b.beginPath();b.arc(0,0,this.getOuterRadius(),0,a,e);b.arc(0,0,this.getInnerRadius(),a,0,!e);b.closePath();b.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",
0);Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0);Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1);Kinetic.Collection.mapMethods(Kinetic.Arc)})();
(function(){Kinetic.Image=function(b){this.___init(b)};Kinetic.Image.prototype={___init:function(b){Kinetic.Shape.call(this,b);this.className="Image";this.sceneFunc(this._sceneFunc);this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()&&this.getStage()},_sceneFunc:function(b){var a,e,d,f=this.getWidth(),g=this.getHeight(),k=this.getImage();k&&(a=this.getCropWidth(),e=this.getCropHeight(),d=a&&e?[k,this.getCropX(),this.getCropY(),
a,e,0,0,f,g]:[k,0,0,f,g]);(this.hasFill()||this.hasStroke()||this.hasShadow())&&(b.beginPath(),b.rect(0,0,f,g),b.closePath(),b.fillStrokeShape(this));k&&b.drawImage.apply(b,d)},_hitFunc:function(b){var a=this.getWidth(),e=this.getHeight();b.beginPath();b.rect(0,0,a,e);b.closePath();b.fillStrokeShape(this)},getWidth:function(){var b=this.getImage();return this.attrs.width||(b?b.width:0)},getHeight:function(){var b=this.getImage();return this.attrs.height||(b?b.height:0)}};Kinetic.Util.extend(Kinetic.Image,
Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Image,"image");Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]);Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0);Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0);Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0);Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0);Kinetic.Collection.mapMethods(Kinetic.Image)})();
(function(){function b(a){a.fillText(this.partialText,0,0)}function a(a){a.strokeText(this.partialText,0,0)}var e="fontFamily fontSize fontStyle fontVariant padding align lineHeight text width height wrap".split(" "),d=e.length,f=Kinetic.Util.createCanvasElement().getContext("2d");Kinetic.Text=function(a){this.___init(a)};Kinetic.Text.prototype={___init:function(f){void 0===f.width&&(f.width="auto");void 0===f.height&&(f.height="auto");Kinetic.Shape.call(this,f);this._fillFunc=b;this._strokeFunc=
a;this.className="Text";for(f=0;d>f;f++)this.on(e[f]+"Change.kinetic",this._setTextData);this._setTextData();this.sceneFunc(this._sceneFunc);this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b,d=this.getPadding();b=this.getTextHeight();var e=this.getLineHeight()*b,f=this.textArr,n=f.length,p=this.getWidth();a.setAttr("font",this._getContextFont());a.setAttr("textBaseline","middle");a.setAttr("textAlign","left");a.save();a.translate(d,0);a.translate(0,d+b/2);for(b=0;n>b;b++){var r=f[b],q=r.text,
r=r.width;a.save();"right"===this.getAlign()?a.translate(p-r-2*d,0):"center"===this.getAlign()&&a.translate((p-r-2*d)/2,0);this.partialText=q;a.fillStrokeShape(this);a.restore();a.translate(0,e)}a.restore()},_hitFunc:function(a){var b=this.getWidth(),d=this.getHeight();a.beginPath();a.rect(0,0,b,d);a.closePath();a.fillStrokeShape(this)},setText:function(a){a=Kinetic.Util._isString(a)?a:a.toString();return this._setAttr("text",a),this},getWidth:function(){return"auto"===this.attrs.width?this.getTextWidth()+
2*this.getPadding():this.attrs.width},getHeight:function(){return"auto"===this.attrs.height?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(a){var b,d=this.getFontSize();return f.save(),f.font=this._getContextFont(),b=f.measureText(a),f.restore(),{width:b.width,height:parseInt(d,10)}},_getContextFont:function(){return this.getFontStyle()+
" "+this.getFontVariant()+" "+this.getFontSize()+"px "+this.getFontFamily()},_addTextLine:function(a,b){return this.textArr.push({text:a,width:b})},_getTextWidth:function(a){return f.measureText(a).width},_setTextData:function(){var a=this.getText().split("\n"),b=+this.getFontSize(),d=0,e=this.getLineHeight()*b,m=this.attrs.width,n=this.attrs.height,p="auto"!==m,r="auto"!==n,q=this.getPadding(),m=m-2*q,n=n-2*q,q=0,t=this.getWrap(),v="none"!==t,t="char"!==t&&v;this.textArr=[];f.save();f.font=this._getContextFont();
for(var y=0,z=a.length;z>y;++y){var D=a[y],B=this._getTextWidth(D);if(p&&B>m)for(;0<D.length;){for(var P=0,F=D.length,J="",N=0;F>P;){var E=P+F>>>1,w=D.slice(0,E+1),K=this._getTextWidth(w);m>=K?(P=E+1,J=w,N=K):F=E}if(!J)break;t&&(F=Math.max(J.lastIndexOf(" "),J.lastIndexOf("-"))+1,0<F&&(P=F,J=J.slice(0,P),N=this._getTextWidth(J)));if(this._addTextLine(J,N),d=Math.max(d,N),q+=e,!v||r&&q+e>n)break;if(D=D.slice(P),0<D.length&&(B=this._getTextWidth(D),m>=B)){this._addTextLine(D,B);q+=e;d=Math.max(d,B);
break}}else this._addTextLine(D,B),q+=e,d=Math.max(d,B);if(r&&q+e>n)break}f.restore();this.textHeight=b;this.textWidth=d}};Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial");Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12);Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle","normal");Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant","normal");Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0);Kinetic.Factory.addGetterSetter(Kinetic.Text,
"align","left");Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1);Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap","word");Kinetic.Factory.addGetter(Kinetic.Text,"text","");Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text");Kinetic.Collection.mapMethods(Kinetic.Text)})();
(function(){Kinetic.Line=function(b){this.___init(b)};Kinetic.Line.prototype={___init:function(b){Kinetic.Shape.call(this,b);this.className="Line";this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")});this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var a,e,d,f=this.getPoints(),g=f.length;a=this.getTension();var k=this.getClosed();if(b.beginPath(),b.moveTo(f[0],f[1]),0!==a&&4<g){a=this.getTensionPoints();e=a.length;d=k?0:4;
for(k||b.quadraticCurveTo(a[0],a[1],a[2],a[3]);e-2>d;)b.bezierCurveTo(a[d++],a[d++],a[d++],a[d++],a[d++],a[d++]);k||b.quadraticCurveTo(a[e-2],a[e-1],f[g-2],f[g-1])}else for(d=2;g>d;d+=2)b.lineTo(f[d],f[d+1]);k?(b.closePath(),b.fillStrokeShape(this)):b.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},
_getTensionPointsClosed:function(){var b=this.getPoints(),a=b.length,e=this.getTension(),d=Kinetic.Util,f=d._getControlPoints(b[a-2],b[a-1],b[0],b[1],b[2],b[3],e),d=d._getControlPoints(b[a-4],b[a-3],b[a-2],b[a-1],b[0],b[1],e),e=Kinetic.Util._expandPoints(b,e);return[f[2],f[3]].concat(e).concat([d[0],d[1],b[a-2],b[a-1],d[2],d[3],f[0],f[1],b[0],b[1]])}};Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1);Kinetic.Factory.addGetterSetter(Kinetic.Line,
"tension",0);Kinetic.Factory.addGetterSetter(Kinetic.Line,"points");Kinetic.Collection.mapMethods(Kinetic.Line)})();
(function(){Kinetic.Sprite=function(b){this.___init(b)};Kinetic.Sprite.prototype={___init:function(b){Kinetic.Shape.call(this,b);this.className="Sprite";this.anim=new Kinetic.Animation;this.on("animationChange.kinetic",function(){this.frameIndex(0)});this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())});this.sceneFunc(this._sceneFunc);this.hitFunc(this._hitFunc)},_sceneFunc:function(b){var a=this.getAnimation(),e=4*this.frameIndex(),
d=this.getAnimations()[a],a=d[e+0],f=d[e+1],g=d[e+2],e=d[e+3];(d=this.getImage())&&b.drawImage(d,a,f,g,e,0,0,g,e)},_hitFunc:function(b){var a=this.getAnimation(),e=4*this.frameIndex(),d=this.getAnimations()[a],a=d[e+2],e=d[e+3];b.beginPath();b.rect(0,0,a,e);b.closePath();b.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var b=this;this.interval=setInterval(function(){b._updateIndex()},1E3/this.getFrameRate())},
start:function(){var b=this.getLayer();this.anim.setLayers(b);this._setInterval();this.anim.start()},stop:function(){this.anim.stop();clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var b=this.frameIndex(),a=this.getAnimation(),a=this.getAnimations()[a].length/4;this.frameIndex(a-1>b?b+1:0)}};Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation");Kinetic.Factory.addGetterSetter(Kinetic.Sprite,
"animations");Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image");Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0);Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17);Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});Kinetic.Collection.mapMethods(Kinetic.Sprite)})();
(function(){Kinetic.Path=function(b){this.___init(b)};Kinetic.Path.prototype={___init:function(b){this.dataArray=[];var a=this;Kinetic.Shape.call(this,b);this.className="Path";this.dataArray=Kinetic.Path.parsePathData(this.getData());this.on("dataChange.kinetic",function(){a.dataArray=Kinetic.Path.parsePathData(this.getData())});this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var a=this.dataArray,e=!1;b.beginPath();for(var d=0;d<a.length;d++){var f=a[d].points;switch(a[d].command){case "L":b.lineTo(f[0],
f[1]);break;case "M":b.moveTo(f[0],f[1]);break;case "C":b.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case "Q":b.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case "A":var g=f[0],k=f[1],l=f[2],h=f[3],m=f[4],n=f[5],p=f[6],f=f[7],r=l>h?l:h,q=l>h?1:l/h,l=l>h?h/l:1;b.translate(g,k);b.rotate(p);b.scale(q,l);b.arc(0,0,r,m,m+n,1-f);b.scale(1/q,1/l);b.rotate(-p);b.translate(-g,-k);break;case "z":b.closePath(),e=!0}}e?b.fillStrokeShape(this):b.strokeShape(this)}};Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape);
Kinetic.Path.getLineLength=function(b,a,e,d){return Math.sqrt((e-b)*(e-b)+(d-a)*(d-a))};Kinetic.Path.getPointOnLine=function(b,a,e,d,f,g,k){void 0===g&&(g=a);void 0===k&&(k=e);var l=(f-e)/(d-a+1E-8),h=Math.sqrt(b*b/(1+l*l));a>d&&(h*=-1);var m=l*h;if(d===a)a={x:g,y:k+m};else if((k-e)/(g-a+1E-8)===l)a={x:g+h,y:k+m};else{m=this.getLineLength(a,e,d,f);if(1E-8>m)return;h=((g-a)*(d-a)+(k-e)*(f-e))/(m*m);m=a+h*(d-a);e+=h*(f-e);g=this.getLineLength(g,k,m,e);b=Math.sqrt(b*b-g*g);h=Math.sqrt(b*b/(1+l*l));a>
d&&(h*=-1);a={x:m+h,y:e+l*h}}return a};Kinetic.Path.getPointOnCubicBezier=function(b,a,e,d,f,g,k,l,h){return{x:l*b*b*b+3*g*b*b*(1-b)+3*d*b*(1-b)*(1-b)+a*(1-b)*(1-b)*(1-b),y:h*b*b*b+3*k*b*b*(1-b)+3*f*b*(1-b)*(1-b)+e*(1-b)*(1-b)*(1-b)}};Kinetic.Path.getPointOnQuadraticBezier=function(b,a,e,d,f,g,k){return{x:g*b*b+2*d*b*(1-b)+a*(1-b)*(1-b),y:k*b*b+2*f*b*(1-b)+e*(1-b)*(1-b)}};Kinetic.Path.getPointOnEllipticalArc=function(b,a,e,d,f,g){var k=Math.cos(g);g=Math.sin(g);e*=Math.cos(f);d*=Math.sin(f);return{x:b+
(e*k-d*g),y:a+(e*g+d*k)}};Kinetic.Path.parsePathData=function(b){if(!b)return[];var a,e="mMlLvVhHzZcCqQtTsSaA".split("");a=b.replace(/ /g,",");for(b=0;b<e.length;b++)a=a.replace(new RegExp(e[b],"g"),"|"+e[b]);e=a.split("|");a=[];var d=0,f=0;for(b=1;b<e.length;b++){var g=e[b],k=g.charAt(0),g=g.slice(1),g=g.replace(/,-/g,"-"),g=g.replace(/-/g,",-"),g=g.replace(/e,-/g,"e-"),g=g.split(",");0<g.length&&""===g[0]&&g.shift();for(var l=0;l<g.length;l++)g[l]=parseFloat(g[l]);for(;0<g.length&&!isNaN(g[0]);){var h,
m,n,p,r,q,t,v;h=null;p=[];var l=d,y=f;switch(k){case "l":d+=g.shift();f+=g.shift();h="L";p.push(d,f);break;case "L":d=g.shift();f=g.shift();p.push(d,f);break;case "m":k=g.shift();m=g.shift();if(d+=k,f+=m,h="M",2<a.length&&"z"===a[a.length-1].command)for(n=a.length-2;0<=n;n--)if("M"===a[n].command){d=a[n].points[0]+k;f=a[n].points[1]+m;break}p.push(d,f);k="l";break;case "M":d=g.shift();f=g.shift();h="M";p.push(d,f);k="L";break;case "h":d+=g.shift();h="L";p.push(d,f);break;case "H":d=g.shift();h="L";
p.push(d,f);break;case "v":f+=g.shift();h="L";p.push(d,f);break;case "V":f=g.shift();h="L";p.push(d,f);break;case "C":p.push(g.shift(),g.shift(),g.shift(),g.shift());d=g.shift();f=g.shift();p.push(d,f);break;case "c":p.push(d+g.shift(),f+g.shift(),d+g.shift(),f+g.shift());d+=g.shift();f+=g.shift();h="C";p.push(d,f);break;case "S":m=d;n=f;h=a[a.length-1];"C"===h.command&&(m=d+(d-h.points[2]),n=f+(f-h.points[3]));p.push(m,n,g.shift(),g.shift());d=g.shift();f=g.shift();h="C";p.push(d,f);break;case "s":m=
d;n=f;h=a[a.length-1];"C"===h.command&&(m=d+(d-h.points[2]),n=f+(f-h.points[3]));p.push(m,n,d+g.shift(),f+g.shift());d+=g.shift();f+=g.shift();h="C";p.push(d,f);break;case "Q":p.push(g.shift(),g.shift());d=g.shift();f=g.shift();p.push(d,f);break;case "q":p.push(d+g.shift(),f+g.shift());d+=g.shift();f+=g.shift();h="Q";p.push(d,f);break;case "T":m=d;n=f;h=a[a.length-1];"Q"===h.command&&(m=d+(d-h.points[0]),n=f+(f-h.points[1]));d=g.shift();f=g.shift();h="Q";p.push(m,n,d,f);break;case "t":m=d;n=f;h=a[a.length-
1];"Q"===h.command&&(m=d+(d-h.points[0]),n=f+(f-h.points[1]));d+=g.shift();f+=g.shift();h="Q";p.push(m,n,d,f);break;case "A":p=g.shift();m=g.shift();n=g.shift();r=g.shift();q=g.shift();t=d;v=f;d=g.shift();f=g.shift();h="A";p=this.convertEndpointToCenterParameterization(t,v,d,f,r,q,p,m,n);break;case "a":p=g.shift(),m=g.shift(),n=g.shift(),r=g.shift(),q=g.shift(),t=d,v=f,d+=g.shift(),f+=g.shift(),h="A",p=this.convertEndpointToCenterParameterization(t,v,d,f,r,q,p,m,n)}a.push({command:h||k,points:p,start:{x:l,
y:y},pathLength:this.calcLength(l,y,h||k,p)})}"z"!==k&&"Z"!==k||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a};Kinetic.Path.calcLength=function(b,a,e,d){var f,g,k,l=Kinetic.Path;switch(e){case "L":return l.getLineLength(b,a,d[0],d[1]);case "C":e=0;f=l.getPointOnCubicBezier(0,b,a,d[0],d[1],d[2],d[3],d[4],d[5]);for(k=.01;1>=k;k+=.01)g=l.getPointOnCubicBezier(k,b,a,d[0],d[1],d[2],d[3],d[4],d[5]),e+=l.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case "Q":e=0;f=l.getPointOnQuadraticBezier(0,
b,a,d[0],d[1],d[2],d[3]);for(k=.01;1>=k;k+=.01)g=l.getPointOnQuadraticBezier(k,b,a,d[0],d[1],d[2],d[3]),e+=l.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case "A":e=0;k=d[4];var h=d[5];b=d[4]+h;a=Math.PI/180;if(Math.abs(k-b)<a&&(a=Math.abs(k-b)),f=l.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],k,0),0>h)for(k-=a;k>b;k-=a)g=l.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],k,0),e+=l.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(k+=a;b>k;k+=a)g=l.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],k,0),e+=l.getLineLength(f.x,
f.y,g.x,g.y),f=g;return g=l.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],b,0),e+l.getLineLength(f.x,f.y,g.x,g.y)}return 0};Kinetic.Path.convertEndpointToCenterParameterization=function(b,a,e,d,f,g,k,l,h){h*=Math.PI/180;var m=Math.cos(h)*(b-e)/2+Math.sin(h)*(a-d)/2,n=-1*Math.sin(h)*(b-e)/2+Math.cos(h)*(a-d)/2,p=m*m/(k*k)+n*n/(l*l);1<p&&(k*=Math.sqrt(p),l*=Math.sqrt(p));p=Math.sqrt((k*k*l*l-k*k*n*n-l*l*m*m)/(k*k*n*n+l*l*m*m));f===g&&(p*=-1);isNaN(p)&&(p=0);f=p*k*n/l;p=p*-l*m/k;b=(b+e)/2+Math.cos(h)*
f-Math.sin(h)*p;a=(a+d)/2+Math.sin(h)*f+Math.cos(h)*p;var r=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(a[0]*a[0]+a[1]*a[1])*Math.sqrt(b[0]*b[0]+b[1]*b[1]))},q=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(r(a,b))};d=q([1,0],[(m-f)/k,(n-p)/l]);e=[(m-f)/k,(n-p)/l];m=[(-1*m-f)/k,(-1*n-p)/l];n=q(e,m);return-1>=r(e,m)&&(n=Math.PI),1<=r(e,m)&&(n=0),0===g&&0<n&&(n-=2*Math.PI),1===g&&0>n&&(n+=2*Math.PI),[b,a,k,l,d,n,h,g]};Kinetic.Factory.addGetterSetter(Kinetic.Path,"data");Kinetic.Collection.mapMethods(Kinetic.Path)})();
(function(){function b(a){a.fillText(this.partialText,0,0)}function a(a){a.strokeText(this.partialText,0,0)}Kinetic.TextPath=function(a){this.___init(a)};Kinetic.TextPath.prototype={___init:function(e){var d=this;this.dummyCanvas=Kinetic.Util.createCanvasElement();this.dataArray=[];Kinetic.Shape.call(this,e);this._fillFunc=b;this._strokeFunc=a;this._fillFuncHit=b;this._strokeFuncHit=a;this.className="TextPath";this.dataArray=Kinetic.Path.parsePathData(this.attrs.data);this.on("dataChange.kinetic",
function(){d.dataArray=Kinetic.Path.parsePathData(this.attrs.data)});this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",d._setTextData);d._setTextData();this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.setAttr("font",this._getContextFont());a.setAttr("textBaseline","middle");a.setAttr("textAlign","left");a.save();for(var b=this.glyphInfo,f=0;f<b.length;f++){a.save();var g=b[f].p0;a.translate(g.x,g.y);a.rotate(b[f].rotation);this.partialText=b[f].text;a.fillStrokeShape(this);
a.restore()}a.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(a){Kinetic.Text.prototype.setText.call(this,a)},_getTextSize:function(a){var b=this.dummyCanvas.getContext("2d");b.save();b.font=this._getContextFont();a=b.measureText(a);return b.restore(),{width:a.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var a=this,b=this._getTextSize(this.attrs.text);this.textWidth=b.width;this.textHeight=b.height;
this.glyphInfo=[];for(var f,g,k,b=this.attrs.text.split(""),l=-1,h=0,m=function(b){b=a._getTextSize(b).width;var d=0,m=0;for(g=void 0;.01<Math.abs(b-d)/b&&25>m;){m++;for(var p=d;void 0===k;){var n;a:{h=0;n=a.dataArray;for(var r=l+1;r<n.length;r++){if(0<n[r].pathLength){n=(l=r,n[r]);break a}"M"==n[r].command&&(f={x:n[r].points[0],y:n[r].points[1]})}n={}}(k=n)&&p+k.pathLength<b&&(p+=k.pathLength,k=void 0)}if(k==={}||void 0===f)break;p=!1;switch(k.command){case "L":Kinetic.Path.getLineLength(f.x,f.y,
k.points[0],k.points[1])>b?g=Kinetic.Path.getPointOnLine(b,f.x,f.y,k.points[0],k.points[1],f.x,f.y):k=void 0;break;case "A":n=k.points[4];var r=k.points[5],B=k.points[4]+r;0===h?h=n+1E-8:b>d?h+=Math.PI/180*r/Math.abs(r):h-=Math.PI/360*r/Math.abs(r);(0>r&&B>h||0<=r&&h>B)&&(h=B,p=!0);g=Kinetic.Path.getPointOnEllipticalArc(k.points[0],k.points[1],k.points[2],k.points[3],h,k.points[6]);break;case "C":0===h?h=b>k.pathLength?1E-8:b/k.pathLength:b>d?h+=(b-d)/k.pathLength:h-=(d-b)/k.pathLength;1<h&&(h=1,
p=!0);g=Kinetic.Path.getPointOnCubicBezier(h,k.start.x,k.start.y,k.points[0],k.points[1],k.points[2],k.points[3],k.points[4],k.points[5]);break;case "Q":0===h?h=b/k.pathLength:b>d?h+=(b-d)/k.pathLength:h-=(d-b)/k.pathLength,1<h&&(h=1,p=!0),g=Kinetic.Path.getPointOnQuadraticBezier(h,k.start.x,k.start.y,k.points[0],k.points[1],k.points[2],k.points[3])}void 0!==g&&(d=Kinetic.Path.getLineLength(f.x,f.y,g.x,g.y));p&&(k=void 0)}},n=0;n<b.length&&(m(b[n]),void 0!==f&&void 0!==g);n++){var p=Kinetic.Path.getLineLength(f.x,
f.y,g.x,g.y),p=Kinetic.Path.getPointOnLine(0+p/2,f.x,f.y,g.x,g.y),r=Math.atan2(g.y-f.y,g.x-f.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:b[n],rotation:r,p0:f,p1:g});f=g}}};Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont;Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial");Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12);Kinetic.Factory.addGetterSetter(Kinetic.TextPath,
"fontStyle","normal");Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant","normal");Kinetic.Factory.addGetter(Kinetic.TextPath,"text","");Kinetic.Collection.mapMethods(Kinetic.TextPath)})();
(function(){Kinetic.RegularPolygon=function(b){this.___init(b)};Kinetic.RegularPolygon.prototype={___init:function(b){Kinetic.Shape.call(this,b);this.className="RegularPolygon";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var a,e,d,f=this.attrs.sides,g=this.attrs.radius;b.beginPath();b.moveTo(0,0-g);for(a=1;f>a;a++)e=g*Math.sin(2*a*Math.PI/f),d=-1*g*Math.cos(2*a*Math.PI/f),b.lineTo(e,d);b.closePath();b.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,
"radius",0);Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0);Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)})();
(function(){Kinetic.Star=function(b){this.___init(b)};Kinetic.Star.prototype={___init:function(b){Kinetic.Shape.call(this,b);this.className="Star";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var a=this.innerRadius(),e=this.outerRadius(),d=this.numPoints();b.beginPath();b.moveTo(0,0-e);for(var f=1;2*d>f;f++){var g=0===f%2?e:a,k=g*Math.sin(f*Math.PI/d),g=-1*g*Math.cos(f*Math.PI/d);b.lineTo(k,g)}b.closePath();b.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Star,
"numPoints",5);Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0);Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0);Kinetic.Collection.mapMethods(Kinetic.Star)})();
(function(){var b="fontFamily fontSize fontStyle padding lineHeight text".split(" "),a=b.length;Kinetic.Label=function(a){this.____init(a)};Kinetic.Label.prototype={____init:function(a){var b=this;Kinetic.Group.call(this,a);this.className="Label";this.on("add.kinetic",function(a){b._addListeners(a.child);b._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(e){var d,f=this,g=function(){f._sync()};for(d=0;a>d;d++)e.on(b[d]+
"Change.kinetic",g)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var a,b,f,g,k,l,h,m=this.getText(),n=this.getTag();if(m&&n){switch(a=m.getWidth(),b=m.getHeight(),f=n.getPointerDirection(),g=n.getPointerWidth(),h=n.getPointerHeight(),k=0,l=0,f){case "up":k=a/2;l=-1*h;break;case "right":k=a+g;l=b/2;break;case "down":k=a/2;l=b+h;break;case "left":k=-1*g,l=b/2}n.setAttrs({x:-1*k,y:-1*l,width:a,height:b});m.setAttrs({x:-1*
k,y:-1*l})}}};Kinetic.Util.extend(Kinetic.Label,Kinetic.Group);Kinetic.Collection.mapMethods(Kinetic.Label);Kinetic.Tag=function(a){this.___init(a)};Kinetic.Tag.prototype={___init:function(a){Kinetic.Shape.call(this,a);this.className="Tag";this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getWidth(),f=this.getHeight(),g=this.getPointerDirection(),k=this.getPointerWidth(),l=this.getPointerHeight();a.beginPath();a.moveTo(0,0);"up"===g&&(a.lineTo((b-k)/2,0),a.lineTo(b/2,-1*l),a.lineTo((b+
k)/2,0));a.lineTo(b,0);"right"===g&&(a.lineTo(b,(f-l)/2),a.lineTo(b+k,f/2),a.lineTo(b,(f+l)/2));a.lineTo(b,f);"down"===g&&(a.lineTo((b+k)/2,f),a.lineTo(b/2,f+l),a.lineTo((b-k)/2,f));a.lineTo(0,f);"left"===g&&(a.lineTo(0,(f+l)/2),a.lineTo(-1*k,f/2),a.lineTo(0,(f-l)/2));a.closePath();a.fillStrokeShape(this)}};Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape);Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection","none");Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0);Kinetic.Factory.addGetterSetter(Kinetic.Tag,
"pointerHeight",0);Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0);Kinetic.Collection.mapMethods(Kinetic.Tag)})();var ismsie=!1;"Netscape"!=navigator.appName&&0<=navigator.userAgent.indexOf("MSIE")&&(ismsie=!0);var g_arr=[],g_arr_added,g_arr_load_start,g_arr_load_end,g_arr_load_cancel,g_arr_load_progress,g_arr_filesize,g_arr_urlselect,dwv=dwv||{},Kinetic=Kinetic||{};
dwv.App=function(){function b(){p.generateImageData(q);z.setImageData(q);z.draw()}function a(){p.addEventListener("wlchange",dwv.info.updateWindowingDiv);p.addEventListener("wlchange",dwv.info.updateMiniColorMap);p.addEventListener("wlchange",dwv.info.updatePlotMarkings);p.addEventListener("colorchange",dwv.info.updateMiniColorMap);p.addEventListener("positionchange",dwv.info.updatePositionDiv);P=!0}function e(){p.removeEventListener("wlchange",dwv.info.updateWindowingDiv);p.removeEventListener("wlchange",
dwv.info.updateMiniColorMap);p.removeEventListener("wlchange",dwv.info.updatePlotMarkings);p.removeEventListener("colorchange",dwv.info.updateMiniColorMap);p.removeEventListener("positionchange",dwv.info.updatePositionDiv);P=!1}function d(a){var b=!1,d=null,e=null;if("touchstart"===a.type||"touchmove"===a.type)a.preventDefault(),d=dwv.html.getEventOffset(a),a._xs=d[0].x,a._ys=d[0].y,e=m.getImageLayer().displayToIndex(d[0]),a._x=parseInt(e.x,10),a._y=parseInt(e.y,10),2===d.length&&(a._x1s=d[1].x,a._y1s=
d[1].y,e=m.getImageLayer().displayToIndex(d[1]),a._x1=parseInt(e.x,10),a._y1=parseInt(e.y,10)),b=!0;else if("mousemove"===a.type||"mousedown"===a.type||"mouseup"===a.type||"mouseout"===a.type||"mousewheel"===a.type||"dblclick"===a.type||"DOMMouseScroll"===a.type)d=dwv.html.getEventOffset(a),a._xs=d[0].x,a._ys=d[0].y,e=m.getImageLayer().displayToIndex(d[0]),a._x=parseInt(e.x,10),a._y=parseInt(e.y,10),b=!0;else if("keydown"===a.type||"touchend"===a.type)b=!0;b&&(b=m.getToolBox().getSelectedTool()[a.type])&&
b(a)}function f(a){a.stopPropagation();a.preventDefault();if(a=document.getElementById("dropBox"))a.className="hover"}function g(a){a.stopPropagation();a.preventDefault();if(a=document.getElementById("dropBox"))a.className=""}function k(a){a.stopPropagation();a.preventDefault();m.loadFiles(a.dataTransfer.files)}function l(a){a.name&&a.message?alert(a.name+": "+a.message+"."):alert("Error: "+a+".");a.stack&&console.error(a.stack)}function h(b){if(!p){p=b.view;dwv.gui.appendTagsTable(b.info);n=r=p.getImage();
t=n.getSize().getNumberOfColumns();v=n.getSize().getNumberOfRows();b=t;var h=v;z=new dwv.html.Layer("imageLayer");z.initialise(b,h);z.fillContext();z.setStyleDisplay(!0);null!==document.getElementById("drawDiv")&&(B&&(B.destroy(),Kinetic.shapes=[],Kinetic.names=[],Kinetic.stages=[]),B=new Kinetic.Stage({container:"drawDiv",width:b,height:h,listening:!1}));m.resetLayout();m.resize();q=z.getContext().createImageData(t,v);m.addLayerListeners(z.getCanvas());window.removeEventListener("keydown",d,!0);
p.removeEventListener("wlchange",m.onWLChange);p.removeEventListener("colorchange",m.onColorChange);p.removeEventListener("slicechange",m.onSliceChange);window.addEventListener("keydown",d,!0);p.addEventListener("wlchange",m.onWLChange);p.addEventListener("colorchange",m.onColorChange);p.addEventListener("slicechange",m.onSliceChange);if(b=document.getElementById("dropBox"))b.removeEventListener("dragover",f),b.removeEventListener("dragleave",g),b.removeEventListener("drop",k),dwv.html.removeNode("dropBox"),
b=document.getElementById("layerContainer"),b.addEventListener("dragover",f),b.addEventListener("dragleave",g),b.addEventListener("drop",k);document.getElementById("infoLayer")&&(dwv.info.createWindowingDiv(),dwv.info.createPositionDiv(),dwv.info.createMiniColorMap(),dwv.info.createPlot(),e(),a());F.init();F.display(!0);m.initWLDisplay()}}var m=this,n=null,p=null,r=null,q=null,t=0,v=0,y=1,z=null,D=[],B=null,P=!1,F=new dwv.tool.ToolBox(this),J=new dwv.tool.UndoStack;this.getVersion=function(){return"v0.8.0beta"};
this.getImage=function(){return n};this.getView=function(){return p};this.setImage=function(a){n=a;p.setImage(a)};this.restoreOriginalImage=function(){n=r;p.setImage(r)};this.getImageData=function(){return q};this.getToolBox=function(){return F};this.getImageLayer=function(){return z};this.getDrawLayer=function(){return D[p.getCurrentPosition().k]};this.getDrawStage=function(){return B};this.getUndoStack=function(){return J};this.init=function(){window.onresize=this.resize;var a=document.getElementById("dropBox");
a&&(a.addEventListener("dragover",f),a.addEventListener("dragleave",g),a.addEventListener("drop",k),a=2*dwv.gui.getWindowSize().height/3,$("#dropBox").height(a),$("#dropBox").width(a));"undefined"===typeof skipLoadUrl?(a=dwv.html.getUriParam())&&0<a.length&&this.loadURL(a):console.log("Not loading url from adress since skipLoadUrl is defined.")};this.reset=function(){F.reset();B&&(D=[]);p=n=null;J=new dwv.tool.UndoStack;dwv.gui.cleanUndoHtml()};this.resetLayout=function(){z&&(z.resetLayout(y),z.draw());
B&&(B.offset({x:0,y:0}),B.scale({x:y,y:y}),B.draw())};this.onKeydown=function(a){90===a.keyCode&&a.ctrlKey?J.undo():89===a.keyCode&&a.ctrlKey&&J.redo()};this.onChangeFiles=function(a){this.loadFiles(a.target.files)};this.load_arr=function(a){if(a=g_arr[a]){this.reset();var b=!0;n&&(n.appendSlice(a.view.getImage()),b=!1);h(a);B&&(a=new Kinetic.Layer({listening:!1,hitGraphEnabled:!1,visible:b}),D.push(a),B.add(a))}};var N=0;this.loadFiles=function(a){this.reset();var b=new dwv.io.File;b.onload=function(b){if(0<
a.length){var d=a[0].name;1<a.length&&(d+=" (+"+a.length+")");b.info.filename=d}N++;b.id=N;g_arr.push(b);g_arr_added&&g_arr_added(b);d=!0;n&&(n.appendSlice(b.view.getImage()),d=!1);h(b);B&&(b=new Kinetic.Layer({listening:!1,hitGraphEnabled:!1,visible:d}),D.push(b),B.add(b))};b.onerror=function(a){l(a)};b.load(a)};this.onChangeURL=function(a){this.loadURL([a.target.value])};this.loadURL=function(a,b,d){this.reset();g_arr_filesize=d;g_arr_load_start&&g_arr_load_start();d=new dwv.io.Url;d.onload=function(a){g_arr_load_end&&
g_arr_load_end();b&&(a.info.filename=b);N++;a.id=N;g_arr.push(a);g_arr_added&&g_arr_added(a);var d=!0;n&&(n.appendSlice(a.view.getImage()),d=!1);h(a);B&&(a=new Kinetic.Layer({listening:!1,hitGraphEnabled:!1,visible:d}),D.push(a),B.add(a))};d.onerror=function(a){g_arr_load_end&&g_arr_load_end();l(a)};d.load(a)};this.onWLChange=function(){b()};this.onColorChange=function(){b()};this.onSliceChange=function(){b();if(B){for(var a=0;a<D.length;++a)D[a].visible(!1);a=D[p.getCurrentPosition().k];a.visible(!0);
a.draw()}};this.resize=function(){var a=dwv.gui.getWindowSize();$("#main").width(a.width-162);var b=parseInt(y*t,10);if(0!=b){y=Math.min(a.width/t,a.height/v);var a=parseInt(y*t,10),d=parseInt(y*v,10),b=a/b;$("#layerContainer").width(a);$("#layerContainer").height(d+1);$("#dchistory").height(d-100);if(z){var e=z.getZoom().x*b,f=z.getZoom().y*b;z.setWidth(a);z.setHeight(d);z.zoom(e,f,0,0);z.draw()}B&&($("#drawDiv").width(a),$("#drawDiv").height(d),e=B.scale().x*b,b*=B.scale().y,B.setWidth(a),B.setHeight(d),
B.scale({x:e,y:b}),B.draw())}};this.toggleInfoLayerDisplay=function(){dwv.html.toggleDisplay("infoLayer");P?e():a()};this.initWLDisplay=function(){var a=Object.keys(dwv.tool.presets);dwv.tool.updateWindowingData(dwv.tool.presets[a[0]].center,dwv.tool.presets[a[0]].width);dwv.tool.updatePostionValue(0,0)};this.addLayerListeners=function(a){a.setAttribute("style","pointer-events: auto;");ismsie&&"CANVAS"==a.tagName&&(a=a.parentNode);a.addEventListener("mousedown",d);a.addEventListener("mousemove",d);
a.addEventListener("mouseup",d);a.addEventListener("mouseout",d);a.addEventListener("mousewheel",d);a.addEventListener("DOMMouseScroll",d);a.addEventListener("dblclick",d);a.addEventListener("touchstart",d);a.addEventListener("touchmove",d);a.addEventListener("touchend",d)};this.removeLayerListeners=function(a){a.setAttribute("style","pointer-events: none;");ismsie&&"CANVAS"==a.tagName&&(a=a.parentNode);a.removeEventListener("mousedown",d);a.removeEventListener("mousemove",d);a.removeEventListener("mouseup",
d);a.removeEventListener("mouseout",d);a.removeEventListener("mousewheel",d);a.removeEventListener("DOMMouseScroll",d);a.removeEventListener("dblclick",d);a.removeEventListener("touchstart",d);a.removeEventListener("touchmove",d);a.removeEventListener("touchend",d)};this.render=function(){b()}};dwv=dwv||{};dwv.dicom=dwv.dicom||{};
dwv.dicom.DataReader=function(b,a){"undefined"===typeof a&&(a=!0);var e=0<(new Int8Array((new Int16Array([1])).buffer))[0],d=a!==e,f=new DataView(b);this.flipArrayEndianness=function(a){var b=a.byteLength,d=new Uint8Array(a.buffer,a.byteOffset,b);a=a.BYTES_PER_ELEMENT;for(var e,f=0;f<b;f+=a)for(var n=f+a-1,p=f;n>p;n--,p++)e=d[p],d[p]=d[n],d[n]=e};this.readUint8=function(b){return f.getUint8(b,a)};this.readUint16=function(b){return f.getUint16(b,a)};this.readUint32=function(b){return f.getUint32(b,
a)};this.readFloat32=function(b){return f.getFloat32(b,a)};this.readUint8Array=function(a,d){return new Uint8Array(b,a,d)};this.readUint16Array=function(a,e){var f=new Uint16Array(b,a,e/2);d&&this.flipArrayEndianness(f);return f};this.readUint32Array=function(a,e){var f=Math.floor(e/4),h=null;if(0===a%4)h=new Uint32Array(b,a,f),d&&this.flipArrayEndianness(h);else for(var h=new Uint32Array(f),m=0;m<f;++m)h[m]=this.readUint32(a+4*m);return h};this.readHex=function(a){a=this.readUint16(a).toString(16);
return"0x0000".substr(0,6-a.length)+a.toUpperCase()};this.readString=function(a,b){for(var d="",e=this.readUint8Array(a,b),f=0;f<b;++f)d+=String.fromCharCode(e[f]);return d}};dwv.dicom.isJpegTransferSyntax=function(b){return null!==b.match(/1.2.840.10008.1.2.4.5/)||null!==b.match(/1.2.840.10008.1.2.4.6/)||null!==b.match(/1.2.840.10008.1.2.4.7/)};dwv.dicom.isJpegBaselineTransferSyntax=function(b){return"1.2.840.10008.1.2.4.50"===b||"1.2.840.10008.1.2.4.51"===b};
dwv.dicom.isJpegLosslessTransferSyntax=function(b){return"1.2.840.10008.1.2.4.57"===b||"1.2.840.10008.1.2.4.70"===b};dwv.dicom.isJpeglsTransferSyntax=function(b){return null!==b.match(/1.2.840.10008.1.2.4.8/)};dwv.dicom.isJpeg2000TransferSyntax=function(b){return null!==b.match(/1.2.840.10008.1.2.4.9/)};dwv.dicom.DicomParser=function(){this.dicomElements={};this.pixelBuffer=[];var b=0;this.getNextUnknownCount=function(){b++;return b}};dwv.dicom.DicomParser.prototype.getDicomElements=function(){return this.dicomElements};
dwv.dicom.DicomParser.prototype.getPixelBuffer=function(){return this.pixelBuffer};
dwv.dicom.DicomParser.prototype.appendDicomElement=function(b,a){if("undefined"===typeof a||0===a.length)this.dicomElements[b.name]={group:b.group,element:b.element,vr:b.vr,vl:b.vl,value:b.value};else if("Item"!==b.name&&"ItemDelimitationItem"!==b.name&&"SequenceDelimitationItem"!==b.name){for(var e=a[0].name,d=a[0].itemNumber,f=this.dicomElements,g=1;g<a.length;++g)"undefined"!==typeof f[e].value[d]&&(f=f[e].value[d]),e=a[g].name,d=a[g].itemNumber;this.appendElementToSequence(f,e,d,b)}};
dwv.dicom.DicomParser.prototype.appendElementToSequence=function(b,a,e,d){"undefined"===typeof b[a]?b[a]={group:d.group,element:d.element,vr:d.vr,vl:d.vl,value:[]}:("undefined"===typeof b[a].value[e]&&(b[a].value[e]={}),b[a].value[e][d.name]={group:d.group,element:d.element,vr:d.vr,vl:d.vl,value:d.value})};
dwv.dicom.DicomParser.prototype.readTag=function(b,a){var e=b.readHex(a),d=b.readHex(a+2),f="UN",g=null,g=dwv.dicom.dictionary;"undefined"!==typeof g[e]&&"undefined"!==typeof g[e][d]?(f=g[e][d][0],g=g[e][d][2]):g="dwv::unknown"+this.getNextUnknownCount().toString();return{group:e,element:d,name:g,vr:f}};
dwv.dicom.DicomParser.prototype.readDataElement=function(b,a,e){var d=this.readTag(b,a),f="",g=0,k=0,l=0,h=!1;"0xFFFE"===d.group?(f="N/A",k=0,g=b.readUint32(a+4),l=4):e?(f="UN",g=dwv.dicom.dictionary,"undefined"!==typeof g[d.group]&&"undefined"!==typeof g[d.group][d.element]&&(f=dwv.dicom.dictionary[d.group][d.element][0]),h="O"===f[0].toUpperCase(),k=0,g=b.readUint32(a+4+k),l=4):(f=b.readString(a+4,2),h="O"===f[0].toUpperCase(),k=2,h||"SQ"===f||"UN"===f||"UT"===f?(g=b.readUint32(a+4+k+2),l=6):(g=
b.readUint16(a+4+k),l=2));e="US"===f||"UL"===f||"UT"===f;var m=g;4294967295===g&&(m="u/l",g=0);var n=null;a=a+4+k+l;"N/A"===f?n=b.readUint8Array(a,g):e?"US"===f?n=b.readUint16Array(a,g):("UT"===f&&console.log(f),n=b.readUint32Array(a,g)):h?("OX"===f&&console.warn("OX value representation for tag: "+d.name+"."),n="OB"===f||"undefined"!==typeof this.dicomElements.BitsAllocated&&8===this.dicomElements.BitsAllocated.value[0]?b.readUint8Array(a,g):b.readUint16Array(a,g)):(n=b.readString(a,g),n=n.split("\\"));
return{tag:d,vr:f,vl:m,data:n,offset:4+k+l+g}};
dwv.dicom.DicomParser.prototype.parse=function(b){function a(){if(!z())if(y){var a=new Uint16Array(y.length+B.pixelBuffer.length);a.set(y,0);a.set(B.pixelBuffer,y.length);B.pixelBuffer=a;if(!z())throw Error(D);}else throw Error(D);}var e=0,d=!1,f=!1,g=!1,k=!1,l=!1,h=!1,m=new dwv.dicom.DataReader(b),n=new dwv.dicom.DataReader(b),e=128;if("DICM"!==m.readString(e,4))throw b="Not a valid DICOM file (no magic DICM word found)","ACR-NEMA"==m.readString(20,8)&&(b="Not a valid DICOM file. This semms to be a ACR-NEMA file."),
Error(b);for(var e=e+4,p=this.readDataElement(m,e),r=parseInt(p.data[0],10),p=e+=p.offset,e=p+r,r=p;r<e;)p=this.readDataElement(m,r,!1),this.appendDicomElement({name:p.tag.name,group:p.tag.group,vr:p.vr,vl:p.vl,element:p.tag.element,value:p.data}),r+=p.offset;var q;this.dicomElements.TransferSyntaxUID&&(q=dwv.utils.cleanString(this.dicomElements.TransferSyntaxUID.value[0]));q||(q="");if("1.2.840.10008.1.2"===q)d=!0;else{if("1.2.840.10008.1.2.1.99"===q)throw Error("Unsupported DICOM transfer syntax (Deflated Explicit VR): "+
q);if("1.2.840.10008.1.2.2"===q)n=new dwv.dicom.DataReader(b,!1);else if(dwv.dicom.isJpegLosslessTransferSyntax(q))k=!0;else if(dwv.dicom.isJpegBaselineTransferSyntax(q))l=!0;else{if(dwv.dicom.isJpegTransferSyntax(q))throw f=!0,Error("Unsupported DICOM transfer syntax (JPEG): "+q);if(dwv.dicom.isJpeglsTransferSyntax(q))throw Error("Unsupported DICOM transfer syntax (JPEG-LS): "+q);if(dwv.dicom.isJpeg2000TransferSyntax(q))console.log("JPEG 2000 compressed DICOM data: "+q),g=!0;else{if("1.2.840.10008.1.2.4.100"===
q)throw Error("Unsupported DICOM transfer syntax (MPEG2): "+q);"1.2.840.10008.1.2.5"===q&&(h=!0)}}}var m=!1,t="";q=0;for(var e=[],v,y;r<b.byteLength;){p=this.readDataElement(n,r,d);t=p.tag.name;q=p.offset;v="u/l"===p.vl?0:p.vl;"SQ"===p.vr&&0!==p.vl&&(e.push({name:t,itemNumber:-1,vl:p.vl,vlCount:0}),q-=v);0!==e.length&&"Item"===t?(e[e.length-1].itemNumber+=1,m||(q-=v)):"SequenceDelimitationItem"===t&&(e=e.slice(0,-1));if(m)if("Item"===t)4===p.data.length?console.log("Skipping Basic Offset Table 1"):
0!==p.data.length&&(v=!1,(l||h||k)&&4<p.data.length&&0==this.pixelBuffer.length&&0==p.data[0]&&0==p.data[1]&&0==p.data[2]&&0==p.data[3]&&(console.log("Skipping Basic Offset Table 2"),v=!0,y=new Uint16Array(p.data.length),y.set(p.data,0)),v||(console.log("Concatenating multiple pixel data items, length: "+p.data.length),v=new Uint16Array(p.data.length+this.pixelBuffer.length),v.set(this.pixelBuffer,0),v.set(p.data,this.pixelBuffer.length),this.pixelBuffer=v));else if("SequenceDelimitationItem"===t)m=
!1;else throw Error("Unexpected tag in encapsulated pixel data: "+p.tag.name);"PixelData"===t&&(0!==p.data.length?this.pixelBuffer=p.data:m=!0);this.appendDicomElement({name:t,group:p.tag.group,vr:p.vr,vl:p.vl,element:p.tag.element,value:p.data},e);if("SQ"!==p.vr&&0!==e.length)for(p=e.length-1,e[p].vlCount+=q;0<e.length&&e[p].vlCount===e[p].vl;)t=e[p].vlCount+8,d||(t+=4),e=e.slice(0,-1),0!==e.length&&(p=e.length-1,e[p].vlCount+=t);r+=q}var z,D,B=this;k?z=function(){try{var a=new Uint8Array(B.pixelBuffer),
b=(new jpeg.lossless.Decoder(a.buffer)).decode();B.pixelBuffer=new Uint16Array(b.buffer);return!0}catch(d){return D="Cannot decode JPEG Lossless (["+d.name+"] "+d.message+")",!1}}:l?z=function(){try{var a=new JpegImage;a.parse(B.pixelBuffer);B.pixelBuffer=a.getData(a.width,a.height);return!0}catch(b){return D="Cannot decode JPEG Baseline (["+b.name+"] "+b.message+")",!1}}:h&&(z=function(){if(!B.dicomElements.Columns)throw Error("Missing DICOM image number of columns");if(!B.dicomElements.Rows)throw Error("Missing DICOM image number of rows");
try{var a=new daikon.RLE,b=new Uint8Array(B.pixelBuffer),d=a.decode(b.buffer,!0,B.dicomElements.Columns.value[0]*B.dicomElements.Rows.value[0]);B.pixelBuffer=new Uint16Array(d.buffer);return!0}catch(e){return D="Cannot decode JPEG RLE (["+e.name+"] "+e.message+")",!1}});if(!f)if(k)a();else if(l)a();else if(h)a();else if(g){b=null;try{b=openjpeg(this.pixelBuffer,"j2k")}catch(P){throw Error("Cannot decode JPEG 2000 (["+P.name+"] "+P.message+")");}this.pixelBuffer=b.data}};
dwv.dicom.DicomParser.prototype.createImage=function(){if(!this.dicomElements.Columns)throw Error("Missing DICOM image number of columns");if(!this.dicomElements.Rows)throw Error("Missing DICOM image number of rows");var b=new dwv.image.Size(this.dicomElements.Columns.value[0],this.dicomElements.Rows.value[0]),a=1,e=1;this.dicomElements.PixelSpacing?(a=parseFloat(this.dicomElements.PixelSpacing.value[0]),e=parseFloat(this.dicomElements.PixelSpacing.value[1])):this.dicomElements.ImagerPixelSpacing&&
(a=parseFloat(this.dicomElements.ImagerPixelSpacing.value[0]),e=parseFloat(this.dicomElements.ImagerPixelSpacing.value[1]));var a=new dwv.image.Spacing(e,a),d;this.dicomElements.TransferSyntaxUID&&(d=dwv.utils.cleanString(this.dicomElements.TransferSyntaxUID.value[0]));d||(d="");d=dwv.dicom.isJpeg2000TransferSyntax(d);e=null;if(d&&16===this.dicomElements.BitsAllocated.value[0])for(var f=b.getSliceSize(),e=new Int16Array(f),g=0,k=0;k<f;++k)e[k]=256*this.pixelBuffer[g]+this.pixelBuffer[g+1],g+=2;else for(e=
new Int16Array(this.pixelBuffer.length),f=!1,this.dicomElements.PixelRepresentation&&1==this.dicomElements.PixelRepresentation.value[0]&&(f=!0),g=0;g<this.pixelBuffer.length;++g)e[g]=this.pixelBuffer[g],f&&e[g]>=Math.pow(2,15)&&(e[g]-=Math.pow(2,16));f=[0,0,0];this.dicomElements.ImagePositionPatient&&(f=[parseFloat(this.dicomElements.ImagePositionPatient.value[0]),parseFloat(this.dicomElements.ImagePositionPatient.value[1]),parseFloat(this.dicomElements.ImagePositionPatient.value[2])]);b=new dwv.image.Image(b,
a,e,[f]);this.dicomElements.PhotometricInterpretation&&(a=dwv.utils.cleanString(this.dicomElements.PhotometricInterpretation.value[0]).toUpperCase(),d&&a.match(/YBR/)&&(a="RGB"),b.setPhotometricInterpretation(a));this.dicomElements.PlanarConfiguration&&(a=this.dicomElements.PlanarConfiguration.value[0],d&&(a=1),b.setPlanarConfiguration(a));this.dicomElements.RescaleSlope&&b.setRescaleSlope(parseFloat(this.dicomElements.RescaleSlope.value[0]));this.dicomElements.RescaleIntercept&&b.setRescaleIntercept(parseFloat(this.dicomElements.RescaleIntercept.value[0]));
d={};this.dicomElements.Modality&&(d.Modality=this.dicomElements.Modality.value[0]);this.dicomElements.StudyInstanceUID&&(d.StudyInstanceUID=this.dicomElements.StudyInstanceUID.value[0]);this.dicomElements.SeriesInstanceUID&&(d.SeriesInstanceUID=this.dicomElements.SeriesInstanceUID.value[0]);this.dicomElements.BitsStored&&(d.BitsStored=parseInt(this.dicomElements.BitsStored.value[0],10));b.setMeta(d);d=0;this.dicomElements.PixelRepresentation&&(d=this.dicomElements.PixelRepresentation.value[0]);b=
new dwv.image.View(b,d);d=[];if(this.dicomElements.WindowCenter&&this.dicomElements.WindowWidth)for(e=0;e<this.dicomElements.WindowCenter.value.length;++e)f=parseFloat(this.dicomElements.WindowWidth.value[e],10),0!==f&&(a=this.dicomElements.WindowCenterWidthExplanation?this.dicomElements.WindowCenterWidthExplanation.value[e]:"Default"+e,d.push({center:parseFloat(this.dicomElements.WindowCenter.value[e],10),width:f,name:a}));0!==d.length?b.setWindowPresets(d):b.setWindowLevelMinMax();return b};
dwv=dwv||{};dwv.dicom=dwv.dicom||{};
dwv.dicom.dictionary={"0x0000":{"0x0000":["UL","1","GroupLength"],"0x0001":["UL","1","CommandLengthToEnd"],"0x0002":["UI","1","AffectedSOPClassUID"],"0x0003":["UI","1","RequestedSOPClassUID"],"0x0010":["CS","1","CommandRecognitionCode"],"0x0100":["US","1","CommandField"],"0x0110":["US","1","MessageID"],"0x0120":["US","1","MessageIDBeingRespondedTo"],"0x0200":["AE","1","Initiator"],"0x0300":["AE","1","Receiver"],"0x0400":["AE","1","FindLocation"],"0x0600":["AE","1","MoveDestination"],"0x0700":["US",
"1","Priority"],"0x0800":["US","1","DataSetType"],"0x0850":["US","1","NumberOfMatches"],"0x0860":["US","1","ResponseSequenceNumber"],"0x0900":["US","1","Status"],"0x0901":["AT","1-n","OffendingElement"],"0x0902":["LO","1","ErrorComment"],"0x0903":["US","1","ErrorID"],"0x0904":["OT","1-n","ErrorInformation"],"0x1000":["UI","1","AffectedSOPInstanceUID"],"0x1001":["UI","1","RequestedSOPInstanceUID"],"0x1002":["US","1","EventTypeID"],"0x1003":["OT","1-n","EventInformation"],"0x1005":["AT","1-n","AttributeIdentifierList"],
"0x1007":["AT","1-n","ModificationList"],"0x1008":["US","1","ActionTypeID"],"0x1009":["OT","1-n","ActionInformation"],"0x1013":["UI","1-n","SuccessfulSOPInstanceUIDList"],"0x1014":["UI","1-n","FailedSOPInstanceUIDList"],"0x1015":["UI","1-n","WarningSOPInstanceUIDList"],"0x1020":["US","1","NumberOfRemainingSuboperations"],"0x1021":["US","1","NumberOfCompletedSuboperations"],"0x1022":["US","1","NumberOfFailedSuboperations"],"0x1023":["US","1","NumberOfWarningSuboperations"],"0x1030":["AE","1","MoveOriginatorApplicationEntityTitle"],
"0x1031":["US","1","MoveOriginatorMessageID"],"0x4000":["AT","1","DialogReceiver"],"0x4010":["AT","1","TerminalType"],"0x5010":["SH","1","MessageSetID"],"0x5020":["SH","1","EndMessageSet"],"0x5110":["AT","1","DisplayFormat"],"0x5120":["AT","1","PagePositionID"],"0x5130":["CS","1","TextFormatID"],"0x5140":["CS","1","NormalReverse"],"0x5150":["CS","1","AddGrayScale"],"0x5160":["CS","1","Borders"],"0x5170":["IS","1","Copies"],"0x5180":["CS","1","OldMagnificationType"],"0x5190":["CS","1","Erase"],"0x51A0":["CS",
"1","Print"],"0x51B0":["US","1-n","Overlays"]},"0x0002":{"0x0000":["UL","1","FileMetaInformationGroupLength"],"0x0001":["OB","1","FileMetaInformationVersion"],"0x0002":["UI","1","MediaStorageSOPClassUID"],"0x0003":["UI","1","MediaStorageSOPInstanceUID"],"0x0010":["UI","1","TransferSyntaxUID"],"0x0012":["UI","1","ImplementationClassUID"],"0x0013":["SH","1","ImplementationVersionName"],"0x0016":["AE","1","SourceApplicationEntityTitle"],"0x0100":["UI","1","PrivateInformationCreatorUID"],"0x0102":["OB",
"1","PrivateInformation"]},"0x0004":{"0x0000":["UL","1","FileSetGroupLength"],"0x1130":["CS","1","FileSetID"],"0x1141":["CS","8","FileSetDescriptorFileID"],"0x1142":["CS","1","FileSetCharacterSet"],"0x1200":["UL","1","RootDirectoryFirstRecord"],"0x1202":["UL","1","RootDirectoryLastRecord"],"0x1212":["US","1","FileSetConsistencyFlag"],"0x1220":["SQ","1","DirectoryRecordSequence"],"0x1400":["UL","1","NextDirectoryRecordOffset"],"0x1410":["US","1","RecordInUseFlag"],"0x1420":["UL","1","LowerLevelDirectoryOffset"],
"0x1430":["CS","1","DirectoryRecordType"],"0x1432":["UI","1","PrivateRecordUID"],"0x1500":["CS","8","ReferencedFileID"],"0x1504":["UL","1","DirectoryRecordOffset"],"0x1510":["UI","1","ReferencedSOPClassUIDInFile"],"0x1511":["UI","1","ReferencedSOPInstanceUIDInFile"],"0x1512":["UI","1","ReferencedTransferSyntaxUIDInFile"],"0x1600":["UL","1","NumberOfReferences"]},"0x0008":{"0x0000":["UL","1","IdentifyingGroupLength"],"0x0001":["UL","1","LengthToEnd"],"0x0005":["CS","1","SpecificCharacterSet"],"0x0008":["CS",
"1-n","ImageType"],"0x000A":["US","1","SequenceItemNumber"],"0x0010":["CS","1","RecognitionCode"],"0x0012":["DA","1","InstanceCreationDate"],"0x0013":["TM","1","InstanceCreationTime"],"0x0014":["UI","1","InstanceCreatorUID"],"0x0016":["UI","1","SOPClassUID"],"0x0018":["UI","1","SOPInstanceUID"],"0x0020":["DA","1","StudyDate"],"0x0021":["DA","1","SeriesDate"],"0x0022":["DA","1","AcquisitionDate"],"0x0023":["DA","1","ImageDate"],"0x0024":["DA","1","OverlayDate"],"0x0025":["DA","1","CurveDate"],"0x002A":["DT",
"1","AcquisitionDatetime"],"0x0030":["TM","1","StudyTime"],"0x0031":["TM","1","SeriesTime"],"0x0032":["TM","1","AcquisitionTime"],"0x0033":["TM","1","ImageTime"],"0x0034":["TM","1","OverlayTime"],"0x0035":["TM","1","CurveTime"],"0x0040":["US","1","OldDataSetType"],"0x0041":["LT","1","OldDataSetSubtype"],"0x0042":["CS","1","NuclearMedicineSeriesType"],"0x0050":["SH","1","AccessionNumber"],"0x0052":["CS","1","QueryRetrieveLevel"],"0x0054":["AE","1-n","RetrieveAETitle"],"0x0058":["UI","1-n","DataSetFailedSOPInstanceUIDList"],
"0x0060":["CS","1","Modality"],"0x0061":["CS","1-n","ModalitiesInStudy"],"0x0064":["CS","1","ConversionType"],"0x0068":["CS","1","PresentationIntentType"],"0x0070":["LO","1","Manufacturer"],"0x0080":["LO","1","InstitutionName"],"0x0081":["ST","1","InstitutionAddress"],"0x0082":["SQ","1","InstitutionCodeSequence"],"0x0090":["PN","1","ReferringPhysicianName"],"0x0092":["ST","1","ReferringPhysicianAddress"],"0x0094":["SH","1-n","ReferringPhysicianTelephoneNumber"],"0x0100":["SH","1","CodeValue"],"0x0102":["SH",
"1","CodingSchemeDesignator"],"0x0103":["SH","1","CodingSchemeVersion"],"0x0104":["LO","1","CodeMeaning"],"0x0105":["CS","1","MappingResource"],"0x0106":["DT","1","ContextGroupVersion"],"0x0107":["DT","1","ContextGroupLocalVersion"],"0x010B":["CS","1","CodeSetExtensionFlag"],"0x010C":["UI","1","PrivateCodingSchemeCreatorUID"],"0x010D":["UI","1","CodeSetExtensionCreatorUID"],"0x010F":["CS","1","ContextIdentifier"],"0x0201":["SH","1","TimezoneOffsetFromUTC"],"0x1000":["AE","1","NetworkID"],"0x1010":["SH",
"1","StationName"],"0x1030":["LO","1","StudyDescription"],"0x1032":["SQ","1","ProcedureCodeSequence"],"0x103E":["LO","1","SeriesDescription"],"0x1040":["LO","1","InstitutionalDepartmentName"],"0x1048":["PN","1-n","PhysicianOfRecord"],"0x1050":["PN","1-n","PerformingPhysicianName"],"0x1060":["PN","1-n","PhysicianReadingStudy"],"0x1070":["PN","1-n","OperatorName"],"0x1080":["LO","1-n","AdmittingDiagnosisDescription"],"0x1084":["SQ","1","AdmittingDiagnosisCodeSequence"],"0x1090":["LO","1","ManufacturerModelName"],
"0x1100":["SQ","1","ReferencedResultsSequence"],"0x1110":["SQ","1","ReferencedStudySequence"],"0x1111":["SQ","1","ReferencedStudyComponentSequence"],"0x1115":["SQ","1","ReferencedSeriesSequence"],"0x1120":["SQ","1","ReferencedPatientSequence"],"0x1125":["SQ","1","ReferencedVisitSequence"],"0x1130":["SQ","1","ReferencedOverlaySequence"],"0x1140":["SQ","1","ReferencedImageSequence"],"0x1145":["SQ","1","ReferencedCurveSequence"],"0x114A":["SQ","1","ReferencedInstanceSequence"],"0x114B":["LO","1","ReferenceDescription"],
"0x1150":["UI","1","ReferencedSOPClassUID"],"0x1155":["UI","1","ReferencedSOPInstanceUID"],"0x115A":["UI","1-n","SOPClassesSupported"],"0x1160":["IS","1","ReferencedFrameNumber"],"0x1195":["UI","1","TransactionUID"],"0x1197":["US","1","FailureReason"],"0x1198":["SQ","1","FailedSOPSequence"],"0x1199":["SQ","1","ReferencedSOPSequence"],"0x2110":["CS","1","LossyImageCompression"],"0x2111":["ST","1","DerivationDescription"],"0x2112":["SQ","1","SourceImageSequence"],"0x2120":["SH","1","StageName"],"0x2122":["IS",
"1","StageNumber"],"0x2124":["IS","1","NumberOfStages"],"0x2128":["IS","1","ViewNumber"],"0x2129":["IS","1","NumberOfEventTimers"],"0x212A":["IS","1","NumberOfViewsInStage"],"0x2130":["DS","1-n","EventElapsedTime"],"0x2132":["LO","1-n","EventTimerName"],"0x2142":["IS","1","StartTrim"],"0x2143":["IS","1","StopTrim"],"0x2144":["IS","1","RecommendedDisplayFrameRate"],"0x2200":["CS","1","TransducerPosition"],"0x2204":["CS","1","TransducerOrientation"],"0x2208":["CS","1","AnatomicStructure"],"0x2218":["SQ",
"1","AnatomicRegionSequence"],"0x2220":["SQ","1","AnatomicRegionModifierSequence"],"0x2228":["SQ","1","PrimaryAnatomicStructureSequence"],"0x2229":["SQ","1","AnatomicStructureSpaceOrRegionSequence"],"0x2230":["SQ","1","PrimaryAnatomicStructureModifierSequence"],"0x2240":["SQ","1","TransducerPositionSequence"],"0x2242":["SQ","1","TransducerPositionModifierSequence"],"0x2244":["SQ","1","TransducerOrientationSequence"],"0x2246":["SQ","1","TransducerOrientationModifierSequence"],"0x4000":["LT","1-n",
"IdentifyingComments"]},"0x0010":{"0x0000":["UL","1","PatientGroupLength"],"0x0010":["PN","1","PatientName"],"0x0020":["LO","1","PatientID"],"0x0021":["LO","1","IssuerOfPatientID"],"0x0030":["DA","1","PatientBirthDate"],"0x0032":["TM","1","PatientBirthTime"],"0x0040":["CS","1","PatientSex"],"0x0050":["SQ","1","PatientInsurancePlanCodeSequence"],"0x1000":["LO","1-n","OtherPatientID"],"0x1001":["PN","1-n","OtherPatientName"],"0x1005":["PN","1","PatientBirthName"],"0x1010":["AS","1","PatientAge"],"0x1020":["DS",
"1","PatientSize"],"0x1030":["DS","1","PatientWeight"],"0x1040":["LO","1","PatientAddress"],"0x1050":["LT","1-n","InsurancePlanIdentification"],"0x1060":["PN","1","PatientMotherBirthName"],"0x1080":["LO","1","MilitaryRank"],"0x1081":["LO","1","BranchOfService"],"0x1090":["LO","1","MedicalRecordLocator"],"0x2000":["LO","1-n","MedicalAlerts"],"0x2110":["LO","1-n","ContrastAllergies"],"0x2150":["LO","1","CountryOfResidence"],"0x2152":["LO","1","RegionOfResidence"],"0x2154":["SH","1-n","PatientTelephoneNumber"],
"0x2160":["SH","1","EthnicGroup"],"0x2180":["SH","1","Occupation"],"0x21A0":["CS","1","SmokingStatus"],"0x21B0":["LT","1","AdditionalPatientHistory"],"0x21C0":["US","1","PregnancyStatus"],"0x21D0":["DA","1","LastMenstrualDate"],"0x21F0":["LO","1","PatientReligiousPreference"],"0x4000":["LT","1","PatientComments"]},"0x0018":{"0x0000":["UL","1","AcquisitionGroupLength"],"0x0010":["LO","1","ContrastBolusAgent"],"0x0012":["SQ","1","ContrastBolusAgentSequence"],"0x0014":["SQ","1","ContrastBolusAdministrationRouteSequence"],
"0x0015":["CS","1","BodyPartExamined"],"0x0020":["CS","1-n","ScanningSequence"],"0x0021":["CS","1-n","SequenceVariant"],"0x0022":["CS","1-n","ScanOptions"],"0x0023":["CS","1","MRAcquisitionType"],"0x0024":["SH","1","SequenceName"],"0x0025":["CS","1","AngioFlag"],"0x0026":["SQ","1","InterventionDrugInformationSequence"],"0x0027":["TM","1","InterventionDrugStopTime"],"0x0028":["DS","1","InterventionDrugDose"],"0x0029":["SQ","1","InterventionalDrugSequence"],"0x002A":["SQ","1","AdditionalDrugSequence"],
"0x0030":["LO","1-n","Radionuclide"],"0x0031":["LO","1-n","Radiopharmaceutical"],"0x0032":["DS","1","EnergyWindowCenterline"],"0x0033":["DS","1-n","EnergyWindowTotalWidth"],"0x0034":["LO","1","InterventionalDrugName"],"0x0035":["TM","1","InterventionalDrugStartTime"],"0x0036":["SQ","1","InterventionalTherapySequence"],"0x0037":["CS","1","TherapyType"],"0x0038":["CS","1","InterventionalStatus"],"0x0039":["CS","1","TherapyDescription"],"0x0040":["IS","1","CineRate"],"0x0050":["DS","1","SliceThickness"],
"0x0060":["DS","1","KVP"],"0x0070":["IS","1","CountsAccumulated"],"0x0071":["CS","1","AcquisitionTerminationCondition"],"0x0072":["DS","1","EffectiveSeriesDuration"],"0x0073":["CS","1","AcquisitionStartCondition"],"0x0074":["IS","1","AcquisitionStartConditionData"],"0x0075":["IS","1","AcquisitionTerminationConditionData"],"0x0080":["DS","1","RepetitionTime"],"0x0081":["DS","1","EchoTime"],"0x0082":["DS","1","InversionTime"],"0x0083":["DS","1","NumberOfAverages"],"0x0084":["DS","1","ImagingFrequency"],
"0x0085":["SH","1","ImagedNucleus"],"0x0086":["IS","1-n","EchoNumber"],"0x0087":["DS","1","MagneticFieldStrength"],"0x0088":["DS","1","SpacingBetweenSlices"],"0x0089":["IS","1","NumberOfPhaseEncodingSteps"],"0x0090":["DS","1","DataCollectionDiameter"],"0x0091":["IS","1","EchoTrainLength"],"0x0093":["DS","1","PercentSampling"],"0x0094":["DS","1","PercentPhaseFieldOfView"],"0x0095":["DS","1","PixelBandwidth"],"0x1000":["LO","1","DeviceSerialNumber"],"0x1002":["UI","1","DeviceUID"],"0x1003":["LO","1",
"DeviceID"],"0x1004":["LO","1","PlateID"],"0x1005":["LO","1","GeneratorID"],"0x1006":["LO","1","GridID"],"0x1007":["LO","1","CassetteID"],"0x1008":["LO","1","GantryID"],"0x1010":["LO","1","SecondaryCaptureDeviceID"],"0x1011":["LO","1","HardcopyCreationDeviceID"],"0x1012":["DA","1","DateOfSecondaryCapture"],"0x1014":["TM","1","TimeOfSecondaryCapture"],"0x1016":["LO","1","SecondaryCaptureDeviceManufacturer"],"0x1017":["LO","1","HardcopyDeviceManufacturer"],"0x1018":["LO","1","SecondaryCaptureDeviceManufacturerModelName"],
"0x1019":["LO","1-n","SecondaryCaptureDeviceSoftwareVersion"],"0x101A":["LO","1-n","HardcopyDeviceSoftwareVersion"],"0x101B":["LO","1","HardcopyDeviceManfuacturersModelName"],"0x1020":["LO","1-n","SoftwareVersion"],"0x1022":["SH","1","VideoImageFormatAcquired"],"0x1023":["LO","1","DigitalImageFormatAcquired"],"0x1030":["LO","1","ProtocolName"],"0x1040":["LO","1","ContrastBolusRoute"],"0x1041":["DS","1","ContrastBolusVolume"],"0x1042":["TM","1","ContrastBolusStartTime"],"0x1043":["TM","1","ContrastBolusStopTime"],
"0x1044":["DS","1","ContrastBolusTotalDose"],"0x1045":["IS","1-n","SyringeCounts"],"0x1046":["DS","1-n","ContrastFlowRate"],"0x1047":["DS","1-n","ContrastFlowDuration"],"0x1048":["CS","1","ContrastBolusIngredient"],"0x1049":["DS","1","ContrastBolusIngredientConcentration"],"0x1050":["DS","1","SpatialResolution"],"0x1060":["DS","1","TriggerTime"],"0x1061":["LO","1","TriggerSourceOrType"],"0x1062":["IS","1","NominalInterval"],"0x1063":["DS","1","FrameTime"],"0x1064":["LO","1","FramingType"],"0x1065":["DS",
"1-n","FrameTimeVector"],"0x1066":["DS","1","FrameDelay"],"0x1067":["DS","1","ImageTriggerDelay"],"0x1068":["DS","1","MultiplexGroupTimeOffset"],"0x1069":["DS","1","TriggerTimeOffset"],"0x106A":["CS","1","SynchronizationTrigger"],"0x106C":["US","2","SynchronizationChannel"],"0x106E":["UL","1","TriggerSamplePosition"],"0x1070":["LO","1-n","RadionuclideRoute"],"0x1071":["DS","1-n","RadionuclideVolume"],"0x1072":["TM","1-n","RadionuclideStartTime"],"0x1073":["TM","1-n","RadionuclideStopTime"],"0x1074":["DS",
"1-n","RadionuclideTotalDose"],"0x1075":["DS","1","RadionuclideHalfLife"],"0x1076":["DS","1","RadionuclidePositronFraction"],"0x1077":["DS","1","RadiopharmaceuticalSpecificActivity"],"0x1080":["CS","1","BeatRejectionFlag"],"0x1081":["IS","1","LowRRValue"],"0x1082":["IS","1","HighRRValue"],"0x1083":["IS","1","IntervalsAcquired"],"0x1084":["IS","1","IntervalsRejected"],"0x1085":["LO","1","PVCRejection"],"0x1086":["IS","1","SkipBeats"],"0x1088":["IS","1","HeartRate"],"0x1090":["IS","1","CardiacNumberOfImages"],
"0x1094":["IS","1","TriggerWindow"],"0x1100":["DS","1","ReconstructionDiameter"],"0x1110":["DS","1","DistanceSourceToDetector"],"0x1111":["DS","1","DistanceSourceToPatient"],"0x1114":["DS","1","EstimatedRadiographicMagnificationFactor"],"0x1120":["DS","1","GantryDetectorTilt"],"0x1121":["DS","1","GantryDetectorSlew"],"0x1130":["DS","1","TableHeight"],"0x1131":["DS","1","TableTraverse"],"0x1134":["DS","1","TableMotion"],"0x1135":["DS","1-n","TableVerticalIncrement"],"0x1136":["DS","1-n","TableLateralIncrement"],
"0x1137":["DS","1-n","TableLongitudinalIncrement"],"0x1138":["DS","1","TableAngle"],"0x113A":["CS","1","TableType"],"0x1140":["CS","1","RotationDirection"],"0x1141":["DS","1","AngularPosition"],"0x1142":["DS","1-n","RadialPosition"],"0x1143":["DS","1","ScanArc"],"0x1144":["DS","1","AngularStep"],"0x1145":["DS","1","CenterOfRotationOffset"],"0x1146":["DS","1-n","RotationOffset"],"0x1147":["CS","1","FieldOfViewShape"],"0x1149":["IS","2","FieldOfViewDimension"],"0x1150":["IS","1","ExposureTime"],"0x1151":["IS",
"1","XrayTubeCurrent"],"0x1152":["IS","1","Exposure"],"0x1153":["IS","1","ExposureinuAs"],"0x1154":["DS","1","AveragePulseWidth"],"0x1155":["CS","1","RadiationSetting"],"0x1156":["CS","1","RectificationType"],"0x115A":["CS","1","RadiationMode"],"0x115E":["DS","1","ImageAreaDoseProduct"],"0x1160":["SH","1","FilterType"],"0x1161":["LO","1-n","TypeOfFilters"],"0x1162":["DS","1","IntensifierSize"],"0x1164":["DS","2","ImagerPixelSpacing"],"0x1166":["CS","1","Grid"],"0x1170":["IS","1","GeneratorPower"],
"0x1180":["SH","1","CollimatorGridName"],"0x1181":["CS","1","CollimatorType"],"0x1182":["IS","1","FocalDistance"],"0x1183":["DS","1","XFocusCenter"],"0x1184":["DS","1","YFocusCenter"],"0x1190":["DS","1-n","FocalSpot"],"0x1191":["CS","1","AnodeTargetMaterial"],"0x11A0":["DS","1","BodyPartThickness"],"0x11A2":["DS","1","CompressionForce"],"0x1200":["DA","1-n","DateOfLastCalibration"],"0x1201":["TM","1-n","TimeOfLastCalibration"],"0x1210":["SH","1-n","ConvolutionKernel"],"0x1240":["IS","1-n","UpperLowerPixelValues"],
"0x1242":["IS","1","ActualFrameDuration"],"0x1243":["IS","1","CountRate"],"0x1244":["US","1","PreferredPlaybackSequencing"],"0x1250":["SH","1","ReceivingCoil"],"0x1251":["SH","1","TransmittingCoil"],"0x1260":["SH","1","PlateType"],"0x1261":["LO","1","PhosphorType"],"0x1300":["IS","1","ScanVelocity"],"0x1301":["CS","1-n","WholeBodyTechnique"],"0x1302":["IS","1","ScanLength"],"0x1310":["US","4","AcquisitionMatrix"],"0x1312":["CS","1","PhaseEncodingDirection"],"0x1314":["DS","1","FlipAngle"],"0x1315":["CS",
"1","VariableFlipAngleFlag"],"0x1316":["DS","1","SAR"],"0x1318":["DS","1","dBdt"],"0x1400":["LO","1","AcquisitionDeviceProcessingDescription"],"0x1401":["LO","1","AcquisitionDeviceProcessingCode"],"0x1402":["CS","1","CassetteOrientation"],"0x1403":["CS","1","CassetteSize"],"0x1404":["US","1","ExposuresOnPlate"],"0x1405":["IS","1","RelativeXrayExposure"],"0x1450":["DS","1","ColumnAngulation"],"0x1460":["DS","1","TomoLayerHeight"],"0x1470":["DS","1","TomoAngle"],"0x1480":["DS","1","TomoTime"],"0x1490":["CS",
"1","TomoType"],"0x1491":["CS","1","TomoClass"],"0x1495":["IS","1","NumberofTomosynthesisSourceImages"],"0x1500":["CS","1","PositionerMotion"],"0x1508":["CS","1","PositionerType"],"0x1510":["DS","1","PositionerPrimaryAngle"],"0x1511":["DS","1","PositionerSecondaryAngle"],"0x1520":["DS","1-n","PositionerPrimaryAngleIncrement"],"0x1521":["DS","1-n","PositionerSecondaryAngleIncrement"],"0x1530":["DS","1","DetectorPrimaryAngle"],"0x1531":["DS","1","DetectorSecondaryAngle"],"0x1600":["CS","3","ShutterShape"],
"0x1602":["IS","1","ShutterLeftVerticalEdge"],"0x1604":["IS","1","ShutterRightVerticalEdge"],"0x1606":["IS","1","ShutterUpperHorizontalEdge"],"0x1608":["IS","1","ShutterLowerHorizontalEdge"],"0x1610":["IS","1","CenterOfCircularShutter"],"0x1612":["IS","1","RadiusOfCircularShutter"],"0x1620":["IS","1-n","VerticesOfPolygonalShutter"],"0x1622":["US","1","ShutterPresentationValue"],"0x1623":["US","1","ShutterOverlayGroup"],"0x1700":["CS","3","CollimatorShape"],"0x1702":["IS","1","CollimatorLeftVerticalEdge"],
"0x1704":["IS","1","CollimatorRightVerticalEdge"],"0x1706":["IS","1","CollimatorUpperHorizontalEdge"],"0x1708":["IS","1","CollimatorLowerHorizontalEdge"],"0x1710":["IS","1","CenterOfCircularCollimator"],"0x1712":["IS","1","RadiusOfCircularCollimator"],"0x1720":["IS","1-n","VerticesOfPolygonalCollimator"],"0x1800":["CS","1","AcquisitionTimeSynchronized"],"0x1801":["SH","1","TimeSource"],"0x1802":["CS","1","TimeDistributionProtocol"],"0x1810":["DT","1","AcquisitionTimestamp"],"0x4000":["LT","1-n","AcquisitionComments"],
"0x5000":["SH","1-n","OutputPower"],"0x5010":["LO","3","TransducerData"],"0x5012":["DS","1","FocusDepth"],"0x5020":["LO","1","PreprocessingFunction"],"0x5021":["LO","1","PostprocessingFunction"],"0x5022":["DS","1","MechanicalIndex"],"0x5024":["DS","1","ThermalIndex"],"0x5026":["DS","1","CranialThermalIndex"],"0x5027":["DS","1","SoftTissueThermalIndex"],"0x5028":["DS","1","SoftTissueFocusThermalIndex"],"0x5029":["DS","1","SoftTissueSurfaceThermalIndex"],"0x5030":["DS","1","DynamicRange"],"0x5040":["DS",
"1","TotalGain"],"0x5050":["IS","1","DepthOfScanField"],"0x5100":["CS","1","PatientPosition"],"0x5101":["CS","1","ViewPosition"],"0x5104":["SQ","1","ProjectionEponymousNameCodeSequence"],"0x5210":["DS","6","ImageTransformationMatrix"],"0x5212":["DS","3","ImageTranslationVector"],"0x6000":["DS","1","Sensitivity"],"0x6011":["SQ","1","SequenceOfUltrasoundRegions"],"0x6012":["US","1","RegionSpatialFormat"],"0x6014":["US","1","RegionDataType"],"0x6016":["UL","1","RegionFlags"],"0x6018":["UL","1","RegionLocationMinX0"],
"0x601A":["UL","1","RegionLocationMinY0"],"0x601C":["UL","1","RegionLocationMaxX1"],"0x601E":["UL","1","RegionLocationMaxY1"],"0x6020":["SL","1","ReferencePixelX0"],"0x6022":["SL","1","ReferencePixelY0"],"0x6024":["US","1","PhysicalUnitsXDirection"],"0x6026":["US","1","PhysicalUnitsYDirection"],"0x6028":["FD","1","ReferencePixelPhysicalValueX"],"0x602A":["FD","1","ReferencePixelPhysicalValueY"],"0x602C":["FD","1","PhysicalDeltaX"],"0x602E":["FD","1","PhysicalDeltaY"],"0x6030":["UL","1","TransducerFrequency"],
"0x6031":["CS","1","TransducerType"],"0x6032":["UL","1","PulseRepetitionFrequency"],"0x6034":["FD","1","DopplerCorrectionAngle"],"0x6036":["FD","1","SteeringAngle"],"0x6038":["UL","1","DopplerSampleVolumeXPosition"],"0x603A":["UL","1","DopplerSampleVolumeYPosition"],"0x603C":["UL","1","TMLinePositionX0"],"0x603E":["UL","1","TMLinePositionY0"],"0x6040":["UL","1","TMLinePositionX1"],"0x6042":["UL","1","TMLinePositionY1"],"0x6044":["US","1","PixelComponentOrganization"],"0x6046":["UL","1","PixelComponentMask"],
"0x6048":["UL","1","PixelComponentRangeStart"],"0x604A":["UL","1","PixelComponentRangeStop"],"0x604C":["US","1","PixelComponentPhysicalUnits"],"0x604E":["US","1","PixelComponentDataType"],"0x6050":["UL","1","NumberOfTableBreakPoints"],"0x6052":["UL","1-n","TableOfXBreakPoints"],"0x6054":["FD","1-n","TableOfYBreakPoints"],"0x6056":["UL","1","NumberOfTableEntries"],"0x6058":["UL","1-n","TableOfPixelValues"],"0x605A":["FL","1-n","TableOfParameterValues"],"0x7000":["CS","1","DetectorConditionsNominalFlag"],
"0x7001":["DS","1","DetectorTemperature"],"0x7004":["CS","1","DetectorType"],"0x7005":["CS","1","DetectorConfiguration"],"0x7006":["LT","1","DetectorDescription"],"0x7008":["LT","1","DetectorMode"],"0x700A":["SH","1","DetectorID"],"0x700C":["DA","1","DateofLastDetectorCalibration"],"0x700E":["TM","1","TimeofLastDetectorCalibration"],"0x7010":["IS","1","ExposuresOnDetectorSinceLastCalibration"],"0x7011":["IS","1","ExposuresOnDetectorSinceManufactured"],"0x7012":["DS","1","DetectorTimeSinceLastExposure"],
"0x7014":["DS","1","DetectorActiveTime"],"0x7016":["DS","1","DetectorActivationOffsetFromExposure"],"0x701A":["DS","2","DetectorBinning"],"0x7020":["DS","2","DetectorElementPhysicalSize"],"0x7022":["DS","2","DetectorElementSpacing"],"0x7024":["CS","1","DetectorActiveShape"],"0x7026":["DS","1-2","DetectorActiveDimensions"],"0x7028":["DS","2","DetectorActiveOrigin"],"0x7030":["DS","2","FieldofViewOrigin"],"0x7032":["DS","1","FieldofViewRotation"],"0x7034":["CS","1","FieldofViewHorizontalFlip"],"0x7040":["LT",
"1","GridAbsorbingMaterial"],"0x7041":["LT","1","GridSpacingMaterial"],"0x7042":["DS","1","GridThickness"],"0x7044":["DS","1","GridPitch"],"0x7046":["IS","2","GridAspectRatio"],"0x7048":["DS","1","GridPeriod"],"0x704C":["DS","1","GridFocalDistance"],"0x7050":["LT","1-n","FilterMaterial"],"0x7052":["DS","1-n","FilterThicknessMinimum"],"0x7054":["DS","1-n","FilterThicknessMaximum"],"0x7060":["CS","1","ExposureControlMode"],"0x7062":["LT","1","ExposureControlModeDescription"],"0x7064":["CS","1","ExposureStatus"],
"0x7065":["DS","1","PhototimerSetting"]},"0x0020":{"0x0000":["UL","1","ImageGroupLength"],"0x000D":["UI","1","StudyInstanceUID"],"0x000E":["UI","1","SeriesInstanceUID"],"0x0010":["SH","1","StudyID"],"0x0011":["IS","1","SeriesNumber"],"0x0012":["IS","1","AcquisitionNumber"],"0x0013":["IS","1","ImageNumber"],"0x0014":["IS","1","IsotopeNumber"],"0x0015":["IS","1","PhaseNumber"],"0x0016":["IS","1","IntervalNumber"],"0x0017":["IS","1","TimeSlotNumber"],"0x0018":["IS","1","AngleNumber"],"0x0019":["IS",
"1","ItemNumber"],"0x0020":["CS","2","PatientOrientation"],"0x0022":["IS","1","OverlayNumber"],"0x0024":["IS","1","CurveNumber"],"0x0026":["IS","1","LUTNumber"],"0x0030":["DS","3","ImagePosition"],"0x0032":["DS","3","ImagePositionPatient"],"0x0035":["DS","6","ImageOrientation"],"0x0037":["DS","6","ImageOrientationPatient"],"0x0050":["DS","1","Location"],"0x0052":["UI","1","FrameOfReferenceUID"],"0x0060":["CS","1","Laterality"],"0x0062":["CS","1","ImageLaterality"],"0x0070":["LT","1","ImageGeometryType"],
"0x0080":["CS","1-n","MaskingImage"],"0x0100":["IS","1","TemporalPositionIdentifier"],"0x0105":["IS","1","NumberOfTemporalPositions"],"0x0110":["DS","1","TemporalResolution"],"0x0200":["UI","1","SynchronizationFrameofReferenceUID"],"0x1000":["IS","1","SeriesInStudy"],"0x1001":["IS","1","AcquisitionsInSeries"],"0x1002":["IS","1","ImagesInAcquisition"],"0x1003":["IS","1","ImagesInSeries"],"0x1004":["IS","1","AcquisitionsInStudy"],"0x1005":["IS","1","ImagesInStudy"],"0x1020":["CS","1-n","Reference"],
"0x1040":["LO","1","PositionReferenceIndicator"],"0x1041":["DS","1","SliceLocation"],"0x1070":["IS","1-n","OtherStudyNumbers"],"0x1200":["IS","1","NumberOfPatientRelatedStudies"],"0x1202":["IS","1","NumberOfPatientRelatedSeries"],"0x1204":["IS","1","NumberOfPatientRelatedImages"],"0x1206":["IS","1","NumberOfStudyRelatedSeries"],"0x1208":["IS","1","NumberOfStudyRelatedImages"],"0x1209":["IS","1","NumberOfSeriesRelatedInstances"],"0x3100":["CS","1-n","SourceImageID"],"0x3401":["CS","1","ModifyingDeviceID"],
"0x3402":["CS","1","ModifiedImageID"],"0x3403":["DA","1","ModifiedImageDate"],"0x3404":["LO","1","ModifyingDeviceManufacturer"],"0x3405":["TM","1","ModifiedImageTime"],"0x3406":["LT","1","ModifiedImageDescription"],"0x4000":["LT","1","ImageComments"],"0x5000":["AT","1-n","OriginalImageIdentification"],"0x5002":["CS","1-n","OriginalImageIdentificationNomenclature"]},"0x0028":{"0x0000":["UL","1","ImagePresentationGroupLength"],"0x0002":["US","1","SamplesPerPixel"],"0x0004":["CS","1","PhotometricInterpretation"],
"0x0005":["US","1","ImageDimensions"],"0x0006":["US","1","PlanarConfiguration"],"0x0008":["IS","1","NumberOfFrames"],"0x0009":["AT","1","FrameIncrementPointer"],"0x0010":["US","1","Rows"],"0x0011":["US","1","Columns"],"0x0012":["US","1","Planes"],"0x0014":["US","1","UltrasoundColorDataPresent"],"0x0030":["DS","2","PixelSpacing"],"0x0031":["DS","2","ZoomFactor"],"0x0032":["DS","2","ZoomCenter"],"0x0034":["IS","2","PixelAspectRatio"],"0x0040":["CS","1","ImageFormat"],"0x0050":["LT","1-n","ManipulatedImage"],
"0x0051":["CS","1","CorrectedImage"],"0x005F":["CS","1","CompressionRecognitionCode"],"0x0060":["CS","1","CompressionCode"],"0x0061":["SH","1","CompressionOriginator"],"0x0062":["SH","1","CompressionLabel"],"0x0063":["SH","1","CompressionDescription"],"0x0065":["CS","1-n","CompressionSequence"],"0x0066":["AT","1-n","CompressionStepPointers"],"0x0068":["US","1","RepeatInterval"],"0x0069":["US","1","BitsGrouped"],"0x0070":["US","1-n","PerimeterTable"],"0x0071":["XS","1","PerimeterValue"],"0x0080":["US",
"1","PredictorRows"],"0x0081":["US","1","PredictorColumns"],"0x0082":["US","1-n","PredictorConstants"],"0x0090":["CS","1","BlockedPixels"],"0x0091":["US","1","BlockRows"],"0x0092":["US","1","BlockColumns"],"0x0093":["US","1","RowOverlap"],"0x0094":["US","1","ColumnOverlap"],"0x0100":["US","1","BitsAllocated"],"0x0101":["US","1","BitsStored"],"0x0102":["US","1","HighBit"],"0x0103":["US","1","PixelRepresentation"],"0x0104":["XS","1","SmallestValidPixelValue"],"0x0105":["XS","1","LargestValidPixelValue"],
"0x0106":["XS","1","SmallestImagePixelValue"],"0x0107":["XS","1","LargestImagePixelValue"],"0x0108":["XS","1","SmallestPixelValueInSeries"],"0x0109":["XS","1","LargestPixelValueInSeries"],"0x0110":["XS","1","SmallestPixelValueInPlane"],"0x0111":["XS","1","LargestPixelValueInPlane"],"0x0120":["XS","1","PixelPaddingValue"],"0x0200":["US","1","ImageLocation"],"0x0300":["CS","1","QualityControlImage"],"0x0301":["CS","1","BurnedInAnnotation"],"0x0400":["CS","1","TransformLabel"],"0x0401":["CS","1","TransformVersionNumber"],
"0x0402":["US","1","NumberOfTransformSteps"],"0x0403":["CS","1-n","SequenceOfCompressedData"],"0x0404":["AT","1-n","DetailsOfCoefficients"],"0x0410":["US","1","RowsForNthOrderCoefficients"],"0x0411":["US","1","ColumnsForNthOrderCoefficients"],"0x0412":["CS","1-n","CoefficientCoding"],"0x0413":["AT","1-n","CoefficientCodingPointers"],"0x0700":["CS","1","DCTLabel"],"0x0701":["CS","1-n","DataBlockDescription"],"0x0702":["AT","1-n","DataBlock"],"0x0710":["US","1","NormalizationFactorFormat"],"0x0720":["US",
"1","ZonalMapNumberFormat"],"0x0721":["AT","1-n","ZonalMapLocation"],"0x0722":["US","1","ZonalMapFormat"],"0x0730":["US","1","AdaptiveMapFormat"],"0x0740":["US","1","CodeNumberFormat"],"0x0800":["CS","1-n","CodeLabel"],"0x0802":["US","1","NumberOfTables"],"0x0803":["AT","1-n","CodeTableLocation"],"0x0804":["US","1","BitsForCodeWord"],"0x0808":["AT","1-n","ImageDataLocation"],"0x1040":["CS","1","PixelIntensityRelationship"],"0x1041":["SS","1","PixelIntensityRelationshipSign"],"0x1050":["DS","1-n",
"WindowCenter"],"0x1051":["DS","1-n","WindowWidth"],"0x1052":["DS","1","RescaleIntercept"],"0x1053":["DS","1","RescaleSlope"],"0x1054":["LO","1","RescaleType"],"0x1055":["LO","1-n","WindowCenterWidthExplanation"],"0x1080":["CS","1","GrayScale"],"0x1090":["CS","1","RecommendedViewingMode"],"0x1100":["XS","3","GrayLookupTableDescriptor"],"0x1101":["XS","3","RedPaletteColorLookupTableDescriptor"],"0x1102":["XS","3","GreenPaletteColorLookupTableDescriptor"],"0x1103":["XS","3","BluePaletteColorLookupTableDescriptor"],
"0x1111":["US","4","LargeRedPaletteColorLookupTableDescriptor"],"0x1112":["US","4","LargeGreenPaletteColorLookupTabe"],"0x1113":["US","4","LargeBluePaletteColorLookupTabl"],"0x1199":["UI","1","PaletteColorLookupTableUID"],"0x1200":["XS","1-n","GrayLookupTableData"],"0x1201":["XS","1-n","RedPaletteColorLookupTableData"],"0x1202":["XS","1-n","GreenPaletteColorLookupTableData"],"0x1203":["XS","1-n","BluePaletteColorLookupTableData"],"0x1211":["OW","1","LargeRedPaletteColorLookupTableData"],"0x1212":["OW",
"1","LargeGreenPaletteColorLookupTableData"],"0x1213":["OW","1","LargeBluePaletteColorLookupTableData"],"0x1214":["UI","1","LargePaletteColorLookupTableUID"],"0x1221":["OW","1","SegmentedRedPaletteColorLookupTableData"],"0x1222":["OW","1","SegmentedGreenPaletteColorLookupTableData"],"0x1223":["OW","1","SegmentedBluePaletteColorLookupTableData"],"0x1300":["CS","1","ImplantPresent"],"0x2110":["CS","1","LossyImageCompression"],"0x2112":["DS","1-n","LossyImageCompressionRatio"],"0x3000":["SQ","1","ModalityLUTSequence"],
"0x3002":["XS","3","LUTDescriptor"],"0x3003":["LO","1","LUTExplanation"],"0x3004":["LO","1","ModalityLUTType"],"0x3006":["XS","1-n","LUTData"],"0x3010":["SQ","1","VOILUTSequence"],"0x3110":["SQ","1","SoftcopyVOILUTSequence"],"0x4000":["LT","1-n","ImagePresentationComments"],"0x5000":["SQ","1","BiPlaneAcquisitionSequence"],"0x6010":["US","1","RepresentativeFrameNumber"],"0x6020":["US","1-n","FrameNumbersOfInterest"],"0x6022":["LO","1-n","FrameOfInterestDescription"],"0x6030":["US","1-n","MaskPointer"],
"0x6040":["US","1-n","RWavePointer"],"0x6100":["SQ","1","MaskSubtractionSequence"],"0x6101":["CS","1","MaskOperation"],"0x6102":["US","1-n","ApplicableFrameRange"],"0x6110":["US","1-n","MaskFrameNumbers"],"0x6112":["US","1","ContrastFrameAveraging"],"0x6114":["FL","2","MaskSubPixelShift"],"0x6120":["SS","1","TIDOffset"],"0x6190":["ST","1","MaskOperationExplanation"]},"0x0032":{"0x0000":["UL","1","StudyGroupLength"],"0x000A":["CS","1","StudyStatusID"],"0x000C":["CS","1","StudyPriorityID"],"0x0012":["LO",
"1","StudyIDIssuer"],"0x0032":["DA","1","StudyVerifiedDate"],"0x0033":["TM","1","StudyVerifiedTime"],"0x0034":["DA","1","StudyReadDate"],"0x0035":["TM","1","StudyReadTime"],"0x1000":["DA","1","ScheduledStudyStartDate"],"0x1001":["TM","1","ScheduledStudyStartTime"],"0x1010":["DA","1","ScheduledStudyStopDate"],"0x1011":["TM","1","ScheduledStudyStopTime"],"0x1020":["LO","1","ScheduledStudyLocation"],"0x1021":["AE","1-n","ScheduledStudyLocationAETitle"],"0x1030":["LO","1","ReasonForStudy"],"0x1032":["PN",
"1","RequestingPhysician"],"0x1033":["LO","1","RequestingService"],"0x1040":["DA","1","StudyArrivalDate"],"0x1041":["TM","1","StudyArrivalTime"],"0x1050":["DA","1","StudyCompletionDate"],"0x1051":["TM","1","StudyCompletionTime"],"0x1055":["CS","1","StudyComponentStatusID"],"0x1060":["LO","1","RequestedProcedureDescription"],"0x1064":["SQ","1","RequestedProcedureCodeSequence"],"0x1070":["LO","1","RequestedContrastAgent"],"0x4000":["LT","1","StudyComments"]},"0x0038":{"0x0000":["UL","1","VisitGroupLength"],
"0x0004":["SQ","1","ReferencedPatientAliasSequence"],"0x0008":["CS","1","VisitStatusID"],"0x0010":["LO","1","AdmissionID"],"0x0011":["LO","1","IssuerOfAdmissionID"],"0x0016":["LO","1","RouteOfAdmissions"],"0x001A":["DA","1","ScheduledAdmissionDate"],"0x001B":["TM","1","ScheduledAdmissionTime"],"0x001C":["DA","1","ScheduledDischargeDate"],"0x001D":["TM","1","ScheduledDischargeTime"],"0x001E":["LO","1","ScheduledPatientInstitutionResidence"],"0x0020":["DA","1","AdmittingDate"],"0x0021":["TM","1","AdmittingTime"],
"0x0030":["DA","1","DischargeDate"],"0x0032":["TM","1","DischargeTime"],"0x0040":["LO","1","DischargeDiagnosisDescription"],"0x0044":["SQ","1","DischargeDiagnosisCodeSequence"],"0x0050":["LO","1","SpecialNeeds"],"0x0300":["LO","1","CurrentPatientLocation"],"0x0400":["LO","1","PatientInstitutionResidence"],"0x0500":["LO","1","PatientState"],"0x4000":["LT","1","VisitComments"]},"0x003A":{"0x0004":["CS","1","WaveformOriginality"],"0x0005":["US","1","NumberofChannels"],"0x0010":["UL","1","NumberofSamples"],
"0x001A":["DS","1","SamplingFrequency"],"0x0020":["SH","1","MultiplexGroupLabel"],"0x0200":["SQ","1","ChannelDefinitionSequence"],"0x0202":["IS","1","WVChannelNumber"],"0x0203":["SH","1","ChannelLabel"],"0x0205":["CS","1-n","ChannelStatus"],"0x0208":["SQ","1","ChannelSourceSequence"],"0x0209":["SQ","1","ChannelSourceModifiersSequence"],"0x020A":["SQ","1","SourceWaveformSequence"],"0x020C":["LO","1","ChannelDerivationDescription"],"0x0210":["DS","1","ChannelSensitivity"],"0x0211":["SQ","1","ChannelSensitivityUnits"],
"0x0212":["DS","1","ChannelSensitivityCorrectionFactor"],"0x0213":["DS","1","ChannelBaseline"],"0x0214":["DS","1","ChannelTimeSkew"],"0x0215":["DS","1","ChannelSampleSkew"],"0x0218":["DS","1","ChannelOffset"],"0x021A":["US","1","WaveformBitsStored"],"0x0220":["DS","1","FilterLowFrequency"],"0x0221":["DS","1","FilterHighFrequency"],"0x0222":["DS","1","NotchFilterFrequency"],"0x0223":["DS","1","NotchFilterBandwidth"]},"0x0040":{"0x0000":["UL","1","ModalityWorklistGroupLength"],"0x0001":["AE","1","ScheduledStationAETitle"],
"0x0002":["DA","1","ScheduledProcedureStepStartDate"],"0x0003":["TM","1","ScheduledProcedureStepStartTime"],"0x0004":["DA","1","ScheduledProcedureStepEndDate"],"0x0005":["TM","1","ScheduledProcedureStepEndTime"],"0x0006":["PN","1","ScheduledPerformingPhysicianName"],"0x0007":["LO","1","ScheduledProcedureStepDescription"],"0x0008":["SQ","1","ScheduledProcedureStepCodeSequence"],"0x0009":["SH","1","ScheduledProcedureStepID"],"0x0010":["SH","1","ScheduledStationName"],"0x0011":["SH","1","ScheduledProcedureStepLocation"],
"0x0012":["LO","1","ScheduledPreOrderOfMedication"],"0x0020":["CS","1","ScheduledProcedureStepStatus"],"0x0100":["SQ","1-n","ScheduledProcedureStepSequence"],"0x0220":["SQ","1","ReferencedStandaloneSOPInstanceSequence"],"0x0241":["AE","1","PerformedStationAETitle"],"0x0242":["SH","1","PerformedStationName"],"0x0243":["SH","1","PerformedLocation"],"0x0244":["DA","1","PerformedProcedureStepStartDate"],"0x0245":["TM","1","PerformedProcedureStepStartTime"],"0x0250":["DA","1","PerformedProcedureStepEndDate"],
"0x0251":["TM","1","PerformedProcedureStepEndTime"],"0x0252":["CS","1","PerformedProcedureStepStatus"],"0x0253":["CS","1","PerformedProcedureStepID"],"0x0254":["LO","1","PerformedProcedureStepDescription"],"0x0255":["LO","1","PerformedProcedureTypeDescription"],"0x0260":["SQ","1","PerformedActionItemSequence"],"0x0270":["SQ","1","ScheduledStepAttributesSequence"],"0x0275":["SQ","1","RequestAttributesSequence"],"0x0280":["ST","1","CommentsOnThePerformedProcedureSteps"],"0x0293":["SQ","1","QuantitySequence"],
"0x0294":["DS","1","Quantity"],"0x0295":["SQ","1","MeasuringUnitsSequence"],"0x0296":["SQ","1","BillingItemSequence"],"0x0300":["US","1","TotalTimeOfFluoroscopy"],"0x0301":["US","1","TotalNumberOfExposures"],"0x0302":["US","1","EntranceDose"],"0x0303":["US","1-2","ExposedArea"],"0x0306":["DS","1","DistanceSourceToEntrance"],"0x0307":["DS","1","DistanceSourceToSupport"],"0x0310":["ST","1","CommentsOnRadiationDose"],"0x0312":["DS","1","XRayOutput"],"0x0314":["DS","1","HalfValueLayer"],"0x0316":["DS",
"1","OrganDose"],"0x0318":["CS","1","OrganExposed"],"0x0320":["SQ","1","BillingProcedureStepSequence"],"0x0321":["SQ","1","FilmConsumptionSequence"],"0x0324":["SQ","1","BillingSuppliesAndDevicesSequence"],"0x0330":["SQ","1","ReferencedProcedureStepSequence"],"0x0340":["SQ","1","PerformedSeriesSequence"],"0x0400":["LT","1","CommentsOnScheduledProcedureStep"],"0x050A":["LO","1","SpecimenAccessionNumber"],"0x0550":["SQ","1","SpecimenSequence"],"0x0551":["LO","1","SpecimenIdentifier"],"0x0555":["SQ",
"1","AcquisitionContextSequence"],"0x0556":["ST","1","AcquisitionContextDescription"],"0x059A":["SQ","1","SpecimenTypeCodeSequence"],"0x06FA":["LO","1","SlideIdentifier"],"0x071A":["SQ","1","ImageCenterPointCoordinatesSequence"],"0x072A":["DS","1","XOffsetInSlideCoordinateSystem"],"0x073A":["DS","1","YOffsetInSlideCoordinateSystem"],"0x074A":["DS","1","ZOffsetInSlideCoordinateSystem"],"0x08D8":["SQ","1","PixelSpacingSequence"],"0x08DA":["SQ","1","CoordinateSystemAxisCodeSequence"],"0x08EA":["SQ",
"1","MeasurementUnitsCodeSequence"],"0x1001":["SH","1","RequestedProcedureID"],"0x1002":["LO","1","ReasonForRequestedProcedure"],"0x1003":["SH","1","RequestedProcedurePriority"],"0x1004":["LO","1","PatientTransportArrangements"],"0x1005":["LO","1","RequestedProcedureLocation"],"0x1006":["SH","1","PlacerOrderNumberOfProcedure"],"0x1007":["SH","1","FillerOrderNumberOfProcedure"],"0x1008":["LO","1","ConfidentialityCode"],"0x1009":["SH","1","ReportingPriority"],"0x1010":["PN","1-n","NamesOfIntendedRecipientsOfResults"],
"0x1400":["LT","1","RequestedProcedureComments"],"0x2001":["LO","1","ReasonForTheImagingServiceRequest"],"0x2002":["LO","1","ImagingServiceRequestDescription"],"0x2004":["DA","1","IssueDateOfImagingServiceRequest"],"0x2005":["TM","1","IssueTimeOfImagingServiceRequest"],"0x2006":["SH","1","PlacerOrderNumberOfImagingServiceRequest"],"0x2007":["SH","0","FillerOrderNumberOfImagingServiceRequest"],"0x2008":["PN","1","OrderEnteredBy"],"0x2009":["SH","1","OrderEntererLocation"],"0x2010":["SH","1","OrderCallbackPhoneNumber"],
"0x2016":["LO","1","PlacerOrderNumberImagingServiceRequest"],"0x2017":["LO","1","FillerOrderNumberImagingServiceRequest"],"0x2400":["LT","1","ImagingServiceRequestComments"],"0x3001":["LT","1","ConfidentialityConstraint"],"0xA010":["CS","1","RelationshipType"],"0xA027":["LO","1","VerifyingOrganization"],"0xA030":["DT","1","VerificationDateTime"],"0xA032":["DT","1","ObservationDateTime"],"0xA040":["CS","1","ValueType"],"0xA043":["SQ","1","ConceptNameCodeSequence"],"0xA050":["CS","1","ContinuityOfContent"],
"0xA073":["SQ","1","VerifyingObserverSequence"],"0xA075":["PN","1","VerifyingObserverName"],"0xA088":["SQ","1","VerifyingObserverIdentificationCodeSeque"],"0xA0B0":["US","2-2n","ReferencedWaveformChannels"],"0xA120":["DT","1","DateTime"],"0xA121":["DA","1","Date"],"0xA122":["TM","1","Time"],"0xA123":["PN","1","PersonName"],"0xA124":["UI","1","UID"],"0xA130":["CS","1","TemporalRangeType"],"0xA132":["UL","1-n","ReferencedSamplePositionsU"],"0xA136":["US","1-n","ReferencedFrameNumbers"],"0xA138":["DS",
"1-n","ReferencedTimeOffsets"],"0xA13A":["DT","1-n","ReferencedDatetime"],"0xA160":["UT","1","TextValue"],"0xA168":["SQ","1","ConceptCodeSequence"],"0xA180":["US","1","AnnotationGroupNumber"],"0xA195":["SQ","1","ConceptNameCodeSequenceModifier"],"0xA300":["SQ","1","MeasuredValueSequence"],"0xA30A":["DS","1-n","NumericValue"],"0xA360":["SQ","1","PredecessorDocumentsSequence"],"0xA370":["SQ","1","ReferencedRequestSequence"],"0xA372":["SQ","1","PerformedProcedureCodeSequence"],"0xA375":["SQ","1","CurrentRequestedProcedureEvidenceSequenSequence"],
"0xA385":["SQ","1","PertinentOtherEvidenceSequence"],"0xA491":["CS","1","CompletionFlag"],"0xA492":["LO","1","CompletionFlagDescription"],"0xA493":["CS","1","VerificationFlag"],"0xA504":["SQ","1","ContentTemplateSequence"],"0xA525":["SQ","1","IdenticalDocumentsSequence"],"0xA730":["SQ","1","ContentSequence"],"0xB020":["SQ","1","AnnotationSequence"],"0xDB00":["CS","1","TemplateIdentifier"],"0xDB06":["DT","1","TemplateVersion"],"0xDB07":["DT","1","TemplateLocalVersion"],"0xDB0B":["CS","1","TemplateExtensionFlag"],
"0xDB0C":["UI","1","TemplateExtensionOrganizationUID"],"0xDB0D":["UI","1","TemplateExtensionCreatorUID"],"0xDB73":["UL","1-n","ReferencedContentItemIdentifier"]},"0x0050":{"0x0000":["UL","1","XRayAngioDeviceGroupLength"],"0x0004":["CS","1","CalibrationObject"],"0x0010":["SQ","1","DeviceSequence"],"0x0012":["CS","1","DeviceType"],"0x0014":["DS","1","DeviceLength"],"0x0016":["DS","1","DeviceDiameter"],"0x0017":["CS","1","DeviceDiameterUnits"],"0x0018":["DS","1","DeviceVolume"],"0x0019":["DS","1","InterMarkerDistance"],
"0x0020":["LO","1","DeviceDescription"],"0x0030":["SQ","1","CodedInterventionalDeviceSequence"]},"0x0054":{"0x0000":["UL","1","NuclearMedicineGroupLength"],"0x0010":["US","1-n","EnergyWindowVector"],"0x0011":["US","1","NumberOfEnergyWindows"],"0x0012":["SQ","1","EnergyWindowInformationSequence"],"0x0013":["SQ","1","EnergyWindowRangeSequence"],"0x0014":["DS","1","EnergyWindowLowerLimit"],"0x0015":["DS","1","EnergyWindowUpperLimit"],"0x0016":["SQ","1","RadiopharmaceuticalInformationSequence"],"0x0017":["IS",
"1","ResidualSyringeCounts"],"0x0018":["SH","1","EnergyWindowName"],"0x0020":["US","1-n","DetectorVector"],"0x0021":["US","1","NumberOfDetectors"],"0x0022":["SQ","1","DetectorInformationSequence"],"0x0030":["US","1-n","PhaseVector"],"0x0031":["US","1","NumberOfPhases"],"0x0032":["SQ","1","PhaseInformationSequence"],"0x0033":["US","1","NumberOfFramesInPhase"],"0x0036":["IS","1","PhaseDelay"],"0x0038":["IS","1","PauseBetweenFrames"],"0x0050":["US","1-n","RotationVector"],"0x0051":["US","1","NumberOfRotations"],
"0x0052":["SQ","1","RotationInformationSequence"],"0x0053":["US","1","NumberOfFramesInRotation"],"0x0060":["US","1-n","RRIntervalVector"],"0x0061":["US","1","NumberOfRRIntervals"],"0x0062":["SQ","1","GatedInformationSequence"],"0x0063":["SQ","1","DataInformationSequence"],"0x0070":["US","1-n","TimeSlotVector"],"0x0071":["US","1","NumberOfTimeSlots"],"0x0072":["SQ","1","TimeSlotInformationSequence"],"0x0073":["DS","1","TimeSlotTime"],"0x0080":["US","1-n","SliceVector"],"0x0081":["US","1","NumberOfSlices"],
"0x0090":["US","1-n","AngularViewVector"],"0x0100":["US","1-n","TimeSliceVector"],"0x0101":["US","1","NumberOfTimeSlices"],"0x0200":["DS","1","StartAngle"],"0x0202":["CS","1","TypeOfDetectorMotion"],"0x0210":["IS","1-n","TriggerVector"],"0x0211":["US","1","NumberOfTriggersInPhase"],"0x0220":["SQ","1","ViewCodeSequence"],"0x0222":["SQ","1","ViewAngulationModifierCodeSequence"],"0x0300":["SQ","1","RadionuclideCodeSequence"],"0x0302":["SQ","1","AdministrationRouteCodeSequence"],"0x0304":["SQ","1","RadiopharmaceuticalCodeSequence"],
"0x0306":["SQ","1","CalibrationDataSequence"],"0x0308":["US","1","EnergyWindowNumber"],"0x0400":["SH","1","ImageID"],"0x0410":["SQ","1","PatientOrientationCodeSequence"],"0x0412":["SQ","1","PatientOrientationModifierCodeSequence"],"0x0414":["SQ","1","PatientGantryRelationshipCodeSequence"],"0x1000":["CS","2","SeriesType"],"0x1001":["CS","1","Units"],"0x1002":["CS","1","CountsSource"],"0x1004":["CS","1","ReprojectionMethod"],"0x1100":["CS","1","RandomsCorrectionMethod"],"0x1101":["LO","1","AttenuationCorrectionMethod"],
"0x1102":["CS","1","DecayCorrection"],"0x1103":["LO","1","ReconstructionMethod"],"0x1104":["LO","1","DetectorLinesOfResponseUsed"],"0x1105":["LO","1","ScatterCorrectionMethod"],"0x1200":["DS","1","AxialAcceptance"],"0x1201":["IS","2","AxialMash"],"0x1202":["IS","1","TransverseMash"],"0x1203":["DS","2","DetectorElementSize"],"0x1210":["DS","1","CoincidenceWindowWidth"],"0x1220":["CS","1-n","SecondaryCountsType"],"0x1300":["DS","1","FrameReferenceTime"],"0x1310":["IS","1","PrimaryPromptsCountsAccumulated"],
"0x1311":["IS","1-n","SecondaryCountsAccumulated"],"0x1320":["DS","1","SliceSensitivityFactor"],"0x1321":["DS","1","DecayFactor"],"0x1322":["DS","1","DoseCalibrationFactor"],"0x1323":["DS","1","ScatterFractionFactor"],"0x1324":["DS","1","DeadTimeFactor"],"0x1330":["US","1","ImageIndex"],"0x1400":["CS","1-n","CountsIncluded"],"0x1401":["CS","1","DeadTimeCorrectionFlag"]},"0x0060":{"0x0000":["UL","1","HistogramGroupLength"],"0x3000":["SQ","1","HistogramSequence"],"0x3002":["US","1","HistogramNumberofBins"],
"0x3004":["US/SS","1","HistogramFirstBinValue"],"0x3006":["US/SS","1","HistogramLastBinValue"],"0x3008":["US","1","HistogramBinWidth"],"0x3010":["LO","1","HistogramExplanation"],"0x3020":["UL","1-n","HistogramData"]},"0x0070":{"0x0001":["SQ","1","GraphicAnnotationSequence"],"0x0002":["CS","1","GraphicLayer"],"0x0003":["CS","1","BoundingBoxAnnotationUnits"],"0x0004":["CS","1","AnchorPointAnnotationUnits"],"0x0005":["CS","1","GraphicAnnotationUnits"],"0x0006":["ST","1","UnformattedTextValue"],"0x0008":["SQ",
"1","TextObjectSequence"],"0x0009":["SQ","1","GraphicObjectSequence"],"0x0010":["FL","2","BoundingBoxTopLeftHandCorner"],"0x0011":["FL","2","BoundingBoxBottomRightHandCorner"],"0x0012":["CS","1","BoundingBoxTextHorizontalJustification"],"0x0014":["FL","2","AnchorPoint"],"0x0015":["CS","1","AnchorPointVisibility"],"0x0020":["US","1","GraphicDimensions"],"0x0021":["US","1","NumberOfGraphicPoints"],"0x0022":["FL","2-n","GraphicData"],"0x0023":["CS","1","GraphicType"],"0x0024":["CS","1","GraphicFilled"],
"0x0040":["IS","1","ImageRotationFrozenDraftRetired"],"0x0041":["CS","1","ImageHorizontalFlip"],"0x0042":["US","1","ImageRotation"],"0x0050":["US","2","DisplayedAreaTLHCFrozenDraftRetired"],"0x0051":["US","2","DisplayedAreaBRHCFrozenDraftRetired"],"0x0052":["SL","2","DisplayedAreaTopLeftHandCorner"],"0x0053":["SL","2","DisplayedAreaBottomRightHandCorner"],"0x005A":["SQ","1","DisplayedAreaSelectionSequence"],"0x0060":["SQ","1","GraphicLayerSequence"],"0x0062":["IS","1","GraphicLayerOrder"],"0x0066":["US",
"1","GraphicLayerRecommendedDisplayGrayscaleValue"],"0x0067":["US","3","GraphicLayerRecommendedDisplayRGBValue"],"0x0068":["LO","1","GraphicLayerDescription"],"0x0080":["CS","1","PresentationLabel"],"0x0081":["LO","1","PresentationDescription"],"0x0082":["DA","1","PresentationCreationDate"],"0x0083":["TM","1","PresentationCreationTime"],"0x0084":["PN","1","PresentationCreatorsName"],"0x0100":["CS","1","PresentationSizeMode"],"0x0101":["DS","2","PresentationPixelSpacing"],"0x0102":["IS","2","PresentationPixelAspectRatio"],
"0x0103":["FL","1","PresentationPixelMagnificationRatio"]},"0x0088":{"0x0000":["UL","1","StorageGroupLength"],"0x0130":["SH","1","StorageMediaFilesetID"],"0x0140":["UI","1","StorageMediaFilesetUID"],"0x0200":["SQ","1","IconImage"],"0x0904":["LO","1","TopicTitle"],"0x0906":["ST","1","TopicSubject"],"0x0910":["LO","1","TopicAuthor"],"0x0912":["LO","3","TopicKeyWords"]},"0x1000":{"0x0000":["UL","1","CodeTableGroupLength"],"0x0010":["US","3","EscapeTriplet"],"0x0011":["US","3","RunLengthTriplet"],"0x0012":["US",
"1","HuffmanTableSize"],"0x0013":["US","3","HuffmanTableTriplet"],"0x0014":["US","1","ShiftTableSize"],"0x0015":["US","3","ShiftTableTriplet"]},"0x1010":{"0x0000":["UL","1","ZonalMapGroupLength"],"0x0004":["US","1-n","ZonalMap"]},"0x2000":{"0x0000":["UL","1","FilmSessionGroupLength"],"0x0010":["IS","1","NumberOfCopies"],"0x001E":["SQ","1","PrinterConfigurationSequence"],"0x0020":["CS","1","PrintPriority"],"0x0030":["CS","1","MediumType"],"0x0040":["CS","1","FilmDestination"],"0x0050":["LO","1","FilmSessionLabel"],
"0x0060":["IS","1","MemoryAllocation"],"0x0061":["IS","1","MaximumMemoryAllocation"],"0x0062":["CS","1","ColorImagePrintingFlag"],"0x0063":["CS","1","CollationFlag"],"0x0065":["CS","1","AnnotationFlag"],"0x0067":["CS","1","ImageOverlayFlag"],"0x0069":["CS","1","PresentationLUTFlag"],"0x006A":["CS","1","ImageBoxPresentationLUTFlag"],"0x00A0":["US","1","MemoryBitDepth"],"0x00A1":["US","1","PrintingBitDepth"],"0x00A2":["SQ","1","MediaInstalledSequence"],"0x00A4":["SQ","1","OtherMediaAvailableSequence"],
"0x00A8":["SQ","1","SupportedImageDisplayFormatsSequence"],"0x0500":["SQ","1","ReferencedFilmBoxSequence"],"0x0510":["SQ","1","ReferencedStoredPrintSequence"]},"0x2010":{"0x0000":["UL","1","FilmBoxGroupLength"],"0x0010":["ST","1","ImageDisplayFormat"],"0x0030":["CS","1","AnnotationDisplayFormatID"],"0x0040":["CS","1","FilmOrientation"],"0x0050":["CS","1","FilmSizeID"],"0x0052":["CS","1","PrinterResolutionID"],"0x0054":["CS","1","DefaultPrinterResolutionID"],"0x0060":["CS","1","MagnificationType"],
"0x0080":["CS","1","SmoothingType"],"0x00A6":["CS","1","DefaultMagnificationType"],"0x00A7":["CS","1-n","OtherMagnificationTypesAvailable"],"0x00A8":["CS","1","DefaultSmoothingType"],"0x00A9":["CS","1-n","OtherSmoothingTypesAvailable"],"0x0100":["CS","1","BorderDensity"],"0x0110":["CS","1","EmptyImageDensity"],"0x0120":["US","1","MinDensity"],"0x0130":["US","1","MaxDensity"],"0x0140":["CS","1","Trim"],"0x0150":["ST","1","ConfigurationInformation"],"0x0152":["LT","1","ConfigurationInformationDescription"],
"0x0154":["IS","1","MaximumCollatedFilms"],"0x015E":["US","1","Illumination"],"0x0160":["US","1","ReflectedAmbientLight"],"0x0376":["DS","2","PrinterPixelSpacing"],"0x0500":["SQ","1","ReferencedFilmSessionSequence"],"0x0510":["SQ","1","ReferencedImageBoxSequence"],"0x0520":["SQ","1","ReferencedBasicAnnotationBoxSequence"]},"0x2020":{"0x0000":["UL","1","ImageBoxGroupLength"],"0x0010":["US","1","ImageBoxPosition"],"0x0020":["CS","1","Polarity"],"0x0030":["DS","1","RequestedImageSize"],"0x0040":["CS",
"1","RequestedDecimateCropBehavior"],"0x0050":["CS","1","RequestedResolutionID"],"0x00A0":["CS","1","RequestedImageSizeFlag"],"0x00A2":["CS","1","DecimateCropResult"],"0x0110":["SQ","1","PreformattedGrayscaleImageSequence"],"0x0111":["SQ","1","PreformattedColorImageSequence"],"0x0130":["SQ","1","ReferencedImageOverlayBoxSequence"],"0x0140":["SQ","1","ReferencedVOILUTBoxSequence"]},"0x2030":{"0x0000":["UL","1","AnnotationGroupLength"],"0x0010":["US","1","AnnotationPosition"],"0x0020":["LO","1","TextString"]},
"0x2040":{"0x0000":["UL","1","OverlayBoxGroupLength"],"0x0010":["SQ","1","ReferencedOverlayPlaneSequence"],"0x0011":["US","9","ReferencedOverlayPlaneGroups"],"0x0020":["SQ","1","OverlayPixelDataSequence"],"0x0060":["CS","1","OverlayMagnificationType"],"0x0070":["CS","1","OverlaySmoothingType"],"0x0072":["CS","1","OverlayOrImageMagnification"],"0x0074":["US","1","MagnifyToNumberOfColumns"],"0x0080":["CS","1","OverlayForegroundDensity"],"0x0082":["CS","1","OverlayBackgroundDensity"],"0x0090":["CS",
"1","OverlayMode"],"0x0100":["CS","1","ThresholdDensity"],"0x0500":["SQ","1","ReferencedOverlayImageBoxSequence"]},"0x2050":{"0x0000":["UL","1","PresentationLUTGroupLength"],"0x0010":["SQ","1","PresentationLUTSequence"],"0x0020":["CS","1","PresentationLUTShape"],"0x0500":["SQ","1","ReferencedPresentationLUTSequence"]},"0x2100":{"0x0000":["UL","1","PrintJobGroupLength"],"0x0010":["SH","1","PrintJobID"],"0x0020":["CS","1","ExecutionStatus"],"0x0030":["CS","1","ExecutionStatusInfo"],"0x0040":["DA","1",
"CreationDate"],"0x0050":["TM","1","CreationTime"],"0x0070":["AE","1","Originator"],"0x0140":["AE","1","DestinationAE"],"0x0160":["SH","1","OwnerID"],"0x0170":["IS","1","NumberOfFilms"],"0x0500":["SQ","1","ReferencedPrintJobSequence"]},"0x2110":{"0x0000":["UL","1","PrinterGroupLength"],"0x0010":["CS","1","PrinterStatus"],"0x0020":["CS","1","PrinterStatusInfo"],"0x0030":["LO","1","PrinterName"],"0x0099":["SH","1","PrintQueueID"]},"0x2120":{"0x0000":["UL","1","QueueGroupLength"],"0x0010":["CS","1",
"QueueStatus"],"0x0050":["SQ","1","PrintJobDescriptionSequence"],"0x0070":["SQ","1","QueueReferencedPrintJobSequence"]},"0x2130":{"0x0000":["UL","1","PrintContentGroupLength"],"0x0010":["SQ","1","PrintManagementCapabilitiesSequence"],"0x0015":["SQ","1","PrinterCharacteristicsSequence"],"0x0030":["SQ","1","FilmBoxContentSequence"],"0x0040":["SQ","1","ImageBoxContentSequence"],"0x0050":["SQ","1","AnnotationContentSequence"],"0x0060":["SQ","1","ImageOverlayBoxContentSequence"],"0x0080":["SQ","1","PresentationLUTContentSequence"],
"0x00A0":["SQ","1","ProposedStudySequence"],"0x00C0":["SQ","1","OriginalImageSequence"]},"0x3002":{"0x0000":["UL","1","RTImageGroupLength"],"0x0002":["SH","1","RTImageLabel"],"0x0003":["LO","1","RTImageName"],"0x0004":["ST","1","RTImageDescription"],"0x000A":["CS","1","ReportedValuesOrigin"],"0x000C":["CS","1","RTImagePlane"],"0x000D":["DS","3","XRayImageReceptorTranslation"],"0x000E":["DS","1","XRayImageReceptorAngle"],"0x0010":["DS","6","RTImageOrientation"],"0x0011":["DS","2","ImagePlanePixelSpacing"],
"0x0012":["DS","2","RTImagePosition"],"0x0020":["SH","1","RadiationMachineName"],"0x0022":["DS","1","RadiationMachineSAD"],"0x0024":["DS","1","RadiationMachineSSD"],"0x0026":["DS","1","RTImageSID"],"0x0028":["DS","1","SourceToReferenceObjectDistance"],"0x0029":["IS","1","FractionNumber"],"0x0030":["SQ","1","ExposureSequence"],"0x0032":["DS","1","MetersetExposure"],"0x0034":["DS","4","DiaphragmPosition"]},"0x3004":{"0x0000":["UL","1","RTDoseGroupLength"],"0x0001":["CS","1","DVHType"],"0x0002":["CS",
"1","DoseUnits"],"0x0004":["CS","1","DoseType"],"0x0006":["LO","1","DoseComment"],"0x0008":["DS","3","NormalizationPoint"],"0x000A":["CS","1","DoseSummationType"],"0x000C":["DS","2-n","GridFrameOffsetVector"],"0x000E":["DS","1","DoseGridScaling"],"0x0010":["SQ","1","RTDoseROISequence"],"0x0012":["DS","1","DoseValue"],"0x0040":["DS","3","DVHNormalizationPoint"],"0x0042":["DS","1","DVHNormalizationDoseValue"],"0x0050":["SQ","1","DVHSequence"],"0x0052":["DS","1","DVHDoseScaling"],"0x0054":["CS","1",
"DVHVolumeUnits"],"0x0056":["IS","1","DVHNumberOfBins"],"0x0058":["DS","2-2n","DVHData"],"0x0060":["SQ","1","DVHReferencedROISequence"],"0x0062":["CS","1","DVHROIContributionType"],"0x0070":["DS","1","DVHMinimumDose"],"0x0072":["DS","1","DVHMaximumDose"],"0x0074":["DS","1","DVHMeanDose"]},"0x3006":{"0x0000":["UL","1","RTStructureSetGroupLength"],"0x0002":["SH","1","StructureSetLabel"],"0x0004":["LO","1","StructureSetName"],"0x0006":["ST","1","StructureSetDescription"],"0x0008":["DA","1","StructureSetDate"],
"0x0009":["TM","1","StructureSetTime"],"0x0010":["SQ","1","ReferencedFrameOfReferenceSequence"],"0x0012":["SQ","1","RTReferencedStudySequence"],"0x0014":["SQ","1","RTReferencedSeriesSequence"],"0x0016":["SQ","1","ContourImageSequence"],"0x0020":["SQ","1","StructureSetROISequence"],"0x0022":["IS","1","ROINumber"],"0x0024":["UI","1","ReferencedFrameOfReferenceUID"],"0x0026":["LO","1","ROIName"],"0x0028":["ST","1","ROIDescription"],"0x002A":["IS","3","ROIDisplayColor"],"0x002C":["DS","1","ROIVolume"],
"0x0030":["SQ","1","RTRelatedROISequence"],"0x0033":["CS","1","RTROIRelationship"],"0x0036":["CS","1","ROIGenerationAlgorithm"],"0x0038":["LO","1","ROIGenerationDescription"],"0x0039":["SQ","1","ROIContourSequence"],"0x0040":["SQ","1","ContourSequence"],"0x0042":["CS","1","ContourGeometricType"],"0x0044":["DS","1","ContourSlabThickness"],"0x0045":["DS","3","ContourOffsetVector"],"0x0046":["IS","1","NumberOfContourPoints"],"0x0048":["IS","1","ContourNumber"],"0x0049":["IS","1-n","AttachedContours"],
"0x0050":["DS","3-3n","ContourData"],"0x0080":["SQ","1","RTROIObservationsSequence"],"0x0082":["IS","1","ObservationNumber"],"0x0084":["IS","1","ReferencedROINumber"],"0x0085":["SH","1","ROIObservationLabel"],"0x0086":["SQ","1","RTROIIdentificationCodeSequence"],"0x0088":["ST","1","ROIObservationDescription"],"0x00A0":["SQ","1","RelatedRTROIObservationsSequence"],"0x00A4":["CS","1","RTROIInterpretedType"],"0x00A6":["PN","1","ROIInterpreter"],"0x00B0":["SQ","1","ROIPhysicalPropertiesSequence"],"0x00B2":["CS",
"1","ROIPhysicalProperty"],"0x00B4":["DS","1","ROIPhysicalPropertyValue"],"0x00C0":["SQ","1","FrameOfReferenceRelationshipSequence"],"0x00C2":["UI","1","RelatedFrameOfReferenceUID"],"0x00C4":["CS","1","FrameOfReferenceTransformationType"],"0x00C6":["DS","16","FrameOfReferenceTransformationMatrix"],"0x00C8":["LO","1","FrameOfReferenceTransformationComment"]},"0x3008":{"0x0010":["SQ","1","MeasuredDoseReferenceSequence"],"0x0012":["ST","1","MeasuredDoseDescription"],"0x0014":["CS","1","MeasuredDoseType"],
"0x0016":["DS","1","MeasuredDoseValue"],"0x0020":["SQ","1","TreatmentSessionBeamSequence"],"0x0022":["IS","1","CurrentFractionNumber"],"0x0024":["DA","1","TreatmentControlPointDate"],"0x0025":["TM","1","TreatmentControlPointTime"],"0x002A":["CS","1","TreatmentTerminationStatus"],"0x002B":["SH","1","TreatmentTerminationCode"],"0x002C":["CS","1","TreatmentVerificationStatus"],"0x0030":["SQ","1","ReferencedTreatmentRecordSequence"],"0x0032":["DS","1","SpecifiedPrimaryMeterset"],"0x0033":["DS","1","SpecifiedSecondaryMeterset"],
"0x0036":["DS","1","DeliveredPrimaryMeterset"],"0x0037":["DS","1","DeliveredSecondaryMeterset"],"0x003A":["DS","1","SpecifiedTreatmentTime"],"0x003B":["DS","1","DeliveredTreatmentTime"],"0x0040":["SQ","1","ControlPointDeliverySequence"],"0x0042":["DS","1","SpecifiedMeterset"],"0x0044":["DS","1","DeliveredMeterset"],"0x0048":["DS","1","DoseRateDelivered"],"0x0050":["SQ","1","TreatmentSummaryCalculatedDoseReferenceSequence"],"0x0052":["DS","1","CumulativeDosetoDoseReference"],"0x0054":["DA","1","FirstTreatmentDate"],
"0x0056":["DA","1","MostRecentTreatmentDate"],"0x005A":["IS","1","NumberofFractionsDelivered"],"0x0060":["SQ","1","OverrideSequence"],"0x0062":["AT","1","OverrideParameterPointer"],"0x0064":["IS","1","MeasuredDoseReferenceNumber"],"0x0066":["ST","1","OverrideReason"],"0x0070":["SQ","1","CalculatedDoseReferenceSequence"],"0x0072":["IS","1","CalculatedDoseReferenceNumber"],"0x0074":["ST","1","CalculatedDoseReferenceDescription"],"0x0076":["DS","1","CalculatedDoseReferenceDoseValue"],"0x0078":["DS",
"1","StartMeterset"],"0x007A":["DS","1","EndMeterset"],"0x0080":["SQ","1","ReferencedMeasuredDoseReferenceSequence"],"0x0082":["IS","1","ReferencedMeasuredDoseReferenceNumber"],"0x0090":["SQ","1","ReferencedCalculatedDoseReferenceSequence"],"0x0092":["IS","1","ReferencedCalculatedDoseReferenceNumber"],"0x00A0":["SQ","1","BeamLimitingDeviceLeafPairsSequence"],"0x00B0":["SQ","1","RecordedWedgeSequence"],"0x00C0":["SQ","1","RecordedCompensatorSequence"],"0x00D0":["SQ","1","RecordedBlockSequence"],"0x00E0":["SQ",
"1","TreatmentSummaryMeasuredDoseReferenceSequence"],"0x0100":["SQ","1","RecordedSourceSequence"],"0x0105":["LO","1","SourceSerialNumber"],"0x0110":["SQ","1","TreatmentSessionApplicationSetupSequence"],"0x0116":["CS","1","ApplicationSetupCheck"],"0x0120":["SQ","1","RecordedBrachyAccessoryDeviceSequence"],"0x0122":["IS","1","ReferencedBrachyAccessoryDeviceNumber"],"0x0130":["SQ","1","RecordedChannelSequence"],"0x0132":["DS","1","SpecifiedChannelTotalTime"],"0x0134":["DS","1","DeliveredChannelTotalTime"],
"0x0136":["IS","1","SpecifiedNumberofPulses"],"0x0138":["IS","1","DeliveredNumberofPulses"],"0x013A":["DS","1","SpecifiedPulseRepetitionInterval"],"0x013C":["DS","1","DeliveredPulseRepetitionInterval"],"0x0140":["SQ","1","RecordedSourceApplicatorSequence"],"0x0142":["IS","1","ReferencedSourceApplicatorNumber"],"0x0150":["SQ","1","RecordedChannelShieldSequence"],"0x0152":["IS","1","ReferencedChannelShieldNumber"],"0x0160":["SQ","1","BrachyControlPointDeliveredSequence"],"0x0162":["DA","1","SafePositionExitDate"],
"0x0164":["TM","1","SafePositionExitTime"],"0x0166":["DA","1","SafePositionReturnDate"],"0x0168":["TM","1","SafePositionReturnTime"],"0x0200":["CS","1","CurrentTreatmentStatus"],"0x0202":["ST","1","TreatmentStatusComment"],"0x0220":["SQ","1","FractionGroupSummarySequence"],"0x0223":["IS","1","ReferencedFractionNumber"],"0x0224":["CS","1","FractionGroupType"],"0x0230":["CS","1","BeamStopperPosition"],"0x0240":["SQ","1","FractionStatusSummarySequence"],"0x0250":["DA","1","TreatmentDate"],"0x0251":["TM",
"1","TreatmentTime"]},"0x300A":{"0x0000":["UL","1","RTPlanGroupLength"],"0x0002":["SH","1","RTPlanLabel"],"0x0003":["LO","1","RTPlanName"],"0x0004":["ST","1","RTPlanDescription"],"0x0006":["DA","1","RTPlanDate"],"0x0007":["TM","1","RTPlanTime"],"0x0009":["LO","1-n","TreatmentProtocols"],"0x000A":["CS","1","TreatmentIntent"],"0x000B":["LO","1-n","TreatmentSites"],"0x000C":["CS","1","RTPlanGeometry"],"0x000E":["ST","1","PrescriptionDescription"],"0x0010":["SQ","1","DoseReferenceSequence"],"0x0012":["IS",
"1","DoseReferenceNumber"],"0x0014":["CS","1","DoseReferenceStructureType"],"0x0015":["CS","1","NominalBeamEnergyUnit"],"0x0016":["LO","1","DoseReferenceDescription"],"0x0018":["DS","3","DoseReferencePointCoordinates"],"0x001A":["DS","1","NominalPriorDose"],"0x0020":["CS","1","DoseReferenceType"],"0x0021":["DS","1","ConstraintWeight"],"0x0022":["DS","1","DeliveryWarningDose"],"0x0023":["DS","1","DeliveryMaximumDose"],"0x0025":["DS","1","TargetMinimumDose"],"0x0026":["DS","1","TargetPrescriptionDose"],
"0x0027":["DS","1","TargetMaximumDose"],"0x0028":["DS","1","TargetUnderdoseVolumeFraction"],"0x002A":["DS","1","OrganAtRiskFullVolumeDose"],"0x002B":["DS","1","OrganAtRiskLimitDose"],"0x002C":["DS","1","OrganAtRiskMaximumDose"],"0x002D":["DS","1","OrganAtRiskOverdoseVolumeFraction"],"0x0040":["SQ","1","ToleranceTableSequence"],"0x0042":["IS","1","ToleranceTableNumber"],"0x0043":["SH","1","ToleranceTableLabel"],"0x0044":["DS","1","GantryAngleTolerance"],"0x0046":["DS","1","BeamLimitingDeviceAngleTolerance"],
"0x0048":["SQ","1","BeamLimitingDeviceToleranceSequence"],"0x004A":["DS","1","BeamLimitingDevicePositionTolerance"],"0x004C":["DS","1","PatientSupportAngleTolerance"],"0x004E":["DS","1","TableTopEccentricAngleTolerance"],"0x0051":["DS","1","TableTopVerticalPositionTolerance"],"0x0052":["DS","1","TableTopLongitudinalPositionTolerance"],"0x0053":["DS","1","TableTopLateralPositionTolerance"],"0x0055":["CS","1","RTPlanRelationship"],"0x0070":["SQ","1","FractionGroupSequence"],"0x0071":["IS","1","FractionGroupNumber"],
"0x0078":["IS","1","NumberOfFractionsPlanned"],"0x0079":["IS","1","NumberOfFractionsPatternDigistsPerDay"],"0x007A":["IS","1","RepeatFractionCycleLength"],"0x007B":["LT","1","FractionPattern"],"0x0080":["IS","1","NumberOfBeams"],"0x0082":["DS","3","BeamDoseSpecificationPoint"],"0x0084":["DS","1","BeamDose"],"0x0086":["DS","1","BeamMeterset"],"0x00A0":["IS","1","NumberOfBrachyApplicationSetups"],"0x00A2":["DS","3","BrachyApplicationSetupDoseSpecificationPoint"],"0x00A4":["DS","1","BrachyApplicationSetupDose"],
"0x00B0":["SQ","1","BeamSequence"],"0x00B2":["SH","1","TreatmentMachineName"],"0x00B3":["CS","1","PrimaryDosimeterUnit"],"0x00B4":["DS","1","SourceAxisDistance"],"0x00B6":["SQ","1","BeamLimitingDeviceSequence"],"0x00B8":["CS","1","RTBeamLimitingDeviceType"],"0x00BA":["DS","1","SourceToBeamLimitingDeviceDistance"],"0x00BC":["IS","1","NumberOfLeafJawPairs"],"0x00BE":["DS","3-n","LeafPositionBoundaries"],"0x00C0":["IS","1","BeamNumber"],"0x00C2":["LO","1","BeamName"],"0x00C3":["ST","1","BeamDescription"],
"0x00C4":["CS","1","BeamType"],"0x00C6":["CS","1","RadiationType"],"0x00C8":["IS","1","ReferenceImageNumber"],"0x00CA":["SQ","1","PlannedVerificationImageSequence"],"0x00CC":["LO","1-n","ImagingDeviceSpecificAcquisitionParameters"],"0x00CE":["CS","1","TreatmentDeliveryType"],"0x00D0":["IS","1","NumberOfWedges"],"0x00D1":["SQ","1","WedgeSequence"],"0x00D2":["IS","1","WedgeNumber"],"0x00D3":["CS","1","WedgeType"],"0x00D4":["SH","1","WedgeID"],"0x00D5":["IS","1","WedgeAngle"],"0x00D6":["DS","1","WedgeFactor"],
"0x00D8":["DS","1","WedgeOrientation"],"0x00DA":["DS","1","SourceToWedgeTrayDistance"],"0x00E0":["IS","1","NumberOfCompensators"],"0x00E1":["SH","1","MaterialID"],"0x00E2":["DS","1","TotalCompensatorTrayFactor"],"0x00E3":["SQ","1","CompensatorSequence"],"0x00E4":["IS","1","CompensatorNumber"],"0x00E5":["SH","1","CompensatorID"],"0x00E6":["DS","1","SourceToCompensatorTrayDistance"],"0x00E7":["IS","1","CompensatorRows"],"0x00E8":["IS","1","CompensatorColumns"],"0x00E9":["DS","2","CompensatorPixelSpacing"],
"0x00EA":["DS","2","CompensatorPosition"],"0x00EB":["DS","1-n","CompensatorTransmissionData"],"0x00EC":["DS","1-n","CompensatorThicknessData"],"0x00ED":["IS","1","NumberOfBoli"],"0x00EE":["CS","1","CompensatorType"],"0x00F0":["IS","1","NumberOfBlocks"],"0x00F2":["DS","1","TotalBlockTrayFactor"],"0x00F4":["SQ","1","BlockSequence"],"0x00F5":["SH","1","BlockTrayID"],"0x00F6":["DS","1","SourceToBlockTrayDistance"],"0x00F8":["CS","1","BlockType"],"0x00FA":["CS","1","BlockDivergence"],"0x00FC":["IS","1",
"BlockNumber"],"0x00FE":["LO","1","BlockName"],"0x0100":["DS","1","BlockThickness"],"0x0102":["DS","1","BlockTransmission"],"0x0104":["IS","1","BlockNumberOfPoints"],"0x0106":["DS","2-2n","BlockData"],"0x0107":["SQ","1","ApplicatorSequence"],"0x0108":["SH","1","ApplicatorID"],"0x0109":["CS","1","ApplicatorType"],"0x010A":["LO","1","ApplicatorDescription"],"0x010C":["DS","1","CumulativeDoseReferenceCoefficient"],"0x010E":["DS","1","FinalCumulativeMetersetWeight"],"0x0110":["IS","1","NumberOfControlPoints"],
"0x0111":["SQ","1","ControlPointSequence"],"0x0112":["IS","1","ControlPointIndex"],"0x0114":["DS","1","NominalBeamEnergy"],"0x0115":["DS","1","DoseRateSet"],"0x0116":["SQ","1","WedgePositionSequence"],"0x0118":["CS","1","WedgePosition"],"0x011A":["SQ","1","BeamLimitingDevicePositionSequence"],"0x011C":["DS","2-2n","LeafJawPositions"],"0x011E":["DS","1","GantryAngle"],"0x011F":["CS","1","GantryRotationDirection"],"0x0120":["DS","1","BeamLimitingDeviceAngle"],"0x0121":["CS","1","BeamLimitingDeviceRotationDirection"],
"0x0122":["DS","1","PatientSupportAngle"],"0x0123":["CS","1","PatientSupportRotationDirection"],"0x0124":["DS","1","TableTopEccentricAxisDistance"],"0x0125":["DS","1","TableTopEccentricAngle"],"0x0126":["CS","1","TableTopEccentricRotationDirection"],"0x0128":["DS","1","TableTopVerticalPosition"],"0x0129":["DS","1","TableTopLongitudinalPosition"],"0x012A":["DS","1","TableTopLateralPosition"],"0x012C":["DS","3","IsocenterPosition"],"0x012E":["DS","3","SurfaceEntryPoint"],"0x0130":["DS","1","SourceToSurfaceDistance"],
"0x0134":["DS","1","CumulativeMetersetWeight"],"0x0140":["FL","1","TableTopPitchAngle"],"0x0142":["CS","1","TableTopPitchRotationDirection"],"0x0144":["FL","1","TableTopRollAngle"],"0x0146":["CS","1","TableTopRollRotationDirection"],"0x0148":["FL","1","HeadFixationAngle"],"0x014A":["FL","1","GantryPitchAngle"],"0x014C":["CS","1","GantryPitchRotationDirection"],"0x014E":["FL","1","GantryPitchAngleTolerance"],"0x0180":["SQ","1","PatientSetupSequence"],"0x0182":["IS","1","PatientSetupNumber"],"0x0184":["LO",
"1","PatientAdditionalPosition"],"0x0190":["SQ","1","FixationDeviceSequence"],"0x0192":["CS","1","FixationDeviceType"],"0x0194":["SH","1","FixationDeviceLabel"],"0x0196":["ST","1","FixationDeviceDescription"],"0x0198":["SH","1","FixationDevicePosition"],"0x01A0":["SQ","1","ShieldingDeviceSequence"],"0x01A2":["CS","1","ShieldingDeviceType"],"0x01A4":["SH","1","ShieldingDeviceLabel"],"0x01A6":["ST","1","ShieldingDeviceDescription"],"0x01A8":["SH","1","ShieldingDevicePosition"],"0x01B0":["CS","1","SetupTechnique"],
"0x01B2":["ST","1","SetupTechniqueDescription"],"0x01B4":["SQ","1","SetupDeviceSequence"],"0x01B6":["CS","1","SetupDeviceType"],"0x01B8":["SH","1","SetupDeviceLabel"],"0x01BA":["ST","1","SetupDeviceDescription"],"0x01BC":["DS","1","SetupDeviceParameter"],"0x01D0":["ST","1","SetupReferenceDescription"],"0x01D2":["DS","1","TableTopVerticalSetupDisplacement"],"0x01D4":["DS","1","TableTopLongitudinalSetupDisplacement"],"0x01D6":["DS","1","TableTopLateralSetupDisplacement"],"0x0200":["CS","1","BrachyTreatmentTechnique"],
"0x0202":["CS","1","BrachyTreatmentType"],"0x0206":["SQ","1","TreatmentMachineSequence"],"0x0210":["SQ","1","SourceSequence"],"0x0212":["IS","1","SourceNumber"],"0x0214":["CS","1","SourceType"],"0x0216":["LO","1","SourceManufacturer"],"0x0218":["DS","1","ActiveSourceDiameter"],"0x021A":["DS","1","ActiveSourceLength"],"0x0222":["DS","1","SourceEncapsulationNominalThickness"],"0x0224":["DS","1","SourceEncapsulationNominalTransmission"],"0x0226":["LO","1","SourceIsotopeName"],"0x0228":["DS","1","SourceIsotopeHalfLife"],
"0x022A":["DS","1","ReferenceAirKermaRate"],"0x022C":["DA","1","AirKermaRateReferenceDate"],"0x022E":["TM","1","AirKermaRateReferenceTime"],"0x0230":["SQ","1","ApplicationSetupSequence"],"0x0232":["CS","1","ApplicationSetupType"],"0x0234":["IS","1","ApplicationSetupNumber"],"0x0236":["LO","1","ApplicationSetupName"],"0x0238":["LO","1","ApplicationSetupManufacturer"],"0x0240":["IS","1","TemplateNumber"],"0x0242":["SH","1","TemplateType"],"0x0244":["LO","1","TemplateName"],"0x0250":["DS","1","TotalReferenceAirKerma"],
"0x0260":["SQ","1","BrachyAccessoryDeviceSequence"],"0x0262":["IS","1","BrachyAccessoryDeviceNumber"],"0x0263":["SH","1","BrachyAccessoryDeviceID"],"0x0264":["CS","1","BrachyAccessoryDeviceType"],"0x0266":["LO","1","BrachyAccessoryDeviceName"],"0x026A":["DS","1","BrachyAccessoryDeviceNominalThickness"],"0x026C":["DS","1","BrachyAccessoryDeviceNominalTransmission"],"0x0280":["SQ","1","ChannelSequence"],"0x0282":["IS","1","ChannelNumber"],"0x0284":["DS","1","ChannelLength"],"0x0286":["DS","1","ChannelTotalTime"],
"0x0288":["CS","1","SourceMovementType"],"0x028A":["IS","1","NumberOfPulses"],"0x028C":["DS","1","PulseRepetitionInterval"],"0x0290":["IS","1","SourceApplicatorNumber"],"0x0291":["SH","1","SourceApplicatorID"],"0x0292":["CS","1","SourceApplicatorType"],"0x0294":["LO","1","SourceApplicatorName"],"0x0296":["DS","1","SourceApplicatorLength"],"0x0298":["LO","1","SourceApplicatorManufacturer"],"0x029C":["DS","1","SourceApplicatorWallNominalThickness"],"0x029E":["DS","1","SourceApplicatorWallNominalTransmission"],
"0x02A0":["DS","1","SourceApplicatorStepSize"],"0x02A2":["IS","1","TransferTubeNumber"],"0x02A4":["DS","1","TransferTubeLength"],"0x02B0":["SQ","1","ChannelShieldSequence"],"0x02B2":["IS","1","ChannelShieldNumber"],"0x02B3":["SH","1","ChannelShieldID"],"0x02B4":["LO","1","ChannelShieldName"],"0x02B8":["DS","1","ChannelShieldNominalThickness"],"0x02BA":["DS","1","ChannelShieldNominalTransmission"],"0x02C8":["DS","1","FinalCumulativeTimeWeight"],"0x02D0":["SQ","1","BrachyControlPointSequence"],"0x02D2":["DS",
"1","ControlPointRelativePosition"],"0x02D4":["DS","3","ControlPointDPosition"],"0x02D6":["DS","1","CumulativeTimeWeight"]},"0x300C":{"0x0000":["UL","1","RTRelationshipGroupLength"],"0x0002":["SQ","1","ReferencedRTPlanSequence"],"0x0004":["SQ","1","ReferencedBeamSequence"],"0x0006":["IS","1","ReferencedBeamNumber"],"0x0007":["IS","1","ReferencedReferenceImageNumber"],"0x0008":["DS","1","StartCumulativeMetersetWeight"],"0x0009":["DS","1","EndCumulativeMetersetWeight"],"0x000A":["SQ","1","ReferencedBrachyApplicationSetupSequence"],
"0x000C":["IS","1","ReferencedBrachyApplicationSetupNumber"],"0x000E":["IS","1","ReferencedSourceNumber"],"0x0020":["SQ","1","ReferencedFractionGroupSequence"],"0x0022":["IS","1","ReferencedFractionGroupNumber"],"0x0040":["SQ","1","ReferencedVerificationImageSequence"],"0x0042":["SQ","1","ReferencedReferenceImageSequence"],"0x0050":["SQ","1","ReferencedDoseReferenceSequence"],"0x0051":["IS","1","ReferencedDoseReferenceNumber"],"0x0055":["SQ","1","BrachyReferencedDoseReferenceSequence"],"0x0060":["SQ",
"1","ReferencedStructureSetSequence"],"0x006A":["IS","1","ReferencedPatientSetupNumber"],"0x0080":["SQ","1","ReferencedDoseSequence"],"0x00A0":["IS","1","ReferencedToleranceTableNumber"],"0x00B0":["SQ","1","ReferencedBolusSequence"],"0x00C0":["IS","1","ReferencedWedgeNumber"],"0x00D0":["IS","1","ReferencedCompensatorNumber"],"0x00E0":["IS","1","ReferencedBlockNumber"],"0x00F0":["IS","1","ReferencedControlPointIndex"]},"0x300E":{"0x0000":["UL","1","RTApprovalGroupLength"],"0x0002":["CS","1","ApprovalStatus"],
"0x0004":["DA","1","ReviewDate"],"0x0005":["TM","1","ReviewTime"],"0x0008":["PN","1","ReviewerName"]},"0x4000":{"0x0000":["UL","1","TextGroupLength"],"0x0010":["LT","1-n","TextArbitrary"],"0x4000":["LT","1-n","TextComments"]},"0x4008":{"0x0000":["UL","1","ResultsGroupLength"],"0x0040":["SH","1","ResultsID"],"0x0042":["LO","1","ResultsIDIssuer"],"0x0050":["SQ","1","ReferencedInterpretationSequence"],"0x0100":["DA","1","InterpretationRecordedDate"],"0x0101":["TM","1","InterpretationRecordedTime"],"0x0102":["PN",
"1","InterpretationRecorder"],"0x0103":["LO","1","ReferenceToRecordedSound"],"0x0108":["DA","1","InterpretationTranscriptionDate"],"0x0109":["TM","1","InterpretationTranscriptionTime"],"0x010A":["PN","1","InterpretationTranscriber"],"0x010B":["ST","1","InterpretationText"],"0x010C":["PN","1","InterpretationAuthor"],"0x0111":["SQ","1","InterpretationApproverSequence"],"0x0112":["DA","1","InterpretationApprovalDate"],"0x0113":["TM","1","InterpretationApprovalTime"],"0x0114":["PN","1","PhysicianApprovingInterpretation"],
"0x0115":["LT","1","InterpretationDiagnosisDescription"],"0x0117":["SQ","1","DiagnosisCodeSequence"],"0x0118":["SQ","1","ResultsDistributionListSequence"],"0x0119":["PN","1","DistributionName"],"0x011A":["LO","1","DistributionAddress"],"0x0200":["SH","1","InterpretationID"],"0x0202":["LO","1","InterpretationIDIssuer"],"0x0210":["CS","1","InterpretationTypeID"],"0x0212":["CS","1","InterpretationStatusID"],"0x0300":["ST","1","Impressions"],"0x4000":["ST","1","ResultsComments"]},"0x5000":{"0x0000":["UL",
"1","CurveGroupLength"],"0x0005":["US","1","CurveDimensions"],"0x0010":["US","1","NumberOfPoints"],"0x0020":["CS","1","TypeOfData"],"0x0022":["LO","1","CurveDescription"],"0x0030":["SH","1-n","AxisUnits"],"0x0040":["SH","1-n","AxisLabels"],"0x0103":["US","1","DataValueRepresentation"],"0x0104":["US","1-n","MinimumCoordinateValue"],"0x0105":["US","1-n","MaximumCoordinateValue"],"0x0106":["SH","1-n","CurveRange"],"0x0110":["US","1","CurveDataDescriptor"],"0x0112":["US","1","CoordinateStartValue"],"0x0114":["US",
"1","CoordinateStepValue"],"0x2000":["US","1","AudioType"],"0x2002":["US","1","AudioSampleFormat"],"0x2004":["US","1","NumberOfChannels"],"0x2006":["UL","1","NumberOfSamples"],"0x2008":["UL","1","SampleRate"],"0x200A":["UL","1","TotalTime"],"0x200C":["OX","1","AudioSampleData"],"0x200E":["LT","1","AudioComments"],"0x3000":["OX","1","CurveData"]},"0x5400":{"0x0100":["SQ","1","WaveformSequence"],"0x0110":["OW/OB","1","ChannelMinimumValue"],"0x0112":["OW/OB","1","ChannelMaximumValue"],"0x1004":["US",
"1","WaveformBitsAllocated"],"0x1006":["CS","1","WaveformSampleInterpretation"],"0x100A":["OW/OB","1","WaveformPaddingValue"],"0x1010":["OW/OB","1","WaveformData"]},"0x6000":{"0x0000":["UL","1","OverlayGroupLength"],"0x0010":["US","1","OverlayRows"],"0x0011":["US","1","OverlayColumns"],"0x0012":["US","1","OverlayPlanes"],"0x0015":["IS","1","OverlayNumberOfFrames"],"0x0040":["CS","1","OverlayType"],"0x0050":["SS","2","OverlayOrigin"],"0x0051":["US","1","OverlayImageFrameOrigin"],"0x0052":["US","1",
"OverlayPlaneOrigin"],"0x0060":["CS","1","OverlayCompressionCode"],"0x0061":["SH","1","OverlayCompressionOriginator"],"0x0062":["SH","1","OverlayCompressionLabel"],"0x0063":["SH","1","OverlayCompressionDescription"],"0x0066":["AT","1-n","OverlayCompressionStepPointers"],"0x0068":["US","1","OverlayRepeatInterval"],"0x0069":["US","1","OverlayBitsGrouped"],"0x0100":["US","1","OverlayBitsAllocated"],"0x0102":["US","1","OverlayBitPosition"],"0x0110":["CS","1","OverlayFormat"],"0x0200":["US","1","OverlayLocation"],
"0x0800":["CS","1-n","OverlayCodeLabel"],"0x0802":["US","1","OverlayNumberOfTables"],"0x0803":["AT","1-n","OverlayCodeTableLocation"],"0x0804":["US","1","OverlayBitsForCodeWord"],"0x1100":["US","1","OverlayDescriptorGray"],"0x1101":["US","1","OverlayDescriptorRed"],"0x1102":["US","1","OverlayDescriptorGreen"],"0x1103":["US","1","OverlayDescriptorBlue"],"0x1200":["US","1-n","OverlayGray"],"0x1201":["US","1-n","OverlayRed"],"0x1202":["US","1-n","OverlayGreen"],"0x1203":["US","1-n","OverlayBlue"],"0x1301":["IS",
"1","ROIArea"],"0x1302":["DS","1","ROIMean"],"0x1303":["DS","1","ROIStandardDeviation"],"0x3000":["OW","1","OverlayData"],"0x4000":["LT","1-n","OverlayComments"]},"0x7F00":{"0x0000":["UL","1","VariablePixelDataGroupLength"],"0x0010":["OX","1","VariablePixelData"],"0x0011":["AT","1","VariableNextDataGroup"],"0x0020":["OW","1-n","VariableCoefficientsSDVN"],"0x0030":["OW","1-n","VariableCoefficientsSDHN"],"0x0040":["OW","1-n","VariableCoefficientsSDDN"]},"0x7FE0":{"0x0000":["UL","1","PixelDataGroupLength"],
"0x0010":["OX","1","PixelData"],"0x0020":["OW","1-n","CoefficientsSDVN"],"0x0030":["OW","1-n","CoefficientsSDHN"],"0x0040":["OW","1-n","CoefficientsSDDN"]},"0xFFFC":{"0xFFFC":["OB","1","DataSetTrailingPadding"]},"0xFFFE":{"0xE000":["NONE","1","Item"],"0xE00D":["NONE","1","ItemDelimitationItem"],"0xE0DD":["NONE","1","SequenceDelimitationItem"]}};dwv=dwv||{};dwv.browser=dwv.browser||{};
dwv.browser.hasFileApi=function(){return-1===navigator.appVersion.indexOf("Safari")||-1!==navigator.appVersion.indexOf("Chrome")||-1===navigator.appVersion.indexOf("5.0.")&&-1===navigator.appVersion.indexOf("5.1.")?"FileReader"in window:(console.warn("Assuming FileAPI support for Safari5..."),!0)};dwv.browser.hasXmlHttpRequest=function(){return"XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest};dwv.browser.hasTypedArray=function(){return"Uint8Array"in window&&"Uint16Array"in window};
dwv.browser.hasClampedArray=function(){return"Uint8ClampedArray"in window};
dwv.browser.check=function(){var b="";if(!dwv.browser.hasFileApi())throw b="The File APIs are not supported in this browser. ",alert(b+"The application cannot be run."),Error(b);if(!dwv.browser.hasXmlHttpRequest())throw b="The XMLHttpRequest is not supported in this browser. ",alert(b+"The application cannot be run."),Error(b);if(!dwv.browser.hasTypedArray())throw b="The Typed arrays are not supported in this browser. ",alert(b+"The application cannot be run."),Error(b);dwv.browser.hasClampedArray()||
console.warn("The Uint8ClampedArray is not supported in this browser. This may impair performance. ")};dwv=dwv||{};dwv.gui=dwv.gui||{};dwv.gui.base=dwv.gui.base||{};dwv.gui.filter=dwv.gui.filter||{};dwv.gui.filter.base=dwv.gui.filter.base||{};
dwv.gui.base.appendFilterHtml=function(){var b=dwv.html.createHtmlSelect("filterSelect",dwv.tool.filters);b.onchange=dwv.gui.onChangeFilter;var a=dwv.html.createHiddenElement("li","filterLi");a.setAttribute("class","ui-block-b");a.appendChild(b);dwv.html.appendElement("toolList",a)};dwv.gui.base.displayFilterHtml=function(b){dwv.html.displayElement("filterLi",b)};dwv.gui.base.initFilterHtml=function(){document.getElementById("filterSelect").selectedIndex=0;dwv.gui.refreshSelect("#filterSelect")};
dwv.gui.filter.base.appendThresholdHtml=function(){var b=dwv.html.createHiddenElement("li","thresholdLi");b.setAttribute("class","ui-block-c");document.getElementById("toolList").appendChild(b);dwv.gui.appendSliderHtml();$("#toolList").trigger("create")};dwv.gui.filter.base.displayThresholdHtml=function(b){dwv.html.displayElement("thresholdLi",b)};dwv.gui.filter.base.initThresholdHtml=function(){dwv.gui.initSliderHtml()};
dwv.gui.filter.base.createFilterApplyButton=function(){var b=document.createElement("button");b.id="runFilterButton";b.onclick=dwv.gui.onRunFilter;b.setAttribute("style","width:100%; margin-top:0.5em;");b.setAttribute("class","ui-btn ui-btn-b");b.appendChild(document.createTextNode("Apply"));return b};
dwv.gui.filter.base.appendSharpenHtml=function(){var b=dwv.html.createHiddenElement("li","sharpenLi");b.setAttribute("class","ui-block-c");b.appendChild(dwv.gui.filter.base.createFilterApplyButton());dwv.html.appendElement("toolList",b)};dwv.gui.filter.base.displaySharpenHtml=function(b){dwv.html.displayElement("sharpenLi",b)};
dwv.gui.filter.base.appendSobelHtml=function(){var b=dwv.html.createHiddenElement("li","sobelLi");b.setAttribute("class","ui-block-c");b.appendChild(dwv.gui.filter.base.createFilterApplyButton());dwv.html.appendElement("toolList",b)};dwv.gui.filter.base.displaySobelHtml=function(b){dwv.html.displayElement("sobelLi",b)};dwv=dwv||{};dwv.gui=dwv.gui||{};dwv.gui.base=dwv.gui.base||{};dwv.gui.base.getWindowSize=function(){return{width:$(window).width(),height:$(window).height()-100}};
dwv.gui.updateProgress=function(b){g_arr_load_progress?g_arr_load_progress(b):b.lengthComputable&&(b=Math.round(b.loaded/b.total*100),dwv.gui.displayProgress(b))};dwv.gui.base.displayProgress=function(b){100>b?$.mobile.loading("show",{text:b+"%",textVisible:!0,theme:"b"}):100===b&&$.mobile.loading("hide")};dwv.gui.base.refreshSelect=function(b){$(b).selectmenu&&$(b).selectmenu("refresh")};
dwv.gui.setSelected=function(b,a){var e=document.getElementById(b),d=0;for(d in e.options)if(e.options[d].text===a)break;e.selectedIndex=d;dwv.gui.refreshSelect("#"+b)};
dwv.gui.base.appendSliderHtml=function(){var b=document.createElement("input");b.id="threshold-min";b.type="range";b.max=1;b.min=0;b.value=0;var a=document.createElement("input");a.id="threshold-max";a.type="range";a.max=1;a.min=0;a.value=1;var e=document.createElement("div");e.id="threshold-div";e.setAttribute("data-role","rangeslider");e.appendChild(b);e.appendChild(a);e.setAttribute("data-mini","true");document.getElementById("thresholdLi").appendChild(e);$("#threshold-div").on("change",function(){dwv.gui.onChangeMinMax({min:$("#threshold-min").val(),
max:$("#threshold-max").val()})});$("#toolList").trigger("create")};dwv.gui.base.initSliderHtml=function(){var b=app.getImage().getDataRange().min,a=app.getImage().getDataRange().max,e=document.getElementById("threshold-min");e.max=a;e.min=b;e.value=b;e=document.getElementById("threshold-max");e.max=a;e.min=b;e.value=a;$("#toolList").trigger("create")};
dwv.gui.base.appendTagsTable=function(b){var a=document.getElementById("tags");if(null!==a){for(;a.hasChildNodes();)a.removeChild(a.firstChild);b.PixelData&&(b.PixelData.value="...");b=dwv.html.toTable(b);b.id="tagsTable";b.className="tagsList table-stripe";b.setAttribute("data-role","table");b.setAttribute("data-mode","columntoggle");a.appendChild(dwv.html.getHtmlSearchForm(b));a.appendChild(b);$("#tags").trigger("create")}};dwv=dwv||{};dwv.gui=dwv.gui||{};dwv.gui.onChangeWindowLevelPreset=function(){dwv.tool.updateWindowingDataFromName(this.value)};
dwv.gui.onChangeColourMap=function(){dwv.tool.updateColourMapFromName(this.value)};dwv.gui.onChangeLoader=function(){"file"===this.value?(dwv.gui.displayUrlLoadHtml(!1),dwv.gui.displayFileLoadHtml(!0)):"url"===this.value&&(dwv.gui.displayFileLoadHtml(!1),dwv.gui.displayUrlLoadHtml(!0))};dwv.gui.onChangeFiles=function(b){app.onChangeFiles(b)};dwv.gui.onChangeURL=function(b){app.onChangeURL(b)};dwv.gui.onChangeTool=function(){app.getToolBox().setSelectedTool(this.value)};dwv.gui.onChangeFilter=function(){app.getToolBox().getSelectedTool().setSelectedFilter(this.value)};
dwv.gui.onRunFilter=function(){app.getToolBox().getSelectedTool().getSelectedFilter().run()};dwv.gui.onChangeMinMax=function(b){app.getToolBox().getSelectedTool().getSelectedFilter&&app.getToolBox().getSelectedTool().getSelectedFilter().run(b)};dwv.gui.onChangeShape=function(){app.getToolBox().getSelectedTool().setShapeName(this.value)};dwv.gui.onChangeLineColour=function(){app.getToolBox().getSelectedTool().setLineColour(this.value)};dwv.gui.onZoomReset=function(){app.resetLayout()};
dwv.gui.onDisplayReset=function(b){dwv.gui.onZoomReset(b);app.initWLDisplay();document.getElementById("presetSelect").selectedIndex=0;dwv.gui.refreshSelect("#presetSelect")};dwv.gui.onUndo=function(){app.getUndoStack().undo()};dwv.gui.onRedo=function(){app.getUndoStack().redo()};dwv.gui.onToggleInfoLayer=function(){app.toggleInfoLayerDisplay()};dwv=dwv||{};dwv.gui=dwv.gui||{};dwv.gui.base=dwv.gui.base||{};
dwv.gui.base.appendVersionHtml=function(){for(var b=document.getElementsByClassName("dwv-version"),a=0;a<b.length;++a)b[a].appendChild(document.createTextNode(app.getVersion()))};
dwv.gui.base.appendHelpHtml=function(b){var a="mouse";b&&(a="touch");var e=document.createElement("div"),d=window.location.pathname,d=d.substring(0,d.lastIndexOf("/")),f;for(f in dwv.tool.tools){var g=dwv.tool.tools[f],k=document.createElement("h3");k.appendChild(document.createTextNode(g.getHelp().title));var l=document.createElement("div"),h=document.createElement("p");h.appendChild(document.createTextNode(g.getHelp().brief));l.appendChild(h);if(g.getHelp()[a])for(var h=Object.keys(g.getHelp()[a]),
m=0;m<h.length;++m){var n=g.getHelp()[a][h[m]],p=document.createElement("img");p.src=d+"/viewer/resources/"+h[m]+".png";p.style.float="left";p.style.margin="0px 15px 15px 0px";var r=document.createElement("br");r.style.clear="both";var q=document.createElement("p");q.appendChild(p);q.appendChild(document.createTextNode(n));q.appendChild(r);l.appendChild(q)}b?(g=document.createElement("div"),g.setAttribute("data-role","collapsible"),g.appendChild(k),g.appendChild(l),e.appendChild(g)):(e.id="accordion",
e.appendChild(k),e.appendChild(l))}b=document.getElementById("help");a=document.createElement("p");a.appendChild(document.createTextNode("DICOM Viewer can load DICOM data either from a local file or from an URL. All DICOM tags are available in a searchable table, press the 'tags' or grid button. You can choose to display the image information overlay by pressing the 'info' or i button."));b.appendChild(a);a=document.createElement("p");a.appendChild(document.createTextNode("Each tool defines the possible user interactions. The default tool is the window/level one. Here are the available tools:"));
b.appendChild(a);b.appendChild(e)};dwv=dwv||{};dwv.html=dwv.html||{};dwv.html.appendCell=function(b,a){var e=b.insertCell(-1),d=a;if(a instanceof Array||a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array)10<a.length&&(a=Array.prototype.slice.call(a,0,10),a[10]="..."),d=Array.prototype.join.call(a,", ");e.appendChild(document.createTextNode(d))};
dwv.html.appendHCell=function(b,a){var e=document.createElement("th");"Value"!==a&&"Name"!==a&&e.setAttribute("data-priority","1");e.appendChild(document.createTextNode(a));b.appendChild(e)};dwv.html.appendRowForArray=function(b,a,e,d,f){for(var g=null,k=0;k<a.length;++k)"number"===typeof a[k]||"string"===typeof a[k]||null===a[k]||void 0===a[k]||e>=d?(g||(g=b.insertRow(-1)),dwv.html.appendCell(g,a[k])):dwv.html.appendRow(b,a[k],e+k,d,f)};
dwv.html.appendRowForObject=function(b,a,e,d,f){for(var g=Object.keys(a),k=null,l=0;l<g.length;++l)"number"===typeof a[g[l]]||"string"===typeof a[g[l]]||null===a[g[l]]||void 0===a[g[l]]||e>=d?(k||(k=b.insertRow(-1)),0===l&&f&&dwv.html.appendCell(k,f),dwv.html.appendCell(k,a[g[l]])):dwv.html.appendRow(b,a[g[l]],e+l,d,g[l]);if(2===e)for(b=b.createTHead().insertRow(-1),f&&dwv.html.appendHCell(b,"Name"),f=0;f<g.length;++f)dwv.html.appendHCell(b,dwv.utils.capitaliseFirstLetter(g[f]))};
dwv.html.appendRow=function(b,a,e,d,f){if(a instanceof Array)dwv.html.appendRowForArray(b,a,e+1,d,f);else if("object"===typeof a)dwv.html.appendRowForObject(b,a,e+1,d,f);else throw Error("Unsupported input data type.");};dwv.html.toTable=function(b){var a=document.createElement("table");dwv.html.appendRow(a,b,0,2);return a};
dwv.html.getHtmlSearchForm=function(b){var a=document.createElement("form");a.setAttribute("class","filter");var e=document.createElement("input");e.onkeyup=function(){dwv.html.filterTable(e,b)};a.appendChild(e);return a};
dwv.html.filterTable=function(b,a){dwv.html.dehighlight(a);for(var e=b.value.toLowerCase().split(" "),d=0,f=0,g=1;g<a.rows.length;++g)for(var f="",k=0;k<e.length;++k)d=a.rows[g].innerHTML.replace(/<[^>]+>/g,"").toLowerCase(),0>d.indexOf(e[k])?f="none":e[k].length&&dwv.html.highlight(e[k],a.rows[g]),a.rows[g].style.display=f};
dwv.html.dehighlight=function(b){for(var a=0;a<b.childNodes.length;a++){var e=b.childNodes[a];if(e.attributes&&e.attributes["class"]&&"highlighted"===e.attributes["class"].value){e.parentNode.parentNode.replaceChild(document.createTextNode(e.parentNode.innerHTML.replace(/<[^>]+>/g,"")),e.parentNode);break}else 3!==e.nodeType&&dwv.html.dehighlight(e)}};
dwv.html.highlight=function(b,a){for(var e=0;e<a.childNodes.length;e++){var d=a.childNodes[e];if(3===d.nodeType){var f=d.data,g=f.toLowerCase();if(0<=g.indexOf(b)){var k=document.createElement("span");for(d.parentNode.replaceChild(k,d);-1!==(d=g.indexOf(b));)k.appendChild(document.createTextNode(f.substr(0,d))),k.appendChild(dwv.html.createHighlightNode(document.createTextNode(f.substr(d,b.length)))),f=f.substr(d+b.length),g=g.substr(d+b.length);k.appendChild(document.createTextNode(f))}}else dwv.html.highlight(b,
d)}};dwv.html.createHighlightNode=function(b){var a=document.createElement("span");a.setAttribute("class","highlighted");a.attributes["class"].value="highlighted";a.appendChild(b);return a};dwv.html.cleanNode=function(b){for(;b.hasChildNodes();)b.removeChild(b.firstChild)};dwv.html.removeNode=function(b){if(b=document.getElementById(b))dwv.html.cleanNode(b),b.parentNode.removeChild(b)};
dwv.html.createHtmlSelect=function(b,a){var e=document.createElement("select");e.id=b;e.name=b;var d;if(a instanceof Array)for(var f in a)d=document.createElement("option"),d.value=a[f],d.appendChild(document.createTextNode(dwv.utils.capitaliseFirstLetter(a[f]))),e.appendChild(d);else if("object"===typeof a)for(var g in a)d=document.createElement("option"),d.value=g,d.appendChild(document.createTextNode(dwv.utils.capitaliseFirstLetter(g))),e.appendChild(d);else throw Error("Unsupported input list type.");
return e};dwv.html.getUriParam=function(b){b=dwv.utils.splitQueryString(b||window.location.href);if(0===Object.keys(b).length)return null;b=b.query;if(!b||!b.input)throw Error("No input parameter in query URI.");var a=[];return a=b.type&&"manifest"===b.type?dwv.html.decodeManifestUri(b.input,b.nslices):dwv.html.decodeKeyValueUri(b.input,b.dwvReplaceMode)};
dwv.html.decodeKeyValueUri=function(b,a){var e=[],d="key";a&&(d=a);var f=decodeURIComponent(b),g=dwv.utils.splitQueryString(f);if(0===Object.keys(g).length)e.push(f);else{for(var k=Object.keys(g.query),l=null,h=0;h<k.length;++h)if(g.query[k[h]]instanceof Array){l=k[h];break}if(l){f=g.query[l];h=g.base;"file"!==l&&(h+="?");for(var m=!1,n=0;n<k.length;++n)k[n]!==l&&(m&&(h+="&"),h+=k[n]+"="+g.query[k[n]],m=!0);for(k=0;k<f.length;++k)g=h,m&&(g+="&"),"key"===d&&(g+=l+"="),g+=f[k],e.push(g)}else e.push(f)}return e};
dwv.html.decodeManifestUri=function(b,a){var e=[],d=new XMLHttpRequest;d.open("GET",decodeURIComponent(b),!1);d.responseType="xml";d.onload=function(){e=dwv.html.decodeManifest(this.responseXML,a)};d.onerror=function(){console.warn("RequestError while receiving manifest: "+this.status)};d.send(null);return e};
dwv.html.decodeManifest=function(b,a){var e=[],d=b.getElementsByTagName("wado_query")[0].getAttribute("wadoURL")+"?requestType=WADO&contentType=application/dicom&",f=b.getElementsByTagName("Patient");1<f.length&&console.warn("More than one patient, loading first one.");var g=f[0].getElementsByTagName("Study");1<g.length&&console.warn("More than one study, loading first one.");var f=g[0].getAttribute("StudyInstanceUID"),k=g[0].getElementsByTagName("Series");1<k.length&&console.warn("More than one series, loading first one.");
var g=k[0].getAttribute("SeriesInstanceUID"),k=k[0].getElementsByTagName("Instance"),l=k.length;a<l&&(l=a);for(var h=0;h<l;++h){var m=k[h].getAttribute("SOPInstanceUID");e.push(d+"&studyUID="+f+"&seriesUID="+g+"&objectUID="+m)}return e};dwv.html.displayElement=function(b,a){var e=document.getElementById(b);e&&(e.style.display=a?"":"none")};dwv.html.toggleDisplay=function(b){if(b=document.getElementById(b))b.style.display="none"===b.style.display?"":"none"};
dwv.html.appendElement=function(b,a){var e=document.getElementById(b);a&&(e.appendChild(a),$("#"+b).trigger("create"))};dwv.html.createHiddenElement=function(b,a){var e=document.createElement(b);e.id=a;e.style.display="none";return e};dwv=dwv||{};dwv.html=dwv.html||{};
dwv.html.Layer=function(b){var a=null,e=null,d=null;this.getName=function(){return b};this.getCanvas=function(){return a};this.getContext=function(){return d};this.getOffset=function(){return $("#"+b).offset()};var f=null,g={x:0,y:0};this.getOrigin=function(){return g};var k={x:1,y:1};this.getZoom=function(){return k};this.setWidth=function(b){a.width=b};this.setHeight=function(b){a.height=b};this.zoom=function(a,b,d,e){g.x=d-a/k.x*(d-g.x);g.y=e-b/k.y*(e-g.y);k.x=a;k.y=b};this.translate=function(a,
b){g.x+=a*k.x;g.y+=b*k.y};this.setImageData=function(a){f=a;e.getContext("2d").putImageData(f,0,0)};this.resetLayout=function(a){g.x=0;g.y=0;k.x=a;k.y=a};this.displayToIndex=function(a){return{x:(a.x-g.x)/k.x,y:(a.y-g.y)/k.y}};this.draw=function(){d.save();d.setTransform(1,0,0,1,0,0);d.clearRect(0,0,a.width,a.height);d.restore();d.setTransform(k.x,0,0,k.y,g.x,g.y);d.drawImage(e,0,0)};this.initialise=function(g,h){(a=document.getElementById(b))?a.getContext?(d=a.getContext("2d"))?(a.width=g,a.height=
h,d.clearRect(0,0,a.width,a.height),f=d.getImageData(0,0,a.width,a.height),e=document.createElement("canvas"),e.width=g,e.height=h):alert("Error: failed to get the 2D context for '"+b+"'."):alert("Error: no canvas.getContext method for '"+b+"'."):alert("Error: cannot find the canvas element for '"+b+"'.")};this.fillContext=function(){d.fillRect(0,0,a.width,a.height)};this.clear=function(){d.clearRect(0,0,a.width,a.height);f=d.getImageData(0,0,a.width,a.height);this.resetLayout()};this.merge=function(b){for(var d=
b.getContext().getImageData(0,0,a.width,a.height),e=0,n=0,p=0,r=0,q=0,t=0;t<a.height;++t)for(var n=parseInt(g.y+t*k.y,10)*a.width,r=t*a.width,v=0;v<a.width;++v)e=4*(parseInt(g.x+v*k.x,10)+n),p=4*(v+r),q=d.data[e+3],0!==q&&(f.data[p]=d.data[e],f.data[p+1]=d.data[e+1],f.data[p+2]=d.data[e+2],f.data[p+3]=q);b.clear();this.draw()};this.setLineColor=function(a){d.fillStyle=a;d.strokeStyle=a};this.setStyleDisplay=function(b){a.style.display=!0===b?"":"none"};this.isVisible=function(){return"none"===a.style.display?
!1:!0};this.align=function(b){a.style.top=b.getCanvas().offsetTop;a.style.left=b.getCanvas().offsetLeft}};dwv.html.getEventOffset=function(b){var a=[],e=0,d=0;if(b.targetTouches)for(var d=null,f=0;f<b.targetTouches.length;++f)d=b.targetTouches[f],e=d.pageX-app.getImageLayer().getOffset().left,d=d.pageY-app.getImageLayer().getOffset().top,a.push({x:e,y:d});else e=void 0===b.offsetX?b.layerX:b.offsetX,d=void 0===b.offsetY?b.layerY:b.offsetY,a.push({x:e,y:d});return a};dwv=dwv||{};dwv.gui=dwv.gui||{};
dwv.gui.base=dwv.gui.base||{};dwv.gui.base.appendLoadboxHtml=function(){var b=dwv.html.createHtmlSelect("loaderSelect",dwv.io.loaders);b.onchange=dwv.gui.onChangeLoader;for(var a=document.getElementById("loaderlist");a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b);$("#loaderlist").trigger("create")};
dwv.gui.base.appendFileLoadHtml=function(){var b=document.createElement("input");b.onchange=dwv.gui.onChangeFiles;b.type="file";b.multiple=!0;b.id="imagefiles";b.setAttribute("data-clear-btn","true");b.setAttribute("data-mini","true");b.style.width="350px";var a=document.createElement("div");a.id="imagefilesdiv";a.style.display="none";a.appendChild(b);document.getElementById("loaderlist").appendChild(a);$("#loaderlist").trigger("create")};
dwv.gui.base.displayFileLoadHtml=function(b){document.getElementById("imagefilesdiv").style.display=b?"":"none"};
dwv.gui.base.appendUrlLoadHtml=function(){var b=document.createElement("input");g_arr_urlselect&&(g_arr_urlselect(!1,b),b.onkeydown=g_arr_urlselect);b.type="url";b.id="imageurl";b.style.width="350px";b.setAttribute("data-clear-btn","true");b.setAttribute("data-mini","true");var a=document.createElement("div");a.id="imageurldiv";a.style.display="none";a.appendChild(b);document.getElementById("loaderlist").appendChild(a);$("#loaderlist").trigger("create")};
dwv.gui.base.displayUrlLoadHtml=function(b){document.getElementById("imageurldiv").style.display=b?"":"none"};dwv=dwv||{};dwv.html=dwv.html||{};
dwv.html.Style=function(){var b="normal "+this.fontSize+"px sans-serif",a=this.fontSize+this.fontSize/5,e=0;dwv.html.Style.prototype.getFontSize=function(){return 12};dwv.html.Style.prototype.getFontStr=function(){return b};dwv.html.Style.prototype.getLineHeight=function(){return a};dwv.html.Style.prototype.getTextColor=function(){return"#fff"};dwv.html.Style.prototype.getLineColor=function(){return e};dwv.html.Style.prototype.setLineColor=function(a){e=a}};dwv=dwv||{};dwv.gui=dwv.gui||{};
dwv.gui.base=dwv.gui.base||{};dwv.gui.base.appendToolboxHtml=function(){var b=dwv.html.createHtmlSelect("toolSelect",dwv.tool.tools);b.onchange=dwv.gui.onChangeTool;var a=document.createElement("li");a.id="toolLi";a.style.display="none";a.appendChild(b);a.setAttribute("class","ui-block-a");for(b=document.getElementById("toolList");b.hasChildNodes();)b.removeChild(b.firstChild);b.appendChild(a);$("#toolList").trigger("create")};
dwv.gui.base.displayToolboxHtml=function(b){dwv.html.displayElement("toolLi",b)};dwv.gui.base.initToolboxHtml=function(){document.getElementById("toolSelect").selectedIndex=0;dwv.gui.refreshSelect("#toolSelect")};
dwv.gui.base.appendWindowLevelHtml=function(){var b=dwv.html.createHtmlSelect("presetSelect",dwv.tool.presets);b.onchange=dwv.gui.onChangeWindowLevelPreset;var a=dwv.html.createHtmlSelect("colourMapSelect",dwv.tool.colourMaps);a.onchange=dwv.gui.onChangeColourMap;var e=document.createElement("li");e.id="wlLi";e.style.display="none";e.appendChild(b);e.setAttribute("class","ui-block-b");b=document.createElement("li");b.id="cmLi";b.style.display="none";b.appendChild(a);b.setAttribute("class","ui-block-c");
a=document.getElementById("toolList");a.appendChild(e);a.appendChild(b);$("#toolList").trigger("create")};dwv.gui.base.displayWindowLevelHtml=function(b){dwv.html.displayElement("wlLi",b);dwv.html.displayElement("cmLi",b)};
dwv.gui.base.initWindowLevelHtml=function(){var b=dwv.html.createHtmlSelect("presetSelect",dwv.tool.presets);b.onchange=dwv.gui.onChangeWindowLevelPreset;b.title="Select w/l preset.";var a=document.getElementById("wlLi");dwv.html.cleanNode(a);a.appendChild(b);$("#toolList").trigger("create");b=document.getElementById("colourMapSelect");b.selectedIndex=0;"MONOCHROME1"===app.getImage().getPhotometricInterpretation()&&(b.selectedIndex=1);dwv.gui.refreshSelect("#colourMapSelect")};
dwv.gui.base.appendDrawHtml=function(){var b=dwv.html.createHtmlSelect("shapeSelect",dwv.tool.shapes);b.onchange=dwv.gui.onChangeShape;var a=dwv.html.createHtmlSelect("colourSelect",dwv.tool.colors);a.onchange=dwv.gui.onChangeLineColour;var e=document.createElement("li");e.id="shapeLi";e.style.display="none";e.appendChild(b);e.setAttribute("class","ui-block-c");b=document.createElement("li");b.id="colourLi";b.style.display="none";b.appendChild(a);b.setAttribute("class","ui-block-b");a=document.getElementById("toolList");
a.appendChild(e);a.appendChild(b);$("#toolList").trigger("create")};dwv.gui.base.displayDrawHtml=function(b){dwv.html.displayElement("colourLi",b);dwv.html.displayElement("shapeLi",b)};dwv.gui.base.initDrawHtml=function(){document.getElementById("shapeSelect").selectedIndex=0;dwv.gui.refreshSelect("#shapeSelect");document.getElementById("colourSelect").selectedIndex=0;dwv.gui.refreshSelect("#colourSelect")};
dwv.gui.base.appendLivewireHtml=function(){var b=dwv.html.createHtmlSelect("lwColourSelect",dwv.tool.colors);b.onchange=dwv.gui.onChangeLineColour;var a=document.createElement("li");a.id="lwColourLi";a.style.display="none";a.setAttribute("class","ui-block-b");a.appendChild(b);document.getElementById("toolList").appendChild(a);$("#toolList").trigger("create")};dwv.gui.base.displayLivewireHtml=function(b){dwv.html.displayElement("lwColourLi",b)};
dwv.gui.base.initLivewireHtml=function(){document.getElementById("lwColourSelect").selectedIndex=0;dwv.gui.refreshSelect("#lwColourSelect")};
dwv.gui.base.appendZoomAndPanHtml=function(){var b=document.createElement("button");b.id="zoomResetButton";b.name="zoomResetButton";b.onclick=dwv.gui.onZoomReset;b.setAttribute("style","width:100%; margin-top:0.5em;");b.setAttribute("class","ui-btn ui-btn-b");var a=document.createTextNode("Reset");b.appendChild(a);a=document.createElement("li");a.id="zoomLi";a.style.display="none";a.setAttribute("class","ui-block-c");a.appendChild(b);document.getElementById("toolList").appendChild(a);$("#toolList").trigger("create")};
dwv.gui.base.displayZoomAndPanHtml=function(b){dwv.html.displayElement("zoomLi",b)};dwv.gui.base.appendScrollHtml=function(){var b=document.createElement("li");b.id="scrollLi";b.style.display="none";b.setAttribute("class","ui-block-c");document.getElementById("toolList").appendChild(b);$("#toolList").trigger("create")};dwv.gui.base.displayScrollHtml=function(b){dwv.html.displayElement("scrollLi",b)};dwv=dwv||{};dwv.gui=dwv.gui||{};dwv.gui.base=dwv.gui.base||{};
dwv.gui.base.appendUndoHtml=function(){var b=document.createElement("p");b.appendChild(document.createTextNode("History:"));b.appendChild(document.createElement("br"));var a=document.createElement("select");a.id="history_list";a.name="history_list";a.multiple="multiple";b.appendChild(a);for(a=document.getElementById("history");a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)};
dwv.gui.cleanUndoHtml=function(){var b=document.getElementById("history_list");if(b&&0!==b.length)for(var a=b.length-1;0<=a;--a)b.remove(a)};dwv.gui.addCommandToUndoHtml=function(b){var a=document.getElementById("history_list"),e=a.length-(a.selectedIndex+1);if(0<e)for(var d=0;d<e;++d)a.remove(a.length-1);e=document.createElement("option");e.text=b;e.value=b;a.add(e);a.selectedIndex++};
dwv.gui.enableInUndoHtml=function(b){var a=document.getElementById("history_list");b?(a.selectedIndex++,b=a.options[a.selectedIndex],b.disabled=!1):(b=a.options[a.selectedIndex],b.disabled=!0,a.selectedIndex--)};dwv=dwv||{};dwv.image=dwv.image||{};dwv.image.filter=dwv.image.filter||{};
dwv.image.filter.Threshold=function(){var b=0,a=0;this.getMin=function(){return b};this.setMin=function(a){b=a};this.getMax=function(){return a};this.setMax=function(b){a=b};this.getName=function(){return"Threshold"};var e=null;this.setOriginalImage=function(a){e=a};this.getOriginalImage=function(){return e}};
dwv.image.filter.Threshold.prototype.update=function(){var b=this,a=app.getImage().getDataRange().min;b.setOriginalImage(app.getImage());return app.getImage().transform(function(e){return e<b.getMin()||e>b.getMax()?a:e})};dwv.image.filter.Sharpen=function(){this.getName=function(){return"Sharpen"};var b=null;this.setOriginalImage=function(a){b=a};this.getOriginalImage=function(){return b}};
dwv.image.filter.Sharpen.prototype.update=function(){this.setOriginalImage(app.getImage());return app.getImage().convolute2D([0,-1,0,-1,5,-1,0,-1,0])};dwv.image.filter.Sobel=function(){this.getName=function(){return"Sobel"};var b=null;this.setOriginalImage=function(a){b=a};this.getOriginalImage=function(){return b}};
dwv.image.filter.Sobel.prototype.update=function(){this.setOriginalImage(app.getImage());var b=app.getImage().convolute2D([1,0,-1,2,0,-2,1,0,-1]),a=app.getImage().convolute2D([1,2,1,0,0,0,-1,-2,-1]);return b.compose(a,function(a,b){return Math.sqrt(a*a+b*b)})};dwv=dwv||{};dwv.image=dwv.image||{};dwv.image.Size=function(b,a,e){this.getNumberOfColumns=function(){return b};this.getNumberOfRows=function(){return a};this.getNumberOfSlices=function(){return e||1}};
dwv.image.Size.prototype.getSliceSize=function(){return this.getNumberOfColumns()*this.getNumberOfRows()};dwv.image.Size.prototype.getTotalSize=function(){return this.getSliceSize()*this.getNumberOfSlices()};dwv.image.Size.prototype.equals=function(b){return null!==b&&this.getNumberOfColumns()===b.getNumberOfColumns()&&this.getNumberOfRows()===b.getNumberOfRows()&&this.getNumberOfSlices()===b.getNumberOfSlices()};
dwv.image.Size.prototype.isInBounds=function(b,a,e){return 0>b||b>this.getNumberOfColumns()-1||0>a||a>this.getNumberOfRows()-1||0>e||e>this.getNumberOfSlices()-1?!1:!0};dwv.image.Spacing=function(b,a,e){this.getColumnSpacing=function(){return b};this.getRowSpacing=function(){return a};this.getSliceSpacing=function(){return e||1}};
dwv.image.Spacing.prototype.equals=function(b){return null!==b&&this.getColumnSpacing()===b.getColumnSpacing()&&this.getRowSpacing()===b.getRowSpacing()&&this.getSliceSpacing()===b.getSliceSpacing()};
dwv.image.Image=function(b,a,e,d){var f=1,g=0,k="MONOCHROME2",l=0,h=e.length/b.getTotalSize(),m={},n=new Int16Array(e);"undefined"===typeof d&&(d=[[0,0,0]]);var p=null,r=null;this.getSize=function(){return b};this.getSpacing=function(){return a};this.getBuffer=function(){return e};this.getSlicePositions=function(){return d};this.getRescaleSlope=function(){return f};this.setRescaleSlope=function(a){f=a};this.getRescaleIntercept=function(){return g};this.setRescaleIntercept=function(a){g=a};this.getPhotometricInterpretation=
function(){return k};this.setPhotometricInterpretation=function(a){k=a};this.getPlanarConfiguration=function(){return l};this.setPlanarConfiguration=function(a){l=a};this.getNumberOfComponents=function(){return h};this.getMeta=function(){return m};this.setMeta=function(a){m=a};this.getValueAtOffset=function(a){return e[a]};this.clone=function(){var a=new dwv.image.Image(this.getSize(),this.getSpacing(),n,d);a.setRescaleSlope(this.getRescaleSlope());a.setRescaleIntercept(this.getRescaleIntercept());
a.setPhotometricInterpretation(this.getPhotometricInterpretation());a.setPlanarConfiguration(this.getPlanarConfiguration());a.setMeta(this.getMeta());return a};this.appendSlice=function(a){if(null===a)throw Error("Cannot append null slice");if(1!==a.getSize().getNumberOfSlices())throw Error("Cannot append more than one slice");if(b.getNumberOfColumns()!==a.getSize().getNumberOfColumns())throw Error("Cannot append a slice with different number of columns");if(b.getNumberOfRows()!==a.getSize().getNumberOfRows())throw Error("Cannot append a slice with different number of rows");
if(k!==a.getPhotometricInterpretation())throw Error("Cannot append a slice with different photometric interpretation");for(var f in m)if(m[f]!==a.getMeta()[f])throw Error("Cannot append a slice with different "+f);var g=0;f=a.getSlicePositions()[0];for(var h=Math.abs(d[0][2]-f[2]),l=0,p=0;p<d.length;++p)l=Math.abs(d[p][2]-f[2]),l<h&&(h=l,g=p);l=d[g][2]-f[2];g=0<l?g:g+1;h=new dwv.image.Size(b.getNumberOfColumns(),b.getNumberOfRows(),b.getNumberOfSlices()+1);l=1;"RGB"===k&&(l=3);l*=b.getSliceSize();
p=new Int16Array(l*h.getNumberOfSlices());if(0===g)p.set(a.getBuffer()),p.set(e,l);else if(g===b.getNumberOfSlices())p.set(e),p.set(a.getBuffer(),b.getNumberOfSlices()*l);else{var r=g*l;p.set(e.subarray(0,r-1));p.set(a.getBuffer(),r);p.set(e.subarray(r),r+l)}d.splice(g,0,f);b=h;e=p;n=new Int16Array(p)};this.getDataRange=function(){p||(p=this.calculateDataRange());return p};this.getHistogram=function(){r||(r=this.calculateHistogram());return r}};
dwv.image.Image.prototype.getValue=function(b,a,e){return this.getValueAtOffset(b+a*this.getSize().getNumberOfColumns()+e*this.getSize().getSliceSize())};dwv.image.Image.prototype.getRescaledValueAtOffset=function(b){return this.getValueAtOffset(b)*this.getRescaleSlope()+this.getRescaleIntercept()};dwv.image.Image.prototype.getRescaledValue=function(b,a,e){return this.getValue(b,a,e)*this.getRescaleSlope()+this.getRescaleIntercept()};
dwv.image.Image.prototype.calculateDataRange=function(){for(var b=this.getValueAtOffset(0),a=b,e=0,d=0;d<this.getSize().getTotalSize();++d)e=this.getValueAtOffset(d),e>a&&(a=e),e<b&&(b=e);return{min:b,max:a}};dwv.image.Image.prototype.getRescaledDataRange=function(){var b=this.getDataRange();return{min:b.min*this.getRescaleSlope()+this.getRescaleIntercept(),max:b.max*this.getRescaleSlope()+this.getRescaleIntercept()}};
dwv.image.Image.prototype.calculateHistogram=function(){for(var b=[],a=[],e=0,d=this.getSize().getTotalSize(),f=0;f<d;++f)e=this.getRescaledValueAtOffset(f),b[e]=(b[e]||0)+1;d=this.getRescaledDataRange().min;for(e=this.getRescaledDataRange().max;d<=e;++d)a.push([d,b[d]||0]);return a};
dwv.image.Image.prototype.convolute2D=function(b){if(9!==b.length)throw Error("The convolution matrix does not have a length of 9; it has "+b.length);var a=this.clone(),e=a.getBuffer(),d=this.getSize().getNumberOfColumns(),f=this.getSize().getNumberOfRows(),g=this.getSize().getNumberOfSlices(),k=this.getNumberOfComponents(),l=1,h=1;3===k&&(0===this.getPlanarConfiguration()?l=3:h=this.getSize().getTotalSize());var m=[];m[0]=(-d-1)*l;m[1]=-d*l;m[2]=(-d+1)*l;m[3]=-l;m[4]=0;m[5]=1*l;m[6]=(d-1)*l;m[7]=
d*l;m[8]=(d+1)*l;var n=[];n[0]=m[4];n[1]=m[4];n[2]=m[5];n[3]=m[4];n[4]=m[4];n[5]=m[5];n[6]=m[7];n[7]=m[7];n[8]=m[8];var p=[];p[0]=m[1];p[1]=m[1];p[2]=m[2];p[3]=m[4];p[4]=m[4];p[5]=m[5];p[6]=m[7];p[7]=m[7];p[8]=m[8];var r=[];r[0]=m[1];r[1]=m[1];r[2]=m[2];r[3]=m[4];r[4]=m[4];r[5]=m[5];r[6]=m[4];r[7]=m[4];r[8]=m[5];var q=[];q[0]=m[3];q[1]=m[4];q[2]=m[5];q[3]=m[3];q[4]=m[4];q[5]=m[5];q[6]=m[6];q[7]=m[7];q[8]=m[8];var t=[];t[0]=m[0];t[1]=m[1];t[2]=m[2];t[3]=m[3];t[4]=m[4];t[5]=m[5];t[6]=m[3];t[7]=m[4];
t[8]=m[5];var v=[];v[0]=m[3];v[1]=m[4];v[2]=m[4];v[3]=m[3];v[4]=m[4];v[5]=m[4];v[6]=m[6];v[7]=m[7];v[8]=m[7];var y=[];y[0]=m[0];y[1]=m[1];y[2]=m[1];y[3]=m[3];y[4]=m[4];y[5]=m[4];y[6]=m[6];y[7]=m[7];y[8]=m[7];var z=[];z[0]=m[0];z[1]=m[1];z[2]=m[1];z[3]=m[3];z[4]=m[4];z[5]=m[4];z[6]=m[3];z[7]=m[4];z[8]=m[4];for(var D=0,B=0,P=[],F=0;F<k;F++)for(var D=F*h,J=0;J<g;J++)for(var N=0;N<f;N++)for(var E=0;E<d;E++){P=m;0===E&&0===N?P=n:0===E&&N===f-1?P=r:E===d-1&&0===N?P=v:E===d-1&&N===f-1?P=z:0===E&&N!==f-1&&
0!==N?P=p:E===d-1&&N!==f-1&&0!==N?P=y:0!==E&&E!==d-1&&0===N?P=q:0!==E&&E!==d-1&&N===f-1&&(P=t);for(var w=B=0;9>w;++w)B+=this.getValueAtOffset(D+P[w])*b[w];e[D]=B;D+=l}return a};dwv.image.Image.prototype.transform=function(b){for(var a=this.clone(),e=a.getBuffer(),d=0;d<e.length;++d)e[d]=b(a.getValueAtOffset(d));return a};dwv.image.Image.prototype.compose=function(b,a){for(var e=this.clone(),d=e.getBuffer(),f=0;f<d.length;++f)d[f]=Math.floor(a(this.getValueAtOffset(f),b.getValueAtOffset(f)));return e};
dwv.image.Image.prototype.quantifyLine=function(b){return{length:b.getWorldLength(this.getSpacing().getColumnSpacing(),this.getSpacing().getRowSpacing())}};
dwv.image.Image.prototype.quantifyRect=function(b){var a=b.getWorldSurface(this.getSpacing().getColumnSpacing(),this.getSpacing().getRowSpacing()),e=[],d=parseInt(b.getBegin().getY(),10),f=parseInt(b.getEnd().getY(),10),g=parseInt(b.getBegin().getX(),10);for(b=parseInt(b.getEnd().getX(),10);d<f;++d)for(var k=g;k<b;++k)e.push(this.getValue(k,d,0));e=dwv.math.getStats(e);return{surface:a,min:e.min,max:e.max,mean:e.mean,stdDev:e.stdDev}};
dwv.image.Image.prototype.quantifyEllipse=function(b){return{surface:b.getWorldSurface(this.getSpacing().getColumnSpacing(),this.getSpacing().getRowSpacing())}};dwv=dwv||{};dwv.image=dwv.image||{};dwv.image.lut=dwv.image.lut||{};
dwv.image.lut.Rescale=function(b,a){var e=null;"undefined"===typeof b&&(b=1);"undefined"===typeof a&&(a=0);this.getSlope=function(){return b};this.getIntercept=function(){return a};this.initialise=function(d){d=Math.pow(2,d);e=new Float32Array(d);for(var f=0;f<d;++f)e[f]=f*b+a};this.getLength=function(){return e.length};this.getValue=function(a){return e[a]}};
dwv.image.lut.Window=function(b,a){var e=null,e=dwv.browser.hasClampedArray()?new Uint8ClampedArray(b.getLength()):new Uint8Array(b.getLength()),d=null,f=null;this.getCenter=function(){return d};this.getWidth=function(){return f};this.isSigned=function(){return a};this.setCenterAndWidth=function(g,k){d=g;f=k;var l=e.length,h=g-.5;a&&(h+=b.getSlope()*(l/2));var m=k-1,n=0;if(dwv.browser.hasClampedArray())for(var p=0;p<l;++p)n=255*((b.getValue(p)-h)/m+.5),e[p]=parseInt(n,10);else for(p=0;p<l;++p)n=255*
((b.getValue(p)-h)/m+.5),n=parseInt(n,10),e[p]=0>=n?0:255<n?255:n};this.getLength=function(){return e.length};this.getValue=function(b){return e[b+(a?e.length/2:0)]}};dwv.image.lut.range_max=256;dwv.image.lut.buildLut=function(b){for(var a=[],e=0;e<dwv.image.lut.range_max;++e)a.push(b(e));return a};dwv.image.lut.max=function(){return dwv.image.lut.range_max-1};dwv.image.lut.maxFirstThird=function(b){return b<dwv.image.lut.range_max/3?dwv.image.lut.range_max-1:0};
dwv.image.lut.maxSecondThird=function(b){var a=dwv.image.lut.range_max/3;return b>=a&&b<2*a?dwv.image.lut.range_max-1:0};dwv.image.lut.maxThirdThird=function(b){return b>=2*dwv.image.lut.range_max/3?dwv.image.lut.range_max-1:0};dwv.image.lut.toMaxFirstThird=function(b){b*=3;return b>dwv.image.lut.range_max-1?dwv.image.lut.range_max-1:b};dwv.image.lut.toMaxSecondThird=function(b){var a=dwv.image.lut.range_max/3,e=0;return b>=a&&(e=3*(b-a),e>dwv.image.lut.range_max-1)?dwv.image.lut.range_max-1:e};
dwv.image.lut.toMaxThirdThird=function(b){var a=dwv.image.lut.range_max/3,e=0;return b>=2*a&&(e=3*(b-2*a),e>dwv.image.lut.range_max-1)?dwv.image.lut.range_max-1:e};dwv.image.lut.zero=function(){return 0};dwv.image.lut.id=function(b){return b};dwv.image.lut.invId=function(b){return dwv.image.lut.range_max-1-b};dwv.image.lut.plain={red:dwv.image.lut.buildLut(dwv.image.lut.id),green:dwv.image.lut.buildLut(dwv.image.lut.id),blue:dwv.image.lut.buildLut(dwv.image.lut.id)};
dwv.image.lut.invPlain={red:dwv.image.lut.buildLut(dwv.image.lut.invId),green:dwv.image.lut.buildLut(dwv.image.lut.invId),blue:dwv.image.lut.buildLut(dwv.image.lut.invId)};
dwv.image.lut.rainbow={blue:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255,247,239,231,223,215,207,199,191,183,175,167,159,151,143,135,127,119,111,103,95,87,79,71,63,55,47,39,31,23,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,16,24,32,40,48,56,64,72,80,88,96,104,112,120,128,136,144,152,160,168,176,184,192,200,208,216,224,232,240,248,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,
255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,253,251,249,247,245,243,241,239,237,235,233,231,229,227,225,223,221,219,217,215,213,211,209,207,205,203,201,199,197,195,193,192,189,186,183,180,177,174,171,168,165,162,159,156,153,150,147,144,141,138,135,132,129,126,123,120,117,114,111,108,105,102,99,96,93,90,87,84,81,78,75,72,69,66,63,60,57,54,51,48,45,
42,39,36,33,30,27,24,21,18,15,12,9,6,3],red:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,62,60,58,56,54,52,50,48,46,44,42,40,38,36,34,32,30,28,26,24,22,20,18,16,14,12,10,8,6,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,
240,244,248,252,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]};
dwv.image.lut.hot={red:dwv.image.lut.buildLut(dwv.image.lut.toMaxFirstThird),green:dwv.image.lut.buildLut(dwv.image.lut.toMaxSecondThird),blue:dwv.image.lut.buildLut(dwv.image.lut.toMaxThirdThird)};dwv.image.lut.test={red:dwv.image.lut.buildLut(dwv.image.lut.id),green:dwv.image.lut.buildLut(dwv.image.lut.zero),blue:dwv.image.lut.buildLut(dwv.image.lut.zero)};dwv=dwv||{};dwv.image=dwv.image||{};
dwv.image.View=function(b,a){var e=new dwv.image.lut.Rescale(b.getRescaleSlope(),b.getRescaleIntercept());e.initialise(b.getMeta().BitsStored);var d=new dwv.image.lut.Window(e,a),f=null,g=dwv.image.lut.plain,k={i:0,j:0,k:0};this.getImage=function(){return b};this.setImage=function(a){b=a};this.getRescaleLut=function(){return e};this.setRescaleLut=function(a){e=a};this.getWindowLut=function(){return d};this.setWindowLut=function(a){d=a};this.getWindowPresets=function(){return f};this.setWindowPresets=
function(a){f=a;this.setWindowLevel(a[0].center,a[0].width)};this.getColorMap=function(){return g};this.setColorMap=function(a){g=a;"MONOCHROME1"===this.getImage().getPhotometricInterpretation()&&(g=dwv.image.lut.invPlain);this.fireEvent({type:"colorchange",wc:this.getWindowLut().getCenter(),ww:this.getWindowLut().getWidth()})};this.isSigned=function(){return a};this.getCurrentPosition=function(){return k};this.setCurrentPosition=function(a){if(!b.getSize().isInBounds(a.i,a.j,a.k))return!1;var d=
k;k=a;null!==app.getImage().getPhotometricInterpretation().match(/MONOCHROME/)?this.fireEvent({type:"positionchange",i:a.i,j:a.j,k:a.k,value:b.getRescaledValue(a.i,a.j,a.k)}):this.fireEvent({type:"positionchange",i:a.i,j:a.j,k:a.k});d.k!==k.k&&this.fireEvent({type:"slicechange"});return!0};var l={};this.getListeners=function(){return l};this.setListeners=function(a){l=a}};
dwv.image.View.prototype.setWindowLevel=function(b,a){1<=a&&(this.getWindowLut().setCenterAndWidth(b,a),this.fireEvent({type:"wlchange",wc:b,ww:a}))};dwv.image.View.prototype.setWindowLevelMinMax=function(){var b=this.getImage().getRescaledDataRange(),a=b.min,b=b.max-a;this.setWindowLevel(a+b/2,b)};dwv.image.View.prototype.goFirstSlice=function(){return this.setCurrentPosition({i:this.getCurrentPosition().i,j:this.getCurrentPosition().j,k:0})};
dwv.image.View.prototype.incrementSliceNb=function(){return this.setCurrentPosition({i:this.getCurrentPosition().i,j:this.getCurrentPosition().j,k:this.getCurrentPosition().k+1})};dwv.image.View.prototype.decrementSliceNb=function(){return this.setCurrentPosition({i:this.getCurrentPosition().i,j:this.getCurrentPosition().j,k:this.getCurrentPosition().k-1})};
dwv.image.View.prototype.clone=function(){var b=new dwv.image.View(this.getImage());b.setRescaleLut(this.getRescaleLut());b.setWindowLut(this.getWindowLut());b.setListeners(this.getListeners());return b};
dwv.image.View.prototype.generateImageData=function(b){var a=this.getCurrentPosition().k,e=this.getImage(),d=0,f=e.getPhotometricInterpretation(),g=e.getPlanarConfiguration(),k=this.getWindowLut(),l=this.getColorMap(),h=0,m=0,d=0;switch(f){case "MONOCHROME1":case "MONOCHROME2":m=e.getSize().getSliceSize();d=(a||0)*m;a=d+m;for(f=d;f<a;++f)d=parseInt(k.getValue(e.getValueAtOffset(f)),10),b.data[h]=l.red[d],b.data[h+1]=l.green[d],b.data[h+2]=l.blue[d],b.data[h+3]=255,h+=4;break;case "RGB":if(0!==g&&
1!==g)throw Error("Unsupported planar configuration: "+g);var m=e.getSize().getSliceSize(),l=d=3*(a||0)*m,a=d+1,f=d+2,n=3;1===g&&(l=d,a=d+m,f=d+2*m,n=1);for(var p=m=g=d=0;p<e.getSize().getSliceSize();++p)d=parseInt(k.getValue(e.getValueAtOffset(l)),10),g=parseInt(k.getValue(e.getValueAtOffset(a)),10),m=parseInt(k.getValue(e.getValueAtOffset(f)),10),b.data[h]=d,b.data[h+1]=g,b.data[h+2]=m,b.data[h+3]=255,h+=4,l+=n,a+=n,f+=n;break;default:throw Error("Unsupported photometric interpretation: "+f);}};
dwv.image.View.prototype.addEventListener=function(b,a){var e=this.getListeners();e[b]||(e[b]=[]);e[b].push(a)};dwv.image.View.prototype.removeEventListener=function(b,a){var e=this.getListeners();if(e[b])for(var d=0;d<e[b].length;++d)e[b][d]===a&&e[b].splice(d,1)};dwv.image.View.prototype.fireEvent=function(b){var a=this.getListeners();if(a[b.type])for(var e=0;e<a[b.type].length;++e)a[b.type][e](b)};dwv=dwv||{};dwv.image=dwv.image||{};
dwv.image.getDataFromImage=function(b){var a=document.getElementById("imageLayer");a.width=b.width;a.height=b.height;a=a.getContext("2d");a.drawImage(b,0,0,b.width,b.height);for(var e=a.getImageData(0,0,b.width,b.height),a=[],d=0,f=0;f<e.data.length;f+=4)a[d]=e.data[f],a[d+1]=e.data[f+1],a[d+2]=e.data[f+2],d+=3;e=new dwv.image.Size(b.width,b.height);d=new dwv.image.Spacing(1,1);a=new dwv.image.Image(e,d,a,[[0,0,b.index?b.index:0]]);a.setPhotometricInterpretation("RGB");a.setMeta({BitsStored:8});a=
new dwv.image.View(a);a.setWindowLevelMinMax();e={};b.file&&(e.fileName={value:b.file.name},e.fileType={value:b.file.type},e.fileLastModifiedDate={value:b.file.lastModifiedDate});e.imageWidth={value:b.width};e.imageHeight={value:b.height};return{view:a,info:e}};dwv.image.getDataFromDicomBuffer=function(b){var a=new dwv.dicom.DicomParser;a.parse(b);return{view:a.createImage(),info:a.dicomElements}};dwv=dwv||{};dwv.io=dwv.io||{};dwv.io.File=function(){this.onerror=this.onload=null};
dwv.io.File.prototype.load=function(b){for(var a=this.onload,e=this.onerror,d=function(a){e({name:"RequestError",message:"An error occurred while reading the image file: "+a.getMessage()});$.mobile.loading("hide")},f=function(a){e({name:"RequestError",message:"An error occurred while reading the DICOM file: "+a.getMessage()});$.mobile.loading("hide")},g=function(b){try{var d=dwv.image.getDataFromDicomBuffer(b.target.result);a(d)}catch(f){e(f)}$.mobile.loading("hide")},k=function(){try{var b=dwv.image.getDataFromImage(this);
a(b)}catch(d){e(d)}$.mobile.loading("hide")},l=function(a){var b=new Image;b.src=a.target.result;b.file=this.file;b.index=this.index;b.onload=k},h=0;h<b.length;++h){var m=b[h],n=new FileReader;m.type.match("image.*")?(n.file=m,n.index=h,n.onload=l,n.onprogress=dwv.gui.updateProgress,n.onerror=d,n.readAsDataURL(m)):(n.onload=g,n.onprogress=dwv.gui.updateProgress,n.onerror=f,n.readAsArrayBuffer(m))}};dwv=dwv||{};dwv.io=dwv.io||{};dwv.io.Url=function(){this.onerror=this.onload=null};
dwv.io.Url.prototype.load=function(b){for(var a=this.onload,e=this.onerror,d=function(){e({name:"RequestError",message:"An error occurred while retrieving the file: (http) "+this.status})},f=function(){try{var b=dwv.image.getDataFromImage(this);a(b)}catch(d){e(d)}},g=function(){if(200!=this.status)e({name:"RequestError",message:"Error (status) "+this.status+"("+this.statusText+") occurred while receiving the file."});else{var b=new DataView(this.response),d=4292411360===b.getUint32(0),g=2303741511===
b.getUint32(0),b=1195984440===b.getUint32(0);if(d||g||b){for(var k=new Uint8Array(this.response),l="",q=0;q<k.byteLength;++q)l+=String.fromCharCode(k[q]);k="unknown";d?k="jpeg":g?k="png":b&&(k="gif");d=new Image;d.src="data:image/"+k+";base64,"+window.btoa(l);d.onload=f}else try{l=dwv.image.getDataFromDicomBuffer(this.response),a(l)}catch(t){e(t)}}},k=0;k<b.length;++k){var l=new XMLHttpRequest;l.open("GET",b[k],!0);l.responseType="arraybuffer";l.onload=g;l.onerror=d;l.onprogress=dwv.gui.updateProgress;
1==b.length&&(g_arr_load_cancel=function(){l.abort();g_arr_load_end&&g_arr_load_end()});l.send(null)}};dwv=dwv||{};dwv.math=dwv.math||{};dwv.math.BucketQueue=function(b,a){this.bucketCount=1<<b;this.mask=this.bucketCount-1;this.loc=this.size=0;this.cost="undefined"!==typeof a?a:function(a){return a};this.buckets=this.buildArray(this.bucketCount)};dwv.math.BucketQueue.prototype.push=function(b){var a=this.getBucket(b);b.next=this.buckets[a];this.buckets[a]=b;this.size++};
dwv.math.BucketQueue.prototype.pop=function(){if(0===this.size)throw Error("Cannot pop, bucketQueue is empty.");for(;null===this.buckets[this.loc];)this.loc=(this.loc+1)%this.bucketCount;var b=this.buckets[this.loc];this.buckets[this.loc]=b.next;b.next=null;this.size--;return b};dwv.math.BucketQueue.prototype.remove=function(b){if(!b)return!1;for(var a=this.getBucket(b),a=this.buckets[a];null!==a&&!b.equals(a.next);)a=a.next;if(null===a)return!1;a.next=a.next.next;this.size--;return!0};
dwv.math.BucketQueue.prototype.isEmpty=function(){return 0===this.size};dwv.math.BucketQueue.prototype.getBucket=function(b){return this.cost(b)&this.mask};dwv.math.BucketQueue.prototype.buildArray=function(b){b=Array(b);for(var a=0;a<b.length;a++)b[a]=null;return b};dwv=dwv||{};dwv.math=dwv.math||{};var __twothirdpi=2/(3*Math.PI);
dwv.math.computeGreyscale=function(b,a,e){for(var d=[],f=0;f<e;f++){d[f]=[];for(var g=0;g<a;g++){var k=4*(f*a+g);d[f][g]=(b[k]+b[k+1]+b[k+2])/765}}d.dx=function(a,b){a+1===this[b].length&&a--;return this[b][a+1]-this[b][a]};d.dy=function(a,b){b+1===this.length&&b--;return this[b][a]-this[b+1][a]};d.gradMagnitude=function(a,b){var d=this.dx(a,b),e=this.dy(a,b);return Math.sqrt(d*d+e*e)};d.laplace=function(a,b){var d=-16*this[b][a],d=d+this[b-2][a],d=d+(this[b-1][a-1]+2*this[b-1][a]+this[b-1][a+1]),
d=d+(this[b][a-2]+2*this[b][a-1]+2*this[b][a+1]+this[b][a+2]),d=d+(this[b+1][a-1]+2*this[b+1][a]+this[b+1][a+1]);return d+=this[b+2][a]};return d};
dwv.math.computeGradient=function(b){for(var a=[],e=0,d=0,f=0,f=0;f<b.length-1;f++){a[f]=[];for(d=0;d<b[f].length-1;d++)a[f][d]=b.gradMagnitude(d,f),e=Math.max(a[f][d],e);a[f][b[f].length-1]=a[f][b.length-2]}a[b.length-1]=[];for(d=0;d<a[0].length;d++)a[b.length-1][d]=a[b.length-2][d];for(f=0;f<a.length;f++)for(d=0;d<a[f].length;d++)a[f][d]=1-a[f][d]/e;return a};
dwv.math.computeLaplace=function(b){for(var a=[[],[]],e=1;e<b.length;e++)a[0][e]=1,a[1][e]=1;for(e=2;e<b.length-2;e++){a[e]=[];a[e][0]=1;a[e][1]=1;for(var d=2;d<b[e].length-2;d++)a[e][d]=.33<b.laplace(d,e)?0:1;a[e][b[e].length-2]=1;a[e][b[e].length-1]=1}a[b.length-2]=[];a[b.length-1]=[];for(e=1;e<b.length;e++)a[b.length-2][e]=1,a[b.length-1][e]=1;return a};
dwv.math.computeGradX=function(b){for(var a=[],e=0;e<b.length;e++){a[e]=[];for(var d=0;d<b[e].length-1;d++)a[e][d]=b.dx(d,e);a[e][b[e].length-1]=a[e][b[e].length-2]}return a};dwv.math.computeGradY=function(b){for(var a=[],e=0;e<b.length-1;e++){a[e]=[];for(var d=0;d<b[e].length;d++)a[e][d]=b.dy(d,e)}a[b.length-1]=[];for(e=0;e<b[0].length;e++)a[b.length-1][e]=a[b.length-2][e];return a};
dwv.math.gradUnitVector=function(b,a,e,d,f){b=b[d][e];a=a[d][e];e=Math.sqrt(b*b+a*a);e=Math.max(e,1E-100);f.x=b/e;f.y=a/e};dwv.math.gradDirection=function(b,a,e,d,f,g){var k=new dwv.math.FastPoint2D(-1,-1),l=new dwv.math.FastPoint2D(-1,-1);dwv.math.gradUnitVector(b,a,e,d,k);dwv.math.gradUnitVector(b,a,f,g,l);b=k.y*(f-e)-k.x*(g-d);l=l.y*(f-e)-l.x*(g-d);0>b&&(b=-b,l=-l);e!==f&&d!==g&&(b*=Math.SQRT1_2,l*=Math.SQRT1_2);return __twothirdpi*(Math.acos(b)+Math.acos(l))};
dwv.math.computeSides=function(b,a,e,d){for(var f={inside:[],outside:[]},g=new dwv.math.FastPoint2D(-1,-1),k=0;k<a.length;k++){f.inside[k]=[];f.outside[k]=[];for(var l=0;l<a[k].length;l++){dwv.math.gradUnitVector(a,e,l,k,g);var h=Math.round(l+b*g.y),m=Math.round(k-b*g.x),n=Math.round(l-b*g.y),p=Math.round(k+b*g.x),h=Math.max(Math.min(h,a[k].length-1),0),n=Math.max(Math.min(n,a[k].length-1),0),m=Math.max(Math.min(m,a.length-1),0),p=Math.max(Math.min(p,a.length-1),0);f.inside[k][l]=d[m][h];f.outside[k][l]=
d[p][n]}}return f};dwv.math.gaussianBlur=function(b,a){a[0]=.4*b[0]+.5*b[1]+.1*b[1];a[1]=.25*b[0]+.4*b[1]+.25*b[2]+.1*b[3];for(var e=2;e<b.length-2;e++)a[e]=.05*b[e-2]+.25*b[e-1]+.4*b[e]+.25*b[e+1]+.05*b[e+2];e=b.length;a[e-2]=.25*b[e-1]+.4*b[e-2]+.25*b[e-3]+.1*b[e-4];a[e-1]=.4*b[e-1]+.5*b[e-2]+.1*b[e-3]};
dwv.math.Scissors=function(){this.height=this.width=-1;this.curPoint=null;this.searchGranBits=8;this.searchGran=1<<this.earchGranBits;this.pointsPerPost=500;this.parents=this.gradY=this.gradX=this.gradient=this.laplace=this.greyscale=null;this.trained=this.working=!1;this.trainingPoints=null;this.edgeWidth=2;this.trainingLength=32;this.edgeGran=256;this.edgeTraining=null;this.gradPointsNeeded=32;this.gradGran=1024;this.gradTraining=null;this.insideGran=256;this.insideTraining=null;this.outsideGran=
256;this.outsideTraining=null};dwv.math.Scissors.prototype.getTrainingIdx=function(b,a){return Math.round((b-1)*a)};dwv.math.Scissors.prototype.getTrainedEdge=function(b){return this.edgeTraining[this.getTrainingIdx(this.edgeGran,b)]};dwv.math.Scissors.prototype.getTrainedGrad=function(b){return this.gradTraining[this.getTrainingIdx(this.gradGran,b)]};dwv.math.Scissors.prototype.getTrainedInside=function(b){return this.insideTraining[this.getTrainingIdx(this.insideGran,b)]};
dwv.math.Scissors.prototype.getTrainedOutside=function(b){return this.outsideTraining[this.getTrainingIdx(this.outsideGran,b)]};dwv.math.Scissors.prototype.setWorking=function(b){this.working=b};dwv.math.Scissors.prototype.setDimensions=function(b,a){this.width=b;this.height=a};
dwv.math.Scissors.prototype.setData=function(b){if(-1===this.width||-1===this.height)throw Error("Dimensions have not been set.");this.greyscale=dwv.math.computeGreyscale(b,this.width,this.height);this.laplace=dwv.math.computeLaplace(this.greyscale);this.gradient=dwv.math.computeGradient(this.greyscale);this.gradX=dwv.math.computeGradX(this.greyscale);this.gradY=dwv.math.computeGradY(this.greyscale);b=dwv.math.computeSides(this.edgeWidth,this.gradX,this.gradY,this.greyscale);this.inside=b.inside;
this.outside=b.outside;this.edgeTraining=[];this.gradTraining=[];this.insideTraining=[];this.outsideTraining=[]};dwv.math.Scissors.prototype.findTrainingPoints=function(b){var a=[];if(null!==this.parents)for(var e=0;e<this.trainingLength&&b;e++)a.push(b),b=this.parents[b.y][b.x];return a};dwv.math.Scissors.prototype.resetTraining=function(){this.trained=!1};
dwv.math.Scissors.prototype.doTraining=function(b){this.trainingPoints=this.findTrainingPoints(b);8>this.trainingPoints.length||(b=[],this.calculateTraining(b,this.edgeGran,this.greyscale,this.edgeTraining),this.calculateTraining(b,this.gradGran,this.gradient,this.gradTraining),this.calculateTraining(b,this.insideGran,this.inside,this.insideTraining),this.calculateTraining(b,this.outsideGran,this.outside,this.outsideTraining),this.trainingPoints.length<this.gradPointsNeeded&&this.addInStaticGrad(this.trainingPoints.length,
this.gradPointsNeeded),this.trained=!0)};dwv.math.Scissors.prototype.calculateTraining=function(b,a,e,d){var f=0;b.length=a;for(f=0;f<a;f++)b[f]=0;for(var g=1,f=0;f<this.trainingPoints.length;f++){var k=this.trainingPoints[f],k=this.getTrainingIdx(a,e[k.y][k.x]);b[k]+=1;g=Math.max(g,b[k])}for(f=0;f<a;f++)b[f]=1-b[f]/g;dwv.math.gaussianBlur(b,d)};
dwv.math.Scissors.prototype.addInStaticGrad=function(b,a){for(var e=0;e<this.gradGran;e++)this.gradTraining[e]=Math.min(this.gradTraining[e],1-e*(a-b)/(a*this.gradGran))};dwv.math.Scissors.prototype.gradDirection=function(b,a,e,d){return dwv.math.gradDirection(this.gradX,this.gradY,b,a,e,d)};
dwv.math.Scissors.prototype.dist=function(b,a,e,d){var f=this.gradient[d][e];if(b===e||a===d)f*=Math.SQRT1_2;var g=this.laplace[d][e];e=this.gradDirection(b,a,e,d);if(this.trained){f=this.getTrainedGrad(f);d=this.getTrainedEdge(this.greyscale[a][b]);var k=this.getTrainedInside(this.inside[a][b]);b=this.getTrainedOutside(this.outside[a][b]);return.3*f+.3*g+.1*(e+d+k+b)}return.43*f+.43*g+.11*e};
dwv.math.Scissors.prototype.adj=function(b){for(var a=[],e=Math.max(b.x-1,0),d=Math.max(b.y-1,0),f=Math.min(b.x+1,this.greyscale[0].length-1),g=Math.min(b.y+1,this.greyscale.length-1),k=0;d<=g;d++)for(var l=e;l<=f;l++)if(l!==b.x||d!==b.y)a[k++]=new dwv.math.FastPoint2D(l,d);return a};
dwv.math.Scissors.prototype.setPoint=function(b){this.setWorking(!0);this.curPoint=b;var a=0,e=0;this.visited=[];for(e=0;e<this.height;e++)for(this.visited[e]=[],a=0;a<this.width;a++)this.visited[e][a]=!1;this.parents=[];for(e=0;e<this.height;e++)this.parents[e]=[];this.cost=[];for(e=0;e<this.height;e++)for(this.cost[e]=[],a=0;a<this.width;a++)this.cost[e][a]=Number.MAX_VALUE;this.pq=new dwv.math.BucketQueue(this.searchGranBits,function(a){return Math.round(this.searchGran*this.costArr[a.y][a.x])});
this.pq.searchGran=this.searchGran;this.pq.costArr=this.cost;this.pq.push(b);this.cost[b.y][b.x]=0};
dwv.math.Scissors.prototype.doWork=function(){if(this.working){this.timeout=null;for(var b=0,a=[];!this.pq.isEmpty()&&b<this.pointsPerPost;){var e=this.pq.pop();a.push(e);a.push(this.parents[e.y][e.x]);this.visited[e.y][e.x]=!0;for(var d=this.adj(e),f=0;f<d.length;f++){var g=d[f],k=this.cost[e.y][e.x]+this.dist(e.x,e.y,g.x,g.y);k<this.cost[g.y][g.x]&&(this.cost[g.y][g.x]!==Number.MAX_VALUE&&this.pq.remove(g),this.cost[g.y][g.x]=k,this.parents[g.y][g.x]=e,this.pq.push(g))}b++}return a}};dwv=dwv||{};
dwv.math=dwv.math||{};dwv.math.Point2D=function(b,a){this.getX=function(){return b};this.getY=function(){return a}};dwv.math.Point2D.prototype.equals=function(b){return b?this.getX()===b.getX()&&this.getY()===b.getY():!1};dwv.math.Point2D.prototype.toString=function(){return"("+this.getX()+", "+this.getY()+")"};dwv.math.FastPoint2D=function(b,a){this.x=b;this.y=a};dwv.math.FastPoint2D.prototype.equals=function(b){return b?this.x===b.x&&this.y===b.y:!1};
dwv.math.FastPoint2D.prototype.toString=function(){return"("+this.x+", "+this.y+")"};dwv.math.Circle=function(b,a){var e=Math.PI*a*a;this.getCenter=function(){return b};this.getRadius=function(){return a};this.getSurface=function(){return e};this.getWorldSurface=function(a,b){return e*a*b}};
dwv.math.Ellipse=function(b,a,e){var d=Math.PI*a*e;this.getCenter=function(){return b};this.getA=function(){return a};this.getB=function(){return e};this.getSurface=function(){return d};this.getWorldSurface=function(a,b){return d*a*b}};
dwv.math.Line=function(b,a){var e=Math.sqrt(Math.abs(a.getX()-b.getX())*Math.abs(a.getX()-b.getX())+Math.abs(a.getY()-b.getY())*Math.abs(a.getY()-b.getY()));this.getBegin=function(){return b};this.getEnd=function(){return a};this.getLength=function(){return e};this.getWorldLength=function(d,e){var g=Math.abs(a.getX()-b.getX())*d,k=Math.abs(a.getY()-b.getY())*e;return Math.sqrt(g*g+k*k)};this.getMidpoint=function(){return new dwv.math.Point2D(parseInt((b.getX()+a.getX())/2,10),parseInt((b.getY()+a.getY())/
2,10))}};
dwv.math.Rectangle=function(b,a){if(a.getX()<b.getX()){var e=b.getX();b=new dwv.math.Point2D(a.getX(),b.getY());a=new dwv.math.Point2D(e,a.getY())}a.getY()<b.getY()&&(e=b.getY(),b=new dwv.math.Point2D(b.getX(),a.getY()),a=new dwv.math.Point2D(a.getX(),e));var d=Math.abs(a.getX()-b.getX())*Math.abs(a.getY()-b.getY());this.getBegin=function(){return b};this.getEnd=function(){return a};this.getRealWidth=function(){return a.getX()-b.getX()};this.getRealHeight=function(){return a.getY()-b.getY()};this.getWidth=
function(){return Math.abs(this.getRealWidth())};this.getHeight=function(){return Math.abs(this.getRealHeight())};this.getSurface=function(){return d};this.getWorldSurface=function(a,b){return d*a*b}};dwv.math.ROI=function(){var b=[];this.getPoint=function(a){return b[a]};this.getLength=function(){return b.length};this.addPoint=function(a){b.push(a)};this.addPoints=function(a){b=b.concat(a)}};dwv.math.Path=function(b,a){this.pointArray=b?b.slice():[];this.controlPointIndexArray=a?a.slice():[]};
dwv.math.Path.prototype.getPoint=function(b){return this.pointArray[b]};dwv.math.Path.prototype.isControlPoint=function(b){b=this.pointArray.indexOf(b);if(-1!==b)return-1!==this.controlPointIndexArray.indexOf(b);throw Error("Error: isControlPoint called with not in list point.");};dwv.math.Path.prototype.getLength=function(){return this.pointArray.length};dwv.math.Path.prototype.addPoint=function(b){this.pointArray.push(b)};
dwv.math.Path.prototype.addControlPoint=function(b){b=this.pointArray.indexOf(b);if(-1!==b)this.controlPointIndexArray.push(b);else throw Error("Error: addControlPoint called with no point in list point.");};dwv.math.Path.prototype.addPoints=function(b){this.pointArray=this.pointArray.concat(b)};
dwv.math.Path.prototype.appenPath=function(b){var a=this.pointArray.length;this.pointArray=this.pointArray.concat(b.pointArray);for(var e=[],d=0;d<b.controlPointIndexArray.length;++d)e[d]=b.controlPointIndexArray[d]+a;this.controlPointIndexArray=this.controlPointIndexArray.concat(e)};dwv=dwv||{};dwv.math=dwv.math||{};
dwv.math.getStats=function(b){for(var a=b[0],e=a,d=0,f=d=0,g=0,k=g=g=0;k<b.length;++k)g=b[k],g<a?a=g:g>e&&(e=g),d+=g,f+=g*g;d/=b.length;g=f/b.length-d*d;g=Math.sqrt(g);return{min:a,max:e,mean:d,stdDev:g}};dwv=dwv||{};dwv.tool=dwv.tool||{};Kinetic=Kinetic||{};dwv.tool.DrawShapeCommand=function(b,a,e){this.getName=function(){return"Draw-"+a};this.execute=function(){var a=b.getParent();e.add(a);e.draw()};this.undo=function(){b.getParent().remove();e.draw()}};
dwv.tool.MoveShapeCommand=function(b,a,e,d){this.getName=function(){return"Move-"+a};this.execute=function(){b.getParent().getChildren().each(function(a){a.x(a.x()+e.x);a.y(a.y()+e.y)});d.draw()};this.undo=function(){b.getParent().getChildren().each(function(a){a.x(a.x()-e.x);a.y(a.y()-e.y)});d.draw()}};dwv.tool.ChangeShapeCommand=function(b,a,e,d,f,g,k){this.getName=function(){return"Change-"+a};this.execute=function(){e(b,f,k);g.draw()};this.undo=function(){e(b,d,k);g.draw()}};
dwv.tool.DeleteShapeCommand=function(b,a,e){this.getName=function(){return"Delete-"+a};this.execute=function(){b.getParent().remove();e.draw()};this.undo=function(){var a=b.getParent();e.add(a);e.draw()}};dwv.tool.colors="Yellow Red White Green Blue Lime Fuchsia Black".split(" ");
dwv.tool.Draw=function(b){function a(a){var d=b.getDrawStage();return{x:d.offset().x+a.x/d.scale().x,y:d.offset().y+a.y/d.scale().y}}var e=this,d=!1,f=!0,g=null,k=null,l=null,h=[],m=null;this.style=new dwv.html.Style;this.shapeName=0;var n=[],p=null,r=new dwv.tool.ShapeEditor,q=new Kinetic.Group,t=new Kinetic.Line({points:[-10,-10,10,10],stroke:"red"}),v=new Kinetic.Line({points:[10,-10,-10,10],stroke:"red"});q.add(t);q.add(v);var y=null;this.mousedown=function(a){var e=b.getDrawStage().getIntersection({x:a._xs,
y:a._ys});e?(a=e.getParent().find(".shape")[0])&&a!==r.getShape()&&(r.disable(),r.setShape(a),r.setImage(b.getImage()),r.enable()):(r.disable(),r.setShape(null),r.setImage(null),d=!0,m=new Kinetic.Group,n=[],p=new dwv.math.Point2D(a._x,a._y),n.push(p))};this.mousemove=function(a){d&&(0<Math.abs(a._x-p.getX())||0<Math.abs(a._y-p.getY()))&&(p=new dwv.math.Point2D(a._x,a._y),n.push(p),k&&!f&&(k.destroy(),l.destroy()),f&&(f=!1),a=new dwv.tool.shapes[e.shapeName](n,e.style,b.getImage()),k=a.shape,l=a.text,
k.listening(!1),y.hitGraphEnabled(!1),m.add(k),m.add(l),g=new dwv.tool.DrawShapeCommand(k,e.shapeName,y),g.execute())};this.mouseup=function(){if(d&&1<n.length){k&&(k.destroy(),l.destroy());var a=new dwv.tool.shapes[e.shapeName](n,e.style,b.getImage());k=a.shape;l=a.text;y.hitGraphEnabled(!0);m.add(k);m.add(l);g=new dwv.tool.DrawShapeCommand(k,e.shapeName,y);g.execute();b.getUndoStack().add(g);e.setShapeOn(k,l);h.push({shape:k,text:l})}d=!1;f=!0};this.mouseout=function(a){e.mouseup(a)};this.touchstart=
function(a){e.mousedown(a)};this.touchmove=function(a){e.mousemove(a)};this.touchend=function(a){e.mouseup(a)};this.keydown=function(a){b.onKeydown(a)};this.display=function(a){dwv.gui.displayDrawHtml(a);r.disable();r.setShape(null);r.setImage(null);document.body.style.cursor="default";b.getDrawStage().listening(a);y=b.getDrawLayer();y.listening(a);y.hitGraphEnabled(a);a?(b.addLayerListeners(b.getDrawStage().getContent()),h.forEach(function(a){e.setShapeOn(a.shape,a.text)})):(b.removeLayerListeners(b.getDrawStage().getContent()),
h.forEach(function(a){a=a.shape;a.off("mouseover");a.off("mouseout");a.draggable(!1);a.off("dragstart");a.off("dragmove");a.off("dragend")}));y.draw()};this.setShapeOn=function(d,e){d.on("mouseover",function(){document.body.style.cursor="pointer"});d.on("mouseout",function(){document.body.style.cursor="default"});d.draggable(!0);var f=null,g=null,h="shape";d instanceof Kinetic.Line?h="line":d instanceof Kinetic.Rect?h="rectangle":d instanceof Kinetic.Ellipse&&(h="ellipse");var k=d.stroke(),l,m;d.on("dragstart",
function(d){d=dwv.html.getEventOffset(d.evt)[0];f=a(d);l=e.x();m=e.y();d=b.getDrawStage();var g=d.scale(),h={x:1/g.x,y:1/g.y};q.x(d.offset().x+256/g.x);q.y(d.offset().y+20/g.y);q.scale(h);y.add(q);r.setAnchorsActive(!1);y.draw()});d.on("dragmove",function(b){b=dwv.html.getEventOffset(b.evt)[0];g=b=a(b);10>Math.abs(b.x-q.x())&&10>Math.abs(b.y-q.y())?(q.getChildren().each(function(a){a.stroke("orange")}),d.stroke("red")):(q.getChildren().each(function(a){a.stroke("red")}),d.stroke(k));e.position({x:l+
(b.x-f.x),y:m+(b.y-f.y)});r.resetAnchors();y.draw()});d.on("dragend",function(){var a=g;if(10>Math.abs(a.x-q.x())&&10>Math.abs(a.y-q.y())){var e=a.x-f.x,l=a.y-f.y;this.getParent().getChildren().each(function(a){a.x(a.x()-e);a.y(a.y()-l)});d.stroke(k);r.disable();r.setShape(null);r.setImage(null);document.body.style.cursor="default";a=new dwv.tool.DeleteShapeCommand(this,h,y);a.execute();b.getUndoStack().add(a)}else{a={x:a.x-f.x,y:a.y-f.y};if(0!==a.x||0!==a.y)a=new dwv.tool.MoveShapeCommand(this,h,
a,y),b.getUndoStack().add(a);r.setAnchorsActive(!0);r.resetAnchors()}q.remove();y.draw()})}};
dwv.tool.Draw.prototype.getHelp=function(){return{title:"Draw",brief:"Allows to draw shapes on the image. Choose the shape and its color from the drop down menus. Once created, shapes can be edited by selecting them. Anchors will appear and allow specific shape edition. Drag the shape on the top red cross to delete it. All actions are undoable. ",mouse:{mouse_drag:"A single mouse drag draws the desired shape."},touch:{touch_drag:"A single touch drag draws the desired shape."}}};
dwv.tool.Draw.prototype.setLineColour=function(b){this.style.setLineColor(b)};dwv.tool.Draw.prototype.setShapeName=function(b){if(!this.hasShape(b))throw Error("Unknown shape: '"+b+"'");this.shapeName=b};dwv.tool.Draw.prototype.hasShape=function(b){return dwv.tool.shapes[b]};dwv.tool.Draw.prototype.init=function(){var b=0,a;for(a in dwv.tool.shapes){b=a;break}this.setShapeName(b);this.setLineColour(dwv.tool.colors[0]);dwv.gui.initDrawHtml()};dwv=dwv||{};dwv.tool=dwv.tool||{};Kinetic=Kinetic||{};
dwv.tool.ShapeEditor=function(){function b(a){l&&l.getParent()&&l.getParent().find(".anchor").each(a)}function a(a){b(function(b){b.visible(a)})}function e(){b(function(a){a.remove()})}function d(){if(l&&l.getLayer()){var a=l.getParent();if(l instanceof Kinetic.Line){var b=l.points();if(4===b.length){n=dwv.tool.UpdateLine;var d=b[0]+l.x(),e=b[1]+l.y(),g=b[2]+l.x(),b=b[3]+l.y();f(a,d,e,"begin");f(a,g,b,"end")}else for(n=dwv.tool.UpdateRoi,g=e=d=0;g<b.length;g+=2)d=b[g]+l.x(),e=b[g+1]+l.y(),f(a,d,e,
g)}else l instanceof Kinetic.Rect?(n=dwv.tool.UpdateRect,b=l.x(),d=l.y(),e=l.width(),g=l.height(),f(a,b,d,"topLeft"),f(a,b+e,d,"topRight"),f(a,b+e,d+g,"bottomRight"),f(a,b,d+g,"bottomLeft")):l instanceof Kinetic.Ellipse&&(n=dwv.tool.UpdateEllipse,b=l.x(),d=l.y(),e=l.radius(),f(a,b-e.x,d-e.y,"topLeft"),f(a,b+e.x,d-e.y,"topRight"),f(a,b+e.x,d+e.y,"bottomRight"),f(a,b-e.x,d+e.y,"bottomLeft"));l.getLayer().add(a)}}function f(a,b,d,e){b=new Kinetic.Circle({x:b,y:d,stroke:"#999",fillRed:100,fillBlue:100,
fillGreen:100,fillAlpha:.7,strokeWidth:2,radius:6,name:"anchor",id:e,dragOnTop:!1,draggable:!0,visible:!1});k(b);a.add(b)}function g(a){var b=a.getParent(),d=a.id(),e=a.x(),f=a.y();return{getParent:function(){return b},id:function(){return d},x:function(){return e},y:function(){return f}}}function k(a){var b=null,d="shape";l instanceof Kinetic.Line?d="line":l instanceof Kinetic.Rect?d="rectangle":l instanceof Kinetic.Ellipse&&(d="ellipse");a.on("dragstart",function(){b=g(this)});a.on("dragmove",function(){n&&
n(l,this,h);this.getLayer()?this.getLayer().draw():console.warn("No layer to draw the anchor!")});a.on("dragend",function(){var a=g(this),e=new dwv.tool.ChangeShapeCommand(l,d,n,b,a,this.getLayer(),h);e.execute();app.getUndoStack().add(e);b=a});a.on("mousedown touchstart",function(){this.moveToTop()});a.on("mouseover",function(){document.body.style.cursor="pointer";this.stroke("#ddd");this.getLayer()?this.getLayer().draw():console.warn("No layer to draw the anchor!")});a.on("mouseout",function(){document.body.style.cursor=
"default";this.stroke("#999");this.getLayer()?this.getLayer().draw():console.warn("No layer to draw the anchor!")})}var l=null,h=null,m=!1,n=null;this.setShape=function(a){if(l=a)e(),d()};this.setImage=function(a){h=a};this.getShape=function(){return l};this.isActive=function(){return m};this.enable=function(){m=!0;l&&(a(!0),l.getLayer()&&l.getLayer().draw())};this.disable=function(){m=!1;l&&(a(!1),l.getLayer()&&l.getLayer().draw())};this.resetAnchors=function(){e();d();a(!0)};this.setAnchorsActive=
function(a){var d=null,d=a?function(a){k(a)}:function(a){a.off("dragstart");a.off("dragmove");a.off("dragend");a.off("mousedown touchstart");a.off("mouseover");a.off("mouseout")};b(d)}};dwv=dwv||{};dwv.tool=dwv.tool||{};Kinetic=Kinetic||{};
dwv.tool.EllipseCreator=function(b,a,e){var d=Math.abs(b[0].getX()-b[b.length-1].getX()),f=Math.abs(b[0].getY()-b[b.length-1].getY()),d=new dwv.math.Ellipse(b[0],d,f);b=new Kinetic.Ellipse({x:d.getCenter().getX(),y:d.getCenter().getY(),radius:{x:d.getA(),y:d.getB()},stroke:a.getLineColor(),strokeWidth:2,name:"shape"});e=(e.quantifyEllipse(d).surface/100).toPrecision(4)+" cm2";a=new Kinetic.Text({x:d.getCenter().getX(),y:d.getCenter().getY(),text:e,fontSize:a.getFontSize(),fontFamily:"Verdana",fill:a.getLineColor(),
name:"text"});return{shape:b,text:a}};
dwv.tool.UpdateEllipse=function(b,a,e){var d=a.getParent(),f=d.getChildren(function(a){return"topLeft"===a.id()})[0],g=d.getChildren(function(a){return"topRight"===a.id()})[0],k=d.getChildren(function(a){return"bottomRight"===a.id()})[0],l=d.getChildren(function(a){return"bottomLeft"===a.id()})[0];switch(a.id()){case "topLeft":f.x(a.x());f.y(a.y());g.y(a.y());l.x(a.x());break;case "topRight":g.x(a.x());g.y(a.y());f.y(a.y());k.x(a.x());break;case "bottomRight":k.x(a.x());k.y(a.y());l.y(a.y());g.x(a.x());
break;case "bottomLeft":l.x(a.x());l.y(a.y());k.y(a.y());f.x(a.x());break;default:console.error("Unhandled anchor id: "+a.id())}a=(g.x()-f.x())/2;k=(k.y()-g.y())/2;f={x:f.x()+a,y:g.y()+k};b.position(f);g={x:Math.abs(a),y:Math.abs(k)};b.radius(g);if(b=d.getChildren(function(a){return"text"===a.name()})[0])d=new dwv.math.Ellipse(f,a,k),e=(e.quantifyEllipse(d).surface/100).toPrecision(4)+" cm2",b.position({x:f.x,y:f.y}),b.text(e)};dwv=dwv||{};dwv.tool=dwv.tool||{};
dwv.tool.Filter=function(){this.defaultFilterName=this.selectedFilter=0;this.displayed=!1};dwv.tool.Filter.prototype.getHelp=function(){return{title:"Filter",brief:"A few simple image filters are available: a Threshold filter to limit the image intensities between a chosen minimum and maximum, a Sharpen filter to convolute the image with a sharpen matrix, a Sobel filter to get the gradient of the image in both directions."}};
dwv.tool.Filter.prototype.display=function(b){dwv.gui.displayFilterHtml(b);this.displayed=b;this.selectedFilter.display(b)};dwv.tool.Filter.prototype.getSelectedFilter=function(){return this.selectedFilter};dwv.tool.Filter.prototype.setSelectedFilter=function(b){if(!this.hasFilter(b))throw Error("Unknown filter: '"+b+"'");this.displayed&&this.selectedFilter.display(!1);this.selectedFilter=dwv.tool.filters[b];this.displayed&&this.selectedFilter.display(!0)};dwv.tool.Filter.prototype.hasFilter=function(b){return dwv.tool.filters[b]};
dwv.tool.Filter.prototype.init=function(){for(var b in dwv.tool.filters){this.defaultFilterName=b;break}this.setSelectedFilter(this.defaultFilterName);for(b in dwv.tool.filters)dwv.tool.filters[b].init();dwv.gui.initFilterHtml()};dwv.tool.Filter.prototype.keydown=function(b){app.onKeydown(b)};dwv.tool.filter=dwv.tool.filter||{};dwv.tool.filter.Threshold=function(){};dwv.tool.filter.Threshold.prototype.display=function(b){dwv.gui.filter.displayThresholdHtml(b)};
dwv.tool.filter.Threshold.prototype.init=function(){dwv.gui.filter.initThresholdHtml()};dwv.tool.filter.Threshold.prototype.run=function(b){var a=new dwv.image.filter.Threshold;a.setMin(b.min);a.setMax(b.max);b=new dwv.tool.RunFilterCommand(a,app);b.execute();app.getUndoStack().add(b)};dwv.tool.filter.Sharpen=function(){};dwv.tool.filter.Sharpen.prototype.display=function(b){dwv.gui.filter.displaySharpenHtml(b)};dwv.tool.filter.Sharpen.prototype.init=function(){};
dwv.tool.filter.Sharpen.prototype.run=function(){var b=new dwv.image.filter.Sharpen,b=new dwv.tool.RunFilterCommand(b,app);b.execute();app.getUndoStack().add(b)};dwv.tool.filter.Sobel=function(){};dwv.tool.filter.Sobel.prototype.display=function(b){dwv.gui.filter.displaySobelHtml(b)};dwv.tool.filter.Sobel.prototype.init=function(){};dwv.tool.filter.Sobel.prototype.run=function(){var b=new dwv.image.filter.Sobel,b=new dwv.tool.RunFilterCommand(b,app);b.execute();app.getUndoStack().add(b)};
dwv.tool.RunFilterCommand=function(b,a){this.getName=function(){return"Filter-"+b.getName()};this.execute=function(){a.setImage(b.update());a.render()};this.undo=function(){a.setImage(b.getOriginalImage());a.render()}};dwv=dwv||{};dwv.info=dwv.info||{};
dwv.info.createWindowingDiv=function(){var b=document.getElementById("infotr");dwv.html.removeNode("ulinfotr");var a=document.createElement("ul");a.id="ulinfotr";var e=document.createElement("li");e.id="liwcinfotr";a.appendChild(e);e=document.createElement("li");e.id="liwwinfotr";a.appendChild(e);b.appendChild(a)};
dwv.info.updateWindowingDiv=function(b){var a=document.getElementById("liwcinfotr");dwv.html.cleanNode(a);a.appendChild(document.createTextNode("WindowCenter = "+b.wc));a=document.getElementById("liwwinfotr");dwv.html.cleanNode(a);a.appendChild(document.createTextNode("WindowWidth = "+b.ww))};
dwv.info.createPositionDiv=function(){var b=document.getElementById("infotl");dwv.html.removeNode("ulinfotl");var a=document.createElement("ul");a.id="ulinfotl";var e=document.createElement("li");e.id="liposinfotl";a.appendChild(e);e=document.createElement("li");e.id="livalueinfotl";a.appendChild(e);b.appendChild(a)};
dwv.info.updatePositionDiv=function(b){var a=document.getElementById("liposinfotl");dwv.html.cleanNode(a);a.appendChild(document.createTextNode("Pos = "+b.i+", "+b.j+", "+b.k));"undefined"!=typeof b.value&&(a=document.getElementById("livalueinfotl"),dwv.html.cleanNode(a),a.appendChild(document.createTextNode("Value = "+b.value)))};
dwv.info.createMiniColorMap=function(){var b=document.getElementById("infobr");dwv.html.removeNode("canvasinfobr");var a=document.createElement("canvas");a.id="canvasinfobr";a.width=98;a.height=10;b.appendChild(a)};
dwv.info.updateMiniColorMap=function(b){var a=b.wc;b=b.ww;for(var e=document.getElementById("canvasinfobr"),d=e.getContext("2d"),f=app.getView().getColorMap(),g=d.getImageData(0,0,e.width,e.height),k=0,l=app.getImage().getRescaledDataRange().min,h=(app.getImage().getRescaledDataRange().max-l)/e.width,m=0,n=a-.5-(b-1)/2,p=a-.5+(b-1)/2,r,q=0;q<e.height;++q)for(var k=l,t=0;t<e.width;++t)k<=n?m=0:k>p?m=255:(m=255*((k-(a-.5))/(b-1)+.5)+0,m=parseInt(m,10)),r=4*(t+q*e.width),g.data[r]=f.red[m],g.data[r+
1]=f.green[m],g.data[r+2]=f.blue[m],g.data[r+3]=255,k+=h;d.putImageData(g,0,0)};dwv.info.createPlot=function(){$.plot($("#plot"),[app.getImage().getHistogram()],{bars:{show:!0},grid:{backgroundColor:null},xaxis:{show:!0},yaxis:{show:!1}})};
dwv.info.updatePlotMarkings=function(b){var a=b.wc;b=parseInt((b.ww-1)/2,10);var e=parseInt(a-.5,10),a=e-b;b=e+b;b=[{color:"#faa",lineWidth:1,xaxis:{from:a,to:a}},{color:"#aaf",lineWidth:1,xaxis:{from:b,to:b}}];$.plot($("#plot"),[app.getImage().getHistogram()],{bars:{show:!0},grid:{markings:b,backgroundColor:null},xaxis:{show:!1},yaxis:{show:!1}})};dwv=dwv||{};dwv.tool=dwv.tool||{};Kinetic=Kinetic||{};
dwv.tool.LineCreator=function(b,a,e){var d=new dwv.math.Line(b[0],b[b.length-1]);b=new Kinetic.Line({points:[d.getBegin().getX(),d.getBegin().getY(),d.getEnd().getX(),d.getEnd().getY()],stroke:a.getLineColor(),strokeWidth:2,name:"shape"});e=e.quantifyLine(d).length.toPrecision(4)+" mm";a=new Kinetic.Text({x:d.getEnd().getX(),y:d.getEnd().getY()-15,text:e,fontSize:a.getFontSize(),fontFamily:"Verdana",fill:a.getLineColor(),name:"text"});return{shape:b,text:a}};
dwv.tool.UpdateLine=function(b,a,e){var d=a.getParent(),f=d.getChildren(function(a){return"begin"===a.id()})[0],g=d.getChildren(function(a){return"end"===a.id()})[0];switch(a.id()){case "begin":f.x(a.x());f.y(a.y());break;case "end":g.x(a.x()),g.y(a.y())}a=f.x()-b.x();var k=f.y()-b.y(),l=g.x()-b.x(),h=g.y()-b.y();b.points([a,k,l,h]);if(b=d.getChildren(function(a){return"text"===a.name()})[0])f=new dwv.math.Point2D(f.x(),f.y()),g=new dwv.math.Point2D(g.x(),g.y()),g=new dwv.math.Line(f,g),e=e.quantifyLine(g).length.toPrecision(4)+
" mm",g={x:g.getEnd().getX(),y:g.getEnd().getY()-15},b.position(g),b.text(e)};dwv=dwv||{};dwv.tool=dwv.tool||{};Kinetic=Kinetic||{};
dwv.tool.Livewire=function(b){function a(){for(var a=0;a<b.getImage().getSize().getNumberOfRows();++a)m[a]=[]}var e=this;this.started=!1;var d=!0,f=null,g=null,k=null;this.style=new dwv.html.Style;var l=new dwv.math.Path,h=new dwv.math.Path,m=[],n=new dwv.math.Scissors;this.mousedown=function(g){if(e.started)5>Math.abs(g._x-e.x0)&&5>Math.abs(g._y-e.y0)?(e.mousemove(g),console.log("Done."),b.getUndoStack().add(f),e.started=!1,d=!0):(l=h,a(),g=new dwv.math.FastPoint2D(g._x,g._y),n.doTraining(g),l.addControlPoint(h.getPoint(0)));
else{e.started=!0;k=new Kinetic.Group;e.x0=g._x;e.y0=g._y;l=new dwv.math.Path;h=new dwv.math.Path;a();var m=new dwv.math.FastPoint2D(g._x,g._y);n.doTraining(m);g=new dwv.math.Point2D(g._x,g._y);l.addPoint(g);l.addControlPoint(g)}};this.mousemove=function(a){if(e.started){a=new dwv.math.FastPoint2D(a._x,a._y);n.setPoint(a);for(var r=0,q=!1;!m[a.y][a.x]&&!q;)if(console.log("Getting ready..."),r=n.doWork(),0===r.length)q=!0;else for(var t=0;t<r.length-1;t+=2){var v=r[t];m[v.y][v.x]=r[t+1]}console.log("Ready!");
h=new dwv.math.Path;for(q=!1;a&&!q;)h.addPoint(new dwv.math.Point2D(a.x,a.y)),m[a.y]?m[a.y][a.x]?a=m[a.y][a.x]:q=!0:q=!0;h.appenPath(l);g&&!d&&g.destroy();d&&(d=!1);g=new dwv.tool.RoiCreator(h.pointArray,e.style);k.add(g);f=new dwv.tool.DrawShapeCommand(g,"livewire",b);f.execute()}};this.mouseup=function(){};this.mouseout=function(a){e.mouseup(a)};this.touchstart=function(a){e.mousedown(a)};this.touchmove=function(a){e.mousemove(a)};this.touchend=function(a){e.mouseup(a)};this.keydown=function(a){b.onKeydown(a)};
this.display=function(a){dwv.gui.displayLivewireHtml(a);this.init()};this.init=function(){this.setLineColour(dwv.tool.colors[0]);dwv.gui.initLivewireHtml();n.setDimensions(b.getImage().getSize().getNumberOfColumns(),b.getImage().getSize().getNumberOfRows());n.setData(b.getImageData().data)}};dwv.tool.Livewire.prototype.getHelp=function(){return{title:"Livewire",brief:"The Livewire tool is a semi-automatic segmentation tool that proposes to the user paths that follow intensity edges.Click once to initialise and then move the mouse to see the proposed paths. Click again to build your contour. The process stops when you click on the first root point. BEWARE: the process can take time!"}};
dwv.tool.Livewire.prototype.setLineColour=function(b){this.style.setLineColor(b)};dwv=dwv||{};dwv.tool=dwv.tool||{};Kinetic=Kinetic||{};
dwv.tool.RectangleCreator=function(b,a,e){var d=new dwv.math.Rectangle(b[0],b[b.length-1]);b=new Kinetic.Rect({x:d.getBegin().getX(),y:d.getBegin().getY(),width:d.getWidth(),height:d.getHeight(),stroke:a.getLineColor(),strokeWidth:2,name:"shape"});e=(e.quantifyRect(d).surface/100).toPrecision(4)+" cm2";a=new Kinetic.Text({x:d.getBegin().getX(),y:d.getEnd().getY()+10,text:e,fontSize:a.getFontSize(),fontFamily:"Verdana",fill:a.getLineColor(),name:"text"});return{shape:b,text:a}};
dwv.tool.UpdateRect=function(b,a,e){var d=a.getParent(),f=d.getChildren(function(a){return"topLeft"===a.id()})[0],g=d.getChildren(function(a){return"topRight"===a.id()})[0],k=d.getChildren(function(a){return"bottomRight"===a.id()})[0],l=d.getChildren(function(a){return"bottomLeft"===a.id()})[0];switch(a.id()){case "topLeft":f.x(a.x());f.y(a.y());g.y(a.y());l.x(a.x());break;case "topRight":g.x(a.x());g.y(a.y());f.y(a.y());k.x(a.x());break;case "bottomRight":k.x(a.x());k.y(a.y());l.y(a.y());g.x(a.x());
break;case "bottomLeft":l.x(a.x());l.y(a.y());k.y(a.y());f.x(a.x());break;default:console.error("Unhandled anchor id: "+a.id())}b.position(f.position());a=g.x()-f.x();l=l.y()-f.y();a&&l&&b.size({width:a,height:l});if(b=d.getChildren(function(a){return"text"===a.name()})[0])f=new dwv.math.Point2D(f.x(),f.y()),k=new dwv.math.Point2D(k.x(),k.y()),k=new dwv.math.Rectangle(f,k),e=(e.quantifyRect(k).surface/100).toPrecision(4)+" cm2",k={x:k.getBegin().getX(),y:k.getEnd().getY()+10},b.position(k),b.text(e)};
dwv=dwv||{};dwv.tool=dwv.tool||{};Kinetic=Kinetic||{};dwv.tool.RoiCreator=function(b,a){var e=new dwv.math.ROI;e.addPoints(b);for(var d=[],f=1;f<e.getLength();++f)d=d.concat(e.getPoint(f).getX()),d=d.concat(e.getPoint(f).getY());e=new Kinetic.Line({points:d,stroke:a.getLineColor(),strokeWidth:2,name:"shape",closed:!0});d=new Kinetic.Text({x:0,y:0,text:"",fontSize:a.getFontSize(),fontFamily:"Verdana",fill:a.getLineColor(),name:"text"});return{shape:e,text:d}};
dwv.tool.UpdateRoi=function(b,a){var e=a.getParent().getChildren(function(b){return b.id()===a.id()})[0];e.x(a.x());e.y(a.y());e=b.points();e[a.id()]=a.x()-b.x();e[a.id()+1]=a.y()-b.y();b.points(e)};dwv=dwv||{};dwv.tool=dwv.tool||{};
dwv.tool.Scroll=function(b){var a=this;this.started=!1;this.mousedown=function(b){a.started=!0;a.x0=b._x;a.y0=b._y};this.mousemove=function(e){if(a.started){var d=e._y-a.y0;15>Math.abs(d)||(0<d?b.getView().incrementSliceNb():b.getView().decrementSliceNb(),a.x0=e._x,a.y0=e._y)}};this.mouseup=function(){a.started&&(a.started=!1)};this.mouseout=function(b){a.mouseup(b)};this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.keydown=
function(a){b.onKeydown(a)};this.display=function(a){dwv.gui.displayScrollHtml(a)}};dwv.tool.Scroll.prototype.getHelp=function(){return{title:"Scroll",brief:"The scroll tool allows to scroll through slices.",mouse:{mouse_drag:"A single vertical mouse drag changes the current slice."},touch:{touch_drag:"A single vertical touch drag changes the current slice."}}};dwv.tool.Scroll.prototype.init=function(){};dwv=dwv||{};dwv.tool=dwv.tool||{};
dwv.tool.ToolBox=function(){this.defaultToolName=this.selectedTool=0};dwv.tool.ToolBox.prototype.display=function(b){dwv.gui.displayToolboxHtml(b)};dwv.tool.ToolBox.prototype.getSelectedTool=function(){return this.selectedTool};dwv.tool.ToolBox.prototype.setSelectedTool=function(b){if(!this.hasTool(b))throw Error("Unknown tool: '"+b+"'");this.selectedTool&&this.selectedTool.display(!1);this.selectedTool=dwv.tool.tools[b];this.selectedTool.display(!0)};dwv.tool.ToolBox.prototype.hasTool=function(b){return dwv.tool.tools[b]};
dwv.tool.ToolBox.prototype.init=function(){for(var b in dwv.tool.tools){this.defaultToolName=b;break}this.setSelectedTool(this.defaultToolName);for(b in dwv.tool.tools)dwv.tool.tools[b].init();dwv.gui.initToolboxHtml()};dwv.tool.ToolBox.prototype.reset=function(){this.selectedTool&&this.selectedTool.display(!1);this.defaultToolName=this.selectedTool=0};dwv=dwv||{};dwv.tool=dwv.tool||{};
dwv.tool.UndoStack=function(){var b=[],a=0;this.add=function(e){b=b.slice(0,a);b.push(e);++a;dwv.gui.addCommandToUndoHtml(e.getName())};this.undo=function(){0<a&&(--a,b[a].undo(),dwv.gui.enableInUndoHtml(!1))};this.redo=function(){a<b.length&&(b[a].execute(),++a,dwv.gui.enableInUndoHtml(!0))}};dwv=dwv||{};dwv.tool=dwv.tool||{};dwv.tool.updatePostionValue=function(b,a){app.getView().setCurrentPosition({i:b,j:a,k:app.getView().getCurrentPosition().k})};
dwv.tool.updateWindowingData=function(b,a){app.getView().setWindowLevel(b,a)};dwv.tool.updateWindowingDataFromName=function(b){if(!dwv.tool.presets[b])throw Error("Unknown window level preset: '"+b+"'");dwv.tool.updateWindowingData(dwv.tool.presets[b].center,dwv.tool.presets[b].width)};dwv.tool.updateColourMap=function(b){app.getView().setColorMap(b)};dwv.tool.updateColourMapFromName=function(b){if(!dwv.tool.colourMaps[b])throw Error("Unknown colour map: '"+b+"'");dwv.tool.updateColourMap(dwv.tool.colourMaps[b])};
dwv.tool.colourMaps={plain:dwv.image.lut.plain,invplain:dwv.image.lut.invPlain,rainbow:dwv.image.lut.rainbow,hot:dwv.image.lut.hot,test:dwv.image.lut.test};dwv.tool.presets={};dwv.tool.defaultpresets={};dwv.tool.defaultpresets.CT={mediastinum:{center:40,width:400},lung:{center:-500,width:1500},bone:{center:500,width:2E3}};dwv.tool.defaultpresets.CTextra={brain:{center:40,width:80},head:{center:90,width:350}};
dwv.tool.updatePresets=function(b){var a=dwv.tool.presets.manual;dwv.tool.presets={};var e=app.getView().getWindowPresets();if(e)if(b)for(var d=0;d<e.length;++d)dwv.tool.presets[e[d].name.toLowerCase()]=e[d];else dwv.tool.presets["default"]=e[0];var e=app.getImage().getMeta().Modality,f;for(f in dwv.tool.defaultpresets[e])dwv.tool.presets[f]=dwv.tool.defaultpresets[e][f];if(b)for(var g in dwv.tool.defaultpresets[e+"extra"])dwv.tool.presets[g]=dwv.tool.defaultpresets[e+"extra"][g];b=app.getImage().getRescaledDataRange();
f=b.max-b.min;dwv.tool.presets["min/max"]={center:b.min+f/2,width:f};a&&(dwv.tool.presets.manual=a)};
dwv.tool.WindowLevel=function(b){var a=this;this.started=!1;this.mousedown=function(b){a.started=!0;a.x0=b._x;a.y0=b._y;dwv.tool.updatePostionValue(b._x,b._y)};this.mousemove=function(e){if(a.started){var d=e._x-a.x0,f=a.y0-e._y,f=parseInt(b.getView().getWindowLut().getCenter(),10)+f,d=parseInt(b.getView().getWindowLut().getWidth(),10)+d;dwv.tool.updateWindowingData(f,d);a.x0=e._x;a.y0=e._y}};this.mouseup=function(){if(a.started){a.started=!1;var e=parseInt(b.getView().getWindowLut().getCenter(),
10),d=parseInt(b.getView().getWindowLut().getWidth(),10);dwv.tool.presets.manual={center:e,width:d};dwv.gui.initWindowLevelHtml();dwv.gui.setSelected("presetSelect","Manual")}};this.mouseout=function(b){a.mouseup(b)};this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.dblclick=function(a){dwv.tool.updateWindowingData(parseInt(b.getImage().getRescaledValue(a._x,a._y,b.getView().getCurrentPosition().k),10),parseInt(b.getView().getWindowLut().getWidth(),
10))};this.keydown=function(a){b.onKeydown(a)};this.display=function(a){null!==b.getImage().getPhotometricInterpretation().match(/MONOCHROME/)?dwv.gui.displayWindowLevelHtml(a):dwv.gui.displayWindowLevelHtml(!1)};this.init=function(){dwv.tool.updatePresets(!0);dwv.gui.initWindowLevelHtml()}};
dwv.tool.WindowLevel.prototype.getHelp=function(){return{title:"Window/Level",brief:"Changes the Window and Level of the image.",mouse:{mouse_drag:"A single mouse drag changes the window in the horizontal direction and the level in the vertical one.",double_click:"A double click will center the window and level on the clicked intensity."},touch:{touch_drag:"A single touch drag changes the window in the horizontal direction and the level in the vertical one."}}};dwv=dwv||{};dwv.tool=dwv.tool||{};
dwv.tool.ZoomAndPan=function(b){function a(a,e,g,k,l){b.getImageLayer()&&(g=b.getImageLayer().getZoom(),e=g.x+a,g=g.y+a,b.getImageLayer().zoom(e,g,k,l),b.getImageLayer().draw());if(b.getDrawStage()){e=b.getDrawStage();g=e.scale();a={x:g.x+a,y:g.y+a};var h=e.offset();e.offset({x:k/g.x+h.x-k/a.x,y:l/g.y+h.y-l/a.y});e.scale(a);e.draw()}}var e=this;this.started=!1;this.mousedown=function(a){e.started=!0;e.x0=a._xs;e.y0=a._ys};this.twotouchdown=function(a){e.started=!0;e.x0=a._x;e.y0=a._y;var b=new dwv.math.Point2D(a._x,
a._y);a=new dwv.math.Point2D(a._x1,a._y1);e.line0=new dwv.math.Line(b,a);e.midPoint=e.line0.getMidpoint()};this.mousemove=function(a){if(e.started){var f=a._xs-e.x0,g=a._ys-e.y0;if(b.getImageLayer()){var k=b.getImageLayer(),l=k.getZoom();k.translate(f/l.x,g/l.y);k.draw()}if(b.getDrawStage()){var k=b.getDrawStage(),l=k.offset(),h=k.scale();l.x-=f/h.x;l.y-=g/h.y;k.offset(l);k.draw()}e.x0=a._xs;e.y0=a._ys}};this.twotouchmove=function(d){if(e.started){var f=new dwv.math.Point2D(d._x,d._y),g=new dwv.math.Point2D(d._x1,
d._y1),f=(new dwv.math.Line(f,g)).getLength()/e.line0.getLength();1===f?(d=d._y-e.y0,15>Math.abs(d)||(0<d?b.getView().incrementSliceNb():b.getView().decrementSliceNb())):(f=(f-1)/2,.05>=Math.abs(f)%.1&&a(f,e.midPoint.getX(),e.midPoint.getY(),d._xs,d._ys))}};this.mouseup=function(){e.started&&(e.started=!1)};this.mouseout=function(a){e.mouseup(a)};this.touchstart=function(a){var b=a.targetTouches;1===b.length?e.mousedown(a):2===b.length&&e.twotouchdown(a)};this.touchmove=function(a){var b=a.targetTouches;
1===b.length?e.mousemove(a):2===b.length&&e.twotouchmove(a)};this.touchend=function(a){e.mouseup(a)};this.DOMMouseScroll=function(b){a(-b.detail/30,b._x,b._y,b._xs,b._ys)};this.mousewheel=function(b){a(b.wheelDelta/1200,b._x,b._y,b._xs,b._ys)};this.keydown=function(a){b.onKeydown(a)};this.display=function(a){dwv.gui.displayZoomAndPanHtml(a)}};
dwv.tool.ZoomAndPan.prototype.getHelp=function(){return{title:"Zoom/Pan",brief:"The Zoom/Pan tool allows to zoom and pan the image.",mouse:{mouse_wheel:"The mouse wheel is used to zoom the image.",mouse_drag:"A single mouse drag drags the image in the desired direction."},touch:{twotouch_pinch:"A pinch in or out allows to zoom the image.",touch_drag:"A single touch drag drags the image in the desired direction."}}};dwv.tool.ZoomAndPan.prototype.init=function(){};dwv=dwv||{};dwv.utils=dwv.utils||{};
dwv.utils.capitaliseFirstLetter=function(b){var a=b;b&&(a=b.charAt(0).toUpperCase()+b.slice(1));return a};dwv.utils.cleanString=function(b){var a=b;b&&(a=b.trim(),a[a.length-1]===String.fromCharCode("u200B")&&(a=a.substring(0,a.length-1)));return a};dwv.utils.splitQueryString=function(b){var a={},e=null;b&&-1!==(e=b.indexOf("?"))&&(a.base=b.substr(0,e),b=b.substr(e+1),a.query=dwv.utils.splitKeyValueString(b));return a};
dwv.utils.splitKeyValueString=function(b){var a={};if(b){b=b.split("&");for(var e=0;e<b.length;++e){var d=b[e].split("=");a[d[0]]?(a[d[0]]instanceof Array||(a[d[0]]=[a[d[0]]]),a[d[0]].push(d[1])):a[d[0]]=d[1]}}return a};dwv.gui.getWindowSize=function(){return dwv.gui.base.getWindowSize()};dwv.gui.displayProgress=function(b){dwv.gui.base.displayProgress(b)};dwv.gui.refreshSelect=function(b){dwv.gui.base.refreshSelect(b)};dwv.gui.appendSliderHtml=function(){dwv.gui.base.appendSliderHtml()};
dwv.gui.initSliderHtml=function(){dwv.gui.base.initSliderHtml()};dwv.gui.appendTagsTable=function(b){dwv.gui.base.appendTagsTable(b)};dwv.gui.appendLoadboxHtml=function(){dwv.gui.base.appendLoadboxHtml()};dwv.gui.appendFileLoadHtml=function(){dwv.gui.base.appendFileLoadHtml()};dwv.gui.displayFileLoadHtml=function(b){dwv.gui.base.displayFileLoadHtml(b)};dwv.gui.appendUrlLoadHtml=function(){dwv.gui.base.appendUrlLoadHtml()};dwv.gui.displayUrlLoadHtml=function(b){dwv.gui.base.displayUrlLoadHtml(b)};
dwv.gui.appendToolboxHtml=function(){dwv.gui.base.appendToolboxHtml();var b=document.createElement("a");b.href="#popupOpen";b.setAttribute("class","ui-btn ui-btn-inline ui-btn-icon-notext ui-mini ui-icon-plus");b.setAttribute("data-rel","popup");b.setAttribute("data-position-to","window");var a=document.createElement("a");a.setAttribute("class","ui-btn ui-btn-inline ui-btn-icon-notext ui-mini ui-icon-back");a.onclick=dwv.gui.onUndo;var e=document.createElement("a");e.setAttribute("class","ui-btn ui-btn-inline ui-btn-icon-notext ui-mini ui-icon-forward");
e.onclick=dwv.gui.onRedo;var d=document.createElement("a");d.setAttribute("class","ui-btn ui-btn-inline ui-btn-icon-notext ui-mini ui-icon-info");d.onclick=dwv.gui.onToggleInfoLayer;var f=document.createElement("a");f.href="#tags_page";f.setAttribute("class","ui-btn ui-btn-inline ui-btn-icon-notext ui-mini ui-icon-grid");var g=document.getElementById("toolbar");g.appendChild(b);g.appendChild(a);g.appendChild(e);g.appendChild(d);g.appendChild(f);$("#toolbar").trigger("create")};
dwv.gui.displayToolboxHtml=function(b){dwv.gui.base.displayToolboxHtml(b)};dwv.gui.initToolboxHtml=function(){dwv.gui.base.initToolboxHtml()};dwv.gui.appendWindowLevelHtml=function(){dwv.gui.base.appendWindowLevelHtml()};dwv.gui.displayWindowLevelHtml=function(b){dwv.gui.base.displayWindowLevelHtml(b)};dwv.gui.initWindowLevelHtml=function(){dwv.gui.base.initWindowLevelHtml()};dwv.gui.appendDrawHtml=function(){dwv.gui.base.appendDrawHtml()};dwv.gui.displayDrawHtml=function(b){dwv.gui.base.displayDrawHtml(b)};
dwv.gui.initDrawHtml=function(){dwv.gui.base.initDrawHtml()};dwv.gui.appendLivewireHtml=function(){dwv.gui.base.appendLivewireHtml()};dwv.gui.displayLivewireHtml=function(b){dwv.gui.base.displayLivewireHtml(b)};dwv.gui.initLivewireHtml=function(){dwv.gui.base.initLivewireHtml()};dwv.gui.appendZoomAndPanHtml=function(){dwv.gui.base.appendZoomAndPanHtml()};dwv.gui.displayZoomAndPanHtml=function(b){dwv.gui.base.displayZoomAndPanHtml(b)};dwv.gui.appendScrollHtml=function(){dwv.gui.base.appendScrollHtml()};
dwv.gui.displayScrollHtml=function(b){dwv.gui.base.displayScrollHtml(b)};dwv.gui.appendFilterHtml=function(){dwv.gui.base.appendFilterHtml()};dwv.gui.displayFilterHtml=function(b){dwv.gui.base.displayFilterHtml(b)};dwv.gui.initFilterHtml=function(){dwv.gui.base.initFilterHtml()};dwv.gui.filter.appendThresholdHtml=function(){dwv.gui.filter.base.appendThresholdHtml()};dwv.gui.filter.displayThresholdHtml=function(b){dwv.gui.filter.base.displayThresholdHtml(b)};dwv.gui.filter.initThresholdHtml=function(){dwv.gui.filter.base.initThresholdHtml()};
dwv.gui.filter.appendSharpenHtml=function(){dwv.gui.filter.base.appendSharpenHtml()};dwv.gui.filter.displaySharpenHtml=function(b){dwv.gui.filter.base.displaySharpenHtml(b)};dwv.gui.filter.appendSobelHtml=function(){dwv.gui.filter.base.appendSobelHtml()};dwv.gui.filter.displaySobelHtml=function(b){dwv.gui.filter.base.displaySobelHtml(b)};dwv.gui.appendUndoHtml=function(){dwv.gui.base.appendUndoHtml()};dwv.gui.appendHelpHtml=function(b){dwv.gui.base.appendHelpHtml(b)};dwv.gui.appendVersionHtml=function(){dwv.gui.base.appendVersionHtml()};
dwv.browser.check();var app=new dwv.App;
$(document).ready(function(){dwv.io.loaders={};dwv.io.loaders.file=dwv.io.File;dwv.io.loaders.url=dwv.io.Url;dwv.gui.appendLoadboxHtml();dwv.gui.appendFileLoadHtml();dwv.gui.appendUrlLoadHtml();dwv.gui.displayFileLoadHtml(!0);dwv.tool.tools={};dwv.tool.tools["Window/Level"]=new dwv.tool.WindowLevel(app);dwv.tool.tools["Zoom/Pan"]=new dwv.tool.ZoomAndPan(app);dwv.tool.tools.scroll=new dwv.tool.Scroll(app);dwv.tool.tools.draw=new dwv.tool.Draw(app);dwv.tool.tools.filter=new dwv.tool.Filter(app);dwv.tool.filters=
{};dwv.tool.filters.threshold=new dwv.tool.filter.Threshold(app);dwv.tool.filters.sharpen=new dwv.tool.filter.Sharpen(app);dwv.tool.filters.sobel=new dwv.tool.filter.Sobel(app);dwv.tool.shapes={};dwv.tool.shapes.line=dwv.tool.LineCreator;dwv.tool.shapes.rectangle=dwv.tool.RectangleCreator;dwv.tool.shapes.roi=dwv.tool.RoiCreator;dwv.tool.shapes.ellipse=dwv.tool.EllipseCreator;dwv.gui.appendToolboxHtml();dwv.gui.appendWindowLevelHtml();dwv.gui.appendZoomAndPanHtml();dwv.gui.appendScrollHtml();dwv.gui.appendDrawHtml();
dwv.gui.appendFilterHtml();dwv.gui.filter.appendThresholdHtml();dwv.gui.filter.appendSharpenHtml();dwv.gui.filter.appendSobelHtml();dwv.gui.appendHelpHtml(!0);dwv.gui.appendVersionHtml();dwv.gui.appendUndoHtml();app.init();var b=dwv.gui.getWindowSize();$("#layerContainer").height(b.height);$("#main").width(b.width-162)});
